import{d as H,c as x,a as i,f as N,s as O,j as M}from"./CiPFrJr-.js";import{p as P,f as F,g as o,u as p,c as S,e as q,d as A,r as D,t as G}from"./CSbKtK4P.js";import{p as g,i as _,s as J,a as K}from"./87vUJtvC.js";import{n as a,h as L,d as Q}from"./D0X4VYcq.js";import{$ as R}from"./Ce4T6J7V.js";import{t as V}from"./B0fEDaa-.js";async function W(c,e,t,f,v){if(!a.$currentUser)return;const m=o(e);try{o(e)?a.$currentUser.unfollow(t.pubkey,o(f)):a.$currentUser.follow(t.pubkey,o(f)),c.currentTarget?.dispatchEvent(new CustomEvent("followsuccess",{detail:{pubkey:t.pubkey,isFollowing:!m},bubbles:!0}))}catch(d){console.error("Error toggling follow:",d),V.error(v()("profile.follow_error"))}}var X=M('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"></path></svg>'),Y=M('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>'),Z=N('<button data-testid="follow-button" type="button"><!> </button>');function ae(c,e){P(e,!0);const t=()=>K(R,"$t",f),[f,v]=J();g(e,"variant",3,"default");const m=g(e,"showIcon",3,!0),d=g(e,"class",3,""),b=p(()=>a.$sessions?.follows??new Set),l=p(()=>o(b).has(e.pubkey)),U=p(()=>a.$currentUser?.pubkey===e.pubkey);var k=x(),z=F(k);{var j=w=>{var r=Z();r.__click=[W,l,e,b,t];var y=q(r);{var B=n=>{var u=x(),E=F(u);{var I=s=>{var h=X();i(s,h)},T=s=>{var h=Y();i(s,h)};_(E,s=>{o(l)?s(I):s(T,!1)})}i(n,u)};_(y,n=>{m()&&n(B)})}var C=A(y);D(r),G((n,u)=>{L(r,"aria-label",n),Q(r,1,`text-sm font-medium transition-colors inline-flex items-center gap-1 ${o(l)?"text-muted-foreground hover:text-red-500":"text-primary hover:underline"} ${d()}`),O(C,` ${u??""}`)},[()=>o(l)?t()("profile.unfollow"):t()("profile.follow"),()=>o(l)?t()("profile.unfollow"):t()("profile.follow")]),i(w,r)};_(z,w=>{!o(U)&&a.$currentUser&&w(j)})}i(c,k),S(),v()}H(["click"]);export{ae as F};
