import{c as o,f as J,a as e,s as te,j as Se}from"./DNmf0A2m.js";import{p as Oe,u as qe,s as ve,a as be,f as t,d as M,g as r,b as g,c as Be,e as w,r as z,t as re}from"./DpkVnRja.js";import{i as j}from"./Btb_Ey2R.js";import{s as De}from"./CszMzaRi.js";import{c as n}from"./CSx53_lc.js";import{e as D,a as F}from"./Ci0hv7jC.js";import{p as G}from"./f_qAQkK6.js";import{n as I}from"./QTLWRGLp.js";import{U as S}from"./BYRURnlO.js";import{P as ae,a as Fe,U as Ge,b as Ie}from"./CNBK5u22.js";import{P as Je,c as u}from"./MZ4igXhu.js";var Ke=J("<!> <p> </p>",1),Qe=J('<!> <div class="flex-1 min-w-0 flex flex-col"><p> </p> <p> </p></div>',1),Ve=J("<p> </p>"),We=J('<!> <div class="flex-1 min-w-0"><p> </p> <!></div>',1),Xe=J("<p> </p>"),Ye=J('<div><!> <div class="flex-1 min-w-0"><!> <!></div></div>'),Ze=J("<!> <!>",1);function ct(Ue,a){Oe(a,!0);const oe=G(a,"variant",3,"avatar"),ne=G(a,"avatarSize",3,"w-10 h-10"),fe=G(a,"nameSize",3,"text-base font-semibold"),Ae=G(a,"handleSize",3,"text-sm text-muted-foreground"),Re=G(a,"bioSize",3,"text-sm text-muted-foreground"),ye=G(a,"showHoverCard",3,!0),se=G(a,"class",3,"");let pe=be(void 0),K=be(null);qe(()=>{I.fetchUser(a.pubkey).then(Y=>{ve(pe,Y,!0),Y?.fetchProfile().then(ge=>{ve(K,ge,!0)})})});let ce=be(!1),Q=null;function V(){ye()&&(Q&&clearTimeout(Q),Q=setTimeout(()=>{ve(ce,!0)},500))}function W(){Q&&clearTimeout(Q),Q=setTimeout(()=>{ve(ce,!1)},100)}function X(Y){a.onclick?a.onclick(Y):r(pe)?.npub&&(window.location.href=`/p/${r(pe).npub}`)}const de=g(()=>r(K)?.displayName||r(K)?.name||`${a.pubkey?.slice(0,8)}...`),Te=g(()=>r(K)?.name||a.pubkey?.slice(0,8));var Pe=o(),Ce=t(Pe);n(Ce,()=>Ie,(Y,ge)=>{ge(Y,{get open(){return r(ce)},set open(he){ve(ce,he,!0)},children:(he,et)=>{var $e=Ze(),we=t($e);{var Ne=h=>{var R=o(),le=t(R);{let ue=g(()=>u("flex-shrink-0",se()));n(le,()=>ae,(ie,k)=>{k(ie,{type:"button",onclick:X,onmouseenter:V,onmouseleave:W,get class(){return r(ue)},children:(T,E)=>{var C=o(),L=t(C);n(L,()=>S.Root,(v,m)=>{m(v,{get ndk(){return I},get pubkey(){return a.pubkey},children:(O,q)=>{var U=o(),i=t(U);{let _=g(()=>u(ne(),"cursor-pointer hover:opacity-80 transition-opacity"));n(i,()=>S.Avatar,(x,b)=>{b(x,{get class(){return r(_)}})})}e(O,U)},$$slots:{default:!0}})}),e(T,C)},$$slots:{default:!0}})})}e(h,R)},He=h=>{var R=o(),le=t(R);{var ue=k=>{var T=o(),E=t(T);{let C=g(()=>u("flex items-center gap-3 cursor-pointer",se()));n(E,()=>ae,(L,v)=>{v(L,{type:"button",onclick:X,onmouseenter:V,onmouseleave:W,get class(){return r(C)},children:(m,O)=>{var q=Ke(),U=t(q);n(U,()=>S.Root,(x,b)=>{b(x,{get ndk(){return I},get pubkey(){return a.pubkey},children:(y,f)=>{var c=o(),B=t(c);{let p=g(()=>u(ne(),"hover:opacity-80 transition-opacity"));n(B,()=>S.Avatar,(N,P)=>{P(N,{get class(){return r(p)}})})}e(y,c)},$$slots:{default:!0}})});var i=M(U,2),_=w(i,!0);z(i),re(x=>{F(i,1,x,"svelte-8apr3t"),te(_,r(de))},[()=>D(u(fe(),"text-foreground truncate hover:underline flex-1 min-w-0 text-left"))]),e(m,q)},$$slots:{default:!0}})})}e(k,T)},ie=k=>{var T=o(),E=t(T);{var C=v=>{var m=o(),O=t(m);{let q=g(()=>u("flex items-center gap-3 cursor-pointer text-left w-full",se()));n(O,()=>ae,(U,i)=>{i(U,{type:"button",onclick:X,onmouseenter:V,onmouseleave:W,get class(){return r(q)},children:(_,x)=>{var b=Qe(),y=t(b);n(y,()=>S.Root,(P,s)=>{s(P,{get ndk(){return I},get pubkey(){return a.pubkey},children:($,H)=>{var Z=o(),l=t(Z);{let d=g(()=>u(ne(),"hover:opacity-80 transition-opacity flex-shrink-0"));n(l,()=>S.Avatar,(A,ee)=>{ee(A,{get class(){return r(d)}})})}e($,Z)},$$slots:{default:!0}})});var f=M(y,2),c=w(f),B=w(c,!0);z(c);var p=M(c,2),N=w(p);z(p),z(f),re((P,s)=>{F(c,1,P,"svelte-8apr3t"),te(B,r(de)),F(p,1,s,"svelte-8apr3t"),te(N,`@${r(Te)??""}`)},[()=>D(u(fe(),"text-foreground truncate hover:underline")),()=>D(u(Ae(),"truncate"))]),e(_,b)},$$slots:{default:!0}})})}e(v,m)},L=v=>{var m=o(),O=t(m);{var q=i=>{var _=o(),x=t(_);{let b=g(()=>u("flex items-center gap-3 cursor-pointer text-left w-full",se()));n(x,()=>ae,(y,f)=>{f(y,{type:"button",onclick:X,onmouseenter:V,onmouseleave:W,get class(){return r(b)},children:(c,B)=>{var p=We(),N=t(p);n(N,()=>S.Root,(l,d)=>{d(l,{get ndk(){return I},get pubkey(){return a.pubkey},children:(A,ee)=>{var me=o(),ze=t(me);{let _e=g(()=>u(ne(),"hover:opacity-80 transition-opacity flex-shrink-0"));n(ze,()=>S.Avatar,(ke,xe)=>{xe(ke,{get class(){return r(_e)}})})}e(A,me)},$$slots:{default:!0}})});var P=M(N,2),s=w(P),$=w(s,!0);z(s);var H=M(s,2);{var Z=l=>{var d=Ve(),A=w(d,!0);z(d),re(ee=>{F(d,1,ee,"svelte-8apr3t"),te(A,r(K).about)},[()=>D(u(Re(),"truncate line-clamp-2"))]),e(l,d)};j(H,l=>{r(K)?.about&&l(Z)})}z(P),re(l=>{F(s,1,l,"svelte-8apr3t"),te($,r(de))},[()=>D(u(fe(),"text-foreground truncate hover:underline"))]),e(c,p)},$$slots:{default:!0}})})}e(i,_)},U=i=>{var _=o(),x=t(_);{var b=y=>{var f=Ye(),c=w(f);n(c,()=>ae,(s,$)=>{$(s,{type:"button",onclick:X,class:"flex-shrink-0",children:(H,Z)=>{var l=o(),d=t(l);n(d,()=>S.Root,(A,ee)=>{ee(A,{get ndk(){return I},get pubkey(){return a.pubkey},children:(me,ze)=>{var _e=o(),ke=t(_e);{let xe=g(()=>u(ne(),"cursor-pointer hover:opacity-80 transition-opacity"));n(ke,()=>S.Avatar,(Ee,Le)=>{Le(Ee,{get class(){return r(xe)}})})}e(me,_e)},$$slots:{default:!0}})}),e(H,l)},$$slots:{default:!0}})});var B=M(c,2),p=w(B);n(p,()=>ae,(s,$)=>{$(s,{type:"button",onclick:X,class:"text-left w-full min-w-0",children:(H,Z)=>{var l=Xe(),d=w(l,!0);z(l),re(A=>{F(l,1,A,"svelte-8apr3t"),te(d,r(de))},[()=>D(u(fe(),"text-foreground truncate hover:underline"))]),e(H,l)},$$slots:{default:!0}})});var N=M(p,2);{var P=s=>{var $=o(),H=t($);De(H,()=>a.meta),e(s,$)};j(N,s=>{a.meta&&s(P)})}z(B),z(f),re(s=>F(f,1,s,"svelte-8apr3t"),[()=>D(u("flex items-center gap-3",se()))]),Se("mouseenter",f,V),Se("mouseleave",f,W),e(y,f)};j(x,y=>{oe()==="avatar-name-meta"&&y(b)},!0)}e(i,_)};j(O,i=>{oe()==="avatar-name-bio"?i(q):i(U,!1)},!0)}e(v,m)};j(E,v=>{oe()==="avatar-name-handle"?v(C):v(L,!1)},!0)}e(k,T)};j(le,k=>{oe()==="avatar-name"?k(ue):k(ie,!1)},!0)}e(h,R)};j(we,h=>{oe()==="avatar"?h(Ne):h(He,!1)})}var Me=M(we,2);{var je=h=>{var R=o(),le=t(R);n(le,()=>Je,(ue,ie)=>{ie(ue,{children:(k,T)=>{var E=o(),C=t(E);n(C,()=>Fe,(L,v)=>{v(L,{class:"z-50",sideOffset:8,onmouseenter:V,onmouseleave:W,children:(m,O)=>{Ge(m,{get ndk(){return I},get pubkey(){return a.pubkey}})},$$slots:{default:!0}})}),e(k,E)},$$slots:{default:!0}})}),e(h,R)};j(Me,h=>{ye()&&h(je)})}e(he,$e)},$$slots:{default:!0}})}),e(Ue,Pe),Be()}export{ct as U};
