import{d as ke,f as P,s as g,i as ze,r as Ze,a as p,c as Ke,j as Xe,t as nt}from"../chunks/CiPFrJr-.js";import{p as ye,e as a,g as e,b as ee,y as ge,r,d as i,t as R,u as O,c as we,s as D,x as Ye,a as Ve,f as _e,z as it}from"../chunks/CSbKtK4P.js";import{i as E,a as Me,s as qe,c as st}from"../chunks/87vUJtvC.js";import{a as $e,m as We,e as He,d as de,h as ue,N as lt,A as Be,n as fe,k as dt,r as Te,g as et,s as Ue,P as tt,ab as ct}from"../chunks/D0X4VYcq.js";import{g as vt}from"../chunks/CTwadDAE.js";import{o as $}from"../chunks/Ckk1NcCI.js";import{$ as Je,a as ut}from"../chunks/Ce4T6J7V.js";import{b as rt}from"../chunks/I2MJeYPS.js";import{N as at,c as ot}from"../chunks/B_cmhmk_.js";import{N as gt}from"../chunks/Cybom7lU.js";import{a as ft}from"../chunks/CGbTV4zP.js";async function mt(l,t){const o=new Set;try{const n=await l.signer?.user();if(!n)throw new Error("No user logged in");const m=await l.fetchEvent({kinds:[3],authors:[n.pubkey]}),d=new Set;m&&m.tags.filter(s=>s[0]==="p").forEach(s=>d.add(s[1]));for(const s of t)try{const c=await l.fetchEvent(s);c&&$e.from(c).pubkeys?.forEach(u=>{d.has(u)||o.add(u)})}catch(c){console.error(`Error processing pack ${s}:`,c)}if(o.size>0){const s=new We(l);s.kind=3,s.content=m?.content||"",m?s.tags=[...m.tags]:s.tags=[];for(const c of o)s.tags.push(["p",c]);await s.publish()}return Array.from(o)}catch(n){throw console.error("Error following pack users:",n),n}}var bt=P('<img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community gathering" class="absolute inset-0 w-full h-full object-cover"/>'),pt=P('<div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-700"></div>'),xt=(l,t,o)=>t.onSelectCommunity(e(o).id),ht=P('<button><div class="relative h-32"><img class="absolute inset-0 w-full h-full object-cover"/> <div style="display: none;"></div> <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div> <div class="absolute bottom-3 left-3 right-3"><div class="flex items-center gap-2 text-foreground"><span class="text-2xl"> </span> <span class="font-semibold"> </span></div> <div class="text-xs text-foreground/80 mt-1"> </div></div></div></button>'),_t=P(`<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><!> <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div> <div class="absolute bottom-12 left-12 right-12 text-foreground"><h1 class="text-5xl font-bold mb-4">Your Voice Matters</h1> <p class="text-xl opacity-90">Join a community where every voice counts. Connect with leaders,
        share stories, and build the future together.</p></div></div> <div class="flex-1 flex items-center justify-center p-8 lg:p-12"><div class="max-w-xl w-full"><div class="mb-12 lg:hidden"><h1 class="text-4xl font-bold mb-3">Your Voice Matters</h1> <p class="text-muted-foreground">Choose your community to connect with local voices</p></div> <div class="lg:mb-8"><h2 class="text-2xl font-semibold mb-3">Choose Your Community</h2> <p class="text-muted-foreground text-sm">Select where you want to connect and contribute</p></div> <div class="grid grid-cols-2 gap-3 mb-8"></div> <button>Continue ‚Üí</button></div></div></div>`);function kt(l,t){ye(t,!0);const o=[{id:"venezuela",name:"Venezuela",flag:"üáªüá™",description:"Connect with the resilient Venezuelan community",image:"https://images.unsplash.com/photo-1520525003249-2b9cdda513bc?w=800&q=80",fallbackColor:"from-yellow-500 to-blue-600",leaders:["Mar√≠a Rodr√≠guez","Carlos Mendoza","Ana Lucia"]},{id:"cambodia",name:"Cambodia",flag:"üá∞üá≠",description:"Join voices from the Kingdom of Wonder",image:"https://images.unsplash.com/photo-1569154941061-e231b4725ef1?w=800&q=80",fallbackColor:"from-red-500 to-blue-700",leaders:["Sokha Chen","Dara Vong","Srey Mom"]},{id:"nicaragua",name:"Nicaragua",flag:"üá≥üáÆ",description:"Unite with Nicaraguan changemakers",image:"https://images.unsplash.com/photo-1503542724004-53f16c988e63?w=800&q=80",fallbackColor:"from-blue-500 to-sky-600",leaders:["Roberto Silva","Elena Martinez","Juan Carlos"]},{id:"zimbabwe",name:"Zimbabwe",flag:"üáøüáº",description:"Connect with Zimbabwe's innovators",image:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?w=800&q=80",fallbackColor:"from-green-600 to-yellow-500",leaders:["Tendai Moyo","Grace Ndlovu","David Chuma"]},{id:"afghanistan",name:"Afghanistan",flag:"üá¶üá´",description:"Support Afghan voices of hope",image:"https://images.unsplash.com/photo-1574482620811-1aa16ffe3c82?w=800&q=80",fallbackColor:"from-black to-red-700",leaders:["Ahmad Shah","Fatima Rashidi","Nasir Khan"]},{id:"iran",name:"Iran",flag:"üáÆüá∑",description:"Join the Persian community",image:"https://images.unsplash.com/photo-1608592077365-c6399182e63c?w=800&q=80",fallbackColor:"from-green-600 to-red-600",leaders:["Reza Hosseini","Maryam Azadi","Ali Karimi"]}];let n=ee(!1);var m=_t(),d=a(m),s=a(d);{var c=_=>{var v=bt();ze("error",v,()=>D(n,!0)),Ze(v),p(_,v)},C=_=>{var v=pt();p(_,v)};E(s,_=>{e(n)?_(C,!1):_(c)})}ge(4),r(d);var u=i(d,2),y=a(u),b=i(a(y),4);He(b,21,()=>o,_=>_.id,(_,v)=>{const T=O(()=>t.selectedCommunity===e(v).id);var A=ht();A.__click=[xt,t,v];var S=a(A),I=a(S),M=i(I,2),h=i(M,4),x=a(h),k=a(x),B=a(k,!0);r(k);var H=i(k,2),U=a(H,!0);r(H),r(x);var L=i(x,2),Y=a(L);r(L),r(h),r(S),r(A),R(()=>{de(A,1,`
              relative overflow-hidden rounded-lg border-2 transition-all
              ${e(T)?"border-black dark:border-white shadow-lg scale-[1.02]":"border hover:border dark:hover:border"}
            `),ue(I,"src",e(v).image),ue(I,"alt",e(v).name),de(M,1,`absolute inset-0 bg-gradient-to-br ${e(v).fallbackColor}`),g(B,e(v).flag),g(U,e(v).name),g(Y,`${e(v).leaders.length??""} community leaders`)}),ze("error",I,V=>{const q=V.currentTarget;q.style.display="none";const z=q.nextElementSibling;z&&(z.style.display="block")}),Ze(I),p(_,A)}),r(b);var j=i(b,2);j.__click=function(..._){t.onNext?.apply(this,_)},r(y),r(u),r(m),R(()=>{j.disabled=!t.selectedCommunity,de(j,1,`
          w-full py-4 px-6 rounded-lg font-medium transition-all
          ${t.selectedCommunity?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `)}),p(l,m),we()}ke(["click"]);const yt={venezuela:[Be[1]],nicaragua:[Be[2]]},wt=lt.FollowPack,Ge={venezuela:{name:"Venezuela",description:"Connect with the Venezuelan community"},cambodia:{name:"Cambodia",description:"Join voices from the Kingdom of Wonder"},nicaragua:{name:"Nicaragua",description:"Unite with Nicaraguan changemakers"},zimbabwe:{name:"Zimbabwe",description:"Connect with Zimbabwe's innovators"},afghanistan:{name:"Afghanistan",description:"Support Afghan voices of hope"},iran:{name:"Iran",description:"Join the Persian community"}};function Pt(l,t){t.selectedPacks.length!==0&&t.onNext()}var Ct=P('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div> <p class="mt-4 text-sm text-muted-foreground">Loading follow packs...</p></div>'),St=P('<div class="text-center py-8 text-muted-foreground">No follow packs available for this community yet</div>'),It=(l,t,o)=>t(e(o)),Nt=P('<img class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg object-cover flex-shrink-0"/>'),Dt=P('<div class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0"><span class="text-xl sm:text-2xl">üì¶</span></div>'),zt=P('<p class="text-xs sm:text-sm text-muted-foreground line-clamp-1 sm:truncate"> </p>'),At=P('<div class="absolute top-1/2 right-4 -translate-y-1/2 bg-primary text-foreground rounded-full p-1.5 z-10"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Ut=P('<button><!> <div class="flex-1 min-w-0"><h4 class="font-semibold text-sm sm:text-base text-foreground truncate"> </h4> <!> <div class="flex items-center gap-2 sm:gap-3 mt-1 sm:mt-2"><span class="text-[10px] sm:text-xs text-muted-foreground"> </span></div></div> <!></button>'),jt=P('<div class="space-y-2 mb-6 lg:mb-8 max-h-[50vh] lg:max-h-[60vh] overflow-y-auto p-2 -m-2"></div>'),Mt=P(`<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community leaders" class="absolute inset-0 w-full h-full object-cover"/> <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"></div> <div class="absolute bottom-0 left-0 right-0 p-12"><div class="mb-8"><p class="text-3xl text-foreground/90 italic leading-relaxed">"We're not just surviving‚Äîwe're building the future our community deserves. One voice at a time."</p></div> <div class="flex items-center gap-4"><div class="w-12 h-12 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-foreground font-semibold">MR</div> <div class="text-foreground"><div class="font-semibold">Mar√≠a Rodr√≠guez</div> <div class="text-sm opacity-75">Community Organizer ¬∑ Caracas</div></div></div></div></div> <div class="w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-12"><div class="max-w-xl w-full"><div class="mb-6 lg:mb-8"><h1 class="text-2xl lg:text-3xl font-bold mb-2 lg:mb-3">Build Your Network</h1> <p class="text-sm lg:text-base text-muted-foreground"> </p></div> <!> <button>Continue ‚Üí</button></div></div></div>`);function Ft(l,t){ye(t,!0);let o=ee(Ye([])),n=ee(!0);Ve(()=>{const S=t.selectedCommunity||"venezuela",I=yt[S];if(!I||I.length===0){console.warn(`No relay configured for community: ${S}`),D(n,!1);return}D(n,!0);const M=[],h={kinds:[wt]},x=fe.subscribe(h,{closeOnEose:!0,cacheUsage:dt.ONLY_RELAY},I);return x.on("event",k=>{const B=$e.from(k);M.push(B)}),x.on("eose",()=>{D(o,M,!0),D(n,!1)}),()=>{x.stop()}});const m=t.selectedCommunity||"venezuela",d=Ge[m]||Ge.venezuela;function s(S){const I=S.encode();t.selectedPacks.includes(I)?t.onSelectPacks(t.selectedPacks.filter(M=>M!==I)):t.onSelectPacks([...t.selectedPacks,I])}var c=Mt(),C=i(a(c),2),u=a(C),y=a(u),b=i(a(y),2),j=a(b);r(b),r(y);var _=i(y,2);{var v=S=>{var I=Ct();p(S,I)},T=S=>{var I=Ke(),M=_e(I);{var h=k=>{var B=St();p(k,B)},x=k=>{var B=jt();He(B,21,()=>e(o).slice(0,6),H=>H.id,(H,U)=>{const L=O(()=>t.selectedPacks.includes(e(U).encode()));var Y=Ut();Y.__click=[It,s,U];var V=a(Y);{var q=K=>{var J=Nt();R(()=>{ue(J,"src",e(U).image),ue(J,"alt",e(U).title)}),p(K,J)},z=K=>{var J=Dt();p(K,J)};E(V,K=>{e(U).image?K(q):K(z,!1)})}var G=i(V,2),Q=a(G),X=a(Q,!0);r(Q);var f=i(Q,2);{var W=K=>{var J=zt(),se=a(J,!0);r(J),R(()=>g(se,e(U).description)),p(K,J)};E(f,K=>{e(U).description&&K(W)})}var ie=i(f,2),ce=a(ie),le=a(ce);r(ce),r(ie),r(G);var pe=i(G,2);{var te=K=>{var J=At();p(K,J)};E(pe,K=>{e(L)&&K(te)})}r(Y),R(()=>{de(Y,1,`
                  relative w-full cursor-pointer rounded-xl transition-all text-left
                  flex gap-3 sm:gap-4 p-3 sm:p-4 bg-card hover:bg-accent border border dark:border
                  ${e(L)?"ring-2 ring-orange-500 bg-primary-50 dark:bg-primary-950/20":""}
                `),g(X,e(U).title),g(le,`${(e(U).pubkeys?.length||0)??""} members`)}),p(H,Y)}),r(B),p(k,B)};E(M,k=>{e(o).length===0?k(h):k(x,!1)},!0)}p(S,I)};E(_,S=>{e(n)?S(v):S(T,!1)})}var A=i(_,2);A.__click=[Pt,t],r(u),r(C),r(c),R(()=>{g(j,`Follow curated packs from the ${d.name??""} community`),A.disabled=t.selectedPacks.length===0||e(n),de(A,1,`
          w-full py-3 lg:py-4 px-6 rounded-lg font-medium transition-all text-sm lg:text-base
          ${t.selectedPacks.length>0&&!e(n)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `)}),p(l,c),we()}ke(["click"]);var Et=P(`<div class="min-h-screen flex items-center justify-center p-8 py-16"><div class="max-w-5xl w-full"><div class="text-center mb-12"><h2 class="text-3xl font-bold mb-3"> </h2> <p class="text-lg text-muted-foreground"> </p></div> <div class="grid md:grid-cols-3 gap-6 mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üõçÔ∏è</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">MR</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Mar√≠a's Bakery</div> <div class="text-xs text-muted-foreground">2km away</div></div></div> <div class="text-sm font-medium mb-1">Fresh Bread & Pastries</div> <div class="text-xs text-muted-foreground mb-2">Daily baked goods, accepting sats</div> <div class="text-sm font-semibold">2,500 sats / dozen</div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">ü§ù</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 border border"><div class="space-y-2"><div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-green-600 dark:text-green-400 font-semibold">BUY</span> <span class="font-medium">100 USD</span></div> <div class="text-right"><div class="font-semibold">485k sats</div></div></div> <div class="flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-red-600 dark:text-red-400 font-semibold">SELL</span> <span class="font-medium">50 USD</span></div> <div class="text-right"><div class="font-semibold">240k sats</div></div></div></div> <div class="flex items-center justify-center gap-1 text-xs text-muted-foreground mt-3"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span> </span></div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üì∞</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">CM</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Carlos Mendoza</div> <div class="text-xs text-muted-foreground">2 hours ago</div></div></div> <div class="text-sm font-medium mb-1">Alternative Supply Chain</div> <div class="text-xs text-muted-foreground mb-2">Direct farmer-to-community network reduces costs by 40%...</div> <div class="flex items-center gap-3 text-xs text-muted-foreground"><span>‚ö° 23.5k</span> <span>üí¨ 156</span> <span>üîÅ 89</span></div></div></div></div> <div class="text-center"><button class="bg-background dark:bg-white text-foreground dark:text-black px-8 py-3 rounded-lg font-medium hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div></div>`);function Rt(l,t){ye(t,!0);const o=()=>Me(Je,"$t",n),[n,m]=qe();var d=Et(),s=a(d),c=a(s),C=a(c),u=a(C,!0);r(C);var y=i(C,2),b=a(y,!0);r(y),r(c);var j=i(c,2),_=a(j),v=i(a(_),2),T=a(v,!0);r(v);var A=i(v,2),S=a(A,!0);r(A),ge(2),r(_);var I=i(_,2),M=i(a(I),2),h=a(M,!0);r(M);var x=i(M,2),k=a(x,!0);r(x);var B=i(x,2),H=i(a(B),2),U=i(a(H),2),L=a(U,!0);r(U),r(H),r(B),r(I);var Y=i(I,2),V=i(a(Y),2),q=a(V,!0);r(V);var z=i(V,2),G=a(z,!0);r(z),ge(2),r(Y),r(j);var Q=i(j,2),X=a(Q);X.__click=function(...W){t.onNext?.apply(this,W)};var f=a(X);r(X),r(Q),r(s),r(d),R((W,ie,ce,le,pe,te,K,J,se,Pe)=>{g(u,W),g(b,ie),g(T,ce),g(S,le),g(h,pe),g(k,te),g(L,K),g(q,J),g(G,se),g(f,`${Pe??""} ‚Üí`)},[()=>o()("onboarding.step3Features.title"),()=>o()("onboarding.step3Features.subtitle"),()=>o()("onboarding.step3Features.marketplace.title"),()=>o()("onboarding.step3Features.marketplace.description"),()=>o()("onboarding.step3Features.p2p.title"),()=>o()("onboarding.step3Features.p2p.description"),()=>o()("onboarding.step3Features.p2p.escrowProtected"),()=>o()("onboarding.step3Features.news.title"),()=>o()("onboarding.step3Features.news.description"),()=>o()("onboarding.step3Features.continue")]),p(l,d),we(),m()}ke(["click"]);function Lt(l,t){const n=l.target.files?.[0];n&&t(n)}var Ot=(l,t)=>l.key==="Enter"&&t(),Tt=P('<img alt="Profile" class="w-full h-full object-cover"/> <div class="absolute inset-0 bg-background/0 hover:bg-background/40 transition-all flex items-center justify-center opacity-0 hover:opacity-100"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Bt=P('<p class="text-xs mt-2 text-muted-foreground"> </p>'),Kt=P('<div class="w-full h-full bg-neutral-100 dark:bg-muted flex flex-col items-center justify-center"><div class="w-12 h-12 border-4 border border-t-neutral-900 dark:border-t-white rounded-full animate-spin"></div> <!></div>'),Yt=P('<span class="text-3xl font-bold group-hover:opacity-50 transition-opacity"> </span> <div class="opacity-0 group-hover:opacity-100 transition-opacity absolute inset-0 flex items-center justify-center bg-background/40"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Vt=Xe('<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-muted-foreground"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>'),qt=P('<div class="w-full h-full bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100 transition-colors flex flex-col items-center justify-center gap-2 group"><!></div>'),Wt=P('<p class="text-xs text-red-600 dark:text-red-400 mt-2 text-center"> </p>'),Ht=P('<div class="w-full"><input type="file" accept="image/*" class="hidden"/> <div role="button" tabindex="0"><!></div> <!></div>');function Jt(l,t){ye(t,!0);const o=new at(t.ndk),n=ot(o);let m,d=ee(Ye(t.currentImageUrl||null)),s=ee(!1);async function c(h){if(!h.type.startsWith("image/")){alert("Please select an image file");return}const x=new FileReader;x.onload=k=>{D(d,k.target?.result,!0)},x.readAsDataURL(h);try{await n.upload(h,{fallbackServer:"https://blossom.primal.net"}),n.result?.url&&t.onUploadComplete(n.result.url)}catch(k){console.error("Upload failed:",k),D(d,null)}}function C(h){h.preventDefault(),D(s,!0)}function u(){D(s,!1)}async function y(h){h.preventDefault(),D(s,!1);const x=h.dataTransfer?.files[0];x&&await c(x)}function b(){m?.click()}var j=Ht(),_=a(j);_.__change=[Lt,c],rt(_,h=>m=h,()=>m);var v=i(_,2);v.__click=b,v.__keydown=[Ot,b];var T=a(v);{var A=h=>{var x=Tt(),k=_e(x);ge(2),R(()=>ue(k,"src",e(d))),p(h,x)},S=h=>{var x=Ke(),k=_e(x);{var B=U=>{var L=Kt(),Y=i(a(L),2);{var V=q=>{var z=Bt(),G=a(z);r(z),R(()=>g(G,`${n.progress.percentage??""}%`)),p(q,z)};E(Y,q=>{n.progress&&q(V)})}r(L),p(U,L)},H=U=>{var L=qt(),Y=a(L);{var V=z=>{var G=Yt(),Q=_e(G),X=a(Q,!0);r(Q),ge(2),R(()=>g(X,t.fallbackInitials)),p(z,G)},q=z=>{var G=Vt();p(z,G)};E(Y,z=>{t.fallbackInitials?z(V):z(q,!1)})}r(L),p(U,L)};E(k,U=>{n.status==="uploading"?U(B):U(H,!1)},!0)}p(h,x)};E(T,h=>{e(d)&&n.status!=="uploading"?h(A):h(S,!1)})}r(v);var I=i(v,2);{var M=h=>{var x=Wt(),k=a(x,!0);r(x),R(()=>g(k,n.error?.message||"Upload failed")),p(h,x)};E(I,h=>{n.status==="error"&&h(M)})}r(j),R(()=>de(v,1,`
      relative w-32 h-32 rounded-full overflow-hidden cursor-pointer
      border-4 border-background
      transition-all duration-200
      ${e(s)?"scale-105 border-foreground":""}
      ${n.status==="uploading"?"pointer-events-none":""}
    `)),ze("dragover",v,C),ze("dragleave",v,u),ze("drop",v,y),p(l,j),we()}ke(["change","click","keydown"]);function Zt(l){try{return new URL(l).hostname}catch{return""}}async function Gt(l,t){if(!l||!t)return{available:!1,error:"Username and domain are required"};if(!/^[a-z0-9_-]+$/i.test(l))return{available:!1,error:"Username can only contain letters, numbers, underscore, and hyphen"};try{const n=`${t.includes("localhost")||t.includes("test")?"http":"https"}://${t}/.well-known/nostr.json?name=${encodeURIComponent(l)}`,m=await fetch(n);if(m.status===404)return{available:!0};if(m.ok){const d=await m.json();return d.names&&d.names[l]?{available:!1,error:"Username is already taken"}:{available:!0}}return{available:!1,error:"Unable to check availability. Please try again."}}catch(o){return console.error("Error checking NIP-05 availability:",o),{available:!0}}}function Qt(l,t){return`${l}@${t}`}async function Xt(l,t,o,n){const d=l.target.files?.[0];if(d){if(!e(t)){D(o,"Upload not available. Please ensure you are logged in.");return}if(!d.type.startsWith("image/")){D(o,"Please select an image file");return}if(d.size>5*1024*1024){D(o,"Image size must be less than 5MB");return}D(o,null);try{await e(t).upload(d,{fallbackServer:"https://blossom.primal.net"}),e(t).result?.url&&n.onUpdateProfile({...n.profileData,banner:e(t).result.url})}catch(s){console.error("Upload failed:",s),D(o,"Failed to upload banner. Please try again.")}}}async function $t(l,t,o,n,m){if(e(t)&&e(o)&&e(n)){const d=Qt(e(o),e(n));m.onUpdateProfile({...m.profileData,nip05:d})}try{const d=new Set;m.inviteRelay&&(d.add(m.inviteRelay),console.log("Including agora relay from invite:",m.inviteRelay)),d.add("wss://purplepag.es"),d.add("wss://relay.primal.net"),console.log("Building kind:10002 relay list with relays:",Array.from(d));const s=new We(fe);s.kind=10002,s.tags=Array.from(d).map(c=>["r",c]),console.log("Publishing kind:10002 relay list..."),await s.publish(),console.log("Published kind:10002 relay list")}catch(d){console.error("Error publishing relay list:",d)}m.onNext()}var er=P('<div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),tr=Xe('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>'),rr=P('<div class="px-2 py-1 bg-red-500/10 border-t border-red-500/20"><p class="text-xs text-red-600 dark:text-red-400"> </p></div>'),ar=(l,t)=>t("name",l.currentTarget.value),or=(l,t)=>t("location",l.currentTarget.value),nr=(l,t)=>t("bio",l.currentTarget.value),ir=(l,t)=>t(l.currentTarget.value),sr=P("<div> </div>"),lr=P('<div class="space-y-1"><div class="text-xs text-muted-foreground font-medium"> </div> <div class="flex items-center gap-1"><input type="text" class="text-sm text-foreground bg-transparent border-b-2 border hover:border focus:border-primary dark:focus:border-primary outline-none transition-colors flex-1 min-w-0"/> <span class="text-sm text-muted-foreground"> </span></div> <!></div>'),dr=P('<div class="min-h-screen flex flex-col items-center justify-center p-8"><div class="text-center mb-8 max-w-2xl"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-lg text-muted-foreground"> </p></div> <div class="relative flex items-center justify-center gap-6 mb-12"><div class="w-80 bg-card border border rounded-xl overflow-hidden transform -rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OQwX.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OQwW.jpg" alt="Leopoldo L√≥pez" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Leopoldo L√≥pez</h3> <p class="text-sm text-muted-foreground mb-2">‚úì leo@primal.net</p> <p class="text-sm text-muted-foreground">Former Mayor of Caracas (2000-08). Political prisoner 2014-21. Co-founder of World Liberty Congress.</p></div></div></div> <div class="w-96 bg-card border-2 border-foreground rounded-xl overflow-hidden shadow-2xl transform scale-105 z-10"><input type="file" accept="image/*" class="hidden"/> <button type="button" class="h-36 relative w-full group bg-gradient-to-br from-primary-500 to-primary-600"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button> <!> <div class="relative -mt-14 px-6 pb-6"><!> <div class="space-y-3"><div><input type="text" class="text-2xl font-bold bg-transparent border-b-2 border-transparent hover:border !ring-0 outline-none transition-colors w-full text-foreground"/></div> <div><input type="text" class="text-sm text-muted-foreground bg-transparent border-b border-transparent hover:border !ring-0 focus:outline-none transition-colors w-full"/></div> <div><textarea class="text-sm text-muted-foreground bg-transparent border border-transparent hover:border !ring-0 outline-none transition-colors w-full resize-none rounded p-2"></textarea></div> <!></div></div></div> <div class="w-80 bg-card border border rounded-xl overflow-hidden transform rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OTue.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OTkq.jpg" alt="Enderson Sequera" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Enderson Sequera</h3> <p class="text-sm text-muted-foreground mb-2">üáªüá™ Political Scientist</p> <p class="text-sm text-muted-foreground">Political advisor & freedom fighter. Bitcoin is freedom - in the fight against dictatorship it saves lives.</p></div></div></div></div> <button> </button></div>');function cr(l,t){ye(t,!0);const o=()=>Me(Je,"$t",n),[n,m]=qe(),d=O(()=>t.inviteRelay&&tt(t.inviteRelay)),s=O(()=>t.inviteRelay?Zt(t.inviteRelay):"");let c=ee(""),C=ee(!1),u=ee(null),y=ee(!1),b=null;function j(w){if(D(c,w,!0),!w||!e(s)){D(u,null),D(y,!1);return}b&&clearTimeout(b),D(C,!0),D(u,{type:"info",text:o()("onboarding.step4Profile.availability.checking")},!0),b=setTimeout(async()=>{const F=await Gt(w,e(s));F.available?(D(u,{type:"success",text:o()("onboarding.step4Profile.availability.available")},!0),D(y,!0)):(D(u,{type:"error",text:F.error||o()("onboarding.step4Profile.availability.notAvailable")},!0),D(y,!1)),D(C,!1)},500)}const _=O(()=>fe.$currentUser),v=O(()=>e(_)?new at(fe):null),T=O(()=>e(v)?ot(e(v)):null);let A,S=ee(null);function I(w){return w?w.split(" ").map(F=>F[0]).join("").toUpperCase().slice(0,2):"?"}function M(w,F){t.onUpdateProfile({...t.profileData,[w]:F})}function h(w){t.onUpdateProfile({...t.profileData,picture:w})}var x=dr(),k=a(x),B=a(k),H=a(B,!0);r(B);var U=i(B,2),L=a(U,!0);r(U),r(k);var Y=i(k,2),V=i(a(Y),2),q=a(V);q.__change=[Xt,T,S,t],rt(q,w=>A=w,()=>A);var z=i(q,2);z.__click=()=>A?.click();var G=a(z),Q=a(G);{var X=w=>{var F=er(),re=i(_e(F),2),ae=a(re);r(re),R(()=>g(ae,`${e(T).progress?.percentage??""}%`)),p(w,F)},f=w=>{var F=tr();p(w,F)};E(Q,w=>{e(T)?.status==="uploading"?w(X):w(f,!1)})}r(G),r(z);var W=i(z,2);{var ie=w=>{var F=rr(),re=a(F),ae=a(re,!0);r(re),r(F),R(()=>g(ae,e(S))),p(w,F)};E(W,w=>{e(S)&&w(ie)})}var ce=i(W,2),le=a(ce);{let w=O(()=>I(t.profileData.name));Jt(le,{get ndk(){return fe},onUploadComplete:h,get currentImageUrl(){return t.profileData.picture},get fallbackInitials(){return e(w)}})}var pe=i(le,2),te=a(pe),K=a(te);Te(K),K.__input=[ar,M],r(te);var J=i(te,2),se=a(J);Te(se),se.__input=[or,M],r(J);var Pe=i(J,2),xe=a(Pe);it(xe),xe.__input=[nr,M],ue(xe,"rows",3),r(Pe);var Fe=i(Pe,2);{var Ee=w=>{var F=lr(),re=a(F),ae=a(re,!0);r(re);var Se=i(re,2),N=a(Se);Te(N),N.__input=[ir,j];var Z=i(N,2),oe=a(Z);r(Z),r(Se);var ne=i(Se,2);{var me=be=>{var ve=sr(),Ie=a(ve,!0);r(ve),R(()=>{de(ve,1,`text-xs ${e(u).type==="success"?"text-green-600 dark:text-green-400":e(u).type==="error"?"text-red-600 dark:text-red-400":"text-muted-foreground"}`),g(Ie,e(u).text)}),p(be,ve)};E(ne,be=>{e(u)&&be(me)})}r(F),R((be,ve)=>{g(ae,be),Ue(N,e(c)),ue(N,"placeholder",ve),g(oe,`@${e(s)??""}`)},[()=>o()("onboarding.step4Profile.usernameLabel"),()=>o()("onboarding.step4Profile.usernamePlaceholder")]),p(w,F)};E(Fe,w=>{e(d)&&w(Ee)})}r(pe),r(ce),r(V),ge(2),r(Y);var Ce=i(Y,2);Ce.__click=[$t,y,c,s,t];var Ae=a(Ce);r(Ce),r(x),R((w,F,re,ae,Se,N)=>{g(H,w),g(L,F),z.disabled=e(T)?.status==="uploading",et(z,t.profileData.banner?`background-image: url(${t.profileData.banner}); background-size: cover; background-position: center;`:""),Ue(K,t.profileData.name),ue(K,"placeholder",re),Ue(se,t.profileData.location),ue(se,"placeholder",ae),Ue(xe,t.profileData.bio),ue(xe,"placeholder",Se),Ce.disabled=!t.profileData.name,de(Ce,1,`
      px-8 py-3 rounded-lg font-medium transition-all
      ${t.profileData.name?"bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100":"bg-neutral-100 dark:bg-muted text-muted-foreground cursor-not-allowed"}
    `),g(Ae,`${N??""} ‚Üí`)},[()=>o()("onboarding.step4Profile.title"),()=>o()("onboarding.step4Profile.subtitle"),()=>o()("onboarding.step4Profile.namePlaceholder"),()=>o()("onboarding.step4Profile.locationPlaceholder"),()=>o()("onboarding.step4Profile.bioPlaceholder"),()=>o()("onboarding.step4Profile.continue")]),p(l,x),we(),m()}ke(["change","click","input"]);async function vr(l,t){try{let o;t&&tt(t)?o=[t]:o=[...Be];const n=Math.floor(Date.now()/1e3)-720*60,m={kinds:[1],"#t":["introduction"],since:n},d=await l.fetchEvents(m,{relayUrls:o});if(d.size===0)return[];const s=Array.from(d).map(b=>b.id),c={"#e":s},C=await l.fetchEvents(c,{relayUrls:o}),u=new Map;for(const b of C){const j=b.tags.filter(_=>_[0]==="e");for(const _ of j){const v=_[1];s.includes(v)&&u.set(v,(u.get(v)||0)+1)}}return Array.from(d).map(b=>({event:b,engagementCount:u.get(b.id)||0})).sort((b,j)=>j.engagementCount-b.engagementCount).slice(0,10)}catch(o){return console.error("Error fetching introduction posts:",o),[]}}const je={en:"introduction",es:"bienvenidas",fa:"ŸÖÿπÿ±ŸÅ€å",km:"·ûÄ·û∂·ûö·ûé·üÇ·ûì·û∂·üÜ",sn:"kuzivisa"};function ur(l){if(!l)return je.en;const t=l.split("-")[0];return je[t]||je.en}function gr(l){const t=ur(l);return t===je.en?["introduction"]:["introduction",t]}async function Qe(l,t,o,n,m,d,s){if(e(t)){D(o,!0);try{const c=gr(n());let C=e(m).trim();for(const y of c){const b=`#${y}`;C.includes(b)||(C=`${C} ${b}`)}const u=new We(fe);u.kind=1,u.content=C,u.tags=c.map(y=>["t",y]),e(d)&&s.inviterPubkey&&u.tags.push(["p",s.inviterPubkey]),await u.publish(),s.onNext()}catch(c){console.error("Error publishing introduction:",c),D(o,!1)}}}var fr=P('<svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg> <span class="text-muted-foreground"> </span>',1),mr=P('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg> <span class="text-muted-foreground"> </span>',1),br=(l,t)=>D(t,!e(t)),pr=P('<div class="mt-4 p-3 bg-primary-50 dark:bg-primary-900/10 border border-primary-200 dark:border-primary-800 rounded-lg"><div class="flex items-center justify-between"><div class="flex items-center gap-2 text-sm"><!></div> <button class="text-xs px-2 py-1 rounded hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-colors text-primary dark:text-primary font-medium"> </button></div></div>'),xr=P('<div class="text-center py-8 text-muted-foreground"><p> </p></div>'),hr=P('<div class="min-h-screen flex flex-col"><div class="flex-1 px-4 lg:px-8 py-6 max-w-[1400px] mx-auto w-full pb-32 lg:pb-6"><div class="text-center mb-6"><h1 class="text-2xl lg:text-3xl font-bold mb-2"> </h1> <p class="text-muted-foreground"> </p></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:h-[calc(100vh-200px)]"><div class="flex flex-col order-1 lg:order-2"><div class="lg:p-6"><label class="block font-semibold mb-3"> </label> <div class="p-4 bg-card border border rounded-lg"><!></div> <div class="flex items-center justify-between mt-3"><div class="text-xs text-muted-foreground"><!></div> <div class="text-xs"><span> </span></div></div> <!> <div class="hidden lg:flex gap-3 mt-6"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div> <div class="flex flex-col order-2 lg:order-1"><h3 class="font-semibold text-sm text-muted-foreground uppercase tracking-wide mb-4"> </h3> <div class="space-y-3 overflow-y-auto flex-1 pr-2 max-h-[400px] lg:max-h-none"><!></div></div></div></div> <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-card border-t border p-4 z-50"><div class="flex gap-3 max-w-[1400px] mx-auto"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div>');function _r(l,t){ye(t,!0);const o=()=>Me(ut,"$locale",m),n=()=>Me(Je,"$t",m),[m,d]=qe();let s=ee(""),c=ee(!1),C=ee(Ye([])),u=ee(!!t.inviterPubkey);const y=O(()=>e(s).length>10),b=O(()=>e(s).length),j=fe.$fetchProfile(()=>t.inviterPubkey),_=O(()=>j?.displayName||j?.name||"your inviter");Ve(()=>{vr(fe,t.inviteRelay).then(N=>{D(C,N,!0)})});var v=hr(),T=a(v),A=a(T),S=a(A),I=a(S,!0);r(S);var M=i(S,2),h=a(M,!0);r(M),r(A);var x=i(A,2),k=a(x),B=a(k),H=a(B),U=a(H,!0);r(H);var L=i(H,2),Y=a(L);{let N=O(()=>n()("onboarding.step5Introduction.placeholder"));ft(Y,{get placeholder(){return e(N)},get disabled(){return e(c)},get value(){return e(s)},set value(Z){D(s,Z,!0)}})}r(L);var V=i(L,2),q=a(V),z=a(q);{var G=N=>{var Z=nt();R(oe=>g(Z,oe),[()=>n()("onboarding.step5Introduction.tipLocation",{values:{location:t.profileData.location}})]),p(N,Z)};E(z,N=>{t.profileData.location&&N(G)})}r(q);var Q=i(q,2),X=a(Q),f=a(X);r(X),r(Q),r(V);var W=i(V,2);{var ie=N=>{var Z=pr(),oe=a(Z),ne=a(oe),me=a(ne);{var be=he=>{var Ne=fr(),De=i(_e(Ne),2),Le=a(De,!0);r(De),R(Oe=>g(Le,Oe),[()=>n()("onboarding.step5Introduction.inviterNotify",{values:{name:e(_)}})]),p(he,Ne)},ve=he=>{var Ne=mr(),De=i(_e(Ne),2),Le=a(De,!0);r(De),R(Oe=>g(Le,Oe),[()=>n()("onboarding.step5Introduction.inviterNoNotify",{values:{name:e(_)}})]),p(he,Ne)};E(me,he=>{e(u)?he(be):he(ve,!1)})}r(ne);var Ie=i(ne,2);Ie.__click=[br,u];var Re=a(Ie,!0);r(Ie),r(oe),r(Z),R(he=>g(Re,he),[()=>e(u)?n()("onboarding.step5Introduction.inviterRemove"):n()("onboarding.step5Introduction.inviterAddBack")]),p(N,Z)};E(W,N=>{t.inviterPubkey&&N(ie)})}var ce=i(W,2),le=a(ce);le.__click=function(...N){t.onSkip?.apply(this,N)};var pe=a(le,!0);r(le);var te=i(le,2);te.__click=[Qe,y,c,o,s,u,t];var K=a(te,!0);r(te),r(ce),r(B),r(k);var J=i(k,2),se=a(J),Pe=a(se,!0);r(se);var xe=i(se,2),Fe=a(xe);{var Ee=N=>{var Z=Ke(),oe=_e(Z);He(oe,17,()=>e(C),ne=>ne.event.id,(ne,me)=>{gt(ne,{get event(){return e(me).event}})}),p(N,Z)},Ce=N=>{var Z=xr(),oe=a(Z),ne=a(oe,!0);r(oe),r(Z),R(me=>g(ne,me),[()=>n()("onboarding.step5Introduction.loadingIntroductions")]),p(N,Z)};E(Fe,N=>{e(C).length>0?N(Ee):N(Ce,!1)})}r(xe),r(J),r(x),r(T);var Ae=i(T,2),w=a(Ae),F=a(w);F.__click=function(...N){t.onSkip?.apply(this,N)};var re=a(F,!0);r(F);var ae=i(F,2);ae.__click=[Qe,y,c,o,s,u,t];var Se=a(ae,!0);r(ae),r(w),r(Ae),r(v),R((N,Z,oe,ne,me,be,ve,Ie,Re)=>{g(I,N),g(h,Z),g(U,oe),de(X,1,st(e(b)>500?"text-red-500":"text-muted-foreground")),g(f,`${e(b)??""} ${ne??""}`),g(pe,me),te.disabled=!e(y)||e(c),de(te,1,`
                flex-1 py-3 px-6 rounded-lg font-medium transition-all
                ${e(y)&&!e(c)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
              `),g(K,be),g(Pe,ve),g(re,Ie),ae.disabled=!e(y)||e(c),de(ae,1,`
          flex-1 py-3 px-6 rounded-lg font-medium transition-all
          ${e(y)&&!e(c)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),g(Se,Re)},[()=>n()("onboarding.step5Introduction.title"),()=>n()("onboarding.step5Introduction.subtitle"),()=>n()("onboarding.step5Introduction.writeLabel"),()=>n()("onboarding.step5Introduction.characters"),()=>n()("onboarding.step5Introduction.skipForNow"),()=>e(c)?n()("onboarding.step5Introduction.publishing"):n()("onboarding.step5Introduction.postIntroduction"),()=>n()("onboarding.step5Introduction.recentIntroductions"),()=>n()("onboarding.step5Introduction.skipForNow"),()=>e(c)?n()("onboarding.step5Introduction.publishing"):n()("onboarding.step5Introduction.postIntroduction")]),p(l,v),we(),d()}ke(["click"]);var kr=P(`<div class="min-h-screen flex items-center justify-center p-8"><div class="max-w-2xl w-full text-center"><div class="text-7xl mb-6">üéâ</div> <h1 class="text-4xl font-bold mb-4"> </h1> <p class="text-xl text-muted-foreground mb-12">Your voice matters. Your community is here.</p> <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground">People Following</div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground">Follow Packs</div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1">1</div> <div class="text-sm text-muted-foreground">Post Published</div></div></div> <div class="bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-900 dark:to-neutral-800 rounded-xl p-8 mb-8 text-left max-w-lg mx-auto"><h3 class="font-semibold mb-4">What's Next?</h3> <ul class="space-y-3 text-sm"><li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>You can start buying and selling in the marketplace</span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>Join P2P trades with verified community members</span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>Share your stories and earn sats for valuable content</span></li></ul></div> <button class="bg-background dark:bg-white text-foreground dark:text-black px-12 py-4 rounded-lg font-medium text-lg hover:bg-muted dark:hover:bg-neutral-200 transition-colors">Enter Agora ‚Üí</button></div></div>`);function yr(l,t){ye(t,!0);const o=O(()=>t.selectedPacks.length*25);var n=kr(),m=a(n),d=i(a(m),2),s=a(d);r(d);var c=i(d,4),C=a(c),u=a(C),y=a(u,!0);r(u),ge(2),r(C);var b=i(C,2),j=a(b),_=a(j,!0);r(j),ge(2),r(b),ge(2),r(c);var v=i(c,2),T=i(a(v),2),A=a(T),S=i(a(A),2),I=a(S);r(S),r(A),ge(6),r(T),r(v);var M=i(v,2);M.__click=function(...h){t.onComplete?.apply(this,h)},r(m),r(n),R(()=>{g(s,`Welcome to Agora, ${(t.profileData.name||"Friend")??""}!`),g(y,e(o)),g(_,t.selectedPacks.length),g(I,`Your feed is ready with content from ${e(o)??""} community voices`)}),p(l,n),we()}ke(["click"]);function wr(l,t,o){e(t)>$.minStep&&o(e(t)-1)}var Pr=P('<button class="fixed top-6 left-6 z-50 w-9 h-9 bg-card border border rounded-full flex items-center justify-center hover:bg-accent transition-colors"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button>'),Cr=P('<div class="min-h-screen bg-card"><div class="fixed top-0 left-0 right-0 z-40 bg-card"><div class="h-1 bg-neutral-200 dark:bg-muted"><div class="h-full bg-background dark:bg-white transition-all duration-300 ease-out"></div></div></div> <!> <div class="relative pt-8"><!> <!> <!> <!> <!> <!></div></div>');function Rr(l,t){ye(t,!0);let o=ee(null);const n=O(()=>$.currentStep),m=O(()=>$.totalSteps),d=O(()=>e(n)/e(m)*100),s=O(()=>$.invite),c=O(()=>$.hasCompletedInviteSetup),C=O(()=>$.selectedCommunity),u=O(()=>$.selectedPacks),y=O(()=>$.profileData);Ve(()=>{e(o)||(async()=>{try{D(o,ct.generate(),!0),console.log("[Onboarding] Attempting login with signer..."),await fe.$sessions?.login(e(o)),console.log("[Onboarding] ‚úì Logged in with new keypair, pubkey:",e(o).pubkey)}catch(f){console.error("[Onboarding] ‚úó Error logging in with new keypair:",f)}})()});function b(f){$.setStep(f),typeof window<"u"&&window.scrollTo(0,0)}async function j(){if(e(u).length>0)try{await mt(fe,e(u)),console.log(`Published kind:3 with follows from ${e(u).length} packs`)}catch(f){console.error("Error publishing contact list:",f)}b(3)}async function _(){if(console.log("[Onboarding] handleStep4Next called"),!e(o)){console.error("[Onboarding] ‚úó No signer available");return}try{e(s)&&!e(c)?(console.log("[Onboarding] Invite flow: calling completeInviteSetup"),await $.completeInviteSetup(e(o)),console.log("[Onboarding] ‚úì Invite setup complete")):(console.log("[Onboarding] Regular flow: calling publishProfileAndSetup"),await $.publishProfileAndSetup(e(o)),console.log("[Onboarding] ‚úì Profile published and setup complete"))}catch(f){console.error("[Onboarding] ‚úó Error during onboarding:",f)}b(5)}async function v(){$.clear(),vt("/")}var T=Cr(),A=a(T),S=a(A),I=a(S);r(S),r(A);var M=i(A,2);{var h=f=>{var W=Pr();W.__click=[wr,n,b],p(f,W)};E(M,f=>{e(n)>(e(s)?3:1)&&f(h)})}var x=i(M,2),k=a(x);{var B=f=>{kt(f,{get selectedCommunity(){return e(C)},onSelectCommunity:W=>$.setSelectedCommunity(W),onNext:()=>b(2)})};E(k,f=>{e(n)===1&&!e(s)&&f(B)})}var H=i(k,2);{var U=f=>{Ft(f,{get selectedCommunity(){return e(C)},get selectedPacks(){return e(u)},onSelectPacks:W=>$.setSelectedPacks(W),onNext:j})};E(H,f=>{e(n)===2&&!e(s)&&f(U)})}var L=i(H,2);{var Y=f=>{Rt(f,{onNext:()=>b(4)})};E(L,f=>{e(n)===3&&f(Y)})}var V=i(L,2);{var q=f=>{{let W=O(()=>e(s)?.inviteRelay);cr(f,{get profileData(){return e(y)},onUpdateProfile:ie=>$.setProfileData(ie),onNext:_,get inviteRelay(){return e(W)}})}};E(V,f=>{e(n)===4&&f(q)})}var z=i(V,2);{var G=f=>{{let W=O(()=>e(s)?.inviter),ie=O(()=>e(s)?.inviteRelay);_r(f,{get profileData(){return e(y)},get inviterPubkey(){return e(W)},get inviteRelay(){return e(ie)},onNext:()=>b(6),onSkip:()=>b(6)})}};E(z,f=>{e(n)===5&&f(G)})}var Q=i(z,2);{var X=f=>{yr(f,{get selectedPacks(){return e(u)},get profileData(){return e(y)},onComplete:v})};E(Q,f=>{e(n)===6&&f(X)})}r(x),r(T),R(()=>et(I,`width: ${e(d)}%`)),p(l,T),we()}ke(["click"]);export{Rr as component};
