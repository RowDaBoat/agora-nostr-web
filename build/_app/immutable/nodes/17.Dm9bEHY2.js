import{d as Ee,f as p,a as u,i as Ie,s as A,c as De}from"../chunks/DNmf0A2m.js";import{p as He,u as G,g as e,a as S,s as P,d as l,e as o,c as Se,b as f,r,t as M,f as ie}from"../chunks/DpkVnRja.js";import{i as C}from"../chunks/Btb_Ey2R.js";import{e as ne}from"../chunks/DD8s4tVe.js";import{c as de}from"../chunks/CSx53_lc.js";import{r as Ne,a as B,b as Oe,c as ce}from"../chunks/Ci0hv7jC.js";import{b as Te}from"../chunks/Cl1e4hnh.js";import{n as F}from"../chunks/QTLWRGLp.js";import{g as ue}from"../chunks/BFZgCa8b.js";import{h as ve}from"../chunks/Jrqc4XQc.js";import{c as J}from"../chunks/DJ8nsMRq.js";import{U as me}from"../chunks/BYRURnlO.js";import{C as Qe}from"../chunks/B1ISCy5e.js";import{c as Re,L as qe}from"../chunks/CLRodnOG.js";import{g as Ge}from"../chunks/CsenwR2S.js";import{g as Je}from"../chunks/C5Sp5Tgr.js";import{P as Ke}from"../chunks/Drx0G2VM.js";const We=k=>{{let _=f(()=>F.$currentUser?Ye:void 0);Ke(k,{title:"Follow Packs",subtitle:"Discover curated lists of accounts to follow",get icon(){return Xe},get actions(){return e(_)}})}},Xe=k=>{var _=Ze();u(k,_)},Ye=k=>{var _=et();_.__click=()=>J.show=!0,u(k,_)};var Ze=Ie('<svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>'),et=p('<button class="px-4 py-2.5 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-medium text-sm flex items-center gap-2 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Follow Pack</button>'),tt=p('<div class="absolute right-0 mt-2 w-48 bg-popover border border-border rounded-lg shadow-xl z-10"><div class="py-1"><button>All Packs</button> <button>My Packs</button> <button>From Follows</button> <button>Include Me</button></div></div>'),rt=p('<div class="relative flex-shrink-0 filter-dropdown"><button class="px-4 py-3 bg-card border border-border rounded-lg text-foreground hover:border-border transition-colors flex items-center gap-2 min-w-[160px] justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <span class="text-sm font-medium"> </span></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),ot=p('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),at=p('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),st=p('<button type="button" class="relative cursor-pointer"><!></button>'),lt=p('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),it=p('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>'),nt=p('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),dt=p('<div class="text-center py-12"><svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <p class="text-muted-foreground">No follow packs found</p></div>'),ct=p('<div class="w-full lg:max-w-6xl mx-auto px-4 py-8"><div class="mb-6"><div class="flex gap-3 flex-col sm:flex-row"><div class="relative flex-1"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="search" placeholder="Search follow packs..." class="w-full pl-10 pr-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary"/></div> <!></div></div> <div><h2 class="text-xl font-semibold text-foreground mb-4">Popular Packs</h2> <!></div> <!></div>');function Ft(k,_){He(_,!0);let j=S(""),m=S("all"),h=S(!1);const fe={all:"All Packs",mine:"My Packs",follows:"From Follows","include-me":"Include Me"};function E(t){P(m,t,!0),P(h,!1)}function K(t){t.target.closest(".filter-dropdown")||P(h,!1)}G(()=>{if(e(h))return document.addEventListener("click",K),()=>document.removeEventListener("click",K)});const W=Re(F,()=>({filters:[{kinds:[39089,39092]}],bufferMs:100}),{initialLimit:12,pageSize:12}),pe=f(()=>W.allEvents);let ge=f(()=>e(pe)),N=f(()=>{let t=e(ge);if(e(m)!=="all"){const s=F.$currentUser?.pubkey,i=F.$currentUser?.follows;if(e(m)==="mine"&&s)t=t.filter(d=>d.pubkey===s);else if(e(m)==="follows"&&i){const d=Array.from(i).map(c=>c.pubkey);t=t.filter(c=>d.includes(c.pubkey))}else e(m)==="include-me"&&s&&(t=t.filter(d=>d.tags.filter(v=>v[0]==="p").map(v=>v[1]).includes(s)))}if(e(j)){const s=e(j).toLowerCase();t=t.filter(i=>{const d=i.tagValue("title")||"",c=i.tagValue("description")||"";return d.toLowerCase().includes(s)||c.toLowerCase().includes(s)})}return t}),U=S(12);const X=f(()=>e(N).slice(0,e(U))),Y=f(()=>e(U)<e(N).length),be=f(()=>W.isLoading);function _e(){e(Y)&&P(U,Math.min(e(U)+12,e(N).length),!0)}G(()=>{e(m),e(j),P(U,12)});function Z(t){const s=Ge(t);ue(s)}G(()=>(ve.header=We,()=>{ve.clear()}));var O=ct(),T=o(O),ee=o(T),Q=o(ee),te=l(o(Q),2);Ne(te),r(Q);var xe=l(Q,2);{var ke=t=>{var s=rt(),i=o(s);i.__click=()=>P(h,!e(h));var d=o(i),c=l(o(d),2),v=o(c,!0);r(c),r(d);var I=l(d,2);r(i);var D=l(i,2);{var H=x=>{var g=tt(),V=o(g),z=o(V);z.__click=()=>E("all");var L=l(z,2);L.__click=()=>E("mine");var w=l(L,2);w.__click=()=>E("follows");var $=l(w,2);$.__click=()=>E("include-me"),r(V),r(g),M(()=>{B(z,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(m)==="all"?"text-primary font-medium":"text-muted-foreground"}`),B(L,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(m)==="mine"?"text-primary font-medium":"text-muted-foreground"}`),B(w,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(m)==="follows"?"text-primary font-medium":"text-muted-foreground"}`),B($,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(m)==="include-me"?"text-primary font-medium":"text-muted-foreground"}`)}),u(x,g)};C(D,x=>{e(h)&&x(H)})}r(s),M(()=>{A(v,fe[e(m)]),B(I,0,`w-4 h-4 text-muted-foreground transition-transform ${e(h)?"rotate-180":""}`)}),u(t,s)};C(xe,t=>{F.$currentUser&&t(ke)})}r(ee),r(T);var R=l(T,2),he=l(o(R),2);{var we=t=>{var s=nt(),i=ie(s);ne(i,21,()=>e(X),c=>c.id,(c,v)=>{const I=f(()=>e(v).tagValue("image")),D=f(()=>e(v).tagValue("title")||"Untitled Pack"),H=f(()=>e(v).tagValue("description")),x=f(()=>e(v).tags.filter(a=>a[0]==="p").map(a=>a[1]));var g=it();g.__click=()=>Z(e(v)),g.__keydown=a=>a.key==="Enter"&&Z(e(v));var V=o(g);{var z=a=>{var n=ot(),b=o(n);r(n),M(()=>{ce(b,"src",e(I)),ce(b,"alt",e(D))}),u(a,n)};C(V,a=>{e(I)&&a(z)})}var L=l(V,2),w=o(L),$=o(w),Me=o($,!0);r($);var re=l($,2),Le=o(re);r(re),r(w);var oe=l(w,2);{var $e=a=>{var n=at(),b=o(n,!0);r(n),M(()=>A(b,e(H))),u(a,n)};C(oe,a=>{e(H)&&a($e)})}var ae=l(oe,2),se=o(ae);ne(se,18,()=>e(x).slice(0,4),a=>a,(a,n,b)=>{var y=st();y.__click=q=>{q.stopPropagation(),ue(Je(n))};var je=o(y);de(je,()=>me.Root,(q,Ue)=>{Ue(q,{get ndk(){return F},get pubkey(){return n},children:(Ve,ut)=>{var le=De(),ze=ie(le);de(ze,()=>me.Avatar,(Ae,Be)=>{Be(Ae,{class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"})}),u(Ve,le)},$$slots:{default:!0}})}),r(y),M(()=>Oe(y,`z-index: ${4-e(b)}`)),u(a,y)});var Ce=l(se,2);{var Fe=a=>{var n=lt(),b=o(n),y=o(b);r(b),r(n),M(()=>A(y,`+${e(x).length-4}`)),u(a,n)};C(Ce,a=>{e(x).length>4&&a(Fe)})}r(ae),r(L),r(g),M(()=>{A(Me,e(D)),A(Le,`${e(x).length??""} members`)}),u(c,g)}),r(i);var d=l(i,2);qe(d,{onIntersect:_e,get hasMore(){return e(Y)},get isLoading(){return e(be)}}),u(t,s)},ye=t=>{var s=dt();u(t,s)};C(he,t=>{e(X).length>0?t(we):t(ye,!1)})}r(R);var Pe=l(R,2);Qe(Pe,{get open(){return J.show},set open(t){J.show=t}}),r(O),Te(te,()=>e(j),t=>P(j,t)),u(k,O),Se()}Ee(["click","keydown"]);export{Ft as component};
