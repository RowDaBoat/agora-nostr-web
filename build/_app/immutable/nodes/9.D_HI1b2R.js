import{d as se,f as d,a as l,s as L}from"../chunks/CiPFrJr-.js";import{p as ne,b as D,x as ie,a as le,g as r,u as j,s as x,c as de,d as p,e as n,r as s,t as I,y as U}from"../chunks/CSbKtK4P.js";import{i as g}from"../chunks/87vUJtvC.js";import{n as E,A as ve,e as ce,r as ue,s as pe}from"../chunks/D0X4VYcq.js";import{f as me}from"../chunks/KSN4Ur19.js";var fe=d('<div class="text-center py-12"><div class="w-16 h-16 bg-neutral-200 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"></path></svg></div> <h3 class="text-lg font-semibold text-foreground mb-2">No invites yet</h3> <p class="text-sm text-muted-foreground">Create your first invite to start sharing Agora with others</p></div>'),xe=d('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-400"><svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg> Personalized</span>'),ge=d('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-neutral-800 dark:text-neutral-400">General Invite</span>'),he=d('<h3 class="text-lg font-semibold text-foreground mb-1"> </h3>'),_e=(_,m,i)=>m(r(i)),be=d('<div class="mb-4 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg"><p class="text-sm text-foreground whitespace-pre-wrap line-clamp-3"> </p></div>'),ke=(_,m,i,f)=>m(r(i),r(f).id),ye=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span>Copied!</span>',1),we=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> <span>Copy</span>',1),Me=d('<div class="bg-white dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-800 p-6"><div class="flex items-start justify-between mb-4"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><!></div> <!> <p class="text-sm text-neutral-500 dark:text-neutral-400"> </p></div> <button class="p-2 text-neutral-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-colors" title="Delete invite"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div> <!> <div class="bg-muted rounded-lg p-3 flex items-center space-x-2"><input type="text" readonly="" class="flex-1 bg-transparent text-sm text-foreground outline-none truncate"/> <button class="px-3 py-1.5 bg-primary hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center space-x-1 text-sm flex-shrink-0"><!></button></div></div>'),Ae=d('<div class="space-y-4"></div>'),Ce=d(`<div class="min-h-screen bg-neutral-50 dark:bg-background"><div class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8"><div class="mb-8"><h1 class="text-3xl font-bold text-foreground mb-2">My Invites</h1> <p class="text-muted-foreground">View and manage invites you've sent to join Agora</p></div> <!></div></div>`);function Be(_,m){ne(m,!0);let i=D(ie([])),f=D(null),N=j(()=>E.$currentUser?.pubkey);le(()=>{if(!r(N)){x(i,[],!0);return}G(r(N))});async function G(a){try{const t={kinds:[513],authors:[a]},v=await E.fetchEvents(t,{relayUrls:[...ve]});x(i,Array.from(v).sort((c,u)=>(u.created_at||0)-(c.created_at||0)),!0)}catch(t){console.error("Failed to load invites:",t)}}function H(a){const t=a.tags.find(v=>v[0]==="d")?.[1];return t?`${window.location.origin}/i/${t}`:""}function O(a){try{const t=JSON.parse(a.content);return{welcomeMessage:t.welcomeMessage,recipientName:t.recipientName,isPersonalized:!!t.recipientName}}catch{return{isPersonalized:!1}}}async function R(a,t){try{await navigator.clipboard.writeText(a),x(f,t,!0),setTimeout(()=>x(f,null),2e3)}catch(v){console.error("Failed to copy:",v)}}async function S(a){if(confirm("Are you sure you want to delete this invite?"))try{await a.delete(),x(i,r(i).filter(t=>t.id!==a.id),!0)}catch(t){console.error("Failed to delete invite:",t),alert("Failed to delete invite. Check console for details.")}}var b=Ce(),z=n(b),J=p(n(z),2);{var Y=a=>{var t=fe();l(a,t)},q=a=>{var t=Ae();ce(t,21,()=>r(i),v=>v.id,(v,c)=>{const u=j(()=>O(r(c))),B=j(()=>H(r(c)));var k=Me(),y=n(k),w=n(y),M=n(w),K=n(M);{var Q=e=>{var o=xe();l(e,o)},W=e=>{var o=ge();l(e,o)};g(K,e=>{r(u).isPersonalized?e(Q):e(W,!1)})}s(M);var F=p(M,2);{var X=e=>{var o=he(),h=n(o);s(o),I(()=>L(h,`For ${r(u).recipientName??""}`)),l(e,o)};g(F,e=>{r(u).recipientName&&e(X)})}var P=p(F,2),Z=n(P);s(P),s(w);var $=p(w,2);$.__click=[_e,S,c],s(y);var T=p(y,2);{var ee=e=>{var o=be(),h=n(o),oe=n(h,!0);s(h),s(o),I(()=>L(oe,r(u).welcomeMessage)),l(e,o)};g(T,e=>{r(u).welcomeMessage&&e(ee)})}var V=p(T,2),A=n(V);ue(A);var C=p(A,2);C.__click=[ke,R,B,c];var te=n(C);{var re=e=>{var o=ye();U(2),l(e,o)},ae=e=>{var o=we();U(2),l(e,o)};g(te,e=>{r(f)===r(c).id?e(re):e(ae,!1)})}s(C),s(V),s(k),I(e=>{L(Z,`Created ${e??""}`),pe(A,r(B))},[()=>me(r(c).created_at||0)]),l(v,k)}),s(t),l(a,t)};g(J,a=>{r(i).length===0?a(Y):a(q,!1)})}s(z),s(b),l(_,b),de()}se(["click"]);export{Be as component};
