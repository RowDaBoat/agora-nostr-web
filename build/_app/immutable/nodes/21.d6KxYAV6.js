import{f as x,s as G,a as v,c as dt,d as ht,t as X}from"../chunks/CiPFrJr-.js";import{p as kt,e as l,r as s,y as _t,d as r,g as t,u as rt,t as D,c as wt,f as J,b as q,z as Nt,s as a,a as qt}from"../chunks/CSbKtK4P.js";import{i as h}from"../chunks/87vUJtvC.js";import{n as yt,r as Rt,h as Ft,d as Ct,e as At,t as Bt,Q as Dt}from"../chunks/D0X4VYcq.js";import{N as St}from"../chunks/DEb5q3sN.js";import{b as pt}from"../chunks/DphWBL27.js";import{Q as Wt}from"../chunks/BFdlQWLJ.js";var It=x('<div class="status-badge loading svelte-1ygu8nw"><div class="spinner svelte-1ygu8nw"></div> <span>Loading wallet...</span></div>'),Et=x('<div class="status-badge error svelte-1ygu8nw">‚ö†Ô∏è Error loading wallet</div>'),Qt=x('<div class="balance-card svelte-1ygu8nw"><div class="balance-amount svelte-1ygu8nw"><span class="amount gradient-text svelte-1ygu8nw"> </span> <span class="unit svelte-1ygu8nw">sats</span></div> <!></div>');function Ut(d,e){kt(e,!0);const u=yt.$wallet,i=rt(()=>u.balance||0),o=rt(()=>u.status===St.READY?"idle":u.status===St.ERROR?"error":"loading");function w(m){return new Intl.NumberFormat("en-US").format(m)}var f=Qt(),b=l(f),y=l(b),W=l(y,!0);s(y),_t(2),s(b);var C=r(b,2);{var R=m=>{var E=It();v(m,E)},I=m=>{var E=dt(),K=J(E);{var _=c=>{var S=Et();v(c,S)};h(K,c=>{t(o)==="error"&&c(_)},!0)}v(m,E)};h(C,m=>{t(o)==="loading"?m(R):m(I,!1)})}s(f),D(m=>G(W,m),[()=>w(t(i))]),v(d,f),wt()}async function jt(d,e,u,i,o,w,f,b){if(t(e)){a(u,!0),a(i,"");try{a(o,await w.send(t(f),t(b)||void 0),!0)}catch(y){a(i,y.message||"Failed to send",!0),console.error(y)}finally{a(u,!1)}}}function Gt(d,e){t(e)&&navigator.clipboard.writeText(t(e))}function Lt(d,e,u,i,o,w){a(e,""),a(u,""),a(i,""),a(o,null),a(w,"")}var Pt=x('<div class="error-message svelte-1xzoagx"> </div>'),$t=x(`<div class="send-form svelte-1xzoagx"><div class="form-section svelte-1xzoagx"><label for="amount" class="svelte-1xzoagx">Amount</label> <div class="amount-input-group svelte-1xzoagx"><input id="amount" type="number" placeholder="0" min="1" class="svelte-1xzoagx"/> <span class="amount-unit svelte-1xzoagx">sats</span></div> <div class="balance-info svelte-1xzoagx"> </div></div> <div class="form-section svelte-1xzoagx"><label for="memo" class="svelte-1xzoagx">Memo (optional)</label> <textarea id="memo" placeholder="What's this for?" class="svelte-1xzoagx"></textarea></div> <!> <button class="primary svelte-1xzoagx"><!></button></div>`),Vt=x('<div class="memo-display svelte-1xzoagx"><strong>Memo:</strong> </div>'),Kt=x('<div class="token-result svelte-1xzoagx"><div class="success-icon svelte-1xzoagx">‚úì</div> <h3 class="svelte-1xzoagx">Token Generated!</h3> <p class="success-message svelte-1xzoagx"> </p> <div class="token-display svelte-1xzoagx"><div class="token-text svelte-1xzoagx"> </div> <button class="copy-button svelte-1xzoagx">üìã Copy</button></div> <!> <div class="actions svelte-1xzoagx"><button class="primary svelte-1xzoagx">Send Another</button></div></div>'),Ot=x('<div class="send-view svelte-1xzoagx"><!></div>');function Yt(d,e){kt(e,!0);const u=yt.$wallet;let i=q(""),o=q(""),w=q(""),f=q(!1),b=q(null),y=q("");const W=rt(()=>u.balance||0),C=rt(()=>Number(t(i))||0),R=rt(()=>t(C)>0&&t(C)<=t(W)&&!t(f));function I(c){return new Intl.NumberFormat("en-US").format(c)}var m=Ot(),E=l(m);{var K=c=>{var S=$t(),p=l(S),N=r(l(p),2),n=l(N);Rt(n),_t(2),s(N);var g=r(N,2),Q=l(g);s(g),s(p);var U=r(p,2),T=r(l(U),2);Nt(T),s(U);var Z=r(U,2);{var vt=z=>{var L=Pt(),V=l(L,!0);s(L),D(()=>G(V,t(y))),v(z,L)};h(Z,z=>{t(y)&&z(vt)})}var tt=r(Z,2);tt.__click=[jt,R,f,y,b,u,C,o];var F=l(tt);{var A=z=>{var L=X("Generating Token...");v(z,L)},O=z=>{var L=X("Generate Token");v(z,L)};h(F,z=>{t(f)?z(A):z(O,!1)})}s(tt),s(S),D(z=>{Ft(n,"max",t(W)),G(Q,`Available: ${z??""} sats`),tt.disabled=!t(R)},[()=>I(t(W))]),pt(n,()=>t(i),z=>a(i,z)),pt(T,()=>t(o),z=>a(o,z)),v(c,S)},_=c=>{var S=Kt(),p=r(l(S),4),N=l(p);s(p);var n=r(p,2),g=l(n),Q=l(g,!0);s(g);var U=r(g,2);U.__click=[Gt,b],s(n);var T=r(n,2);{var Z=F=>{var A=Vt(),O=r(l(A));s(A),D(()=>G(O,` ${t(o)??""}`)),v(F,A)};h(T,F=>{t(o)&&F(Z)})}var vt=r(T,2),tt=l(vt);tt.__click=[Lt,i,o,w,b,y],s(vt),s(S),D(F=>{G(N,`${F??""} sats ready to send`),G(Q,t(b))},[()=>I(t(C))]),v(c,S)};h(E,c=>{t(b)?c(_,!1):c(K)})}s(m),v(d,m),wt()}ht(["click"]);async function Ht(d,e,u,i,o,w){if(t(e).trim()){a(u,!0),a(i,"");try{await o.receiveToken(t(e).trim()),a(w,{amount:0},!0),a(e,"")}catch(f){a(i,f.message||"Failed to receive token",!0),console.error(f)}finally{a(u,!1)}}}async function Jt(d,e,u,i,o,w,f,b,y,W){const C=Number(t(e));if(!(!C||C<=0)){if(!t(u)){a(i,"No mint selected");return}a(o,!0),a(i,"");try{const R=w.deposit(C,t(u));if(!R)throw new Error("Failed to create deposit request");a(f,R,!0),R.on("success",()=>{a(b,{amount:C},!0),a(e,""),a(f,null),a(y,null),a(W,!1),a(o,!1)}),R.on("error",m=>{a(i,m.message||"Deposit failed",!0),a(W,!1),a(o,!1)});const I=await R.start();a(y,I,!0)}catch(R){a(i,R.message||"Failed to create mint request",!0),console.error(R)}finally{a(o,!1)}}}function Xt(d,e){t(e)&&navigator.clipboard.writeText(t(e))}function Zt(d,e,u,i,o){a(e,null),a(u,null),a(i,!1),a(o,"")}function te(d,e,u){a(e,null),a(u,"")}var ee=x('<div class="success-screen svelte-ts5u1i"><div class="success-backdrop svelte-ts5u1i"></div> <div class="success-content svelte-ts5u1i"><div class="success-ring svelte-ts5u1i"><div class="success-checkmark svelte-ts5u1i">‚úì</div></div> <h3 class="success-title svelte-ts5u1i">Payment Received!</h3> <p class="success-amount svelte-ts5u1i"> </p> <button class="primary svelte-ts5u1i">Continue</button></div></div>'),ae=(d,e)=>a(e,"mint"),se=(d,e)=>a(e,"paste"),le=x('<div class="error-message svelte-ts5u1i"> </div>'),re=x('<div class="tab-content svelte-ts5u1i"><div class="form-section svelte-ts5u1i"><label for="token" class="svelte-ts5u1i">Cashu Token</label> <textarea id="token" placeholder="Paste cashu token here..." rows="6" class="svelte-ts5u1i"></textarea> <p class="hint svelte-ts5u1i">Paste a cashu token to redeem it into your wallet</p></div> <!> <button class="primary svelte-ts5u1i"><!></button></div>'),ve=x('<option class="svelte-ts5u1i"> </option>'),ie=x('<p class="hint svelte-ts5u1i">No mints configured in your wallet</p>'),ne=(d,e)=>e(1e3),oe=(d,e)=>e(5e3),ce=(d,e)=>e(1e4),ue=(d,e)=>e(21e3),de=(d,e)=>e(1e5),_e=x('<div class="error-message svelte-ts5u1i"> </div>'),fe=x('<div class="form-section svelte-ts5u1i"><label for="mint" class="svelte-ts5u1i">Select Mint</label> <select id="mint" class="svelte-ts5u1i"></select> <!></div> <div class="form-section svelte-ts5u1i"><label for="amount" class="svelte-ts5u1i">Amount (sats)</label> <div class="amount-input-group svelte-ts5u1i"><input id="amount" type="number" placeholder="100" min="1" class="svelte-ts5u1i"/> <span class="amount-unit svelte-ts5u1i">sats</span></div> <div class="preset-buttons svelte-ts5u1i"><button type="button" class="preset-btn svelte-ts5u1i">1k</button> <button type="button" class="preset-btn svelte-ts5u1i">5k</button> <button type="button" class="preset-btn svelte-ts5u1i">10k</button> <button type="button" class="preset-btn svelte-ts5u1i">21k</button> <button type="button" class="preset-btn svelte-ts5u1i">100k</button></div></div> <!> <button class="primary svelte-ts5u1i"><!></button>',1),be=x('<div class="qr-container svelte-ts5u1i"><div class="qr-wrapper svelte-ts5u1i"><!></div></div> <div class="invoice-box svelte-ts5u1i"><label class="svelte-ts5u1i">Invoice String</label> <div class="invoice-text svelte-ts5u1i"> </div> <button class="copy-button svelte-ts5u1i"><span class="copy-icon svelte-ts5u1i">üìã</span> Copy Invoice</button></div> <div class="waiting-status svelte-ts5u1i"><div class="spinner svelte-ts5u1i"></div> <p class="svelte-ts5u1i">Waiting for payment...</p></div>',1),pe=x('<div class="error-message svelte-ts5u1i"> </div>'),me=x('<div class="quote-display svelte-ts5u1i"><h4 class="svelte-ts5u1i">Lightning Invoice</h4> <p class="quote-amount svelte-ts5u1i"> </p> <!> <div class="quote-actions svelte-ts5u1i"><button class="svelte-ts5u1i">Cancel</button></div> <!></div>'),ge=x('<div class="tab-content svelte-ts5u1i"><!></div>'),xe=x('<div class="tabs svelte-ts5u1i"><button>Deposit</button> <button>Paste Token</button></div> <!>',1),he=x('<div class="receive-view svelte-ts5u1i"><!></div>');function ke(d,e){kt(e,!0);const u=yt.$wallet;let i=q("mint"),o=q(""),w=q(""),f=q(!1),b=q(""),y=q(null),W=q(null),C=q(null),R=q(!1),I=rt(()=>u.mints?.map(p=>typeof p=="string"?p:p.url)||[]),m=q("");qt(()=>{t(I).length>0&&!t(m)&&a(m,t(I)[0],!0)});function E(p){a(w,p.toString(),!0)}var K=he(),_=l(K);{var c=p=>{var N=ee(),n=r(l(N),2),g=r(l(n),4),Q=l(g);s(g);var U=r(g,2);U.__click=[te,y,b],s(n),s(N),D(T=>G(Q,`${T??""} sats`),[()=>new Intl.NumberFormat("en-US").format(t(y).amount)]),v(p,N)},S=p=>{var N=xe(),n=J(N),g=l(n);g.__click=[ae,i];let Q;var U=r(g,2);U.__click=[se,i];let T;s(n);var Z=r(n,2);{var vt=F=>{var A=re(),O=l(A),z=r(l(O),2);Nt(z),_t(2),s(O);var L=r(O,2);{var V=M=>{var B=le(),st=l(B,!0);s(B),D(()=>G(st,t(b))),v(M,B)};h(L,M=>{t(b)&&M(V)})}var $=r(L,2);$.__click=[Ht,o,f,b,u,y];var Y=l($);{var et=M=>{var B=X("Processing...");v(M,B)},it=M=>{var B=X("Redeem Token");v(M,B)};h(Y,M=>{t(f)?M(et):M(it,!1)})}s($),s(A),D(M=>$.disabled=M,[()=>!t(o).trim()||t(f)]),pt(z,()=>t(o),M=>a(o,M)),v(F,A)},tt=F=>{var A=ge(),O=l(A);{var z=V=>{var $=fe(),Y=J($),et=r(l(Y),2);At(et,21,()=>t(I),Bt,(k,j)=>{var lt=ve(),Mt=l(lt,!0);s(lt);var zt={};D(()=>{G(Mt,t(j)),zt!==(zt=t(j))&&(lt.value=(lt.__value=t(j))??"")}),v(k,lt)}),s(et);var it=r(et,2);{var M=k=>{var j=ie();v(k,j)};h(it,k=>{t(I).length===0&&k(M)})}s(Y);var B=r(Y,2),st=r(l(B),2),ft=l(st);Rt(ft),_t(2),s(st);var bt=r(st,2),P=l(bt);P.__click=[ne,E];var H=r(P,2);H.__click=[oe,E];var at=r(H,2);at.__click=[ce,E];var ot=r(at,2);ot.__click=[ue,E];var mt=r(ot,2);mt.__click=[de,E],s(bt),s(B);var ct=r(B,2);{var ut=k=>{var j=_e(),lt=l(j,!0);s(j),D(()=>G(lt,t(b))),v(k,j)};h(ct,k=>{t(b)&&k(ut)})}var nt=r(ct,2);nt.__click=[Jt,w,m,b,f,u,W,y,C,R];var gt=l(nt);{var xt=k=>{var j=X("Creating Deposit...");v(k,j)},Tt=k=>{var j=X("Create Deposit");v(k,j)};h(gt,k=>{t(f)?k(xt):k(Tt,!1)})}s(nt),D(k=>nt.disabled=k,[()=>!t(w)||Number(t(w))<=0||!t(m)||t(f)]),Dt(et,()=>t(m),k=>a(m,k)),pt(ft,()=>t(w),k=>a(w,k)),v(V,$)},L=V=>{var $=me(),Y=r(l($),2),et=l(Y);s(Y);var it=r(Y,2);{var M=P=>{var H=be(),at=J(H),ot=l(at),mt=l(ot);{let xt=rt(()=>t(C).toUpperCase());Wt(mt,{get value(){return t(xt)},size:280})}s(ot),s(at);var ct=r(at,2),ut=r(l(ct),2),nt=l(ut,!0);s(ut);var gt=r(ut,2);gt.__click=[Xt,C],s(ct),_t(2),D(()=>G(nt,t(C))),v(P,H)};h(it,P=>{t(C)&&P(M)})}var B=r(it,2),st=l(B);st.__click=[Zt,W,C,R,b],s(B);var ft=r(B,2);{var bt=P=>{var H=pe(),at=l(H,!0);s(H),D(()=>G(at,t(b))),v(P,H)};h(ft,P=>{t(b)&&P(bt)})}s($),D(P=>G(et,`${P??""} sats`),[()=>Number(t(w)).toLocaleString()]),v(V,$)};h(O,V=>{t(W)?V(L,!1):V(z)})}s(A),v(F,A)};h(Z,F=>{t(i)==="paste"?F(vt):F(tt,!1)})}D((F,A)=>{Q=Ct(g,1,"svelte-ts5u1i",null,Q,F),T=Ct(U,1,"svelte-ts5u1i",null,T,A)},[()=>({active:t(i)==="mint"}),()=>({active:t(i)==="paste"})]),v(p,N)};h(_,p=>{t(y)?p(c):p(S,!1)})}s(K),v(d,K),wt()}ht(["click"]);var we=(d,e)=>a(e,"wallet"),ye=x('<button class="back-btn svelte-1chnlgf"><svg class="w-6 h-6 svelte-1chnlgf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>'),ze=x('<a href="/settings?tab=wallet" class="settings-btn svelte-1chnlgf"><svg class="w-6 h-6 svelte-1chnlgf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></a>'),Ce=(d,e)=>a(e,"send"),Se=(d,e)=>a(e,"scan"),Ne=(d,e)=>a(e,"receive"),Re=x('<div class="balance-section svelte-1chnlgf"><!></div> <div class="action-buttons svelte-1chnlgf"><button class="action-btn send svelte-1chnlgf"><span class="action-icon svelte-1chnlgf">‚Üë</span> <span class="action-label svelte-1chnlgf">Send</span></button> <button class="action-btn scan svelte-1chnlgf"><svg class="action-icon-svg svelte-1chnlgf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="4" y="4" width="6" height="6" stroke="currentColor" stroke-width="2" fill="none" rx="1"></rect><rect x="14" y="4" width="6" height="6" stroke="currentColor" stroke-width="2" fill="none" rx="1"></rect><rect x="4" y="14" width="6" height="6" stroke="currentColor" stroke-width="2" fill="none" rx="1"></rect><rect x="14" y="14" width="6" height="6" stroke="currentColor" stroke-width="2" fill="none" rx="1"></rect></svg> <span class="action-label svelte-1chnlgf">Scan QR</span></button> <button class="action-btn receive svelte-1chnlgf"><span class="action-icon svelte-1chnlgf">‚Üì</span> <span class="action-label svelte-1chnlgf">Receive</span></button></div>',1),Te=x('<div class="wallet-container svelte-1chnlgf"><div class="wallet-header svelte-1chnlgf"><!> <h1 class="svelte-1chnlgf"><!></h1> <!></div> <div class="wallet-content svelte-1chnlgf"><!></div></div>');function Me(d){let e=q("wallet");var u=Te(),i=l(u),o=l(i);{var w=_=>{var c=ye();c.__click=[we,e],v(_,c)};h(o,_=>{t(e)!=="wallet"&&_(w)})}var f=r(o,2),b=l(f);{var y=_=>{var c=X("Wallet");v(_,c)},W=_=>{var c=dt(),S=J(c);{var p=n=>{var g=X("Send");v(n,g)},N=n=>{var g=dt(),Q=J(g);{var U=T=>{var Z=X("Receive");v(T,Z)};h(Q,T=>{t(e)==="receive"&&T(U)},!0)}v(n,g)};h(S,n=>{t(e)==="send"||t(e)==="scan"?n(p):n(N,!1)},!0)}v(_,c)};h(b,_=>{t(e)==="wallet"?_(y):_(W,!1)})}s(f);var C=r(f,2);{var R=_=>{var c=ze();v(_,c)};h(C,_=>{t(e)==="wallet"&&_(R)})}s(i);var I=r(i,2),m=l(I);{var E=_=>{var c=Re(),S=J(c),p=l(S);Ut(p,{}),s(S);var N=r(S,2),n=l(N);n.__click=[Ce,e];var g=r(n,2);g.__click=[Se,e];var Q=r(g,2);Q.__click=[Ne,e],s(N),v(_,c)},K=_=>{var c=dt(),S=J(c);{var p=n=>{Yt(n,{})},N=n=>{var g=dt(),Q=J(g);{var U=T=>{ke(T,{})};h(Q,T=>{t(e)==="receive"&&T(U)},!0)}v(n,g)};h(S,n=>{t(e)==="send"||t(e)==="scan"?n(p):n(N,!1)},!0)}v(_,c)};h(m,_=>{t(e)==="wallet"?_(E):_(K,!1)})}s(I),s(u),v(d,u)}ht(["click"]);function Ee(d){Me(d)}export{Ee as component};
