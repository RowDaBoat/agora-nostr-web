import{d as Me,f as p,a as m,s as E}from"../chunks/CiPFrJr-.js";import{p as Le,a as se,g as e,b as N,s as P,c as Ce,d as l,e as s,r as o,u as j,t as w,f as Fe}from"../chunks/CSbKtK4P.js";import{i as y}from"../chunks/87vUJtvC.js";import{n as $,r as je,d as V,e as ae,f as $e,g as Ue,h as le}from"../chunks/D0X4VYcq.js";import{b as ze}from"../chunks/DphWBL27.js";import{g as ie}from"../chunks/CTwadDAE.js";import{c as J}from"../chunks/Aqrs6FWH.js";import{m as Be}from"../chunks/B8GI64zs.js";import{C as Ae}from"../chunks/CWwZauO4.js";import{c as Ee,L as Ve}from"../chunks/BZ_HYA_A.js";import{g as Ie}from"../chunks/B-JzvGpb.js";import{g as De}from"../chunks/DeBk5QYO.js";var Ne=p('<button class="px-4 py-2.5 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-medium text-sm flex items-center gap-2 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Follow Pack</button>'),Se=(v,i)=>P(i,!e(i)),He=(v,i)=>i("all"),Oe=(v,i)=>i("mine"),Qe=(v,i)=>i("follows"),Te=(v,i)=>i("include-me"),qe=p('<div class="absolute right-0 mt-2 w-48 bg-popover border border-border rounded-lg shadow-xl z-10"><div class="py-1"><button>All Packs</button> <button>My Packs</button> <button>From Follows</button> <button>Include Me</button></div></div>'),Ge=p('<div class="relative flex-shrink-0 filter-dropdown"><button class="px-4 py-3 bg-card border border-border rounded-lg text-foreground hover:border-border transition-colors flex items-center gap-2 min-w-[160px] justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <span class="text-sm font-medium"> </span></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Je=(v,i,g)=>i(e(g)),Ke=(v,i,g)=>v.key==="Enter"&&i(e(g)),Re=p('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),We=p('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),Xe=(v,i)=>{v.stopPropagation(),ie(De(i))},Ye=p('<button type="button" class="relative cursor-pointer"><!></button>'),Ze=p('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),et=p('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>'),tt=p('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),rt=p('<div class="text-center py-12"><svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <p class="text-muted-foreground">No follow packs found</p></div>'),ot=p('<div class="max-w-6xl mx-auto px-4 py-8"><div class="mb-8"><div class="flex items-start justify-between gap-4"><div><h1 class="text-3xl font-bold text-foreground mb-2 flex items-center gap-3"><svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> Follow Packs</h1> <p class="text-muted-foreground">Discover curated lists of accounts to follow</p></div> <!></div></div> <div class="mb-6"><div class="flex gap-3 flex-col sm:flex-row"><div class="relative flex-1"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="search" placeholder="Search follow packs..." class="w-full pl-10 pr-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary"/></div> <!></div></div> <div><h2 class="text-xl font-semibold text-foreground mb-4">Popular Packs</h2> <!></div> <!></div>');function gt(v,i){Le(i,!0);let g=N(""),f=N("all"),M=N(!1);const ne={all:"All Packs",mine:"My Packs",follows:"From Follows","include-me":"Include Me"};function I(t){P(f,t,!0),P(M,!1)}function K(t){t.target.closest(".filter-dropdown")||P(M,!1)}se(()=>{if(e(M))return document.addEventListener("click",K),()=>document.removeEventListener("click",K)});const R=Ee($,()=>({filters:[{kinds:[39089,39092]}],bufferMs:100}),{initialLimit:12,pageSize:12}),de=j(()=>R.allEvents);let ce=j(()=>{const t=e(de).map(r=>({id:r.id||"",title:r.tagValue("title")||"Untitled Pack",description:r.tagValue("description"),image:r.tagValue("image"),pubkeys:r.tags.filter(a=>a[0]==="p").map(a=>a[1]),encode:()=>r.encode(),kind:r.kind||39089,pubkey:r.pubkey,created_at:r.created_at||0}));return t.length>0?t:Be}),S=j(()=>{let t=e(ce);if(e(f)!=="all"){const r=$.$currentUser,a=r?.pubkey,b=r?.follows;if(e(f)==="mine"&&a)t=t.filter(u=>u.pubkey===a);else if(e(f)==="follows"&&b){const u=Array.from(b).map(n=>n.pubkey);t=t.filter(n=>u.includes(n.pubkey))}else e(f)==="include-me"&&a&&(t=t.filter(u=>u.pubkeys.includes(a)))}if(e(g)){const r=e(g).toLowerCase();t=t.filter(a=>a.title.toLowerCase().includes(r)||a.description&&a.description.toLowerCase().includes(r))}return t}),U=N(12);const W=j(()=>e(S).slice(0,e(U))),X=j(()=>e(U)<e(S).length),ue=j(()=>R.isLoading);function ve(){e(X)&&P(U,Math.min(e(U)+12,e(S).length),!0)}se(()=>{e(f),e(g),P(U,12)});function Y(t){const r=$.getUser({pubkey:t.pubkey}),a=Ie(t,r);ie(a)}var H=ot(),O=s(H),Z=s(O),fe=l(s(Z),2);{var me=t=>{var r=Ne();r.__click=()=>J.open(),m(t,r)};y(fe,t=>{$.$currentUser&&t(me)})}o(Z),o(O);var Q=l(O,2),ee=s(Q),T=s(ee),te=l(s(T),2);je(te),o(T);var pe=l(T,2);{var ge=t=>{var r=Ge(),a=s(r);a.__click=[Se,M];var b=s(a),u=l(s(b),2),n=s(u,!0);o(u),o(b);var x=l(b,2);o(a);var D=l(a,2);{var G=L=>{var k=qe(),C=s(k),z=s(C);z.__click=[He,I];var F=l(z,2);F.__click=[Oe,I];var B=l(F,2);B.__click=[Qe,I];var A=l(B,2);A.__click=[Te,I],o(C),o(k),w(()=>{V(z,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="all"?"text-primary font-medium":"text-muted-foreground"}`),V(F,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="mine"?"text-primary font-medium":"text-muted-foreground"}`),V(B,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="follows"?"text-primary font-medium":"text-muted-foreground"}`),V(A,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="include-me"?"text-primary font-medium":"text-muted-foreground"}`)}),m(L,k)};y(D,L=>{e(M)&&L(G)})}o(r),w(()=>{E(n,ne[e(f)]),V(x,0,`w-4 h-4 text-muted-foreground transition-transform ${e(M)?"rotate-180":""}`)}),m(t,r)};y(pe,t=>{$.$currentUser&&t(ge)})}o(ee),o(Q);var q=l(Q,2),_e=l(s(q),2);{var be=t=>{var r=tt(),a=Fe(r);ae(a,21,()=>e(W),u=>u.id,(u,n)=>{var x=et();x.__click=[Je,Y,n],x.__keydown=[Ke,Y,n];var D=s(x);{var G=d=>{var c=Re(),_=s(c);o(c),w(()=>{le(_,"src",e(n).image),le(_,"alt",e(n).title)}),m(d,c)};y(D,d=>{e(n).image&&d(G)})}var L=l(D,2),k=s(L),C=s(k),z=s(C,!0);o(C);var F=l(C,2),B=s(F);o(F),o(k);var A=l(k,2);{var he=d=>{var c=We(),_=s(c,!0);o(c),w(()=>E(_,e(n).description)),m(d,c)};y(A,d=>{e(n).description&&d(he)})}var re=l(A,2),oe=s(re);ae(oe,18,()=>e(n).pubkeys.slice(0,4),d=>d,(d,c,_)=>{var h=Ye();h.__click=[Xe,c];var Pe=s(h);$e(Pe,{get ndk(){return $},get pubkey(){return c},class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"}),o(h),w(()=>Ue(h,`z-index: ${4-e(_)}`)),m(d,h)});var we=l(oe,2);{var ye=d=>{var c=Ze(),_=s(c),h=s(_);o(_),o(c),w(()=>E(h,`+${e(n).pubkeys.length-4}`)),m(d,c)};y(we,d=>{e(n).pubkeys.length>4&&d(ye)})}o(re),o(L),o(x),w(()=>{E(z,e(n).title),E(B,`${e(n).pubkeys.length??""} members`)}),m(u,x)}),o(a);var b=l(a,2);Ve(b,{onIntersect:ve,get hasMore(){return e(X)},get isLoading(){return e(ue)}}),m(t,r)},xe=t=>{var r=rt();m(t,r)};y(_e,t=>{e(W).length>0?t(be):t(xe,!1)})}o(q);var ke=l(q,2);Ae(ke,{get open(){return J.show},set open(t){J.show=t}}),o(H),ze(te,()=>e(g),t=>P(g,t)),m(v,H),Ce()}Me(["click","keydown"]);export{gt as component};
