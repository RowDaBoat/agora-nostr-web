import{d as L,f as C,s as z,a as h,t as Q,c as R}from"../chunks/CiPFrJr-.js";import{x as gt,a as pt,g as s,u as N,s as bt,b as _t,p as q,e as c,r as i,d as p,y as O,t as M,c as V,f as S}from"../chunks/CSbKtK4P.js";import{i as P,p as xt}from"../chunks/87vUJtvC.js";import{n as j,f as H,S as J,e as U,t as rt,d as ht}from"../chunks/D0X4VYcq.js";import{N as yt,a as it,b as ot,c as kt,d as Et,e as wt,f as It,K as Nt}from"../chunks/5sINTuNg.js";import{n as G}from"../chunks/DeBk5QYO.js";import{T as D}from"../chunks/ChQzK9Kk.js";import{F as Pt}from"../chunks/DKw2pikm.js";function Ct(o,t){if(o.kind===kt)return"reaction";if(o.kind===Et||o.kind===wt)return"repost";if(o.kind===It)return"zap";if(o.kind===Nt)return"invite_acceptance";if(o.kind===it||o.kind===ot){const e=o.tags.find(n=>n[0]==="q");if(e&&t.has(e[1]))return"quote";const a=o.tags.find(n=>n[0]==="e"&&n[3]==="reply");return a&&t.has(a[1])?"reply":"mention"}return null}const B={reply:o=>o.map(t=>({id:`reply-${t.id}`,type:"reply",timestamp:t.created_at||0,event:t,replyToEventId:t.tags.find(e=>e[0]==="e"&&e[3]==="reply")?.[1]||""})),mention:o=>o.map(t=>({id:`mention-${t.id}`,type:"mention",timestamp:t.created_at||0,event:t})),quote:o=>o.map(t=>({id:`quote-${t.id}`,type:"quote",timestamp:t.created_at||0,event:t,quotedEventId:t.tags.find(e=>e[0]==="q")?.[1]||""})),reaction:(o,t)=>{const e=new Map;return o.forEach(a=>{const n=a.tags.find(b=>b[0]==="e")?.[1];if(!n||!t.has(n))return;let l=a.content||"ðŸ‘";l==="+"&&(l="â¤ï¸");const f=`${n}-${l}`;e.has(f)||e.set(f,{targetEventId:n,emoji:l,reactors:[],timestamp:a.created_at||0});const u=e.get(f);u.reactors.push({pubkey:a.pubkey,event:a}),a.created_at&&a.created_at>u.timestamp&&(u.timestamp=a.created_at)}),Array.from(e.entries()).map(([a,n])=>({id:`reaction-${a}`,type:"reaction",timestamp:n.timestamp,targetEventId:n.targetEventId,emoji:n.emoji,reactors:n.reactors}))},repost:(o,t)=>{const e=new Map;return o.forEach(a=>{const n=a.tags.find(f=>f[0]==="e")?.[1];if(!n||!t.has(n))return;e.has(n)||e.set(n,{targetEventId:n,reposts:[],timestamp:a.created_at||0});const l=e.get(n);l.reposts.push(a),a.created_at&&a.created_at>l.timestamp&&(l.timestamp=a.created_at)}),Array.from(e.values()).map(a=>({id:`repost-${a.targetEventId}`,type:"repost",timestamp:a.timestamp,targetEventId:a.targetEventId,reposts:a.reposts}))},zap:(o,t)=>{const e=new Map;return o.forEach(a=>{const n=a.tags.find(d=>d[0]==="e")?.[1];if(!n||!t.has(n))return;const l=a.tags.find(d=>d[0]==="bolt11")?.[1],f=zt(l),u=a.tags.find(d=>d[0]==="description")?.[1];let b=a.pubkey;if(u)try{b=JSON.parse(u).pubkey||b}catch{}e.has(n)||e.set(n,{targetEventId:n,zaps:[],timestamp:a.created_at||0});const _=e.get(n);_.zaps.push({event:a,amount:f,sender:b}),a.created_at&&a.created_at>_.timestamp&&(_.timestamp=a.created_at)}),Array.from(e.values()).map(a=>({id:`zap-${a.targetEventId}`,type:"zap",timestamp:a.timestamp,targetEventId:a.targetEventId,zaps:a.zaps}))},invite_acceptance:o=>o.map(t=>{const e=t.tags.find(a=>a[0]==="e")?.[1]||"";return{id:`invite-${t.id}`,type:"invite_acceptance",timestamp:t.created_at||0,event:t,inviteeEventId:e,inviteePubkey:t.pubkey}})};function At(o){const t=o.$currentUser,e=o.$subscribe(()=>{if(t)return{filters:[{kinds:[...yt],"#p":[t.pubkey],since:Math.floor(Date.now()/1e3)-3600*24*30,limit:500}],subId:"notifications"}}),a=o.$subscribe(()=>{if(t)return{filters:[{kinds:[it,ot,30023],authors:[t.pubkey],since:Math.floor(Date.now()/1e3)-3600*24*30}],subId:"user-events"}}),n=N(()=>{const d=Array.from(a.events??[]);return new Set(d.map(v=>v.id))}),l=gt(new Map);let f=_t("all");const u=N(()=>{if(!t)return[];const d=Array.from(e.events??[]),v=[],r={reply:[],mention:[],quote:[],reaction:[],repost:[],zap:[],invite_acceptance:[]};return d.forEach(m=>{const x=Ct(m,s(n));x&&r[x].push(m)}),v.push(...B.reply(r.reply)),v.push(...B.mention(r.mention)),v.push(...B.quote(r.quote)),v.push(...B.reaction(r.reaction,s(n))),v.push(...B.repost(r.repost,s(n))),v.push(...B.zap(r.zap,s(n))),v.push(...B.invite_acceptance(r.invite_acceptance)),v.sort((m,x)=>x.timestamp-m.timestamp)});pt(()=>{const d=new Set;s(u).forEach(r=>{r.type==="reply"?d.add(r.replyToEventId):r.type==="quote"?d.add(r.quotedEventId):(r.type==="reaction"||r.type==="repost"||r.type==="zap")&&d.add(r.targetEventId)});const v=Array.from(d).filter(r=>!l.has(r));v.length>0&&Promise.all(v.map(r=>o.fetchEvent(r))).then(r=>{r.forEach((m,x)=>{m&&l.set(v[x],m)})})});const b=N(()=>s(f)==="all"?s(u):s(f)==="invite"?s(u).filter(d=>d.type==="invite_acceptance"):s(u).filter(d=>d.type===s(f))),_=N(()=>{const d={all:s(u).length,reply:0,mention:0,quote:0,reaction:0,repost:0,zap:0,invite:0};return s(u).forEach(v=>{v.type==="invite_acceptance"?d.invite++:d[v.type]++}),d});return{get notifications(){return s(b)},get filter(){return s(f)},get counts(){return s(_)},get targetEventsCache(){return l},setFilter(d){bt(f,d,!0)}}}function zt(o){if(!o)return 0;try{const t=o.match(/lnbc(\d+)([a-z])?/i);if(!t)return 0;const e=parseInt(t[1],10),a=t[2];let n=e;switch(a){case"m":n=e*1e5;break;case"u":n=e*100;break;case"n":n=e/10;break;case"p":n=e/1e4;break}return Math.floor(n)}catch{return 0}}function tt(o,t){G(t.event.pubkey)}var Mt=C('<div class="text-sm text-muted-foreground bg-muted/30 rounded p-2 border-l-2 border-primary/50"> </div>'),Tt=C('<div class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><button type="button" class="flex-shrink-0"><!></button> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg> <span class="text-sm text-muted-foreground"><button type="button" class="font-semibold hover:underline text-foreground"> </button> replied to your note</span> <!></div> <div class="text-foreground leading-relaxed mb-2"><!></div> <!></div></div>');function jt(o,t){q(t,!0);const e=j.$fetchProfile(()=>t.event.pubkey),a=N(()=>e?.name||e?.displayName||"Anonymous"),n=N(()=>t.targetEvent?.content?t.targetEvent.content.slice(0,100)+(t.targetEvent.content.length>100?"...":""):"");var l=Tt(),f=c(l);f.__click=[tt,t];var u=c(f);H(u,{get ndk(){return j},get pubkey(){return t.event.pubkey},class:"w-10 h-10 cursor-pointer hover:opacity-80 transition-opacity"}),i(f);var b=p(f,2),_=c(b),d=p(c(_),2),v=c(d);v.__click=[tt,t];var r=c(v,!0);i(v),O(),i(d);var m=p(d,2);{var x=E=>{D(E,{get timestamp(){return t.event.created_at},class:"text-sm text-muted-foreground ml-auto"})};P(m,E=>{t.event.created_at&&E(x)})}i(_);var y=p(_,2),k=c(y);J(k,{get ndk(){return j},get content(){return t.event.content},get emojiTags(){return t.event.tags}}),i(y);var w=p(y,2);{var A=E=>{var g=Mt(),I=c(g,!0);i(g),M(()=>z(I,s(n))),h(E,g)};P(w,E=>{s(n)&&E(A)})}i(b),i(l),M(()=>z(r,s(a))),h(o,l),V()}L(["click"]);function et(o,t){G(t.event.pubkey)}var qt=C('<div class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><button type="button" class="flex-shrink-0"><!></button> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg> <span class="text-sm text-muted-foreground"><button type="button" class="font-semibold hover:underline text-foreground"> </button> mentioned you</span> <!></div> <div class="text-foreground leading-relaxed"><!></div></div></div>');function Vt(o,t){q(t,!0);const e=j.$fetchProfile(()=>t.event.pubkey),a=N(()=>e?.name||e?.displayName||"Anonymous");var n=qt(),l=c(n);l.__click=[et,t];var f=c(l);H(f,{get ndk(){return j},get pubkey(){return t.event.pubkey},class:"w-10 h-10 cursor-pointer hover:opacity-80 transition-opacity"}),i(l);var u=p(l,2),b=c(u),_=p(c(b),2),d=c(_);d.__click=[et,t];var v=c(d,!0);i(d),O(),i(_);var r=p(_,2);{var m=k=>{D(k,{get timestamp(){return t.event.created_at},class:"text-sm text-muted-foreground ml-auto"})};P(r,k=>{t.event.created_at&&k(m)})}i(b);var x=p(b,2),y=c(x);J(y,{get ndk(){return j},get content(){return t.event.content},get emojiTags(){return t.event.tags}}),i(x),i(u),i(n),M(()=>z(v,s(a))),h(o,n),V()}L(["click"]);function at(o,t){G(t.event.pubkey)}var Rt=C('<div class="text-sm text-muted-foreground bg-muted/30 rounded p-2 border-l-2 border-purple-500/50"> </div>'),St=C('<div class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><button type="button" class="flex-shrink-0"><!></button> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg> <span class="text-sm text-muted-foreground"><button type="button" class="font-semibold hover:underline text-foreground"> </button> quoted your note</span> <!></div> <div class="text-foreground leading-relaxed mb-2"><!></div> <!></div></div>');function Bt(o,t){q(t,!0);const e=j.$fetchProfile(()=>t.event.pubkey),a=N(()=>e?.name||e?.displayName||"Anonymous"),n=N(()=>t.targetEvent?.content?t.targetEvent.content.slice(0,100)+(t.targetEvent.content.length>100?"...":""):"");var l=St(),f=c(l);f.__click=[at,t];var u=c(f);H(u,{get ndk(){return j},get pubkey(){return t.event.pubkey},class:"w-10 h-10 cursor-pointer hover:opacity-80 transition-opacity"}),i(f);var b=p(f,2),_=c(b),d=p(c(_),2),v=c(d);v.__click=[at,t];var r=c(v,!0);i(v),O(),i(d);var m=p(d,2);{var x=E=>{D(E,{get timestamp(){return t.event.created_at},class:"text-sm text-muted-foreground ml-auto"})};P(m,E=>{t.event.created_at&&E(x)})}i(_);var y=p(_,2),k=c(y);J(k,{get ndk(){return j},get content(){return t.event.content},get emojiTags(){return t.event.tags}}),i(y);var w=p(y,2);{var A=E=>{var g=Rt(),I=c(g,!0);i(g),M(()=>z(I,s(n))),h(E,g)};P(w,E=>{s(n)&&E(A)})}i(b),i(l),M(()=>z(r,s(a))),h(o,l),V()}L(["click"]);var Dt=(o,t,e)=>t(e(),o),Ft=C('<button type="button" class="font-semibold hover:underline text-foreground"> <!></button>'),Kt=C('<span class="text-muted-foreground"> </span>'),Lt=C('<span class="inline-flex items-center gap-1 flex-wrap"><!> <!></span>');function W(o,t){q(t,!0);const e=xt(t,"maxVisible",3,2),a=N(()=>t.pubkeys.slice(0,e()).map(v=>({pubkey:v,profile:j.$fetchProfile(()=>v)}))),n=N(()=>s(a).map(v=>v.profile?.name||v.profile?.displayName||"Anonymous")),l=N(()=>Math.max(0,t.pubkeys.length-e()));function f(v,r){r.stopPropagation(),G(v)}var u=Lt(),b=c(u);U(b,17,()=>s(a),rt,(v,r,m)=>{let x=()=>s(r).pubkey;var y=Ft();y.__click=[Dt,f,x];var k=c(y,!0),w=p(k);{var A=E=>{var g=Q(",");h(E,g)};P(w,E=>{(m<s(a).length-1||s(l)>0)&&E(A)})}i(y),M(()=>z(k,s(n)[m])),h(v,y)});var _=p(b,2);{var d=v=>{var r=Kt(),m=c(r);i(r),M(()=>z(m,`and ${s(l)??""} ${s(l)===1?"other":"others"}`)),h(v,r)};P(_,v=>{s(l)>0&&v(d)})}i(u),h(o,u),V()}L(["click"]);var Ot=C('<div class="text-sm text-muted-foreground bg-muted/30 rounded p-2 border-l-2 border-red-500/50"> </div>'),Gt=C('<div class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><div class="flex-shrink-0 w-10 h-10 flex items-center justify-center text-2xl"> </div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1 flex-wrap"><svg class="w-4 h-4 text-red-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg> <span class="text-sm text-muted-foreground"><!> <span class="text-lg mx-1"> </span> to your note</span> <!></div> <!></div></div>');function Ht(o,t){q(t,!0);const e=N(()=>t.reactors.map(w=>w.pubkey)),a=N(()=>t.targetEvent?.content?t.targetEvent.content.slice(0,100)+(t.targetEvent.content.length>100?"...":""):"");var n=Gt(),l=c(n),f=c(l,!0);i(l);var u=p(l,2),b=c(u),_=p(c(b),2),d=c(_);W(d,{get pubkeys(){return s(e)},maxVisible:2});var v=p(d);v.nodeValue=" reacted ";var r=p(v),m=c(r,!0);i(r),O(),i(_);var x=p(_,2);D(x,{get timestamp(){return t.timestamp},class:"text-sm text-muted-foreground ml-auto"}),i(b);var y=p(b,2);{var k=w=>{var A=Ot(),E=c(A,!0);i(A),M(()=>z(E,s(a))),h(w,A)};P(y,w=>{s(a)&&w(k)})}i(u),i(n),M(()=>{z(f,t.emoji),z(m,t.emoji)}),h(o,n),V()}var Zt=C('<div class="text-sm text-muted-foreground bg-muted/30 rounded p-2 border-l-2 border-green-500/50"> </div>'),Qt=C('<div class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><div class="flex-shrink-0 w-10 h-10 flex items-center justify-center"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1 flex-wrap"><span class="text-sm text-muted-foreground"><!> </span> <!></div> <!></div></div>');function Ut(o,t){q(t,!0);const e=N(()=>t.reposts.map(m=>m.pubkey)),a=N(()=>t.targetEvent?.content?t.targetEvent.content.slice(0,100)+(t.targetEvent.content.length>100?"...":""):"");var n=Qt(),l=p(c(n),2),f=c(l),u=c(f),b=c(u);W(b,{get pubkeys(){return s(e)},maxVisible:2});var _=p(b);_.nodeValue=` reposted
        your note`,i(u);var d=p(u,2);D(d,{get timestamp(){return t.timestamp},class:"text-sm text-muted-foreground ml-auto"}),i(f);var v=p(f,2);{var r=m=>{var x=Zt(),y=c(x,!0);i(x),M(()=>z(y,s(a))),h(m,x)};P(v,m=>{s(a)&&m(r)})}i(l),i(n),h(o,n),V()}var Jt=C('<div class="text-sm text-muted-foreground bg-muted/30 rounded p-2 border-l-2 border-yellow-500/50"> </div>'),Wt=C('<div class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><div class="flex-shrink-0 w-10 h-10 flex items-center justify-center"><svg class="w-6 h-6 text-yellow-500" fill="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1 flex-wrap"><span class="text-sm text-muted-foreground"><!> <span class="font-semibold text-yellow-600 dark:text-yellow-400 mx-1"> </span> <!></span> <!></div> <!></div></div>');function Xt(o,t){q(t,!0);const e=N(()=>t.zaps.map(g=>g.sender)),a=N(()=>t.zaps.reduce((g,I)=>g+I.amount,0)),n=N(()=>s(a).toLocaleString()),l=N(()=>t.targetEvent?.content?t.targetEvent.content.slice(0,100)+(t.targetEvent.content.length>100?"...":""):"");var f=Wt(),u=p(c(f),2),b=c(u),_=c(b),d=c(_);W(d,{get pubkeys(){return s(e)},maxVisible:2});var v=p(d);v.nodeValue=" zapped ";var r=p(v),m=c(r);i(r);var x=p(r,2);{var y=g=>{var I=Q("to your note");h(g,I)},k=g=>{var I=Q("to you");h(g,I)};P(x,g=>{t.targetEvent?g(y):g(k,!1)})}i(_);var w=p(_,2);D(w,{get timestamp(){return t.timestamp},class:"text-sm text-muted-foreground ml-auto"}),i(b);var A=p(b,2);{var E=g=>{var I=Jt(),T=c(I,!0);i(I),M(()=>z(T,s(l))),h(g,I)};P(A,g=>{s(l)&&g(E)})}i(u),i(f),M(()=>z(m,`${s(n)??""} sats`)),h(o,f),V()}function nt(o,t){G(t.notification.inviteePubkey)}var Yt=C('<p class="text-sm text-muted-foreground mt-1 line-clamp-2"> </p>'),$t=C('<div class="mt-2"><!></div>'),te=C('<div data-testid="invite-acceptance-notification" class="flex gap-3 p-4 hover:bg-muted/50 transition-colors border-b border-border"><button type="button" class="flex-shrink-0"><!></button> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1 flex-wrap"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm text-muted-foreground"><button type="button" class="font-semibold hover:underline text-foreground"> </button> accepted your invite ðŸŽ‰</span> <!></div> <!> <!></div></div>');function ee(o,t){q(t,!0);const e=j.$fetchProfile(()=>t.notification.inviteePubkey),a=N(()=>e?.name||e?.displayName?e.name||e.displayName:t.notification.inviteePubkey.slice(0,8)+"..."),n=N(()=>j.$sessions?.follows??new Set),l=N(()=>s(n).has(t.notification.inviteePubkey));var f=te(),u=c(f);u.__click=[nt,t];var b=c(u);H(b,{get ndk(){return j},get pubkey(){return t.notification.inviteePubkey},class:"w-10 h-10 cursor-pointer hover:opacity-80 transition-opacity"}),i(u);var _=p(u,2),d=c(_),v=p(c(d),2),r=c(v);r.__click=[nt,t];var m=c(r,!0);i(r),O(),i(v);var x=p(v,2);{var y=g=>{D(g,{get timestamp(){return t.notification.timestamp},class:"text-sm text-muted-foreground ml-auto"})};P(x,g=>{t.notification.timestamp&&g(y)})}i(d);var k=p(d,2);{var w=g=>{var I=Yt(),T=c(I,!0);i(I),M(()=>z(T,e.about)),h(g,I)};P(k,g=>{e?.about&&g(w)})}var A=p(k,2);{var E=g=>{var I=$t(),T=c(I);Pt(T,{get pubkey(){return t.notification.inviteePubkey},variant:"outline"}),i(I),h(g,I)};P(A,g=>{s(l)||g(E)})}i(_),i(f),M(()=>z(m,s(a))),h(o,f),V()}L(["click"]);function ae(o,t){q(t,!0);const e=N(()=>{if(t.notification.type==="reply")return t.targetEventsCache.get(t.notification.replyToEventId);if(t.notification.type==="quote")return t.targetEventsCache.get(t.notification.quotedEventId);if(t.notification.type==="reaction"||t.notification.type==="repost"||t.notification.type==="zap")return t.targetEventsCache.get(t.notification.targetEventId)});var a=R(),n=S(a);{var l=u=>{jt(u,{get event(){return t.notification.event},get targetEvent(){return s(e)}})},f=u=>{var b=R(),_=S(b);{var d=r=>{Vt(r,{get event(){return t.notification.event}})},v=r=>{var m=R(),x=S(m);{var y=w=>{Bt(w,{get event(){return t.notification.event},get targetEvent(){return s(e)}})},k=w=>{var A=R(),E=S(A);{var g=T=>{Ht(T,{get emoji(){return t.notification.emoji},get reactors(){return t.notification.reactors},get targetEvent(){return s(e)},get timestamp(){return t.notification.timestamp}})},I=T=>{var X=R(),st=S(X);{var ct=F=>{Ut(F,{get reposts(){return t.notification.reposts},get targetEvent(){return s(e)},get timestamp(){return t.notification.timestamp}})},vt=F=>{var Y=R(),dt=S(Y);{var lt=K=>{Xt(K,{get zaps(){return t.notification.zaps},get targetEvent(){return s(e)},get timestamp(){return t.notification.timestamp}})},ut=K=>{var $=R(),ft=S($);{var mt=Z=>{ee(Z,{get notification(){return t.notification}})};P(ft,Z=>{t.notification.type==="invite_acceptance"&&Z(mt)},!0)}h(K,$)};P(dt,K=>{t.notification.type==="zap"?K(lt):K(ut,!1)},!0)}h(F,Y)};P(st,F=>{t.notification.type==="repost"?F(ct):F(vt,!1)},!0)}h(T,X)};P(E,T=>{t.notification.type==="reaction"?T(g):T(I,!1)},!0)}h(w,A)};P(x,w=>{t.notification.type==="quote"?w(y):w(k,!1)},!0)}h(r,m)};P(_,r=>{t.notification.type==="mention"?r(d):r(v,!1)},!0)}h(u,b)};P(n,u=>{t.notification.type==="reply"?u(l):u(f,!1)})}h(o,a),V()}var ne=(o,t,e)=>t(s(e).value),re=C('<span class="ml-1 opacity-70"> </span>'),ie=C('<button type="button"> <!></button>'),oe=C(`<div class="p-8 text-center text-muted-foreground"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg> <p class="text-lg font-medium mb-1">No notifications yet</p> <p class="text-sm">When people interact with your posts, you'll see it here</p></div>`),se=C('<div class="max-w-2xl mx-auto"><div class="sticky top-0 z-10 bg-background/90 backdrop-blur-xl border-b border-border"><div class="px-4 py-4"><h1 class="text-xl font-bold text-foreground mb-3">Notifications</h1> <div class="flex gap-2 overflow-x-auto pb-2 scrollbar-hide svelte-xbnxce"></div></div></div> <div class="min-h-screen"><!></div></div>');function pe(o,t){q(t,!0);const e=At(j),a=[{value:"all",label:"All"},{value:"reply",label:"Replies"},{value:"mention",label:"Mentions"},{value:"quote",label:"Quotes"},{value:"reaction",label:"Reactions"},{value:"repost",label:"Reposts"},{value:"zap",label:"Zaps"},{value:"invite",label:"Invites"}];function n(m){e.setFilter(m)}var l=se(),f=c(l),u=c(f),b=p(c(u),2);U(b,21,()=>a,rt,(m,x)=>{const y=N(()=>e.counts[s(x).value]);var k=ie();k.__click=[ne,n,x];var w=c(k),A=p(w);{var E=g=>{var I=re(),T=c(I);i(I),M(()=>z(T,`(${s(y)??""})`)),h(g,I)};P(A,g=>{s(y)>0&&g(E)})}i(k),M(()=>{ht(k,1,`px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-colors ${e.filter===s(x).value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`),z(w,`${s(x).label??""} `)}),h(m,k)}),i(b),i(u),i(f);var _=p(f,2),d=c(_);{var v=m=>{var x=oe();h(m,x)},r=m=>{var x=R(),y=S(x);U(y,17,()=>e.notifications,k=>k.id,(k,w)=>{ae(k,{get notification(){return s(w)},get targetEventsCache(){return e.targetEventsCache}})}),h(m,x)};P(d,m=>{e.notifications.length===0?m(v):m(r,!1)})}i(_),i(l),h(o,l),V()}L(["click"]);export{pe as component};
