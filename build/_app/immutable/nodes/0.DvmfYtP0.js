import{d as He,f as n,a as t,s as Pe,c as F,t as be,i as we,j as Ke}from"../chunks/DNmf0A2m.js";import{p as De,c as Se,e as u,r as l,d as i,g as e,t as oe,f,b as ie,y as S,a as re,s as c,u as ut,aJ as it,x as Dt,aH as st,ax as gt}from"../chunks/DpkVnRja.js";import{i as C}from"../chunks/Btb_Ey2R.js";import{s as Ge}from"../chunks/CszMzaRi.js";import{M as yt,D as $t,a as lt,R as Pt,b as vt,c as Qe,d as ft,t as mt,H as St,m as Lt,n as Nt,o as Tt,p as zt}from"../chunks/ExIc70cS.js";import{Q as Bt,n as _t,K as Ht,R as Be,s as Ze,S as Et,T as Ot}from"../chunks/QTLWRGLp.js";import{r as Ue,i as Yt,g as Rt,a as Vt}from"../chunks/CJuHvAJe.js";import{_ as Je}from"../chunks/PPVm8Dsz.js";import{e as et,i as Wt}from"../chunks/DD8s4tVe.js";import{h as Ft}from"../chunks/CIbUVdXF.js";import{a as Te,e as Oe,c as Ie,b as Xt}from"../chunks/Ci0hv7jC.js";import{t as bt}from"../chunks/BHGJODx2.js";import{c as b}from"../chunks/CSx53_lc.js";import{g as qt}from"../chunks/BFZgCa8b.js";import{l as xe}from"../chunks/Det8CiMi.js";import{D as xt,a as dt}from"../chunks/B-DQEjp8.js";import{D as tt}from"../chunks/DuCXCqgL.js";import{D as ct,a as rt}from"../chunks/BJCNLf3C.js";import{B as _e,I as kt}from"../chunks/OHIcQ-QL.js";import{D as Kt}from"../chunks/BGQ6BdS-.js";import{p as Me}from"../chunks/f_qAQkK6.js";import{c as Mt,a as We}from"../chunks/DHn-jlDO.js";import{P as Ut,a as Jt,U as Zt,b as Gt}from"../chunks/CNBK5u22.js";import{a as Qt,c as ot,U as nt}from"../chunks/BYRURnlO.js";import{E as Ve}from"../chunks/DSAIpCcp.js";import{P as er}from"../chunks/MZ4igXhu.js";const tr=!1,rr=!0,or=!1,Va=Object.freeze(Object.defineProperty({__proto__:null,csr:rr,prerender:or,ssr:tr},Symbol.toStringTag,{value:"Module"}));Ue("en",()=>Je(()=>import("../chunks/D8fVgioR.js"),[],import.meta.url));Ue("es",()=>Je(()=>import("../chunks/De25zdAk.js"),[],import.meta.url));Ue("fa",()=>Je(()=>import("../chunks/BmxQu54h.js"),[],import.meta.url));Ue("km",()=>Je(()=>import("../chunks/22YRxeh6.js"),[],import.meta.url));Ue("sn",()=>Je(()=>import("../chunks/CN3xi9pn.js"),[],import.meta.url));function ar(m){Yt({fallbackLocale:"en",initialLocale:m||Rt()})}var sr=n('<div><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> <span class="text-sm font-medium"> </span> <button class="ml-2 hover:opacity-70 transition-opacity" aria-label="Dismiss"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),nr=n('<div class="fixed top-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none"></div>');function ir(m,r){De(r,!0);function x(v){switch(v){case"success":return"bg-green-600 border-green-500";case"error":return"bg-red-600 border-red-500";case"info":default:return"bg-blue-600 border-blue-500"}}function o(v){switch(v){case"success":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />';case"error":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />';case"info":default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />'}}var g=nr();et(g,21,()=>bt.messages,v=>v.id,(v,a)=>{var _=sr(),w=u(_),L=u(w);Ft(L,()=>o(e(a).type),!0),l(w);var O=i(w,2),j=u(O,!0);l(O);var P=i(O,2);P.__click=()=>bt.dismiss(e(a).id),l(_),oe(A=>{Te(_,1,`pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg text-foreground animate-in slide-in-from-top duration-300 ${A??""}`),Pe(j,e(a).message)},[()=>x(e(a).type)]),t(v,_)}),l(g),t(m,g),Se()}He(["click"]);const lr=[["path",{d:"M22 8C22 8 18 14 12 14C6 14 2 8 2 8",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M15 13.5L16.5 16",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M20 11L22 13",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}],["path",{d:"M2 13L4 11",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"3"}],["path",{d:"M9 13.5L7.5 16",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"4"}]];var dr=n("<!> <!>",1),cr=we('Start Your Journey <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>',1),ur=n('Already have a Nostr account? <span class="font-semibold underline ml-1">Sign in here</span>',1),vr=n('<div class="relative"><div class="absolute inset-x-0 -mx-6 -mt-6 h-32 bg-primary rounded-t-lg opacity-90"></div> <div class="relative pt-16"><!> <div class="space-y-4 mb-8 mt-6"><div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Own Your Voice</h3> <p class="text-sm text-muted-foreground">No censorship. No gatekeepers. Your content, your control, forever.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Earn From Your Stories</h3> <p class="text-sm text-muted-foreground">Get paid instantly in Bitcoin for valuable content. No banks, no fees.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Connect With Your Community</h3> <p class="text-sm text-muted-foreground">Trade, share, and build with people who understand your journey.</p></div></div></div> <div class="space-y-3"><!> <!></div></div></div>'),fr=n("<!> <!>",1),mr=n('<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm"> </div>'),hr=we('<svg class="w-5 h-5 animate-spin ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>'),pr=n('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Browser Extension (NIP-07)</div> <div class="text-sm text-muted-foreground">Use Alby, nos2x, or similar</div></div> <!>',1),gr=n('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Private Key</div> <div class="text-sm text-muted-foreground">Login with your nsec or hex key</div></div>',1),_r=n('<span class="font-semibold underline">Create a new account</span>'),br=n(`<!> <!> <div class="relative my-6"><div class="absolute inset-0 flex items-center"><span class="w-full border-t border-border"></span></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-background px-2 text-muted-foreground">Don't have an account?</span></div></div> <!>`,1),xr=we('<svg class="w-4 h-4 animate-spin mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Logging in...',1),kr=we('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> Login',1),wr=n('<div class="space-y-4"><div class="p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-400 text-sm flex gap-2"><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div>Enter your private key (nsec or hex format). This will be stored locally in your browser.</div></div> <!> <div class="flex gap-2"><!> <!></div></div>'),yr=n('<!> <div class="space-y-3 pt-4"><!> <!></div>',1),$r=n("<!> <!>",1),Pr=we('Start Your Journey <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>',1),Mr=n('Already have a Nostr account? <span class="font-semibold underline ml-1">Sign in here</span>',1),Cr=n('<div class="space-y-3"><!> <!></div>'),Ar=n('<div class="relative"><div class="relative"><!> <div class="space-y-4 mb-8 mt-6 px-4"><div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Own Your Voice</h3> <p class="text-sm text-muted-foreground">No censorship. No gatekeepers. Your content, your control, forever.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Earn From Your Stories</h3> <p class="text-sm text-muted-foreground">Get paid instantly in Bitcoin for valuable content. No banks, no fees.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Connect With Your Community</h3> <p class="text-sm text-muted-foreground">Trade, share, and build with people who understand your journey.</p></div></div></div> <!></div></div>'),jr=n("<!> <!>",1),Ir=n('<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm"> </div>'),Dr=we('<svg class="w-5 h-5 animate-spin ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>'),Sr=n('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Browser Extension (NIP-07)</div> <div class="text-sm text-muted-foreground">Use Alby, nos2x, or similar</div></div> <!>',1),Lr=n('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Private Key</div> <div class="text-sm text-muted-foreground">Login with your nsec or hex key</div></div>',1),Nr=n('<span class="font-semibold underline">Create a new account</span>'),Tr=n(`<!> <!> <div class="relative my-6"><div class="absolute inset-0 flex items-center"><span class="w-full border-t border-border"></span></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-background px-2 text-muted-foreground">Don't have an account?</span></div></div> <!>`,1),zr=n('<div class="space-y-4"><div class="p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-400 text-sm flex gap-2"><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div>Enter your private key (nsec or hex format). This will be stored locally in your browser.</div></div> <!></div>'),Br=we('<svg class="w-4 h-4 animate-spin mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Logging in...',1),Hr=we('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> Login',1),Er=n('<div class="flex gap-2"><!> <!></div>'),Or=n('<!> <div class="space-y-3 pt-4 px-4"><!> <!></div> <!>',1);function Yr(m,r){De(r,!0);const x=new yt("(min-width: 768px)");let o=re(!1),g=re(null),v=re(""),a=re("");async function _(){if(!window.nostr){c(a,"No Nostr extension found. Please install Alby or nos2x.");return}try{c(o,!0),c(a,"");const d=new Bt;await _t.$sessions.login(d),xe.show=!1}catch(d){c(a,d instanceof Error?d.message:"Failed to login",!0)}finally{c(o,!1)}}async function w(){if(!e(v).trim()){c(a,"Please enter your nsec");return}try{c(o,!0),c(a,"");const d=new Ht(e(v).trim());await _t.$sessions.login(d),xe.show=!1,c(v,"")}catch(d){c(a,d instanceof Error?d.message:"Invalid nsec",!0)}finally{c(o,!1)}}function L(){xe.show=!1,c(g,null),c(v,""),c(a,"")}function O(){L(),qt("/onboarding")}var j=F(),P=f(j);{var A=d=>{var y=F(),h=f(y);b(h,()=>Pt,(M,ee)=>{ee(M,{get open(){return xe.show},set open(te){xe.show=te},children:(te,U)=>{var N=F(),ce=f(N);{let ue=ie(()=>xe.state==="signup"?"max-w-lg":"max-w-md");b(ce,()=>$t,(J,Y)=>{Y(J,{get class(){return e(ue)},onClose:()=>xe.show=!1,children:(le,ae)=>{var z=F(),Z=f(z);{var de=I=>{var T=vr(),X=i(u(T),2),s=u(X);b(s,()=>ct,(D,W)=>{W(D,{children:(E,p)=>{var $=dr(),q=f($);b(q,()=>lt,(G,Q)=>{Q(G,{class:"text-3xl text-center !font-black font-serif",children:(ne,K)=>{S();var fe=be("Your Voice Matters");t(ne,fe)},$$slots:{default:!0}})});var se=i(q,2);b(se,()=>xt,(G,Q)=>{Q(G,{class:"text-center text-lg",children:(ne,K)=>{S();var fe=be("Join a global community where every story counts");t(ne,fe)},$$slots:{default:!0}})}),t(E,$)},$$slots:{default:!0}})});var H=i(s,4),R=u(H);_e(R,{onclick:O,class:"w-full py-6 text-lg bg-primary hover:opacity-90",children:(D,W)=>{S();var E=cr();S(),t(D,E)},$$slots:{default:!0}});var V=i(R,2);_e(V,{variant:"ghost",onclick:()=>xe.state="login",class:"w-full",children:(D,W)=>{S();var E=ur();S(),t(D,E)},$$slots:{default:!0}}),l(H),l(X),l(T),t(I,T)},B=I=>{var T=yr(),X=f(T);b(X,()=>ct,(E,p)=>{p(E,{children:($,q)=>{var se=fr(),G=f(se);b(G,()=>lt,(ne,K)=>{K(ne,{children:(fe,ve)=>{S();var he=be("Welcome Back");t(fe,he)},$$slots:{default:!0}})});var Q=i(G,2);b(Q,()=>xt,(ne,K)=>{K(ne,{children:(fe,ve)=>{S();var he=be("Sign in with your existing Nostr account");t(fe,he)},$$slots:{default:!0}})}),t($,se)},$$slots:{default:!0}})});var s=i(X,2),H=u(s);{var R=E=>{var p=mr(),$=u(p,!0);l(p),oe(()=>Pe($,e(a))),t(E,p)};C(H,E=>{e(a)&&E(R)})}var V=i(H,2);{var D=E=>{var p=br(),$=f(p);_e($,{variant:"outline",onclick:()=>{c(g,"nip07"),_()},get disabled(){return e(o)},class:"w-full p-4 h-auto justify-start",children:(G,Q)=>{var ne=pr(),K=i(f(ne),4);{var fe=ve=>{var he=hr();t(ve,he)};C(K,ve=>{e(o)&&e(g)==="nip07"&&ve(fe)})}t(G,ne)},$$slots:{default:!0}});var q=i($,2);_e(q,{variant:"outline",onclick:()=>c(g,"nsec"),get disabled(){return e(o)},class:"w-full p-4 h-auto justify-start",children:(G,Q)=>{var ne=gr();S(2),t(G,ne)},$$slots:{default:!0}});var se=i(q,4);_e(se,{variant:"ghost",onclick:()=>xe.state="signup",class:"w-full",children:(G,Q)=>{var ne=_r();t(G,ne)},$$slots:{default:!0}}),t(E,p)},W=E=>{var p=F(),$=f(p);{var q=se=>{var G=wr(),Q=i(u(G),2);kt(Q,{type:"password",placeholder:"nsec1... or hex key",get disabled(){return e(o)},onkeydown:ve=>{ve.key==="Enter"&&e(v)&&w()},get value(){return e(v)},set value(ve){c(v,ve,!0)}});var ne=i(Q,2),K=u(ne);_e(K,{variant:"outline",onclick:()=>c(g,null),get disabled(){return e(o)},class:"flex-1",children:(ve,he)=>{S();var ke=be("Back");t(ve,ke)},$$slots:{default:!0}});var fe=i(K,2);{let ve=ie(()=>e(o)||!e(v).trim());_e(fe,{onclick:w,get disabled(){return e(ve)},class:"flex-1",children:(he,ke)=>{var ye=F(),Ye=f(ye);{var Fe=Le=>{var Ce=xr();S(),t(Le,Ce)},Xe=Le=>{var Ce=kr();S(),t(Le,Ce)};C(Ye,Le=>{e(o)?Le(Fe):Le(Xe,!1)})}t(he,ye)},$$slots:{default:!0}})}l(ne),l(G),t(se,G)};C($,se=>{e(g)==="nsec"&&se(q)},!0)}t(E,p)};C(V,E=>{e(g)?E(W,!1):E(D)})}l(s),t(I,T)};C(Z,I=>{xe.state==="signup"?I(de):I(B,!1)})}t(le,z)},$$slots:{default:!0}})})}t(te,N)},$$slots:{default:!0}})}),t(d,y)},k=d=>{var y=F(),h=f(y);b(h,()=>ft,(M,ee)=>{ee(M,{get open(){return xe.show},set open(te){xe.show=te},children:(te,U)=>{var N=F(),ce=f(N);b(ce,()=>vt,(ue,J)=>{J(ue,{onClose:()=>xe.show=!1,children:(Y,le)=>{var ae=F(),z=f(ae);{var Z=B=>{var I=Ar(),T=u(I),X=u(T);b(X,()=>rt,(H,R)=>{R(H,{class:"text-left border-b border-border bg-primary/10 pb-6",children:(V,D)=>{var W=$r(),E=f(W);b(E,()=>Qe,($,q)=>{q($,{class:"text-3xl !font-black font-serif",children:(se,G)=>{S();var Q=be("Your Voice Matters");t(se,Q)},$$slots:{default:!0}})});var p=i(E,2);b(p,()=>dt,($,q)=>{q($,{class:"text-lg",children:(se,G)=>{S();var Q=be("Join a global community where every story counts");t(se,Q)},$$slots:{default:!0}})}),t(V,W)},$$slots:{default:!0}})});var s=i(X,4);b(s,()=>tt,(H,R)=>{R(H,{class:"pt-2",children:(V,D)=>{var W=Cr(),E=u(W);_e(E,{onclick:O,class:"w-full py-6 text-lg bg-primary hover:opacity-90",children:($,q)=>{S();var se=Pr();S(),t($,se)},$$slots:{default:!0}});var p=i(E,2);_e(p,{variant:"ghost",onclick:()=>xe.state="login",class:"w-full",children:($,q)=>{S();var se=Mr();S(),t($,se)},$$slots:{default:!0}}),l(W),t(V,W)},$$slots:{default:!0}})}),l(T),l(I),t(B,I)},de=B=>{var I=Or(),T=f(I);b(T,()=>rt,(p,$)=>{$(p,{class:"text-left",children:(q,se)=>{var G=jr(),Q=f(G);b(Q,()=>Qe,(K,fe)=>{fe(K,{children:(ve,he)=>{S();var ke=be("Welcome Back");t(ve,ke)},$$slots:{default:!0}})});var ne=i(Q,2);b(ne,()=>dt,(K,fe)=>{fe(K,{children:(ve,he)=>{S();var ke=be("Sign in with your existing Nostr account");t(ve,ke)},$$slots:{default:!0}})}),t(q,G)},$$slots:{default:!0}})});var X=i(T,2),s=u(X);{var H=p=>{var $=Ir(),q=u($,!0);l($),oe(()=>Pe(q,e(a))),t(p,$)};C(s,p=>{e(a)&&p(H)})}var R=i(s,2);{var V=p=>{var $=Tr(),q=f($);_e(q,{variant:"outline",onclick:()=>{c(g,"nip07"),_()},get disabled(){return e(o)},class:"w-full p-4 h-auto justify-start",children:(Q,ne)=>{var K=Sr(),fe=i(f(K),4);{var ve=he=>{var ke=Dr();t(he,ke)};C(fe,he=>{e(o)&&e(g)==="nip07"&&he(ve)})}t(Q,K)},$$slots:{default:!0}});var se=i(q,2);_e(se,{variant:"outline",onclick:()=>c(g,"nsec"),get disabled(){return e(o)},class:"w-full p-4 h-auto justify-start",children:(Q,ne)=>{var K=Lr();S(2),t(Q,K)},$$slots:{default:!0}});var G=i(se,4);_e(G,{variant:"ghost",onclick:()=>xe.state="signup",class:"w-full",children:(Q,ne)=>{var K=Nr();t(Q,K)},$$slots:{default:!0}}),t(p,$)},D=p=>{var $=F(),q=f($);{var se=G=>{var Q=zr(),ne=i(u(Q),2);kt(ne,{type:"password",placeholder:"nsec1... or hex key",get disabled(){return e(o)},onkeydown:K=>{K.key==="Enter"&&e(v)&&w()},get value(){return e(v)},set value(K){c(v,K,!0)}}),l(Q),t(G,Q)};C(q,G=>{e(g)==="nsec"&&G(se)},!0)}t(p,$)};C(R,p=>{e(g)?p(D,!1):p(V)})}l(X);var W=i(X,2);{var E=p=>{var $=F(),q=f($);b(q,()=>tt,(se,G)=>{G(se,{class:"pt-2",children:(Q,ne)=>{var K=Er(),fe=u(K);_e(fe,{variant:"outline",onclick:()=>c(g,null),get disabled(){return e(o)},class:"flex-1",children:(he,ke)=>{S();var ye=be("Back");t(he,ye)},$$slots:{default:!0}});var ve=i(fe,2);{let he=ie(()=>e(o)||!e(v).trim());_e(ve,{onclick:w,get disabled(){return e(he)},class:"flex-1",children:(ke,ye)=>{var Ye=F(),Fe=f(Ye);{var Xe=Ce=>{var qe=Br();S(),t(Ce,qe)},Le=Ce=>{var qe=Hr();S(),t(Ce,qe)};C(Fe,Ce=>{e(o)?Ce(Xe):Ce(Le,!1)})}t(ke,Ye)},$$slots:{default:!0}})}l(K),t(Q,K)},$$slots:{default:!0}})}),t(p,$)};C(W,p=>{e(g)==="nsec"&&p(E)})}t(B,I)};C(z,B=>{xe.state==="signup"?B(Z):B(de,!1)})}t(Y,ae)},$$slots:{default:!0}})}),t(te,N)},$$slots:{default:!0}})}),t(d,y)};C(P,d=>{x.current?d(A):d(k,!1)})}t(m,j),Se()}var Rr=n('<div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <!></div>'),Vr=we('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Authenticate',1),Wr=n("<!> <!>",1),Fr=n(`<div class="space-y-4"><div><p class="text-muted-foreground mb-2">The relay <strong class="font-semibold text-foreground"> </strong> is requesting authentication.</p> <p class="text-sm text-muted-foreground">This will create a signed authentication event using your Nostr identity. Your decision will be remembered for this relay.</p></div> <div class="p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"><div class="flex gap-2"><svg class="w-5 h-5 flex-shrink-0 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-blue-800 dark:text-blue-300"><strong class="font-semibold">Why authenticate?</strong> <p class="mt-1">Some relays require authentication to access content or reduce spam. This proves you're a real Nostr user.</p></div></div></div></div> <!>`,1),Xr=n("<!> <!>",1),qr=n('<div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <!></div>'),Kr=we('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Authenticate',1),Ur=n('<div class="flex gap-3"><!> <!></div>'),Jr=n(`<div class="space-y-4 px-4"><div><p class="text-muted-foreground mb-2">The relay <strong class="font-semibold text-foreground"> </strong> is requesting authentication.</p> <p class="text-sm text-muted-foreground">This will create a signed authentication event using your Nostr identity. Your decision will be remembered for this relay.</p></div> <div class="p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"><div class="flex gap-2"><svg class="w-5 h-5 flex-shrink-0 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-blue-800 dark:text-blue-300"><strong class="font-semibold">Why authenticate?</strong> <p class="mt-1">Some relays require authentication to access content or reduce spam. This proves you're a real Nostr user.</p></div></div></div></div> <!>`,1),Zr=n("<!> <!>",1);function Gr(m,r){De(r,!0);const x=new yt("(min-width: 768px)");function o(){Be.confirm()}function g(){Be.reject()}function v(){Be.reject()}const a=ie(()=>Be.show&&!!Be.request);var _=F(),w=f(_);{var L=j=>{var P=F(),A=f(P);b(A,()=>Pt,(k,d)=>{d(k,{get open(){return e(a)},onOpenChange:y=>{y||v()},children:(y,h)=>{var M=F(),ee=f(M);b(ee,()=>$t,(te,U)=>{U(te,{class:"max-w-md",children:(N,ce)=>{var ue=Xr(),J=f(ue);b(J,()=>ct,(ae,z)=>{z(ae,{children:(Z,de)=>{var B=Rr(),I=i(u(B),2);b(I,()=>lt,(T,X)=>{X(T,{children:(s,H)=>{S();var R=be("Relay Authentication");t(s,R)},$$slots:{default:!0}})}),l(B),t(Z,B)},$$slots:{default:!0}})});var Y=i(J,2);{var le=ae=>{var z=Fr(),Z=f(z),de=u(Z),B=u(de),I=i(u(B)),T=u(I,!0);l(I),S(),l(B),S(2),l(de),S(2),l(Z);var X=i(Z,2);b(X,()=>Kt,(s,H)=>{H(s,{class:"flex gap-3 sm:space-x-0",children:(R,V)=>{var D=Wr(),W=f(D);_e(W,{variant:"outline",onclick:g,class:"flex-1",children:(p,$)=>{S();var q=be("Reject");t(p,q)},$$slots:{default:!0}});var E=i(W,2);_e(E,{onclick:o,class:"flex-1",children:(p,$)=>{var q=Vr();S(),t(p,q)},$$slots:{default:!0}}),t(R,D)},$$slots:{default:!0}})}),oe(()=>Pe(T,Be.request.relayUrl)),t(ae,z)};C(Y,ae=>{Be.request&&ae(le)})}t(N,ue)},$$slots:{default:!0}})}),t(y,M)},$$slots:{default:!0}})}),t(j,P)},O=j=>{var P=F(),A=f(P);b(A,()=>ft,(k,d)=>{d(k,{get open(){return e(a)},onOpenChange:y=>{y||v()},children:(y,h)=>{var M=F(),ee=f(M);b(ee,()=>vt,(te,U)=>{U(te,{children:(N,ce)=>{var ue=Zr(),J=f(ue);b(J,()=>rt,(ae,z)=>{z(ae,{class:"text-left",children:(Z,de)=>{var B=qr(),I=i(u(B),2);b(I,()=>Qe,(T,X)=>{X(T,{children:(s,H)=>{S();var R=be("Relay Authentication");t(s,R)},$$slots:{default:!0}})}),l(B),t(Z,B)},$$slots:{default:!0}})});var Y=i(J,2);{var le=ae=>{var z=Jr(),Z=f(z),de=u(Z),B=u(de),I=i(u(B)),T=u(I,!0);l(I),S(),l(B),S(2),l(de),S(2),l(Z);var X=i(Z,2);b(X,()=>tt,(s,H)=>{H(s,{class:"pt-2",children:(R,V)=>{var D=Ur(),W=u(D);_e(W,{variant:"outline",onclick:g,class:"flex-1",children:(p,$)=>{S();var q=be("Reject");t(p,q)},$$slots:{default:!0}});var E=i(W,2);_e(E,{onclick:o,class:"flex-1",children:(p,$)=>{var q=Kr();S(),t(p,q)},$$slots:{default:!0}}),l(D),t(R,D)},$$slots:{default:!0}})}),oe(()=>Pe(T,Be.request.relayUrl)),t(ae,z)};C(Y,ae=>{Be.request&&ae(le)})}t(N,ue)},$$slots:{default:!0}})}),t(y,M)},$$slots:{default:!0}})}),t(j,P)};C(w,j=>{x.current?j(L):j(O,!1)})}t(m,_),Se()}function Qr(){const m=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(m)}function eo(){const m=window.navigator.userAgent.toLowerCase();return/android/.test(m)}function to(){return"standalone"in window.navigator?window.navigator.standalone===!0:!!(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches)}function ro(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(window.navigator.userAgent.toLowerCase())}class oo{#e=re(null);get deferredPrompt(){return e(this.#e)}set deferredPrompt(r){c(this.#e,r,!0)}#t=re(!1);get isInstallable(){return e(this.#t)}set isInstallable(r){c(this.#t,r,!0)}#r=re(!1);get isInstalled(){return e(this.#r)}set isInstalled(r){c(this.#r,r,!0)}#o=re(!1);get isIOSDevice(){return e(this.#o)}set isIOSDevice(r){c(this.#o,r,!0)}#a=re(!1);get isAndroidDevice(){return e(this.#a)}set isAndroidDevice(r){c(this.#a,r,!0)}#s=re(!1);get isMobileDevice(){return e(this.#s)}set isMobileDevice(r){c(this.#s,r,!0)}#n=re(!1);get showPrompt(){return e(this.#n)}set showPrompt(r){c(this.#n,r,!0)}#i=re(!1);get userDismissed(){return e(this.#i)}set userDismissed(r){c(this.#i,r,!0)}#l=re(!1);get neverAskAgain(){return e(this.#l)}set neverAskAgain(r){c(this.#l,r,!0)}constructor(){if(this.isIOSDevice=Qr(),this.isAndroidDevice=eo(),this.isMobileDevice=ro(),this.isInstalled=to(),this.loadPreferences(),this.isInstalled){this.showPrompt=!1;return}window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),this.deferredPrompt=r,this.isInstallable=!0,!this.neverAskAgain&&!this.userDismissed&&setTimeout(()=>{this.showPrompt=!0},1e4)}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.isInstallable=!1,this.showPrompt=!1,this.deferredPrompt=null,console.log("PWA was installed successfully")}),this.isIOSDevice&&!this.isInstalled&&!this.neverAskAgain&&setTimeout(()=>{this.showPrompt=!0},1e4)}async promptInstall(){if(!this.deferredPrompt){console.warn("Install prompt not available");return}await this.deferredPrompt.prompt(),(await this.deferredPrompt.userChoice).outcome==="accepted"?(console.log("User accepted the install prompt"),this.isInstalled=!0):(console.log("User dismissed the install prompt"),this.userDismissed=!0,this.savePreferences()),this.deferredPrompt=null,this.isInstallable=!1,this.showPrompt=!1}dismiss(){this.showPrompt=!1,this.userDismissed=!0,this.savePreferences()}dismissForever(){this.showPrompt=!1,this.neverAskAgain=!0,this.userDismissed=!0,this.savePreferences()}reset(){this.userDismissed=!1,this.neverAskAgain=!1,this.showPrompt=!1,this.savePreferences()}savePreferences(){try{localStorage.setItem("pwa-user-dismissed",JSON.stringify(this.userDismissed)),localStorage.setItem("pwa-never-ask",JSON.stringify(this.neverAskAgain))}catch(r){console.error("Failed to save PWA preferences:",r)}}loadPreferences(){try{const r=localStorage.getItem("pwa-user-dismissed"),x=localStorage.getItem("pwa-never-ask");r!==null&&(this.userDismissed=JSON.parse(r)),x!==null&&(this.neverAskAgain=JSON.parse(x))}catch(r){console.error("Failed to load PWA preferences:",r)}}}const Ne=new oo,ao=m=>m;function so(m){const r=m-1;return r*r*r+1}function wt(m){const r=typeof m=="string"&&m.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[m,"px"]}function Ct(m,{delay:r=0,duration:x=400,easing:o=ao}={}){const g=+getComputedStyle(m).opacity;return{delay:r,duration:x,easing:o,css:v=>`opacity: ${v*g}`}}function no(m,{delay:r=0,duration:x=400,easing:o=so,x:g=0,y:v=0,opacity:a=0}={}){const _=getComputedStyle(m),w=+_.opacity,L=_.transform==="none"?"":_.transform,O=w*(1-a),[j,P]=wt(g),[A,k]=wt(v);return{delay:r,duration:x,easing:o,css:(d,y)=>`
			transform: ${L} translate(${(1-d)*j}${P}, ${(1-d)*A}${k});
			opacity: ${w-O*y}`}}var io=n('<div class="fixed bottom-20 md:bottom-4 left-4 right-4 z-50"><div class="bg-gradient-to-r bg-primary opacity-90 text-foreground rounded-2xl shadow-2xl p-4 max-w-md mx-auto"><button class="absolute top-3 right-3 p-1 hover:bg-white/20 rounded-full transition-colors" aria-label="Dismiss"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <div class="flex items-start gap-4 mb-4"><div class="flex-shrink-0 w-14 h-14 bg-card rounded-2xl p-2 shadow-lg"><img src="/icons/manifest-icon-192.png" alt="Agora icon" class="w-full h-full"/></div> <div class="flex-1 pr-6"><h3 class="text-lg font-bold mb-1">Install Agora</h3> <p class="text-sm text-foreground/90">Get the full app experience with offline access and quick launch from your home screen.</p></div></div> <div class="flex gap-2"><button class="flex-1 bg-card text-primary font-semibold py-3 px-4 rounded-xl hover:bg-primary-50 transition-colors"><!></button> <button class="px-4 py-3 text-sm text-foreground/80 hover:text-foreground hover:bg-white/10 rounded-xl transition-colors">Not Now</button></div></div></div>'),lo=n("<!> <!>",1),co=n('<button class="w-full bg-primary hover:bg-accent-dark text-foreground font-semibold py-3 px-4 rounded-xl transition-colors">Got it!</button>'),uo=n(`<!> <div class="px-4 pb-4 space-y-6"><div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">1</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Tap the Share button</h3> <p class="text-sm text-muted-foreground mb-2">Look for the share icon in Safari's bottom menu bar</p> <div class="inline-flex items-center gap-2 bg-muted px-3 py-2 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="currentColor" viewBox="0 0 24 24"><path d="M16.5 6.5v-1.75a.75.75 0 00-1.5 0V6.5h-6V4.75a.75.75 0 00-1.5 0V6.5h-1.75A2.75 2.75 0 003 9.25v9A2.75 2.75 0 005.75 21h12.5A2.75 2.75 0 0021 18.25v-9A2.75 2.75 0 0018.25 6.5H16.5zm-.75 4.25a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5zm-4.5 0a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5zm-4.5 0a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5z"></path></svg> <span class="text-muted-foreground text-sm">Share</span></div></div></div> <div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">2</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Select "Add to Home Screen"</h3> <p class="text-sm text-muted-foreground">Scroll down in the share menu and tap "Add to Home Screen"</p></div></div> <div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">3</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Confirm installation</h3> <p class="text-sm text-muted-foreground">Tap "Add" in the top right corner to complete the installation</p></div></div></div> <!>`,1),vo=n("<!> <!>",1);function fo(m,r){De(r,!0);const x=ie(()=>Ne.showPrompt&&Ne.isMobileDevice&&!Ne.isInstalled);let o=re(!1);function g(){Ne.isAndroidDevice&&Ne.deferredPrompt?Ne.promptInstall():Ne.isIOSDevice&&c(o,!0)}function v(){Ne.dismiss()}function a(){Ne.dismissForever()}function _(){c(o,!1),Ne.dismiss()}var w=vo(),L=f(w);{var O=P=>{var A=io(),k=u(A),d=u(k);d.__click=v;var y=i(d,4),h=u(y);h.__click=g;var M=u(h);{var ee=N=>{var ce=be("View Instructions");t(N,ce)},te=N=>{var ce=be("Install Now");t(N,ce)};C(M,N=>{Ne.isIOSDevice?N(ee):N(te,!1)})}l(h);var U=i(h,2);U.__click=a,l(y),l(k),l(A),mt(3,A,()=>no,()=>({y:100,duration:300})),t(P,A)};C(L,P=>{e(x)&&!e(o)&&P(O)})}var j=i(L,2);b(j,()=>ft,(P,A)=>{A(P,{get open(){return e(o)},set open(k){c(o,k,!0)},children:(k,d)=>{var y=F(),h=f(y);b(h,()=>vt,(M,ee)=>{ee(M,{children:(te,U)=>{var N=uo(),ce=f(N);b(ce,()=>rt,(J,Y)=>{Y(J,{class:"text-left",children:(le,ae)=>{var z=lo(),Z=f(z);b(Z,()=>Qe,(B,I)=>{I(B,{children:(T,X)=>{S();var s=be("Install Agora on iOS");t(T,s)},$$slots:{default:!0}})});var de=i(Z,2);b(de,()=>dt,(B,I)=>{I(B,{children:(T,X)=>{S();var s=be("Follow these steps to add Agora to your home screen");t(T,s)},$$slots:{default:!0}})}),t(le,z)},$$slots:{default:!0}})});var ue=i(ce,4);b(ue,()=>tt,(J,Y)=>{Y(J,{children:(le,ae)=>{var z=co();z.__click=_,t(le,z)},$$slots:{default:!0}})}),t(te,N)},$$slots:{default:!0}})}),t(k,y)},$$slots:{default:!0}})}),t(m,w),Se()}He(["click"]);var mo=n('<div class="splash-screen svelte-1yxrgyh"><div class="splash-content svelte-1yxrgyh"><div class="logo svelte-1yxrgyh"><img src="/logo.svg" alt="Agora" class="svelte-1yxrgyh"/></div></div></div>');function ho(m,r){let x=Me(r,"visible",3,!0);var o=F(),g=f(o);{var v=a=>{var _=mo();mt(3,_,()=>Ct,()=>({duration:300})),t(a,_)};C(g,a=>{x()&&a(v)})}t(m,o)}var po=n('<div style="display: contents;"><!></div>');function go(m,r){De(r,!0);let x=re(void 0);ut(()=>{const a=document.createElement("div");return a.style.position="relative",a.style.zIndex="9999",document.body.appendChild(a),c(x,a,!0),()=>{document.body.contains(a)&&document.body.removeChild(a)}});var o=F(),g=f(o);{var v=a=>{var _=po(),w=u(_);Ge(w,()=>r.children),l(_),t(a,_)};C(g,a=>{e(x)&&a(v)})}t(m,o),Se()}let _o=Zt;var bo=n("<span> </span>"),xo=n("<span><!> <span>@<!></span></span>"),ko=n("<!> <!>",1);function wo(m,r){De(r,!0);let x=Me(r,"class",3,"");const o=it(Mt),g=Qt(()=>({user:r.bech32}),r.ndk),v=ie(()=>g.user?.pubkey);let a=re(!1),_=null;function w(){_&&clearTimeout(_),_=setTimeout(()=>{c(a,!0)},200)}function L(){_&&clearTimeout(_),_=setTimeout(()=>{c(a,!1)},150)}function O(d){o?.onUserClick&&e(v)&&(d.stopPropagation(),o.onUserClick(e(v)))}var j=F(),P=f(j);{var A=d=>{var y=bo(),h=u(y);l(y),oe((M,ee)=>{Te(y,1,M),Pe(h,`@${ee??""}...`)},[()=>Oe(ot("inline-flex items-center gap-1 text-primary",x())),()=>r.bech32.slice(0,8)]),t(d,y)},k=d=>{var y=F(),h=f(y);{var M=ee=>{var te=F(),U=f(te);b(U,()=>Gt,(N,ce)=>{ce(N,{get open(){return e(a)},set open(ue){c(a,ue,!0)},children:(ue,J)=>{var Y=ko(),le=f(Y);b(le,()=>Ut,(z,Z)=>{Z(z,{"data-mention-modern":"",class:"inline-flex items-center",onmouseenter:w,onmouseleave:L,children:(de,B)=>{var I=F(),T=f(I);b(T,()=>nt.Root,(X,s)=>{s(X,{get ndk(){return r.ndk},get pubkey(){return e(v)},children:(H,R)=>{var V=xo();V.__click=O,V.__keydown=p=>p.key==="Enter"&&O(p);var D=u(V);b(D,()=>nt.Avatar,(p,$)=>{$(p,{class:"w-5 h-5 inline-block"})});var W=i(D,2),E=i(u(W));b(E,()=>nt.Name,(p,$)=>{$(p,{class:"inline",field:"name"})}),l(W),l(V),oe(p=>{Te(V,1,p),Ie(V,"role",o?.onUserClick?"button":void 0),Ie(V,"tabindex",o?.onUserClick?0:void 0)},[()=>Oe(ot("items-center gap-1.5 text-primary hover:underline cursor-pointer transition-all",x()))]),t(H,V)},$$slots:{default:!0}})}),t(de,I)},$$slots:{default:!0}})});var ae=i(le,2);go(ae,{children:(z,Z)=>{var de=F(),B=f(de);b(B,()=>Jt,(I,T)=>{T(I,{class:"z-50",sideOffset:8,onmouseenter:w,onmouseleave:L,children:(X,s)=>{const H=ie(()=>_o);var R=F(),V=f(R);b(V,()=>e(H),(D,W)=>{W(D,{get ndk(){return r.ndk},get pubkey(){return e(v)}})}),t(X,R)},$$slots:{default:!0}})}),t(z,de)},$$slots:{default:!0}}),t(ue,Y)},$$slots:{default:!0}})}),t(ee,te)};C(h,ee=>{e(v)&&ee(M)},!0)}t(d,y)};C(P,d=>{g?.loading?d(A):d(k,!1)})}t(m,j),Se()}He(["click","keydown"]);We.setMentionComponent(wo,10);He(["click"]);He(["click"]);He(["click"]);var yo=n('<div class="text-sm text-muted-foreground line-clamp-3"><!></div>'),$o=n('<div class="flex flex-row w-full gap-4"><!> <!></div> <!>',1);function Po(m,r){De(r,!0);let x=Me(r,"class",3,"");const o=ie(()=>r.event.content?.trim()||"");var g=F(),v=f(g);{let a=ie(()=>ot("p-3 bg-background rounded-md border border-border/50",x()));b(v,()=>Ve.Root,(_,w)=>{w(_,{"data-event-card-compact":"",get ndk(){return r.ndk},get event(){return r.event},get onUserClick(){return r.onUserClick},get onEventClick(){return r.onEventClick},get onHashtagClick(){return r.onHashtagClick},get onLinkClick(){return r.onLinkClick},get onMediaClick(){return r.onMediaClick},get class(){return e(a)},children:(L,O)=>{var j=$o(),P=f(j),A=u(P);b(A,()=>Ve.Header,(h,M)=>{M(h,{variant:"compact",showAvatar:!0,showTimestamp:!0,avatarSize:"sm"})});var k=i(A,2);b(k,()=>Ve.ReplyIndicator,(h,M)=>{M(h,{})}),l(P);var d=i(P,2);{var y=h=>{var M=yo(),ee=u(M);b(ee,()=>Ve.Content,(te,U)=>{U(te,{})}),l(M),t(h,M)};C(d,h=>{e(o)&&h(y)})}t(L,j)},$$slots:{default:!0}})})}t(m,g),Se()}We.addKind([1,1111],Po,5);function Mo(m,r){return m.replace(/<bech32>/g,r)}var Co=n('<span class="text-sm text-muted-foreground italic">Unknown Event Type</span>'),Ao=n('<div class="alt-tag-container p-3 mb-3 svelte-k4ihqo"><div class="break-all text-foreground font-medium leading-relaxed text-[0.9375rem]"> </div></div>'),jo=n('<img class="w-10 h-10 rounded-md object-cover flex-shrink-0"/>'),Io=n('<div class="text-[0.8125rem] text-muted-foreground mb-2 line-clamp-2"> </div>'),Do=n('<a target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 px-2 py-1 bg-primary text-primary-foreground rounded text-xs font-medium no-underline transition-opacity hover:opacity-80" data-external-link=""> </a>'),So=n('<div class="flex gap-3 p-3 bg-muted rounded-lg border border-border"><!> <div class="flex-1 min-w-0"><div class="text-[0.9375rem] font-semibold text-foreground mb-1"> </div> <!> <div class="flex gap-2 flex-wrap"></div></div></div>'),Lo=n('<div class="mt-4 pt-4 border-t border-border"><div class="text-sm font-semibold text-foreground mb-3">Open in compatible app:</div> <div class="flex flex-col gap-3"></div></div>'),No=n('<div class="py-2 mb-3 border-b border-border"><div class="flex items-center gap-2"><span class="px-3 py-1 bg-primary text-primary-foreground rounded-full text-xs font-semibold uppercase tracking-wide"> </span> <!></div></div> <!> <!> <!>',1),To=n('<div data-generic-card="" class="border border-border rounded-lg bg-card p-3"><!></div>');function zo(m,r){De(r,!0);let x=ie(()=>r.event.tagValue("alt"));const o=r.ndk.$subscribe(()=>{if(r.event?.kind)return{filters:{kinds:[31990],"#k":[r.event.kind.toString()]},closeOnEose:!0}}),g=ie(()=>{const L=new Map;for(const O of o.events){const j=[],P=O.getMatchingTags("web"),A=O.getMatchingTags("ios"),k=O.getMatchingTags("android");P.length>0&&P[0][1]&&j.push({platform:"web",url:P[0][1]}),A.length>0&&A[0][1]&&j.push({platform:"ios",url:A[0][1]}),k.length>0&&k[0][1]&&j.push({platform:"android",url:k[0][1]});let d,y,h;try{const M=JSON.parse(O.content);d=M.name,y=M.about,h=M.picture}catch{}L.set(O.pubkey,{pubkey:O.pubkey,name:d,about:y,picture:h,platforms:j})}return Array.from(L.values())});function v(L){return Mo(L.url,r.event.encode())}function a(L){switch(L){case"web":return"ðŸŒ";case"ios":return"ðŸŽ";case"android":return"ðŸ¤–";default:return"ðŸ“±"}}var _=To(),w=u(_);b(w,()=>Ve.Root,(L,O)=>{O(L,{get ndk(){return r.ndk},get event(){return r.event},children:(j,P)=>{var A=No(),k=f(A),d=u(k),y=u(d),h=u(y);l(y);var M=i(y,2);{var ee=J=>{var Y=Co();t(J,Y)};C(M,J=>{r.event.kind===void 0&&J(ee)})}l(d),l(k);var te=i(k,2);{var U=J=>{var Y=Ao(),le=u(Y),ae=u(le,!0);l(le),l(Y),oe(()=>Pe(ae,e(x))),t(J,Y)};C(te,J=>{e(x)&&J(U)})}var N=i(te,2);b(N,()=>Ve.Header,(J,Y)=>{Y(J,{variant:"full",avatarSize:"md",showTimestamp:!0})});var ce=i(N,2);{var ue=J=>{var Y=Lo(),le=i(u(Y),2);et(le,21,()=>e(g),ae=>ae.pubkey,(ae,z)=>{var Z=So(),de=u(Z);{var B=V=>{var D=jo();oe(()=>{Ie(D,"src",e(z).picture),Ie(D,"alt",e(z).name||"App")}),t(V,D)};C(de,V=>{e(z).picture&&V(B)})}var I=i(de,2),T=u(I),X=u(T,!0);l(T);var s=i(T,2);{var H=V=>{var D=Io(),W=u(D,!0);l(D),oe(()=>Pe(W,e(z).about)),t(V,D)};C(s,V=>{e(z).about&&V(H)})}var R=i(s,2);et(R,21,()=>e(z).platforms,V=>V.platform,(V,D)=>{var W=Do(),E=u(W);l(W),oe((p,$)=>{Ie(W,"href",p),Ie(W,"title",`Open in ${e(D).platform??""}`),Pe(E,`${$??""}
											${e(D).platform??""}`)},[()=>v(e(D)),()=>a(e(D).platform)]),t(V,W)}),l(R),l(I),l(Z),oe(()=>Pe(X,e(z).name||"Nostr App")),t(ae,Z)}),l(le),l(Y),t(J,Y)};C(ce,J=>{e(g).length>0&&J(ue)})}oe(()=>Pe(h,`Kind ${r.event.kind??""}`)),t(j,A)},$$slots:{default:!0}})}),l(_),t(m,_),Se()}We.setFallbackComponent(zo,1);var Bo=n('<div class="relative"><div class="blur-xl opacity-50"><!></div> <button class="absolute inset-0 flex flex-col items-center justify-center bg-black/60 backdrop-blur-sm rounded-lg cursor-pointer transition-all hover:bg-black/70 group" aria-label="Reveal media content"><!> <span class="text-white font-medium text-lg mb-1">Click to view</span> <span class="text-white/70 text-sm px-4 text-center"> </span></button></div>'),Ho=n("<div><!></div>");function Eo(m,r){De(r,!0);let x=Me(r,"class",3,"");const o=it("ndk");it(Mt);let g=re(!1);const v=ie(()=>r.event?r.event.tags.find(h=>h[0]==="content-warning"):null),a=ie(()=>e(v)?e(v)[1]||"Sensitive content":null),_=ie(()=>!!e(v)),w=ie(()=>{if(!r.event||!o)return!0;const h=o.$follows;return!o.$currentUser?.pubkey||!h?!0:h.has(r.event.pubkey)}),L=ie(()=>!!(e(_)&&We.blockNsfw||!e(w)&&o?.$currentUser?.pubkey)),O=ie(()=>e(_)&&We.blockNsfw?e(a)||"Sensitive content":e(w)?"Click to view":"Content from unfollowed user");function j(){c(g,!0)}function P(h){(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),j())}var A=Ho(),k=u(A);{var d=h=>{var M=Bo(),ee=u(M),te=u(ee);Ge(te,()=>r.children,()=>({url:r.url})),l(ee);var U=i(ee,2);U.__click=j;var N=u(U);St(N,{get icon(){return lr},className:"w-12 h-12 text-white/80 mb-2 group-hover:scale-110 transition-transform"});var ce=i(N,4),ue=u(ce,!0);l(ce),l(U),l(M),oe(()=>Pe(ue,e(O))),Ke("keypress",U,P),t(h,M)},y=h=>{var M=F(),ee=f(M);Ge(ee,()=>r.children,()=>({url:r.url,class:x()})),t(h,M)};C(k,h=>{e(L)&&!e(g)?h(d):h(y,!1)})}l(A),oe(()=>Te(A,1,`relative ${x()??""}`)),t(m,A),Se()}He(["click"]);var Oo=we('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg>');function Yo(m,r){let x=Me(r,"class",3,"");var o=Oo();oe(()=>Te(o,0,Oe(x()))),t(m,o)}var Ro=we('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7"></path></svg>');function Vo(m,r){let x=Me(r,"class",3,"");var o=Ro();oe(()=>Te(o,0,Oe(x()))),t(m,o)}var Wo=we('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35M11 8v6M8 11h6"></path></svg>');function Fo(m,r){let x=Me(r,"class",3,"");var o=Wo();oe(()=>Te(o,0,Oe(x()))),t(m,o)}var Xo=we('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35M8 11h6"></path></svg>');function qo(m,r){let x=Me(r,"class",3,"");var o=Xo();oe(()=>Te(o,0,Oe(x()))),t(m,o)}var Ko=we('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M19.0005 4.99988L5.00049 18.9999M5.00049 4.99988L19.0005 18.9999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Uo(m,r){let x=Me(r,"class",3,"");var o=Ko();oe(()=>Te(o,0,Oe(x()))),t(m,o)}var Jo=n('<img alt="" class="max-w-full max-h-full object-contain transition-transform duration-200 select-none" draggable="false"/>'),Zo=n('<video controls class="max-w-full max-h-full object-contain"></video>',2),Go=n('<iframe title="YouTube video" class="w-full h-full max-w-5xl max-h-[80vh] aspect-video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>'),Qo=n('<!> <span class="sr-only">Close</span>',1),ea=n('<div class="absolute top-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm font-medium z-[10000]"> </div>'),ta=n('<button class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 z-[10000]" aria-label="Previous"><!></button>'),ra=n('<button class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 z-[10000]" aria-label="Next"><!></button>'),oa=n("<!> <!>",1),aa=n('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-[10000]"><button class="bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Zoom out"><!></button> <div class="bg-black/50 text-white px-3 py-2 rounded-full text-sm font-medium"> </div> <button class="bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Zoom in"><!></button></div>'),sa=n('<div class="relative w-full h-full flex items-center justify-center p-4 md:p-8"><div class="relative w-full h-full flex items-center justify-center overflow-hidden" role="img" tabindex="-1"><!></div> <!> <!> <!> <!></div>'),na=n("<!> <!>",1);function ia(m,r){De(r,!0);let x=Me(r,"initialIndex",3,0),o=Me(r,"open",15,!1),g=Me(r,"class",3,""),v=re(Dt(x())),a=re(1),_=re(0),w=re(0),L=re(!1),O=re(0),j=re(0),P=re(0),A=re(0),k=re(0);const d=ie(()=>r.mediaItems[e(v)]),y=ie(()=>e(v)>0),h=ie(()=>e(v)<r.mediaItems.length-1),M=ie(()=>`${e(v)+1} / ${r.mediaItems.length}`);ut(()=>{o()&&(c(v,x()),N())});function ee(s){o(s),s||(N(),r.onClose&&r.onClose())}function te(){e(y)&&(gt(v,-1),N())}function U(){e(h)&&(gt(v),N())}function N(){c(a,1),c(_,0),c(w,0)}function ce(){c(a,Math.min(e(a)*1.2,5),!0)}function ue(){c(a,Math.max(e(a)/1.2,1),!0),e(a)===1&&(c(_,0),c(w,0))}function J(s){if(o())switch(s.key){case"ArrowLeft":s.preventDefault(),te();break;case"ArrowRight":s.preventDefault(),U();break}}function Y(s){!o()||e(d).type!=="image"||(s.preventDefault(),s.deltaY<0?ce():ue())}function le(s){e(a)<=1||e(d).type!=="image"||(c(L,!0),c(O,s.clientX-e(_)),c(j,s.clientY-e(w)))}function ae(s){e(L)&&(c(_,s.clientX-e(O)),c(w,s.clientY-e(j)))}function z(){c(L,!1)}function Z(s){if(s.length<2)return 0;const H=s[0].clientX-s[1].clientX,R=s[0].clientY-s[1].clientY;return Math.sqrt(H*H+R*R)}function de(s){e(d).type==="image"&&(s.touches.length===2?c(k,Z(s.touches),!0):s.touches.length===1&&(c(P,s.touches[0].clientX,!0),c(A,s.touches[0].clientY,!0)))}function B(s){if(e(d).type==="image"){if(s.touches.length===2){s.preventDefault();const H=Z(s.touches),R=H/e(k);c(a,Math.max(1,Math.min(5,e(a)*R)),!0),c(k,H,!0)}else if(s.touches.length===1&&e(a)>1){s.preventDefault();const H=s.touches[0].clientX-e(P),R=s.touches[0].clientY-e(A);c(_,e(_)+H),c(w,e(w)+R),c(P,s.touches[0].clientX,!0),c(A,s.touches[0].clientY,!0)}}}function I(s){if(e(d).type==="image"){if(s.changedTouches.length===1&&s.touches.length===0&&e(a)===1){const H=s.changedTouches[0].clientX-e(P);Math.abs(s.changedTouches[0].clientY-e(A))<50&&(H>100&&e(y)?te():H<-100&&e(h)&&U())}s.touches.length===0&&c(k,0)}}var T=F();Ke("keydown",st,J),Ke("mouseup",st,z),Ke("mousemove",st,ae);var X=f(T);b(X,()=>zt,(s,H)=>{H(s,{get open(){return o()},onOpenChange:ee,children:(R,V)=>{var D=F(),W=f(D);b(W,()=>er,(E,p)=>{p(E,{children:($,q)=>{var se=na(),G=f(se);b(G,()=>Lt,(ne,K)=>{K(ne,{class:"fixed inset-0 z-[9998] bg-black/95 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"})});var Q=i(G,2);{let ne=ie(()=>ot("fixed inset-0 z-[9999] flex items-center justify-center","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",g()));b(Q,()=>Nt,(K,fe)=>{fe(K,{get class(){return e(ne)},children:(ve,he)=>{var ke=sa(),ye=u(ke);ye.__mousedown=le,ye.__touchstart=de,ye.__touchmove=B,ye.__touchend=I;var Ye=u(ye);{var Fe=me=>{var pe=Jo();oe(()=>{Ie(pe,"src",e(d).url),Xt(pe,`transform: scale(${e(a)??""}) translate(${e(_)/e(a)}px, ${e(w)/e(a)}px); cursor: ${e(a)>1?"grab":"default"};`)}),t(me,pe)},Xe=me=>{var pe=F(),$e=f(pe);{var Re=je=>{var ge=Zo();oe(()=>Ie(ge,"src",e(d).url)),t(je,ge)},ze=je=>{var ge=F(),Ae=f(ge);{var Ee=at=>{var pt=Go();oe(()=>Ie(pt,"src",`https://www.youtube.com/embed/${e(d).videoId??""}`)),t(at,pt)};C(Ae,at=>{e(d).type==="youtube"&&e(d).videoId&&at(Ee)},!0)}t(je,ge)};C($e,je=>{e(d).type==="video"?je(Re):je(ze,!1)},!0)}t(me,pe)};C(Ye,me=>{e(d).type==="image"?me(Fe):me(Xe,!1)})}l(ye);var Le=i(ye,2);b(Le,()=>Tt,(me,pe)=>{pe(me,{class:"absolute right-4 top-4 rounded-full bg-black/50 p-2 text-white opacity-70 ring-offset-background transition-opacity hover:opacity-100 hover:bg-black/70 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none z-[10000]",children:($e,Re)=>{var ze=Qo(),je=f(ze);Uo(je,{class:"h-6 w-6"}),S(2),t($e,ze)},$$slots:{default:!0}})});var Ce=i(Le,2);{var qe=me=>{var pe=ea(),$e=u(pe,!0);l(pe),oe(()=>Pe($e,e(M))),t(me,pe)};C(Ce,me=>{r.mediaItems.length>1&&me(qe)})}var ht=i(Ce,2);{var At=me=>{var pe=oa(),$e=f(pe);{var Re=ge=>{var Ae=ta();Ae.__click=te;var Ee=u(Ae);Yo(Ee,{class:"h-6 w-6"}),l(Ae),t(ge,Ae)};C($e,ge=>{e(y)&&ge(Re)})}var ze=i($e,2);{var je=ge=>{var Ae=ra();Ae.__click=U;var Ee=u(Ae);Vo(Ee,{class:"h-6 w-6"}),l(Ae),t(ge,Ae)};C(ze,ge=>{e(h)&&ge(je)})}t(me,pe)};C(ht,me=>{r.mediaItems.length>1&&me(At)})}var jt=i(ht,2);{var It=me=>{var pe=aa(),$e=u(pe);$e.__click=ue;var Re=u($e);qo(Re,{class:"h-5 w-5"}),l($e);var ze=i($e,2),je=u(ze);l(ze);var ge=i(ze,2);ge.__click=ce;var Ae=u(ge);Fo(Ae,{class:"h-5 w-5"}),l(ge),l(pe),oe(Ee=>{$e.disabled=e(a)<=1,Pe(je,`${Ee??""}%`),ge.disabled=e(a)>=5},[()=>Math.round(e(a)*100)]),t(me,pe)};C(jt,me=>{e(d).type==="image"&&me(It)})}l(ke),Ke("wheel",ye,Y),t(ve,ke)},$$slots:{default:!0}})})}t($,se)},$$slots:{default:!0}})}),t(R,D)},$$slots:{default:!0}})}),t(m,T),Se()}He(["mousedown","touchstart","touchmove","touchend","click"]);var la=n('<img alt="" class="w-full h-full object-cover pointer-events-none"/>'),da=n('<video class="w-full h-full object-cover pointer-events-none"></video>',2),ca=n('<iframe title="YouTube video" class="w-full h-full aspect-video pointer-events-none" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>'),ua=n('<button type="button"><!></button>'),va=n("<div></div> <!>",1);function fa(m,r){De(r,!0);let x=Me(r,"class",3,""),o=re(!1),g=re(0);const v=ie(()=>Array.isArray(r.url)?r.url:[r.url]),a=ie(()=>e(v).length),_=ie(()=>e(v).map(k=>{if(k.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i))return{url:k,type:"image"};if(k.match(/\.(mp4|webm|mov)(\?|$)/i))return{url:k,type:"video"};if(k.match(/youtube\.com|youtu\.be/i)){const d=k.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/)?.[1];return{url:k,type:"youtube",videoId:d}}return{url:k,type:"image"}})),w=ie(()=>e(a)===1?"grid-cols-1":e(a)===2?"grid-cols-2":e(a)===3||e(a)===4?"grid-cols-2 grid-rows-2":"grid-cols-[repeat(auto-fill,minmax(200px,1fr))] auto-rows-[200px]"),L=k=>e(a)===3&&k===0?"row-span-2":e(a)===4?"aspect-square":e(a)>=5&&k===0?"col-span-2 row-span-2":"";function O(k){c(g,k,!0),c(o,!0)}var j=va(),P=f(j);et(P,21,()=>e(v),Wt,(k,d,y)=>{var h=ua();h.__click=()=>O(y);var M=u(h);{var ee=U=>{var N=la();oe(()=>Ie(N,"src",e(d))),t(U,N)},te=U=>{var N=F(),ce=f(N);{var ue=Y=>{var le=da();oe(()=>Ie(le,"src",e(d))),t(Y,le)},J=Y=>{var le=F(),ae=f(le);{var z=Z=>{const de=ie(()=>e(d).match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/)?.[1]);var B=F(),I=f(B);{var T=X=>{var s=ca();oe(()=>Ie(s,"src",`https://www.youtube.com/embed/${e(de)??""}`)),t(X,s)};C(I,X=>{e(de)&&X(T)})}t(Z,B)};C(ae,Z=>{e(d).match(/youtube\.com|youtu\.be/i)&&Z(z)},!0)}t(Y,le)};C(ce,Y=>{e(d).match(/\.(mp4|webm|mov)(\?|$)/i)?Y(ue):Y(J,!1)},!0)}t(U,N)};C(M,U=>{e(d).match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?U(ee):U(te,!1)})}l(h),oe(U=>Te(h,1,`relative overflow-hidden bg-muted transition-all cursor-pointer hover:opacity-90 ${U??""}`),[()=>L(y)]),t(k,h)}),l(P);var A=i(P,2);ia(A,{get mediaItems(){return e(_)},get initialIndex(){return e(g)},get open(){return e(o)},set open(k){c(o,k,!0)}}),oe(()=>Te(P,1,`grid gap-[2px] my-2 w-full max-w-full rounded-xl overflow-clip ${e(w)??""} ${x()??""}`)),t(m,j),Se()}He(["click"]);function ma(m,r){let x=Me(r,"class",3,"");Eo(m,{get url(){return r.url},get event(){return r.event},get class(){return x()},children:(g,v)=>{let a=()=>v?.().url,_=()=>v?.().class;fa(g,{get url(){return a()},get class(){return _()}})},$$slots:{default:!0}})}var ha=n("<div><!> <!> <!> <!></div>"),pa=n("<!> <!> <!>",1);function Wa(m,r){De(r,!0),We.mediaComponent=ma;let x=re(!1);ar(Ze.language),ut(()=>{Vt.set(Ze.language)});{const w=Ze.theme;w==="dark"||w==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.add("light"),Et(Ze.themeColor),Ot.then(()=>{c(x,!0)})}var o=pa(),g=f(o);ir(g,{});var v=i(g,2);{let w=ie(()=>!e(x));ho(v,{get visible(){return e(w)}})}var a=i(v,2);{var _=w=>{var L=ha(),O=u(L);Ge(O,()=>r.children);var j=i(O,2);fo(j,{});var P=i(j,2);Yr(P,{});var A=i(P,2);Gr(A,{}),l(L),mt(3,L,()=>Ct,()=>({duration:300})),t(w,L)};C(a,w=>{e(x)&&w(_)})}t(m,o),Se()}export{Wa as component,Va as universal};
