import{d as yt,c as k,a as t,f as v,s as w,t as kt}from"../chunks/DNmf0A2m.js";import{p as Ge,u as lt,s as ie,a as Ye,f as u,c as Xe,e as a,g as e,d as n,r,y as nt,t as b,b as T,aN as xr}from"../chunks/DpkVnRja.js";import{s as ft}from"../chunks/CszMzaRi.js";import{i as c}from"../chunks/Btb_Ey2R.js";import{e as Dt}from"../chunks/DD8s4tVe.js";import{a as K,e as kr,c as X,d as nr,b as ir}from"../chunks/Ci0hv7jC.js";import{s as Xt,a as St}from"../chunks/DyCGT0HY.js";import{p as lr}from"../chunks/Uk33IviR.js";import{g as at}from"../chunks/BFZgCa8b.js";import{$ as er}from"../chunks/CJuHvAJe.js";import{n as g,s as W,d as gt,C as tr,N as cr,j as yr,r as Zt,b as wr}from"../chunks/QTLWRGLp.js";import{s as xt}from"../chunks/DfnDQijd.js";import{h as me}from"../chunks/Jrqc4XQc.js";import{l as Ht}from"../chunks/C43Cn2wZ.js";import{c as $r}from"../chunks/DJ8nsMRq.js";import{c as ar}from"../chunks/D4c95ZgK.js";import{N as Cr,c as or}from"../chunks/7I2W7SCc.js";import{c as vr,h as It,R as Mr}from"../chunks/DGh-0Kjw.js";import{c as zr}from"../chunks/Cfk3gxL9.js";import{m as ut}from"../chunks/CGbgr8HD.js";import{n as Qt}from"../chunks/DRLCy_Ng.js";import{g as Nr}from"../chunks/Dtp51Kds.js";import{c as dr}from"../chunks/3PfE3rFD.js";import{p as mt}from"../chunks/f_qAQkK6.js";import{l as Bt}from"../chunks/Det8CiMi.js";import{k as ur}from"../chunks/MZ4igXhu.js";import{c as Me}from"../chunks/CSx53_lc.js";import{g as fr,M as Ur,D as jr,a as Pr,R as Sr,b as Rr,c as Lr,d as Ar}from"../chunks/ExIc70cS.js";import{b as Vt}from"../chunks/-Mgh5RB7.js";import{U as it}from"../chunks/BYRURnlO.js";import{U as Tr}from"../chunks/CFmbs-Nt.js";import{u as Hr}from"../chunks/ACGw3gZU.js";import{I as M}from"../chunks/B7jIYntu.js";import{D as Ir,a as Br}from"../chunks/BJCNLf3C.js";import{U as sr}from"../chunks/B9CFvwi7.js";const Vr=9735,Dr=3e4;class Wr{zapSubscription=null;checkInterval=null;isProcessing=!1;start(){if(Qt.enabled){if(!g.$currentUser){console.warn("[NpubCashMonitor] No active user, cannot start monitoring");return}console.log("[NpubCashMonitor] Starting zap monitoring for",g.$currentUser.pubkey),this.zapSubscription=g.subscribe({kinds:[Vr],"#p":[g.$currentUser.pubkey]},{closeOnEose:!1}),this.zapSubscription.on("event",()=>{console.log("[NpubCashMonitor] Zap received, checking npub.cash balance"),this.checkAndClaim()}),this.checkInterval=setInterval(()=>{this.checkAndClaim()},Dr),this.checkAndClaim()}}stop(){this.zapSubscription&&(this.zapSubscription.stop(),this.zapSubscription=null),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),console.log("[NpubCashMonitor] Stopped monitoring")}async checkAndClaim(){if(Qt.enabled&&!this.isProcessing){if(!g.$wallet){console.warn("[NpubCashMonitor] No wallet available, skipping token claim");return}this.isProcessing=!0;try{const h=await Qt.claimTokens();h&&(console.log("[NpubCashMonitor] Token claimed, redeeming to wallet"),await this.redeemToWallet(h))}catch(h){console.error("[NpubCashMonitor] Error checking/claiming tokens:",h)}finally{this.isProcessing=!1}}}async redeemToWallet(h){if(!g.$wallet){console.warn("[NpubCashMonitor] No wallet available, cannot redeem token");return}try{await g.$wallet.receiveToken(h),console.log("[NpubCashMonitor] âœ“ Token redeemed to wallet")}catch(z){console.error("[NpubCashMonitor] Failed to redeem token to wallet:",z)}}}const qt=new Wr;function Er(L){return L===0?"0":L>=1e6?`${(L/1e6).toFixed(1)}M`:L>=1e3?`${(L/1e3).toFixed(1)}k`:new Intl.NumberFormat("en-US").format(L)}var Or=v('<img class="w-6 h-6 rounded-full object-cover"/>'),Fr=v('<div class="w-6 h-6 rounded-full bg-primary flex items-center justify-center"><span class="text-xs font-bold"> </span></div>'),Yr=v('<button class="flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted text-foreground rounded-lg transition-colors"><!> <span> </span> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button>'),Kr=v('<button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg> <span>Login</span></button>');function Jr(L,h){Ge(h,!0);const z=mt(h,"class",3,"px-4 py-2 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-semibold");let p=Ye(null);lt(()=>{const s=g.$currentUser?.pubkey;if(!s){ie(p,null);return}g.fetchUser(s).then(d=>{d?.fetchProfile().then(x=>{ie(p,x,!0)})})});const U=T(()=>e(p)?.name||e(p)?.displayName||"Anon");function V(){g.$sessions.logout()}var S=k(),H=u(S);{var m=s=>{var d=Yr();d.__click=V;var x=a(d);{var R=Z=>{var F=Or();b(()=>{X(F,"src",e(p).image),X(F,"alt",e(U))}),t(Z,F)},ze=Z=>{var F=Fr(),le=a(F),Ne=a(le,!0);r(le),r(F),b(we=>w(Ne,we),[()=>e(U).charAt(0).toUpperCase()]),t(Z,F)};c(x,Z=>{e(p)?.image?Z(R):Z(ze,!1)})}var J=n(x,2),ee=a(J,!0);r(J),nt(2),r(d),b(()=>w(ee,e(U))),t(s,d)},i=s=>{var d=Kr();d.__click=()=>{Bt.show=!0,Bt.state="signup"},b(()=>K(d,1,kr(z()))),t(s,d)};c(H,s=>{g.$currentUser?s(m):s(i,!1)})}t(L,S),Xe()}yt(["click"]);var Zr=v('<div class="flex-1 min-w-0 text-left"><p class="font-medium text-sm truncate text-foreground"> </p> <p class="text-xs text-muted-foreground truncate"> </p></div>'),Qr=v("<button><!> <!></button>"),qr=v('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <span> </span>',1),Gr=v('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> <span> </span>',1),Xr=v('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> <span> </span>',1),ea=v('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> <span> </span></button></div>'),ta=v("<!> <!>",1);function ra(L,h){Ge(h,!0);const z=()=>St(er,"$t",p),[p,U]=Xt(),V=mt(h,"collapsed",3,!1);let S=Ye(!1),H=Ye(void 0),m=Ye(void 0),i=Ye(null);lt(()=>{const j=g.$currentUser?.pubkey;if(!j){ie(i,null);return}g.fetchUser(j).then(E=>{E?.fetchProfile().then(ce=>{ie(i,ce,!0)})})});const s=T(()=>e(i)?.displayName||e(i)?.name||"Anonymous"),d=T(()=>g.$currentUser?.npub);function x(){ie(S,!e(S))}function R(){ie(S,!1)}function ze(){g.$sessions.logout(),R()}function J(){e(d)&&(at(`/p/${e(d)}`),R())}function ee(){at("/settings"),R()}function Z(){const j=W.theme;j==="light"?W.setTheme("dark"):j==="dark"?W.setTheme("system"):W.setTheme("light")}lt(()=>{if(!e(S))return;const j=E=>{e(H)&&!e(H).contains(E.target)&&e(m)&&!e(m).contains(E.target)&&ie(S,!1)};return document.addEventListener("click",j),()=>document.removeEventListener("click",j)});var F=ta(),le=u(F);{var Ne=j=>{var E=Qr();E.__click=x;var ce=a(E);Me(ce,()=>it.Root,(A,D)=>{D(A,{get ndk(){return g},get pubkey(){return g.$currentUser.pubkey},children:(ve,he)=>{var _e=k(),$e=u(_e);Me($e,()=>it.Avatar,(Se,Ce)=>{Ce(Se,{class:"w-10 h-10"})}),t(ve,_e)},$$slots:{default:!0}})});var Ue=n(ce,2);{var q=A=>{var D=Zr(),ve=a(D),he=a(ve,!0);r(ve);var _e=n(ve,2),$e=a(_e,!0);r(_e),r(D),b(Se=>{w(he,e(s)),w($e,Se)},[()=>e(i)?.nip05||(e(d)?`${e(d).slice(0,16)}...`:"")]),t(A,D)};c(Ue,A=>{V()||A(q)})}r(E),Vt(E,A=>ie(m,A),()=>e(m)),b(()=>{K(E,1,`w-full flex items-center ${V()?"justify-center p-3":"gap-3 px-2 py-2"} rounded-lg hover:bg-muted transition-colors cursor-pointer`),X(E,"title",V()?e(s):void 0)}),t(j,E)};c(le,j=>{g.$currentUser&&j(Ne)})}var we=n(le,2);{var ge=j=>{var E=k(),ce=u(E);ur(ce,()=>e(S),Ue=>{var q=k(),A=u(q);fr(A,()=>"div",!1,(D,ve)=>{nr(D,()=>({style:"display: contents"}));var he=ea(),_e=a(he);_e.__click=J;var $e=a(_e);Me($e,()=>it.Root,(te,G)=>{G(te,{get ndk(){return g},get pubkey(){return g.$currentUser.pubkey},children:(He,Ie)=>{var de=k(),ye=u(de);Me(ye,()=>it.Avatar,(be,Be)=>{Be(be,{class:"w-12 h-12"})}),t(He,de)},$$slots:{default:!0}})});var Se=n($e,2),Ce=a(Se),ht=a(Ce,!0);r(Ce);var et=n(Ce,2),wt=a(et,!0);r(et),r(Se),r(_e);var je=n(_e,4);je.__click=Z;var ot=a(je);{var _t=te=>{var G=qr(),He=n(u(G),2),Ie=a(He,!0);r(He),b(de=>w(Ie,de),[()=>z()("settings.sections.appearance.themes.light")]),t(te,G)},$t=te=>{var G=k(),He=u(G);{var Ie=ye=>{var be=Gr(),Be=n(u(be),2),tt=a(Be,!0);r(Be),b(ct=>w(tt,ct),[()=>z()("settings.sections.appearance.themes.dark")]),t(ye,be)},de=ye=>{var be=Xr(),Be=n(u(be),2),tt=a(Be,!0);r(Be),b(ct=>w(tt,ct),[()=>z()("settings.sections.appearance.themes.system")]),t(ye,be)};c(He,ye=>{W.theme==="dark"?ye(Ie):ye(de,!1)},!0)}t(te,G)};c(ot,te=>{W.theme==="light"?te(_t):te($t,!1)})}r(je);var st=n(je,2);st.__click=ee;var bt=n(a(st),2),_=a(bt,!0);r(bt),r(st);var I=n(st,4);I.__click=ze;var ke=n(a(I),2),We=a(ke,!0);r(ke),r(I),r(he),Vt(he,te=>ie(H,te),()=>e(H)),b((te,G,He,Ie,de)=>{ir(he,`position: fixed; bottom: ${te??""}px; left: ${G??""}px; z-index: 9999;`),w(ht,e(s)),w(wt,He),w(_,Ie),w(We,de)},[()=>window.innerHeight-e(m).getBoundingClientRect().top+8,()=>e(m).getBoundingClientRect().left,()=>z()("profile.editProfile"),()=>z()("navigation.settings"),()=>z()("navigation.logout")]),t(ve,he)}),t(Ue,q)}),t(j,E)};c(we,j=>{e(S)&&e(m)&&j(ge)})}t(L,F),Xe(),U()}yt(["click"]);var aa=v('<div class="w-12 h-12 bg-muted rounded-lg overflow-hidden flex-shrink-0"><img class="w-full h-full object-cover"/></div>'),oa=v('<p class="text-xs text-muted-foreground mt-1"> </p>'),sa=v('<button class="w-full bg-muted/50 rounded-lg p-3 transition-all hover:bg-muted hover:scale-[1.02] text-left"><div class="flex gap-3"><!> <div class="flex-1 min-w-0"><h4 class="text-sm font-medium text-card-foreground truncate"> </h4> <!></div></div></button>'),na=v('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg> <h3 class="text-lg font-semibold text-card-foreground">Recent Marketplace</h3></div> <button class="flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors">View All <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="space-y-3"></div>',1);function ia(L,h){Ge(h,!0);const z=T(()=>tr(W.selectedRelay,W.relays.filter(s=>s.enabled&&s.read).map(s=>s.url))),p=g.$subscribe(()=>({filters:[{kinds:[30402],limit:5}],bufferMs:100,relayUrls:e(z).length>0?e(z):void 0,cacheUsage:e(z).length>0?gt.ONLY_RELAY:gt.PARALLEL})),U=T(()=>p.events.filter(s=>(s.tagValue("status")||"active")==="active").slice(0,5));function V(s){return s.tagValue("image")}function S(s){const d=s.tags.find(x=>x[0]==="price");return!d||!d[1]||!d[2]?null:{amount:d[1],currency:d[2]}}var H=k(),m=u(H);{var i=s=>{var d=na(),x=u(d),R=n(a(x),2);R.__click=()=>at("/marketplace"),r(x);var ze=n(x,2);Dt(ze,21,()=>e(U),J=>J.id,(J,ee)=>{const Z=T(()=>S(e(ee)));var F=sa();F.__click=()=>at(`/marketplace/${e(ee).encode()}`);var le=a(F),Ne=a(le);{var we=q=>{var A=aa(),D=a(A);r(A),b((ve,he)=>{X(D,"src",ve),X(D,"alt",he)},[()=>V(e(ee)),()=>e(ee).tagValue("title")||"Listing"]),t(q,A)};c(Ne,q=>{V(e(ee))&&q(we)})}var ge=n(Ne,2),j=a(ge),E=a(j,!0);r(j);var ce=n(j,2);{var Ue=q=>{var A=oa(),D=a(A);r(A),b(()=>w(D,`${e(Z).amount??""} ${e(Z).currency??""}`)),t(q,A)};c(ce,q=>{e(Z)&&q(Ue)})}r(ge),r(le),r(F),b(q=>w(E,q),[()=>e(ee).tagValue("title")||"Untitled"]),t(J,F)}),r(ze),t(s,d)};c(m,s=>{e(U).length>0&&s(i)})}t(L,H),Xe()}yt(["click"]);var la=v('<div class="p-4"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">New Members</h2></div> <div class="space-y-3"></div></div>');function ca(L,h){Ge(h,!0);const z=T(()=>!!W.selectedRelay),p=T(()=>W.selectedRelay?g.$subscribe(()=>({filters:[{kinds:[514],limit:10}],relayUrls:[W.selectedRelay],cacheUsage:gt.ONLY_RELAY,subId:"new-members-514"})):null),U=T(()=>e(p)?e(p).events.map(s=>{const d=s.tagValue("p");return{memberPubkey:s.pubkey,inviterPubkey:d,joinedAt:s.created_at||0}}).sort((s,d)=>d.joinedAt-s.joinedAt).slice(0,5):[]);var V=k(),S=u(V);{var H=m=>{var i=la(),s=n(a(i),2);Dt(s,21,()=>e(U),d=>d.memberPubkey,(d,x)=>{Cr(d,{get memberPubkey(){return e(x).memberPubkey},get inviterPubkey(){return e(x).inviterPubkey},get joinedAt(){return e(x).joinedAt}})}),r(s),r(i),t(m,i)};c(S,m=>{e(z)&&e(U).length>0&&m(H)})}t(L,V),Xe()}var va=v('<div class="text-center py-4 text-sm text-muted-foreground">No journalists found yet</div>'),da=v('<div class="flex items-center gap-3"><!></div>'),ua=v('<div class="p-4"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">Journalists</h2></div> <div class="space-y-3"><!></div></div>');function fa(L,h){Ge(h,!0);const z=T(()=>tr(W.selectedRelay,W.relays.filter(s=>s.enabled&&s.read).map(s=>s.url))),p=g.$subscribe(()=>({filters:[{kinds:[cr.Article],limit:50}],bufferMs:500,relayUrls:e(z).length>0?e(z):void 0,cacheUsage:e(z).length>0?gt.ONLY_RELAY:gt.CACHE_FIRST,closeOnEose:!0})),U=T(()=>{const s=new Map;for(const d of p.events){const x=s.get(d.pubkey)||0;s.set(d.pubkey,x+1)}return Array.from(s.entries()).map(([d,x])=>({pubkey:d,articleCount:x})).sort((d,x)=>x.articleCount-d.articleCount).slice(0,5)});var V=ua(),S=n(a(V),2),H=a(S);{var m=s=>{var d=va();t(s,d)},i=s=>{var d=k(),x=u(d);Dt(x,17,()=>e(U),R=>R.pubkey,(R,ze)=>{var J=da(),ee=a(J);Tr(ee,{get pubkey(){return e(ze).pubkey},variant:"avatar-name-meta",avatarSize:"w-10 h-10",nameSize:"text-sm font-medium",class:"flex-1 min-w-0"}),r(J),t(R,J)}),t(s,d)};c(H,s=>{e(U).length===0?s(m):s(i,!1)})}r(S),r(V),t(L,V),Xe()}var pa=v("<span><!></span>");function pt(L,h){Ge(h,!0);const z=mt(h,"variant",3,"primary"),p=mt(h,"size",3,"sm"),U=mt(h,"indicator",3,!1),V=mt(h,"class",3,""),S=T(()=>({primary:"bg-primary text-primary-foreground",secondary:"bg-primary/20 text-primary"})[z()]),H=T(()=>U()?"w-2 h-2":{xs:"min-w-[18px] h-[18px] px-1 text-[10px] font-bold",sm:"px-2 py-1 text-xs font-medium"}[p()]);var m=pa(),i=a(m);{var s=d=>{var x=k(),R=u(x);ft(R,()=>h.children),t(d,x)};c(i,d=>{!U()&&h.children&&d(s)})}r(m),b(()=>K(m,1,`rounded-full flex items-center justify-center ${e(S)??""} ${e(H)??""} ${V()??""}`)),t(L,m),Xe()}var ma=v('<img alt="" class="w-6 h-6 rounded"/>'),ga=v("<!> <span> </span>",1),ha=v("<!> <span> </span>",1),_a=v("<!> <span> </span>",1),ba=v('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><!> <span> </span></button></div>'),xa=v('<nav class="block lg:hidden fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border z-[1000]"><div class="flex justify-around items-center px-2 py-3 safe-bottom svelte-2rf3uy"><a href="/" aria-label="Home"><!></a> <a href="/messages" aria-label="Messages"><!> <!></a> <a href="/notifications" aria-label="Notifications"><!> <!></a> <a href="/wallet" aria-label="Wallet"><!></a> <button class="flex items-center justify-center p-2 rounded-lg transition-colors" aria-label="Profile"><!></button></div></nav> <!>',1);function ka(L,h){Ge(h,!0);const z=()=>St(lr,"$page",U),p=()=>St(er,"$t",U),[U,V]=Xt(),S=T(()=>z().url.pathname);g.$wallet;const H=dr(g),m=_=>_==="/"?e(S)==="/":e(S).startsWith(_),i=T(()=>W.selectedRelay?Hr(W.selectedRelay):null);let s=Ye(!1),d=Ye(void 0),x=Ye(void 0),R=Ye(null);lt(()=>{const _=g.$currentUser?.pubkey;if(!_){ie(R,null);return}g.fetchUser(_).then(I=>{I?.fetchProfile().then(ke=>{ie(R,ke,!0)})})});const ze=T(()=>e(R)?.displayName||e(R)?.name||"Anonymous"),J=T(()=>g.$currentUser?.npub);function ee(){g.$currentUser?ie(s,!e(s)):(Bt.show=!0,Bt.state="signup")}function Z(){ie(s,!1)}function F(){g.$sessions.logout(),Z()}function le(){e(J)&&(at(`/p/${e(J)}`),Z())}function Ne(){at("/settings"),Z()}function we(){const _=W.theme;_==="light"?W.setTheme("dark"):_==="dark"?W.setTheme("system"):W.setTheme("light")}lt(()=>{if(!e(s))return;const _=I=>{e(d)&&!e(d).contains(I.target)&&e(x)&&!e(x).contains(I.target)&&ie(s,!1)};return document.addEventListener("click",_),()=>document.removeEventListener("click",_)});var ge=xa(),j=u(ge),E=a(j),ce=a(E),Ue=a(ce);{var q=_=>{var I=ma();b(()=>X(I,"src",e(i).info.icon)),t(_,I)},A=_=>{var I=k(),ke=u(I);{var We=G=>{M(G,{name:"relay",size:"lg"})},te=G=>{M(G,{name:"users",size:"lg"})};c(ke,G=>{W.selectedRelay?G(We):G(te,!1)},!0)}t(_,I)};c(Ue,_=>{W.selectedRelay&&e(i)?.info?.icon?_(q):_(A,!1)})}r(ce);var D=n(ce,2),ve=a(D);M(ve,{name:"message",size:"lg"});var he=n(ve,2);{var _e=_=>{pt(_,{indicator:!0,class:"absolute top-1.5 right-1.5"})};c(he,_=>{ut.totalUnreadCount>0&&_(_e)})}r(D);var $e=n(D,2),Se=a($e);M(Se,{name:"bell",size:"lg"});var Ce=n(Se,2);{var ht=_=>{pt(_,{indicator:!0,class:"absolute top-1.5 right-1.5"})};c(Ce,_=>{H.counts.all>0&&_(ht)})}r($e);var et=n($e,2),wt=a(et);M(wt,{name:"wallet",size:"lg"}),r(et);var je=n(et,2);je.__click=ee;var ot=a(je);{var _t=_=>{var I=k(),ke=u(I);Me(ke,()=>it.Root,(We,te)=>{te(We,{get ndk(){return g},get pubkey(){return g.$currentUser.pubkey},children:(G,He)=>{var Ie=k(),de=u(Ie);Me(de,()=>it.Avatar,(ye,be)=>{be(ye,{class:"w-8 h-8 rounded-full"})}),t(G,Ie)},$$slots:{default:!0}})}),t(_,I)},$t=_=>{M(_,{name:"user",size:"lg",class:"text-muted-foreground"})};c(ot,_=>{g.$currentUser?_(_t):_($t,!1)})}r(je),Vt(je,_=>ie(x,_),()=>e(x)),r(E),r(j);var st=n(j,2);{var bt=_=>{var I=k(),ke=u(I);ur(ke,()=>e(s),We=>{var te=k(),G=u(te);fr(G,()=>"div",!1,(He,Ie)=>{nr(He,()=>({style:"display: contents"}));var de=ba(),ye=a(de);ye.__click=le;var be=a(ye);Me(be,()=>it.Root,(Re,Le)=>{Le(Re,{get ndk(){return g},get pubkey(){return g.$currentUser.pubkey},children:(Oe,Ze)=>{var Qe=k(),Ee=u(Qe);Me(Ee,()=>it.Avatar,(qe,rt)=>{rt(qe,{class:"w-12 h-12"})}),t(Oe,Qe)},$$slots:{default:!0}})});var Be=n(be,2),tt=a(Be),ct=a(tt,!0);r(tt);var Ct=n(tt,2),Wt=a(Ct,!0);r(Ct),r(Be),r(ye);var Ke=n(ye,4);Ke.__click=we;var Rt=a(Ke);{var Et=Re=>{var Le=ga(),Oe=u(Le);M(Oe,{name:"sun",size:"sm"});var Ze=n(Oe,2),Qe=a(Ze,!0);r(Ze),b(Ee=>w(Qe,Ee),[()=>p()("settings.sections.appearance.themes.light")]),t(Re,Le)},Ot=Re=>{var Le=k(),Oe=u(Le);{var Ze=Ee=>{var qe=ha(),rt=u(qe);M(rt,{name:"moon",size:"sm"});var vt=n(rt,2),Nt=a(vt,!0);r(vt),b(Ut=>w(Nt,Ut),[()=>p()("settings.sections.appearance.themes.dark")]),t(Ee,qe)},Qe=Ee=>{var qe=_a(),rt=u(qe);M(rt,{name:"monitor",size:"sm"});var vt=n(rt,2),Nt=a(vt,!0);r(vt),b(Ut=>w(Nt,Ut),[()=>p()("settings.sections.appearance.themes.system")]),t(Ee,qe)};c(Oe,Ee=>{W.theme==="dark"?Ee(Ze):Ee(Qe,!1)},!0)}t(Re,Le)};c(Rt,Re=>{W.theme==="light"?Re(Et):Re(Ot,!1)})}r(Ke);var Je=n(Ke,2);Je.__click=Ne;var Mt=a(Je);M(Mt,{name:"settings",size:"sm"});var Lt=n(Mt,2),Ft=a(Lt,!0);r(Lt),r(Je);var zt=n(Je,4);zt.__click=F;var At=a(zt);M(At,{name:"logout",size:"sm"});var Tt=n(At,2),Yt=a(Tt,!0);r(Tt),r(zt),r(de),Vt(de,Re=>ie(d,Re),()=>e(d)),b((Re,Le,Oe,Ze,Qe)=>{ir(de,`position: fixed; bottom: ${Re??""}px; left: ${Le??""}px; z-index: 9999;`),w(ct,e(ze)),w(Wt,Oe),w(Ft,Ze),w(Yt,Qe)},[()=>window.innerHeight-e(x).getBoundingClientRect().top+8,()=>e(x).getBoundingClientRect().left-224+e(x).getBoundingClientRect().width,()=>p()("profile.editProfile"),()=>p()("navigation.settings"),()=>p()("navigation.logout")]),t(Ie,de)}),t(We,te)}),t(_,I)};c(st,_=>{e(s)&&e(x)&&g.$currentUser&&_(bt)})}b((_,I,ke,We)=>{K(ce,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${_??""}`),K(D,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${I??""} relative`),K($e,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${ke??""} relative`),K(et,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${We??""}`)},[()=>m("/")?"text-primary":"text-muted-foreground",()=>m("/messages")?"text-primary":"text-muted-foreground",()=>m("/notifications")?"text-primary":"text-muted-foreground",()=>m("/wallet")?"text-primary":"text-muted-foreground"]),t(L,ge),Xe(),V()}yt(["click"]);var ya=v('<button class="block lg:hidden fixed bottom-24 right-4 w-14 h-14 bg-primary hover:bg-accent-dark text-foreground rounded-full shadow-lg hover:shadow-xl transition-all z-[500] flex items-center justify-center active:scale-95"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button>');function Gt(L,h){Ge(h,!0);const z=mt(h,"isHomePage",3,!1),p=T(()=>z()?It.selected:null);function U(){h.onclick?h.onclick():e(p)==="images"?vr.open():at("/compose")}const V=T(()=>e(p)==="images"?"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z":"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),S=T(()=>e(p)==="images"?"Create media post":"Compose");var H=ya();H.__click=U;var m=a(H),i=a(m);r(m),r(H),b(()=>{X(H,"aria-label",e(S)),X(i,"d",e(V))}),t(L,H),Xe()}yt(["click"]);var wa=v("<!> <!>",1),$a=v('<!> <div class="px-4 pb-4"><!></div>',1);function Ca(L,h){Ge(h,!0);const z=new Ur("(min-width: 768px)");function p(m){at(`/p/${m.npub}`),h.onClose()}var U=k(),V=u(U);{var S=m=>{var i=k(),s=u(i);Me(s,()=>Sr,(d,x)=>{x(d,{get open(){return h.isOpen},onOpenChange:R=>{R||h.onClose()},children:(R,ze)=>{var J=k(),ee=u(J);Me(ee,()=>jr,(Z,F)=>{F(Z,{class:"max-w-md",children:(le,Ne)=>{var we=wa(),ge=u(we);Me(ge,()=>Ir,(E,ce)=>{ce(E,{children:(Ue,q)=>{var A=k(),D=u(A);Me(D,()=>Pr,(ve,he)=>{he(ve,{children:(_e,$e)=>{nt();var Se=kt("Search Users");t(_e,Se)},$$slots:{default:!0}})}),t(Ue,A)},$$slots:{default:!0}})});var j=n(ge,2);sr(j,{get ndk(){return g},onSelect:p,placeholder:"Search by name, NIP-05, or paste npub..."}),t(le,we)},$$slots:{default:!0}})}),t(R,J)},$$slots:{default:!0}})}),t(m,i)},H=m=>{var i=k(),s=u(i);Me(s,()=>Ar,(d,x)=>{x(d,{get open(){return h.isOpen},onOpenChange:R=>{R||h.onClose()},children:(R,ze)=>{var J=k(),ee=u(J);Me(ee,()=>Rr,(Z,F)=>{F(Z,{children:(le,Ne)=>{var we=$a(),ge=u(we);Me(ge,()=>Br,(ce,Ue)=>{Ue(ce,{class:"text-left",children:(q,A)=>{var D=k(),ve=u(D);Me(ve,()=>Lr,(he,_e)=>{_e(he,{children:($e,Se)=>{nt();var Ce=kt("Search Users");t($e,Ce)},$$slots:{default:!0}})}),t(q,D)},$$slots:{default:!0}})});var j=n(ge,2),E=a(j);sr(E,{get ndk(){return g},onSelect:p,placeholder:"Search by name, NIP-05, or paste npub..."}),r(j),t(le,we)},$$slots:{default:!0}})}),t(R,J)},$$slots:{default:!0}})}),t(m,i)};c(V,m=>{z.current?m(S):m(H,!1)})}t(L,U),Xe()}var Ma=v('<span class="font-medium"> </span>'),za=v('<span class="font-medium">Search</span>'),Na=v('<span class="font-medium">Notifications</span>'),Ua=v('<span class="font-medium">Wallet</span>'),ja=v('<span class="text-xs text-muted-foreground font-medium"> </span>'),Pa=v('<span class="font-medium">Community Invites</span>'),Sa=v('<a href="/agora/invites"><!> <!></a>'),Ra=v('<span class="font-medium"> </span>'),La=v('<span class="font-medium">Relay Feeds</span>'),Aa=v("<!> ",1),Ta=v('<a href="/relay-feeds"><div><!> <!></div> <!></a>'),Ha=v('<span class="font-medium"> </span>'),Ia=v('<span class="font-medium"> </span>'),Ba=v("<span> </span>"),Va=v("<!> <!>",1),Da=v("<span>Create Trade</span>"),Wa=v("<!> <!>",1),Ea=v("<span>Create Pack</span>"),Oa=v("<!> <!>",1),Fa=v("<span>Create Invite</span>"),Ya=v("<!> <!>",1),Ka=v("<span>Create media post</span>"),Ja=v("<!> <!>",1),Za=v("<span> </span>"),Qa=v("<!> <!>",1),qa=v("<button><!></button>"),Ga=v('<a class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></a>'),Xa=v('<button class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></button>'),eo=v('<p class="text-sm text-muted-foreground mt-1"> </p>'),to=v('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><div class="flex items-center gap-3"><!> <div class="flex-1"><h1 class="text-2xl font-bold text-foreground"> </h1> <!></div> <!></div></div></div>'),ro=v('<span class="font-medium"> </span>'),ao=v('<a class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></a>'),oo=v('<span class="font-medium"> </span>'),so=v('<button class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></button>'),no=v('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><!></div></div>'),io=v('<div class="lg:hidden p-3 border-b border-border bg-background"><!></div>'),lo=v('<div class="h-4 bg-muted rounded animate-pulse"></div> <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div> <div class="h-4 bg-muted rounded animate-pulse"></div>',1),co=v('<a class="block text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-2"> </a>'),vo=v('<!> <div class="p-4"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground"> </h2></div> <div class="space-y-3"><!></div></div> <!> <!>',1),uo=v('<aside class="hidden xl:block w-80 border-l border-border fixed top-0 right-0 bottom-0"><div class="flex flex-col divide-border divide-y"><!></div></aside>'),fo=v(`<div class="___h-screen bg-background flex justify-center overflow-hidden"><div class="flex w-full max-w-full relative"><aside><div><div><svg viewBox="0 0 686 250" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg"><style>.st0{fill:#F68E1D;}
            .st1{fill:currentColor;}
            .st2{fill:currentColor;opacity:0.9;}</style><path class="st0" d="M109.5,196.1h66.7c17.5,0,31.6-14.2,31.6-31.6V97.8c0-17.5-14.2-31.6-31.6-31.6h-66.7
            c-17.5,0-31.6,14.2-31.6,31.6v66.7C77.9,182,92,196.1,109.5,196.1z"></path><g><path class="st1" d="M233.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L251,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H233.9z M273.1,87.7h8.8l-7.8,9.2h-3L273.1,87.7z"></path><path class="st1" d="M358.3,135.2c0-1.5-0.6-2.7-1.8-3.7c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H378v0.9c-2.9,0.3-4.9,0.9-6.1,1.8
              c-1.2,0.9-1.8,2.1-1.8,3.7v32.9c0,1.5,0.6,2.7,1.8,3.7c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-29v-0.9c3.5-0.3,5.9-0.9,7.2-1.8
              c1.3-0.9,2-2.1,2-3.7v-11.1c-1.5,2.9-3.7,5.2-6.7,6.7c-2.9,1.6-6.8,2.3-11.5,2.3c-4.5,0-8.7-0.7-12.3-2.2c-3.7-1.5-6.8-3.6-9.4-6.4
              c-2.6-2.8-4.6-6.2-6-10.2c-1.4-4-2.1-8.6-2.1-13.6c0-5.1,0.7-9.6,2.2-13.7c1.5-4.1,3.7-7.5,6.6-10.4c2.9-2.9,6.5-5.1,10.9-6.7
              c4.4-1.6,9.4-2.3,15.1-2.3c3.8,0,7.5,0.3,11.2,1c3.7,0.7,7.2,1.7,10.6,3v15.6h-1.3c-1.1-2.5-2.3-4.8-3.7-6.8c-1.4-2-3-3.8-4.7-5.3
              c-1.8-1.5-3.7-2.6-5.9-3.4c-2.2-0.8-4.6-1.2-7.3-1.2c-3.6,0-6.8,0.7-9.5,2.1c-2.7,1.4-4.9,3.4-6.7,6c-1.8,2.6-3.2,5.7-4,9.3
              c-0.9,3.6-1.3,7.7-1.3,12.2c0,9.2,1.8,16.2,5.5,20.8c3.7,4.7,8.6,7,14.6,7c4.8,0,8.5-1.6,11.3-4.8c2.7-3.2,4.2-8.5,4.5-15.8V135.2z
              "></path><path class="st1" d="M480.2,101.4c12.3,0,21.4,1.4,27.3,4.3c5.8,2.9,8.8,6.9,8.8,12.1c0,3.8-1.6,7.1-4.7,9.7
              c-3.2,2.6-8,4.5-14.7,5.6l19,25.9c0.9,1.3,2.2,2.4,3.8,3.5c1.6,1,3.8,1.7,6.7,2v0.9h-27.7v-0.9c2.9-0.3,4.5-1,4.8-2
              c0.3-1,0-2.2-0.9-3.5l-17.9-24.8c-0.7,0.1-1.4,0.1-2.1,0.1c-0.8,0-1.5,0-2.3,0h-7.1V159c0,1.5,0.6,2.7,1.8,3.7
              c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-27.7v-0.9c2.9-0.3,4.9-0.9,6.1-1.8c1.2-0.9,1.8-2.1,1.8-3.7v-51.2c0-1.5-0.6-2.7-1.8-3.7
              c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H480.2z M480.2,131.6c8.2,0,14.3-1.2,18.1-3.5c3.8-2.3,5.7-5.7,5.7-10.2c0-4.5-1.9-7.9-5.7-10.2
              c-3.8-2.3-9.8-3.5-18.1-3.5h-7.1v27.5H480.2z"></path><path class="st1" d="M528.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L546,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H528.9z"></path><path class="st1" d="M445.1,120c-1.5-4-3.7-7.5-6.5-10.3c-2.8-2.9-6.2-5.1-10.1-6.6c-4-1.6-8.4-2.3-13.4-2.3
              c-4.9,0-9.3,0.8-13.3,2.3c-4,1.6-7.4,3.8-10.2,6.6c-2.8,2.9-5,6.3-6.5,10.3c-1.5,4-2.3,8.5-2.3,13.5s0.8,9.4,2.3,13.5
              c1.5,4,3.7,7.5,6.5,10.3c2.8,2.9,6.2,5.1,10.2,6.6c4,1.6,8.4,2.3,13.3,2.3c5,0,9.4-0.8,13.4-2.3c3.9-1.6,7.3-3.8,10.1-6.6
              c2.8-2.9,5-6.3,6.5-10.3c1.5-4,2.3-8.5,2.3-13.5S446.6,124,445.1,120z M415,163.4c-12.4,0-20.9-13.4-20.9-30s8.2-30,20.9-30
              c13,0,20.9,13.4,20.9,30S428,163.4,415,163.4z"></path></g><path d="M144.2,133.4h-2.9v0.1C142.3,133.5,143.3,133.5,144.2,133.4z"></path><polygon class="st2" points="143.9,97.2 101,109.3 101,113.8 186.8,113.8 186.8,109.3 "></polygon><polygon class="st2" points="104.4,115.4 106,117.6 181.2,117.6 182.6,115.4 "></polygon><path class="st2" d="M125,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L125,120.4z M111.2,157h-2.6
            v-29.2h2.6V157z M117.1,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M185.3,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L185.3,120.4z M171.4,157h-2.6
            v-29.2h2.6V157z M177.3,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M155.2,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L155.2,120.4z M141.3,157h-2.6
            v-29.2h2.6V157z M147.2,157h-2.6v-29.2h2.6V157z"></path><path class="st1" d="M284.4,150.2h-2.6v0.1C282.7,150.3,283.6,150.3,284.4,150.2z"></path></svg></div> <button class="p-2 rounded-lg hover:bg-muted transition-colors text-muted-foreground hover:text-primary flex-shrink-0"><!></button></div> <nav class="flex-1 space-y-2"><!> <a href="/messages"><div><!> <!></div> <!></a> <button><!> <!></button> <a href="/notifications"><div><!> <!></div> <!></a> <a href="/wallet"><div><!> <!></div> <!></a> <!> <a href="/packs"><!> <!></a> <!> <a href="/trades"><!> <!></a> <a href="/marketplace"><!> <!></a> <!></nav> <!></aside>  <div><main class="flex-1 pb-20 lg:pb-0 bg-background max-w-3xl 2xl:max-w-3xl w-full mx-auto border-x border-border min-h-screen"><!> <!> <!></main></div> <!></div> <!> <!></div> <!>`,1);function po(L,h){Ge(h,!0);const z=()=>St(lr,"$page",U),p=()=>St(er,"$t",U),[U,V]=Xt();let S=Ye(!1);xr("ndk",g);const H=g.$wallet,m=dr(g);let i=Ye(!1);const s=T(()=>z().url.pathname),d=T(()=>Ht.mode==="article"||Ht.mode==="profile"||Ht.mode==="reads"||e(s).startsWith("/note/")||e(s).startsWith("/messages/")||e(s).startsWith("/packs")||e(s).startsWith("/agora/invites")),x=T(()=>Ht.mode==="article"),R=T(()=>tr(W.selectedRelay,W.relays.filter(o=>o.enabled&&o.read).map(o=>o.url))),ze=T(()=>!e(d)&&!xt.rightSidebar?g.$subscribe(()=>({filters:[{kinds:[cr.Article],limit:5}],bufferMs:500,relayUrls:e(R).length>0?e(R):void 0,cacheUsage:e(R).length>0?gt.ONLY_RELAY:gt.CACHE_FIRST,closeOnEose:!0})):null),J=T(()=>e(ze)?e(ze).events.map(o=>wr.from(o)).filter(o=>o.title&&o.content).sort((o,l)=>(l.published_at??l.created_at??0)-(o.published_at??o.created_at??0)).slice(0,5):[]);lt(()=>{e(x)&&ie(i,!0)}),lt(()=>{g.$currentUser||ut.stop()}),lt(()=>(g.$currentUser?qt.start():qt.stop(),()=>{qt.stop()}));var ee=fo(),Z=u(ee),F=a(Z),le=a(F),Ne=a(le),we=a(Ne),ge=n(we,2);ge.__click=()=>ie(i,!e(i));var j=a(ge);{var E=o=>{M(o,{name:"chevron-right",size:"md"})},ce=o=>{M(o,{name:"chevron-left",size:"md"})};c(j,o=>{e(i)?o(E):o(ce,!1)})}r(ge),r(Ne);var Ue=n(Ne,2),q=a(Ue);{let o=T(()=>e(s)==="/");Mr(q,{get active(){return e(o)},get collapsed(){return e(i)}})}var A=n(q,2),D=a(A),ve=a(D);M(ve,{name:"message",size:"lg"});var he=n(ve,2);{var _e=o=>{var l=Ma(),$=a(l,!0);r(l),b(P=>w($,P),[()=>p()("navigation.messages")]),t(o,l)};c(he,o=>{e(i)||o(_e)})}r(D);var $e=n(D,2);{var Se=o=>{var l=k(),$=u(l);{var P=f=>{pt(f,{size:"xs",class:"absolute top-1.5 right-1.5",children:(y,B)=>{nt();var C=kt();b(()=>w(C,ut.totalUnreadCount>9?"9+":ut.totalUnreadCount)),t(y,C)},$$slots:{default:!0}})},oe=f=>{pt(f,{size:"sm",children:(y,B)=>{nt();var C=kt();b(()=>w(C,ut.totalUnreadCount>99?"99+":ut.totalUnreadCount)),t(y,C)},$$slots:{default:!0}})};c($,f=>{e(i)?f(P):f(oe,!1)})}t(o,l)};c($e,o=>{ut.totalUnreadCount>0&&o(Se)})}r(A);var Ce=n(A,2);Ce.__click=()=>ie(S,!0);var ht=a(Ce);M(ht,{name:"search",size:"lg"});var et=n(ht,2);{var wt=o=>{var l=za();t(o,l)};c(et,o=>{e(i)||o(wt)})}r(Ce);var je=n(Ce,2),ot=a(je),_t=a(ot);M(_t,{name:"bell",size:"lg"});var $t=n(_t,2);{var st=o=>{var l=Na();t(o,l)};c($t,o=>{e(i)||o(st)})}r(ot);var bt=n(ot,2);{var _=o=>{var l=k(),$=u(l);{var P=f=>{pt(f,{size:"xs",class:"absolute top-1.5 right-1.5",children:(y,B)=>{nt();var C=kt();b(()=>w(C,m.counts.all>9?"9+":m.counts.all)),t(y,C)},$$slots:{default:!0}})},oe=f=>{pt(f,{size:"sm",children:(y,B)=>{nt();var C=kt();b(()=>w(C,m.counts.all>99?"99+":m.counts.all)),t(y,C)},$$slots:{default:!0}})};c($,f=>{e(i)?f(P):f(oe,!1)})}t(o,l)};c(bt,o=>{m.counts.all>0&&o(_)})}r(je);var I=n(je,2),ke=a(I),We=a(ke);M(We,{name:"wallet",size:"lg"});var te=n(We,2);{var G=o=>{var l=Ua();t(o,l)};c(te,o=>{e(i)||o(G)})}r(ke);var He=n(ke,2);{var Ie=o=>{var l=ja(),$=a(l,!0);r(l),b(P=>w($,P),[()=>Er(H.balance)]),t(o,l)};c(He,o=>{!e(i)&&H.balance>0&&o(Ie)})}r(I);var de=n(I,2);{var ye=o=>{var l=Sa(),$=a(l);M($,{name:"users",size:"lg"});var P=n($,2);{var oe=f=>{var y=Pa();t(f,y)};c(P,f=>{e(i)||f(oe)})}r(l),b(f=>{K(l,1,`flex items-center ${e(i)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${f??""}`),X(l,"title",e(i)?"Community Invites":void 0)},[()=>e(s).startsWith("/agora/invites")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),t(o,l)};c(de,o=>{W.selectedRelay&&yr(W.selectedRelay)&&o(ye)})}var be=n(de,2),Be=a(be);M(Be,{name:"packs",size:"lg"});var tt=n(Be,2);{var ct=o=>{var l=Ra(),$=a(l,!0);r(l),b(P=>w($,P),[()=>p()("navigation.followPacks")]),t(o,l)};c(tt,o=>{e(i)||o(ct)})}r(be);var Ct=n(be,2);{var Wt=o=>{var l=Ta(),$=a(l),P=a($);M(P,{name:"relay",size:"lg"});var oe=n(P,2);{var f=C=>{var re=La();t(C,re)};c(oe,C=>{e(i)||C(f)})}r($);var y=n($,2);{var B=C=>{pt(C,{variant:"secondary",size:"sm",class:"gap-1",children:(re,ae)=>{var se=Aa(),Pe=u(se);M(Pe,{name:"trending",size:"xs"});var Q=n(Pe);b(()=>w(Q,` ${Zt.relays.length??""}`)),t(re,se)},$$slots:{default:!0}})};c(y,C=>{e(i)||C(B)})}r(l),b(C=>{K(l,1,`flex items-center ${e(i)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${C??""}`),X(l,"title",e(i)?"Relay Feeds":void 0),K($,1,`flex items-center ${e(i)?"":"gap-3"}`)},[()=>e(s).startsWith("/relay-feeds")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),t(o,l)};c(Ct,o=>{Zt&&Zt.relays.length>0&&o(Wt)})}var Ke=n(Ct,2),Rt=a(Ke);M(Rt,{name:"trades",size:"lg"});var Et=n(Rt,2);{var Ot=o=>{var l=Ha(),$=a(l,!0);r(l),b(P=>w($,P),[()=>p()("navigation.trades")]),t(o,l)};c(Et,o=>{e(i)||o(Ot)})}r(Ke);var Je=n(Ke,2),Mt=a(Je);M(Mt,{name:"marketplace",size:"lg"});var Lt=n(Mt,2);{var Ft=o=>{var l=Ia(),$=a(l,!0);r(l),b(P=>w($,P),[()=>p()("navigation.marketplace")]),t(o,l)};c(Lt,o=>{e(i)||o(Ft)})}r(Je);var zt=n(Je,2);{var At=o=>{var l=qa();l.__click=()=>{e(s)==="/marketplace"?ar.show=!0:e(s)==="/trades"?zr.show=!0:e(s).startsWith("/packs")?$r.show=!0:e(s)==="/agora/invites"?or.show=!0:e(s)==="/"&&It.selected==="images"?vr.show=!0:at("/compose")};var $=a(l);{var P=f=>{var y=Va(),B=u(y);M(B,{name:"plus",size:"md"});var C=n(B,2);{var re=ae=>{var se=Ba(),Pe=a(se,!0);r(se),b(Q=>w(Pe,Q),[()=>p()("classifieds.createListing")]),t(ae,se)};c(C,ae=>{e(i)||ae(re)})}t(f,y)},oe=f=>{var y=k(),B=u(y);{var C=ae=>{var se=Wa(),Pe=u(se);M(Pe,{name:"plus",size:"md"});var Q=n(Pe,2);{var ue=O=>{var fe=Da();t(O,fe)};c(Q,O=>{e(i)||O(ue)})}t(ae,se)},re=ae=>{var se=k(),Pe=u(se);{var Q=O=>{var fe=Oa(),Ae=u(fe);M(Ae,{name:"plus",size:"md"});var Fe=n(Ae,2);{var Y=N=>{var ne=Ea();t(N,ne)};c(Fe,N=>{e(i)||N(Y)})}t(O,fe)},ue=O=>{var fe=k(),Ae=u(fe);{var Fe=N=>{var ne=Ya(),Te=u(ne);M(Te,{name:"invite",size:"md"});var Ve=n(Te,2);{var pe=xe=>{var De=Fa();t(xe,De)};c(Ve,xe=>{e(i)||xe(pe)})}t(N,ne)},Y=N=>{var ne=k(),Te=u(ne);{var Ve=xe=>{var De=Ja(),jt=u(De);M(jt,{name:"image",size:"md"});var Kt=n(jt,2);{var Jt=dt=>{var Pt=Ka();t(dt,Pt)};c(Kt,dt=>{e(i)||dt(Jt)})}t(xe,De)},pe=xe=>{var De=Qa(),jt=u(De);M(jt,{name:"edit",size:"md"});var Kt=n(jt,2);{var Jt=dt=>{var Pt=Za(),_r=a(Pt,!0);r(Pt),b(br=>w(_r,br),[()=>p()("navigation.compose")]),t(dt,Pt)};c(Kt,dt=>{e(i)||dt(Jt)})}t(xe,De)};c(Te,xe=>{e(s)==="/"&&It.selected==="images"?xe(Ve):xe(pe,!1)},!0)}t(N,ne)};c(Ae,N=>{e(s)==="/agora/invites"?N(Fe):N(Y,!1)},!0)}t(O,fe)};c(Pe,O=>{e(s).startsWith("/packs")?O(Q):O(ue,!1)},!0)}t(ae,se)};c(B,ae=>{e(s)==="/trades"?ae(C):ae(re,!1)},!0)}t(f,y)};c($,f=>{e(s)==="/marketplace"?f(P):f(oe,!1)})}r(l),b(f=>{K(l,1,`w-full flex items-center justify-center ${e(i)?"p-3":"gap-2 px-6 py-3"} bg-primary hover:bg-primary/90 text-foreground font-semibold rounded-full transition-colors mt-4`),X(l,"title",f)},[()=>e(i)?e(s)==="/marketplace"?p()("classifieds.createListing"):e(s)==="/trades"?"Create Trade":e(s).startsWith("/packs")?"Create Pack":e(s)==="/agora/invites"?"Create Invite":e(s)==="/"&&It.selected==="images"?"Create media post":p()("navigation.compose"):void 0]),t(o,l)};c(zt,o=>{g.$currentPubkey&&o(At)})}r(Ue);var Tt=n(Ue,2);{var Yt=o=>{ra(o,{get collapsed(){return e(i)}})},Re=o=>{{let l=T(()=>e(i)?"p-3":"gap-2 px-4 py-3");Jr(o,{get class(){return`w-full flex items-center justify-center ${e(l)??""} bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full transition-colors`}})}};c(Tt,o=>{g.$currentUser?o(Yt):o(Re,!1)})}r(le);var Le=n(le,2);K(Le,1,"w-full lg:flex-1 min-w-0 flex flex-col h-full");var Oe=a(Le),Ze=a(Oe);{var Qe=o=>{var l=to(),$=a(l),P=a($),oe=a(P);{var f=Q=>{const ue=T(()=>me.headerConfig.backNav);var O=k(),fe=u(O);{var Ae=Y=>{var N=Ga(),ne=a(N);M(ne,{name:"arrow-left",size:"lg"}),r(N),b(()=>X(N,"href",e(ue).href)),t(Y,N)},Fe=Y=>{var N=k(),ne=u(N);{var Te=Ve=>{var pe=Xa();pe.__click=function(...De){e(ue).onclick?.apply(this,De)};var xe=a(pe);M(xe,{name:"arrow-left",size:"lg"}),r(pe),t(Ve,pe)};c(ne,Ve=>{e(ue).onclick&&Ve(Te)},!0)}t(Y,N)};c(fe,Y=>{e(ue).href?Y(Ae):Y(Fe,!1)})}t(Q,O)};c(oe,Q=>{me.headerConfig.backNav&&Q(f)})}var y=n(oe,2),B=a(y),C=a(B,!0);r(B);var re=n(B,2);{var ae=Q=>{var ue=eo(),O=a(ue,!0);r(ue),b(()=>w(O,me.headerConfig.subtitle)),t(Q,ue)};c(re,Q=>{me.headerConfig.subtitle&&Q(ae)})}r(y);var se=n(y,2);{var Pe=Q=>{var ue=k(),O=u(ue);ft(O,()=>me.headerConfig.actions),t(Q,ue)};c(se,Q=>{me.headerConfig.actions&&Q(Pe)})}r(P),r($),r(l),b(()=>w(C,me.headerConfig.title)),t(o,l)},Ee=o=>{var l=k(),$=u(l);{var P=f=>{var y=k(),B=u(y);ft(B,()=>me.header),t(f,y)},oe=f=>{var y=k(),B=u(y);{var C=re=>{var ae=no(),se=a(ae),Pe=a(se);{var Q=O=>{var fe=ao(),Ae=a(fe);M(Ae,{name:"arrow-left",size:"lg"});var Fe=n(Ae,2);{var Y=N=>{var ne=ro(),Te=a(ne,!0);r(ne),b(()=>w(Te,me.backNav.label)),t(N,ne)};c(Fe,N=>{me.backNav.label&&N(Y)})}r(fe),b(()=>X(fe,"href",me.backNav.href)),t(O,fe)},ue=O=>{var fe=k(),Ae=u(fe);{var Fe=Y=>{var N=so();N.__click=function(...pe){me.backNav.onclick?.apply(this,pe)};var ne=a(N);M(ne,{name:"arrow-left",size:"lg"});var Te=n(ne,2);{var Ve=pe=>{var xe=oo(),De=a(xe,!0);r(xe),b(()=>w(De,me.backNav.label)),t(pe,xe)};c(Te,pe=>{me.backNav.label&&pe(Ve)})}r(N),t(Y,N)};c(Ae,Y=>{me.backNav.onclick&&Y(Fe)},!0)}t(O,fe)};c(Pe,O=>{me.backNav.href?O(Q):O(ue,!1)})}r(se),r(ae),t(re,ae)};c(B,re=>{me.backNav&&re(C)},!0)}t(f,y)};c($,f=>{me.header?f(P):f(oe,!1)},!0)}t(o,l)};c(Ze,o=>{me.headerConfig?o(Qe):o(Ee,!1)})}var qe=n(Ze,2);{var rt=o=>{var l=io(),$=a(l);ft($,()=>xt.rightSidebar),r(l),t(o,l)};c(qe,o=>{xt.showOnMobile&&xt.rightSidebar&&!e(d)&&o(rt)})}var vt=n(qe,2);ft(vt,()=>h.children),r(Oe),r(Le);var Nt=n(Le,2);{var Ut=o=>{var l=uo(),$=a(l),P=a($);{var oe=y=>{var B=k(),C=u(B);ft(C,()=>xt.rightSidebar),t(y,B)},f=y=>{var B=vo(),C=u(B);ca(C,{});var re=n(C,2),ae=a(re),se=n(a(ae),2),Pe=a(se,!0);r(se),r(ae);var Q=n(ae,2),ue=a(Q);{var O=Y=>{var N=lo();nt(4),t(Y,N)},fe=Y=>{var N=k(),ne=u(N);Dt(ne,17,()=>e(J),Te=>Te.id,(Te,Ve)=>{var pe=co(),xe=a(pe,!0);r(pe),b(De=>{X(pe,"href",De),w(xe,e(Ve).title)},[()=>Nr(e(Ve),e(Ve).author)]),t(Te,pe)}),t(Y,N)};c(ue,Y=>{e(J).length===0?Y(O):Y(fe,!1)})}r(Q),r(re);var Ae=n(re,2);fa(Ae,{});var Fe=n(Ae,2);ia(Fe,{}),b(Y=>w(Pe,Y),[()=>p()("feed.mediaTypes.articles")]),t(y,B)};c(P,y=>{xt.rightSidebar?y(oe):y(f,!1)})}r($),r(l),t(o,l)};c(Nt,o=>{e(d)||o(Ut)})}r(F);var rr=n(F,2);ka(rr,{});var pr=n(rr,2);{var mr=o=>{Gt(o,{isHomePage:!0})},gr=o=>{var l=k(),$=u(l);{var P=f=>{Gt(f,{onclick:()=>ar.open()})},oe=f=>{var y=k(),B=u(y);{var C=re=>{Gt(re,{onclick:()=>or.open()})};c(B,re=>{e(s)==="/agora/invites"&&re(C)},!0)}t(f,y)};c($,f=>{e(s)==="/marketplace"?f(P):f(oe,!1)},!0)}t(o,l)};c(pr,o=>{e(s)==="/"?o(mr):o(gr,!1)})}r(Z);var hr=n(Z,2);Ca(hr,{get isOpen(){return e(S)},onClose:()=>ie(S,!1)}),b((o,l,$,P,oe,f,y,B)=>{K(le,1,`hidden lg:flex ${e(i)?"w-16":"w-64"} p-2 flex-col border-r border-border fixed left-0 top-0 bottom-0 overflow-y-auto overflow-x-visible transition-all duration-300 ease-in-out bg-background`),K(Ne,1,`mb-6 flex items-center ${e(i)?"justify-center":"justify-between"} gap-2`),K(we,1,`px-2 ${e(i)?"hidden":"flex-1"} transition-opacity duration-300 text-foreground`),X(ge,"aria-label",e(i)?"Expand sidebar":"Collapse sidebar"),K(A,1,`flex items-center ${e(i)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${o??""} relative`),X(A,"title",l),K(D,1,`flex items-center ${e(i)?"":"gap-3"}`),K(Ce,1,`w-full flex items-center ${e(i)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors text-foreground hover:bg-muted`),X(Ce,"title",e(i)?"Search Users":void 0),K(je,1,`flex items-center ${e(i)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${$??""} relative`),X(je,"title",e(i)?"Notifications":void 0),K(ot,1,`flex items-center ${e(i)?"":"gap-3"}`),K(I,1,`flex items-center ${e(i)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${P??""}`),X(I,"title",e(i)?"Wallet":void 0),K(ke,1,`flex items-center ${e(i)?"":"gap-3"}`),K(be,1,`flex items-center ${e(i)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${oe??""}`),X(be,"title",f),K(Ke,1,`flex items-center ${e(i)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(s)==="/trades"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),X(Ke,"title",y),K(Je,1,`flex items-center ${e(i)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(s)==="/marketplace"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),X(Je,"title",B)},[()=>e(s).startsWith("/messages")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(i)?p()("navigation.messages"):void 0,()=>e(s).startsWith("/notifications")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(s).startsWith("/wallet")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(s).startsWith("/packs")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(i)?p()("navigation.followPacks"):void 0,()=>e(i)?p()("navigation.trades"):void 0,()=>e(i)?p()("navigation.marketplace"):void 0]),t(L,ee),Xe(),V()}yt(["click"]);function Qo(L,h){po(L,{children:(z,p)=>{var U=k(),V=u(U);ft(V,()=>h.children),t(z,U)},$$slots:{default:!0}})}export{Qo as component};
