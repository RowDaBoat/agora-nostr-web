import{c as Le,f as m,a as o,t as Y,s as k,d as Da,j as Fa}from"../chunks/CiPFrJr-.js";import{p as na,f as H,g as a,b as E,d as n,y as I,e as r,r as t,u as R,t as T,s as w,c as oa,x as $a,a as Ba}from"../chunks/CSbKtK4P.js";import{p as Na,b as xe,i as L,c as et,s as at,a as tt}from"../chunks/87vUJtvC.js";import{p as rt}from"../chunks/fk9xBW3Y.js";import{g as nt}from"../chunks/CTwadDAE.js";import{n as _e,r as Sa,m as Ra,d as Ka,h as ca,e as ra,i as Pa,t as ua,Q as ja,a3 as Ca,a4 as Ma,s as Ia}from"../chunks/D0X4VYcq.js";import{s as Aa}from"../chunks/BRVPpNUj.js";import{h as Oa}from"../chunks/BHoCnjht.js";import{c as ga}from"../chunks/Bqe8dEVD.js";import{c as ot}from"../chunks/DphWBL27.js";import{D as Ea,a as Ha,B as Te,b as Va,L as Ge}from"../chunks/DFMKmhYe.js";import{D as Ga,a as Za,I as da}from"../chunks/C8b5RDJU.js";import{T as st}from"../chunks/ChQzK9Kk.js";import{E as lt}from"../chunks/BvCfGrRH.js";import{a as it}from"../chunks/DzBAiUtV.js";import{u as dt}from"../chunks/B6l-2YVB.js";import{c as ct}from"../chunks/a7XEC-kH.js";import{t as qe}from"../chunks/B0fEDaa-.js";import{R as ut}from"../chunks/1JgFLIq6.js";var vt=m('<span class="text-yellow-500 text-sm"> </span>'),mt=m("<!> <!>",1),gt=m('<!> <div class="space-y-4"><div class="bg-neutral-50 dark:bg-background rounded-lg p-4 space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-muted-foreground"> </span> <div class="flex items-center gap-1"><svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold"> </span></div></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">For</span> <span class="font-semibold"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Via</span> <span class="font-medium"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Trading with</span> <div class="flex items-center gap-2"><span class="font-medium"> </span> <!></div></div></div> <div class="flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm text-yellow-800 dark:text-yellow-300"><p class="font-medium mb-1">Trade Safely</p> <ul class="space-y-1 text-xs"><li>‚Ä¢ Never release funds before confirming payment</li> <li>‚Ä¢ Use escrow when available</li> <li>‚Ä¢ Communicate only through secure channels</li> <li>‚Ä¢ Report suspicious behavior immediately</li></ul></div></div> <label class="flex items-start gap-3 cursor-pointer"><input type="checkbox" class="mt-1 w-4 h-4 text-primary border rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">I understand the risks and agree to proceed with this P2P trade</span></label></div> <!>',1),ft=m('<div class="py-12 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div> <p class="text-foreground font-medium">Processing Trade...</p> <p class="text-sm text-muted-foreground mt-2">Connecting with trader</p></div>'),pt=m('<div class="py-12 text-center"><div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <p class="text-foreground font-medium">Trade Initiated!</p> <p class="text-sm text-muted-foreground mt-2">Check your messages for next steps</p></div>'),ht=m("<!> <!> <!>",1);function xt(C,e){na(e,!0);let _=Na(e,"open",15,!1);const K=_e.$fetchProfile(()=>e.order.pubkey);let g=E("confirm"),h=E(!1);async function v(){w(g,"processing");try{const M=new Ra(_e.ndk);M.kind=38383,M.tags=[["d",`take-${e.order.id}-${Date.now()}`],["e",e.order.event.id],["p",e.order.pubkey],["k",e.order.type==="buy"?"sell":"buy"],["f",e.order.currency],["s","in-progress"],["amt",e.order.satsAmount.toString()],["fa",e.order.fiatAmount.toString()],["pm",e.order.paymentMethod],["y","Agora"],["z","take-order"]],M.content=`Taking order ${e.order.id}`,await M.publish();const f=new Ra(_e.ndk);f.kind=38383,f.tags=[...e.order.event.tags.filter(s=>s[0]!=="s"),["s","in-progress"]],f.content="",await f.publish(),w(g,"complete"),setTimeout(()=>{_(!1),e.onClose()},2e3)}catch(M){console.error("Failed to take order:",M),w(g,"confirm")}}const A=R(()=>({USD:"$",EUR:"‚Ç¨",GBP:"¬£",BRL:"R$"})[e.order.currency]||e.order.currency);var B=Le(),p=H(B);xe(p,()=>Va,(M,f)=>{f(M,{get open(){return _()},onOpenChange:s=>{_(s),s||e.onClose()},children:(s,i)=>{var S=Le(),J=H(S);xe(J,()=>Ea,(V,P)=>{P(V,{class:"max-w-md",children:($,W)=>{var ae=ht(),te=H(ae);{var z=c=>{var de=gt(),ye=H(de);xe(ye,()=>Ga,(N,Q)=>{Q(N,{children:(ue,Pe)=>{var ge=Le(),fe=H(ge);xe(fe,()=>Ha,(Fe,Ce)=>{Ce(Fe,{children:(Me,Ne)=>{I();var Ae=Y("Confirm Trade");o(Me,Ae)},$$slots:{default:!0}})}),o(ue,ge)},$$slots:{default:!0}})});var Ze=n(ye,2),y=r(Ze),j=r(y),X=r(j),q=r(X);t(X);var G=n(X,2),ee=n(r(G),2),ve=r(ee);t(ee),t(G),t(j);var ce=n(j,2),se=n(r(ce),2),be=r(se);t(se),t(ce);var O=n(ce,2),ke=n(r(O),2),we=r(ke,!0);t(ke),t(O);var Ue=n(O,2),Ke=n(r(Ue),2),je=r(Ke),Qe=r(je,!0);t(je);var sa=n(je,2);{var Ie=N=>{var Q=vt(),ue=r(Q);t(Q),T(Pe=>k(ue,`‚òÖ ${Pe??""}`),[()=>e.order.rating.toFixed(1)]),o(N,Q)};L(sa,N=>{e.order.rating&&N(Ie)})}t(Ke),t(Ue),t(y);var Oe=n(y,4),me=r(Oe);Sa(me),I(2),t(Oe),t(Ze);var la=n(Ze,2);xe(la,()=>Za,(N,Q)=>{Q(N,{children:(ue,Pe)=>{var ge=mt(),fe=H(ge);Te(fe,{variant:"outline",onclick:()=>{_(!1),e.onClose()},children:(Ce,Me)=>{I();var Ne=Y("Cancel");o(Ce,Ne)},$$slots:{default:!0}});var Fe=n(fe,2);{let Ce=R(()=>!a(h));Te(Fe,{onclick:v,get disabled(){return a(Ce)},children:(Me,Ne)=>{I();var Ae=Y("Take Order");o(Me,Ae)},$$slots:{default:!0}})}o(ue,ge)},$$slots:{default:!0}})}),T((N,Q)=>{k(q,`You will ${e.order.type==="buy"?"sell":"buy"}`),k(ve,`${N??""} BTC`),k(be,`${a(A)??""}${Q??""}`),k(we,e.order.paymentMethod),k(Qe,K?.name||"Anonymous")},[()=>(e.order.satsAmount/1e8).toFixed(8),()=>e.order.fiatAmount.toFixed(2)]),ot(me,()=>a(h),N=>w(h,N)),o(c,de)};L(te,c=>{a(g)==="confirm"&&c(z)})}var U=n(te,2);{var oe=c=>{var de=ft();o(c,de)};L(U,c=>{a(g)==="processing"&&c(oe)})}var re=n(U,2);{var ze=c=>{var de=pt();o(c,de)};L(re,c=>{a(g)==="complete"&&c(ze)})}o($,ae)},$$slots:{default:!0}})}),o(s,S)},$$slots:{default:!0}})}),o(C,B),oa()}var _t=m('<img class="w-10 h-10 md:w-12 md:h-12 rounded-full object-cover"/>'),yt=m('<div class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br bg-primary rounded-full"></div>'),bt=m('<div class="flex items-center gap-1 text-yellow-500"><svg class="w-4 h-4 fill-current" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg> <span class="text-sm"> </span></div>'),kt=m('<span class="inline-flex items-center gap-1 ml-2"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></span>'),wt=m("<span> </span>"),Pt=m('<p class="text-xs text-muted-foreground mt-1"> <!></p>'),Ct=m('<span class="text-xs text-muted-foreground hidden md:inline"> </span>'),Mt=m('<a target="_blank" rel="noopener noreferrer" class="flex-1 flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm md:text-base"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <span class="hidden md:inline"> </span> <span class="md:hidden">View</span></a>'),At=(C,e)=>w(e,!0),Bt=m('<button class="flex-1 flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm md:text-base"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg> <span class="hidden md:inline"> </span> <span class="md:hidden"> </span></button>'),St=m('<div class="bg-card rounded-lg md:rounded-xl border border p-3 md:p-4 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between mb-2 md:mb-3"><div class="flex items-center gap-3"><!> <div><div class="flex items-center gap-2"><h3 class="font-semibold text-sm md:text-base text-foreground"> </h3> <!></div> <p class="text-xs text-muted-foreground"><!> <!> <!></p></div></div> <div class="flex items-center gap-1 md:gap-2"><span class="text-lg md:text-2xl"> </span> <div> </div> <!></div></div> <div class="grid grid-cols-3 gap-2 md:gap-4 mb-3 md:mb-4"><div><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Amount</p> <div class="flex items-center gap-1 md:gap-2"><svg class="w-3 h-3 md:w-4 md:h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold text-xs md:text-base text-foreground"> </span></div> <p class="text-xs text-muted-foreground mt-0.5 md:mt-1 hidden md:block"> </p></div> <div><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Price</p> <div class="flex items-center gap-1"><span class="text-sm md:text-base hidden md:inline"> </span> <p class="text-sm md:text-lg font-semibold text-foreground"> </p></div> <!></div> <div class="min-w-0"><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Payment</p> <div class="flex items-center gap-1 md:gap-2"><span class="text-sm md:text-lg flex-shrink-0"> </span> <div class="flex flex-col min-w-0"><span class="font-medium text-xs md:text-base text-foreground truncate max-w-[80px] md:max-w-none"> </span> <!></div></div></div></div> <div class="flex items-center gap-2"><!> <button class="p-1.5 md:p-2 border border rounded-lg hover:bg-accent transition-colors"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></button> <button class="p-1.5 md:p-2 border border rounded-lg hover:bg-accent transition-colors hidden md:block"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></button></div></div> <!>',1);function Rt(C,e){na(e,!0);const _=_e.$fetchProfile(()=>e.order.pubkey);let K=E(!1);const g={USD:{symbol:"$",flag:"üá∫üá∏"},EUR:{symbol:"‚Ç¨",flag:"üá™üá∫"},GBP:{symbol:"¬£",flag:"üá¨üáß"},BRL:{symbol:"R$",flag:"üáßüá∑"},ARS:{symbol:"$",flag:"üá¶üá∑"},PLN:{symbol:"z≈Ç",flag:"üáµüá±"},JPY:{symbol:"¬•",flag:"üáØüáµ"},CHF:{symbol:"Fr",flag:"üá®üá≠"},PEN:{symbol:"S/",flag:"üáµüá™"},UYU:{symbol:"$",flag:"üá∫üáæ"},VES:{symbol:"Bs",flag:"üáªüá™"},RUB:{symbol:"‚ÇΩ",flag:"üá∑üá∫"},SEK:{symbol:"kr",flag:"üá∏üá™"},NOK:{symbol:"kr",flag:"üá≥üá¥"},AUD:{symbol:"$",flag:"üá¶üá∫"},CUP:{symbol:"$",flag:"üá®üá∫"}},h={Cash:{icon:"üíµ",region:"Universal"},"Cash (F2F)":{icon:"üíµ",region:"Local"},PIX:{icon:"üîÑ",region:"Brazil"},BLIK:{icon:"üì±",region:"Poland"},Revolut:{icon:"üí≥",region:"Europe"},Zelle:{icon:"üè¶",region:"USA"},CashApp:{icon:"üì≤",region:"USA"},CVU:{icon:"üèß",region:"Argentina"},MP:{icon:"üì≤",region:"Argentina"},f2f:{icon:"ü§ù",region:"Local"},–°–ë–ü:{icon:"üè¶",region:"Russia"}},v=R(()=>g[e.order.currency]||{symbol:e.order.currency,flag:"üåç"}),A=R(()=>h[e.order.paymentMethod]||{icon:"üí∞",region:""}),B=R(()=>e.order.fiatAmount>0&&e.order.satsAmount>0?e.order.fiatAmount/e.order.satsAmount*1e8:0);var p=St(),M=H(p),f=r(M),s=r(f),i=r(s);{var S=d=>{var u=_t();T(()=>{ca(u,"src",_.picture),ca(u,"alt",_.name||"User")}),o(d,u)},J=d=>{var u=yt();o(d,u)};L(i,d=>{_?.picture?d(S):d(J,!1)})}var V=n(i,2),P=r(V),$=r(P),W=r($,!0);t($);var ae=n($,2);{var te=d=>{var u=bt(),D=n(r(u),2),ne=r(D,!0);t(D),t(u),T(pe=>k(ne,pe),[()=>e.order.rating.toFixed(1)]),o(d,u)};L(ae,d=>{e.order.rating&&e.order.rating>0&&d(te)})}t(P);var z=n(P,2),U=r(z);st(U,{get timestamp(){return e.order.createdAt}});var oe=n(U,2);{var re=d=>{var u=Y();T(()=>k(u,`‚Ä¢ ${e.order.platform??""}`)),o(d,u)};L(oe,d=>{e.order.platform&&d(re)})}var ze=n(oe,2);{var c=d=>{var u=kt(),D=n(r(u),2),ne=r(D);t(D),t(u),T(pe=>k(ne,`Near ${pe??""}`),[()=>e.order.geohash.substring(0,4)]),o(d,u)};L(ze,d=>{e.order.geohash&&e.order.paymentMethod.includes("F2F")&&d(c)})}t(z),t(V),t(s);var de=n(s,2),ye=r(de),Ze=r(ye,!0);t(ye);var y=n(ye,2),j=r(y,!0);t(y);var X=n(y,2);lt(X,{get event(){return e.order.event}}),t(de),t(f);var q=n(f,2),G=r(q),ee=n(r(G),2),ve=n(r(ee),2),ce=r(ve,!0);t(ve),t(ee);var se=n(ee,2),be=r(se);t(se),t(G);var O=n(G,2),ke=n(r(O),2),we=r(ke),Ue=r(we,!0);t(we);var Ke=n(we,2),je=r(Ke);t(Ke),t(ke);var Qe=n(ke,2);{var sa=d=>{var u=Pt(),D=r(u),ne=n(D);{var pe=he=>{var $e=wt(),ia=r($e);t($e),T(()=>{Ka($e,1,et(e.order.premium>0?"text-red-500":"text-green-500")),k(ia,`(${e.order.premium>0?"+":""}${e.order.premium??""}%)`)}),o(he,$e)};L(ne,he=>{e.order.premium&&e.order.premium!==0&&he(pe)})}t(u),T(he=>k(D,`${a(v).symbol??""}${he??""}/BTC `),[()=>a(B).toFixed(2)]),o(d,u)};L(Qe,d=>{a(B)>0&&d(sa)})}t(O);var Ie=n(O,2),Oe=n(r(Ie),2),me=r(Oe),la=r(me,!0);t(me);var N=n(me,2),Q=r(N),ue=r(Q,!0);t(Q);var Pe=n(Q,2);{var ge=d=>{var u=Ct(),D=r(u,!0);t(u),T(()=>k(D,a(A).region)),o(d,u)};L(Pe,d=>{a(A).region&&d(ge)})}t(N),t(Oe),t(Ie),t(q);var fe=n(q,2),Fe=r(fe);{var Ce=d=>{var u=Mt(),D=n(r(u),2),ne=r(D);t(D),I(2),t(u),T(()=>{ca(u,"href",e.order.source),ca(u,"title",`View on ${(e.order.platform||"external site")??""}`),k(ne,`View on ${(e.order.platform||"Site")??""}`)}),o(d,u)},Me=d=>{var u=Bt();u.__click=[At,K];var D=n(r(u),2),ne=r(D,!0);t(D);var pe=n(D,2),he=r(pe,!0);t(pe),t(u),T(()=>{k(ne,e.order.type==="buy"?"Sell to User":"Buy from User"),k(he,e.order.type==="buy"?"Sell":"Buy")}),o(d,u)};L(Fe,d=>{e.order.source?d(Ce):d(Me,!1)})}I(4),t(fe),t(M);var Ne=n(M,2);{var Ae=d=>{xt(d,{get order(){return e.order},onClose:()=>w(K,!1)})};L(Ne,d=>{a(K)&&d(Ae)})}T((d,u,D,ne)=>{k(W,d),k(Ze,a(v).flag),Ka(y,1,`px-2 md:px-3 py-0.5 md:py-1 rounded-full text-xs md:text-sm font-medium ${e.order.type==="buy"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`),k(j,e.order.type==="buy"?"Buying":"Selling"),k(ce,u),k(be,`${D??""} sats`),k(Ue,a(v).flag),k(je,`${a(v).symbol??""}${ne??""}`),k(la,a(A).icon),k(ue,e.order.paymentMethod)},[()=>_?.name||`@${e.order.pubkey.slice(0,6)}...`,()=>(e.order.satsAmount/1e8).toFixed(4),()=>e.order.satsAmount.toLocaleString(),()=>e.order.fiatAmount.toFixed(0)]),o(C,p),oa()}Da(["click"]);var Dt=m('<div class="text-center py-12 text-muted-foreground">No orders available matching your filters</div>'),Tt=m('<div class="w-full"><div class="grid gap-3 md:gap-4"><!></div></div>');function Lt(C,e){na(e,!0);const _=_e.$subscribe(()=>({filters:[{kinds:[38383],limit:100}],closeOnEose:!1})),K=R(()=>_.events),g=R(()=>{const f=[];return a(K).forEach(s=>{const i=s.tags,S=i.find(c=>c[0]==="z");if(S&&S[1]==="info")return;const J=i.find(c=>c[0]==="k")?.[1],V=i.find(c=>c[0]==="f")?.[1],P=i.find(c=>c[0]==="s")?.[1],$=i.find(c=>c[0]==="pm")?.[1],W=parseInt(i.find(c=>c[0]==="amt")?.[1]||"0"),ae=parseFloat(i.find(c=>c[0]==="fa")?.[1]||"0"),te=parseFloat(i.find(c=>c[0]==="premium")?.[1]||"0"),z=parseFloat(i.find(c=>c[0]==="rating")?.[1]||"0"),U=i.find(c=>c[0]==="y")?.[1],oe=i.find(c=>c[0]==="g")?.[1],re=i.find(c=>c[0]==="source")?.[1],ze=i.find(c=>c[0]==="d")?.[1];P==="pending"&&J&&V&&ze&&f.push({id:ze,pubkey:s.pubkey,type:J,currency:V,status:P,paymentMethod:$||"Unknown",satsAmount:W,fiatAmount:ae,premium:te,rating:z,platform:U,geohash:oe,source:re,createdAt:s.created_at||Date.now()/1e3,event:s})}),f.sort((s,i)=>i.createdAt-s.createdAt),f}),h=R(()=>a(g).filter(f=>!(e.filters.currency!=="all"&&f.currency!==e.filters.currency||e.filters.paymentMethod!=="all"&&f.paymentMethod!==e.filters.paymentMethod||e.filters.orderType!=="all"&&f.type!==e.filters.orderType||f.satsAmount<e.filters.minAmount||f.satsAmount>e.filters.maxAmount)));var v=Tt(),A=r(v),B=r(A);{var p=f=>{var s=Dt();o(f,s)},M=f=>{var s=Le(),i=H(s);ra(i,17,()=>a(h),S=>S.id,(S,J)=>{Rt(S,{get order(){return a(J)}})}),o(f,s)};L(B,f=>{a(h).length===0?f(p):f(M,!1)})}t(A),t(v),o(C,v),oa()}var zt=m("<option> </option>"),Ut=m('<span class="text-lg mr-2"> </span> <span class="text-sm"> </span>',1),Kt=m('<div class="mt-3"><!></div>'),jt=Fa('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> Location (Required for F2F)',1),It=Fa('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),Ot=m('<p class="text-xs text-muted-foreground"> </p>'),Ft=m('<div><!> <div class="space-y-2 mt-2"><div class="flex gap-2"><!> <!></div> <!></div></div>'),Nt=m('<img alt="" class="w-5 h-5 rounded border border-background"/>'),Et=m('<div class="w-5 h-5 rounded bg-muted flex items-center justify-center border border-background"><svg class="w-3 h-3 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div>'),Ht=m('<div class="flex items-center -space-x-1"></div>'),Vt=m('<span class="absolute -top-1 -right-1 bg-primary text-primary-foreground text-[10px] font-medium rounded-full min-w-[14px] h-[14px] flex items-center justify-center px-0.5"> </span>'),Gt=m('<div class="relative"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg> <!></div>'),Zt=m('<div class="absolute bottom-full left-0 mb-2 bg-popover border border-border rounded-lg shadow-xl z-50 w-80 max-h-[400px] overflow-y-auto"><!></div>'),Yt=m('<div class="relative"><!> <!></div> <div class="flex gap-2"><!> <!></div>',1),Jt=m('<!> <div class="space-y-6"><div><!> <div class="grid grid-cols-2 gap-3"><!> <!></div></div> <div><!> <div class="relative mt-2"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <!></div> <p class="mt-1 text-xs text-muted-foreground"> </p></div> <div class="grid grid-cols-2 gap-4"><div><!> <!> <p class="mt-1 text-xs text-muted-foreground"> </p></div> <div><!> <select id="currency" class="mt-2 w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"></select></div></div> <div><!> <div class="grid grid-cols-2 gap-3"></div> <!></div> <!> <div><!> <!> <p class="mt-1 text-xs text-muted-foreground">Positive for above market, negative for below</p></div> <div><!> <select id="expiration" class="mt-2 w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"><option>1 hour</option><option>6 hours</option><option>12 hours</option><option>24 hours</option><option>48 hours</option><option>72 hours</option></select></div></div> <!>',1);function Wt(C,e){na(e,!0);let _=Na(e,"open",15,!1);const K=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"‚Ç¨",name:"Euro"},{code:"GBP",symbol:"¬£",name:"British Pound"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"ARS",symbol:"$",name:"Argentine Peso"},{code:"PLN",symbol:"z≈Ç",name:"Polish Z≈Çoty"}],g=[{id:"Cash (F2F)",name:"Cash (F2F)",icon:"üíµ",requiresLocation:!0},{id:"Revolut",name:"Revolut",icon:"üí≥"},{id:"PIX",name:"PIX (Brazil)",icon:"üîÑ"},{id:"BLIK",name:"BLIK (Poland)",icon:"üì±"},{id:"Zelle",name:"Zelle",icon:"üè¶"},{id:"CashApp",name:"Cash App",icon:"üì≤"},{id:"custom",name:"Other...",icon:"‚úèÔ∏è"}];function h(y,j,X=5){const q="0123456789bcdefghjkmnpqrstuvwxyz";let G=0,ee=0,ve=!0,ce="",se=[-90,90],be=[-180,180];for(;ce.length<X;){if(ve){const O=(be[0]+be[1])/2;j>=O?(G|=1<<4-ee,be[0]=O):be[1]=O}else{const O=(se[0]+se[1])/2;y>=O?(G|=1<<4-ee,se[0]=O):se[1]=O}ve=!ve,ee++,ee===5&&(ce+=q[G],ee=0,G=0)}return ce}let v=E("buy"),A=E("USD"),B=E("100000"),p=E("50"),M=E("Cash (F2F)"),f=E(""),s=E(""),i=E(""),S=E("0"),J=E("24"),V=E(!1),P=E($a([])),$=E(!1),W=E(!1);const ae=R(()=>Pa.relays.filter(y=>y.enabled));Ba(()=>{_()&&(Pa.selectedRelay?w(P,[Pa.selectedRelay],!0):a(P).length===0&&w(P,a(ae).filter(y=>y.write).map(y=>y.url),!0))});const te=R(()=>g.find(y=>y.id===a(M))?.requiresLocation||!1);Ba(()=>{a(te)||(w(s,""),w(i,""))});function z(){navigator.geolocation?navigator.geolocation.getCurrentPosition(y=>{const j=y.coords.latitude,X=y.coords.longitude,q=h(j,X,5);w(i,q,!0),w(s,`Near ${q} (auto-detected)`),qe.success("Location detected")},y=>{console.error("Error getting location:",y),qe.error("Could not get your location. Please enter city/area manually.")}):qe.error("Geolocation is not supported by your browser")}function U(y){a(P).includes(y)?w(P,a(P).filter(j=>j!==y),!0):w(P,[...a(P),y],!0)}function oe(y){w(P,[y],!0),w(W,!1)}function re(){w(W,!1)}async function ze(){const y=a(M)==="custom"?a(f):a(M);if(!y){qe.error("Please specify a payment method");return}if(a(M)==="Cash (F2F)"&&!a(s)&&!a(i)){qe.error("Please provide a location for face-to-face trades");return}w(V,!0);try{const j=new Ra(_e.ndk);j.kind=38383;const q=[["d",`${Date.now()}-${Math.random().toString(36).substr(2,9)}`],["k",a(v)],["f",a(A)],["s","pending"],["amt",a(B)],["fa",a(p)],["pm",y],["premium",a(S)],["y","Agora"],["z","order"],["network","mainnet"],["layer","lightning"],["expiration",(Math.floor(Date.now()/1e3)+parseInt(a(J))*3600).toString()]];a(i)&&q.push(["g",a(i)]),a($)&&q.push(["-"]),j.tags=q,j.content="";const G=a(P).length>0?_e.ndk.pool.getRelayset(a(P)):void 0;await j.publish(G),qe.success("Order created successfully"),_(!1),e.onClose()}catch(j){console.error("Failed to create order:",j),qe.error("Failed to create order")}finally{w(V,!1)}}const c=R(()=>parseInt(a(B))/1e8),de=R(()=>parseFloat(a(p))/a(c));var ye=Le(),Ze=H(ye);xe(Ze,()=>Va,(y,j)=>{j(y,{get open(){return _()},onOpenChange:X=>{_(X),X||e.onClose()},children:(X,q)=>{var G=Le(),ee=H(G);xe(ee,()=>Ea,(ve,ce)=>{ce(ve,{class:"max-w-lg max-h-[90vh] overflow-y-auto",children:(se,be)=>{var O=Jt(),ke=H(O);xe(ke,()=>Ga,(l,x)=>{x(l,{children:(b,le)=>{var F=Le(),Be=H(F);xe(Be,()=>Ha,(Se,Re)=>{Re(Se,{children:(Ye,Z)=>{I();var ie=Y("Create P2P Order");o(Ye,ie)},$$slots:{default:!0}})}),o(b,F)},$$slots:{default:!0}})});var we=n(ke,2),Ue=r(we),Ke=r(Ue);Ge(Ke,{class:"block mb-2",children:(l,x)=>{I();var b=Y("Order Type");o(l,b)},$$slots:{default:!0}});var je=n(Ke,2),Qe=r(je);{let l=R(()=>a(v)==="buy"?"default":"outline"),x=R(()=>a(v)==="buy"?"border-green-500 bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"");Te(Qe,{get variant(){return a(l)},onclick:()=>w(v,"buy"),get class(){return a(x)},children:(b,le)=>{I();var F=Y("I want to buy Bitcoin");o(b,F)},$$slots:{default:!0}})}var sa=n(Qe,2);{let l=R(()=>a(v)==="sell"?"default":"outline"),x=R(()=>a(v)==="sell"?"border-red-500 bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40":"");Te(sa,{get variant(){return a(l)},onclick:()=>w(v,"sell"),get class(){return a(x)},children:(b,le)=>{I();var F=Y("I want to sell Bitcoin");o(b,F)},$$slots:{default:!0}})}t(je),t(Ue);var Ie=n(Ue,2),Oe=r(Ie);Ge(Oe,{for:"sats-amount",children:(l,x)=>{I();var b=Y("Bitcoin Amount (sats)");o(l,b)},$$slots:{default:!0}});var me=n(Oe,2),la=n(r(me),2);da(la,{id:"sats-amount",type:"number",class:"pl-10",placeholder:"100000",get value(){return a(B)},set value(l){w(B,l,!0)}}),t(me);var N=n(me,2),Q=r(N);t(N),t(Ie);var ue=n(Ie,2),Pe=r(ue),ge=r(Pe);Ge(ge,{for:"fiat-amount",children:(l,x)=>{I();var b=Y("Fiat Amount");o(l,b)},$$slots:{default:!0}});var fe=n(ge,2);da(fe,{id:"fiat-amount",type:"number",placeholder:"50",class:"mt-2",get value(){return a(p)},set value(l){w(p,l,!0)}});var Fe=n(fe,2),Ce=r(Fe);t(Fe),t(Pe);var Me=n(Pe,2),Ne=r(Me);Ge(Ne,{for:"currency",children:(l,x)=>{I();var b=Y("Currency");o(l,b)},$$slots:{default:!0}});var Ae=n(Ne,2);ra(Ae,21,()=>K,ua,(l,x)=>{var b=zt(),le=r(b);t(b);var F={};T(()=>{k(le,`${a(x).symbol??""} ${a(x).code??""}`),F!==(F=a(x).code)&&(b.value=(b.__value=a(x).code)??"")}),o(l,b)}),t(Ae),t(Me),t(ue);var d=n(ue,2),u=r(d);Ge(u,{class:"block mb-2",children:(l,x)=>{I();var b=Y("Payment Method");o(l,b)},$$slots:{default:!0}});var D=n(u,2);ra(D,21,()=>g,ua,(l,x)=>{{let b=R(()=>a(M)===a(x).id?"default":"outline"),le=R(()=>a(M)===a(x).id?"border-primary":"");Te(l,{get variant(){return a(b)},onclick:()=>w(M,a(x).id,!0),get class(){return`justify-start h-auto py-2 ${a(le)??""}`},children:(F,Be)=>{var Se=Ut(),Re=H(Se),Ye=r(Re,!0);t(Re);var Z=n(Re,2),ie=r(Z,!0);t(Z),T(()=>{k(Ye,a(x).icon),k(ie,a(x).name)}),o(F,Se)},$$slots:{default:!0}})}}),t(D);var ne=n(D,2);{var pe=l=>{var x=Kt(),b=r(x);da(b,{placeholder:"Enter payment method (e.g., Bank Transfer, PayPal, etc.)",autofocus:!0,get value(){return a(f)},set value(le){w(f,le,!0)}}),t(x),o(l,x)};L(ne,l=>{a(M)==="custom"&&l(pe)})}t(d);var he=n(d,2);{var $e=l=>{var x=Ft(),b=r(x);Ge(b,{for:"location",class:"flex items-center gap-1",children:(Z,ie)=>{var Je=jt();I(),o(Z,Je)},$$slots:{default:!0}});var le=n(b,2),F=r(le),Be=r(F);da(Be,{id:"location",placeholder:"City, neighborhood, or area",class:"flex-1",get value(){return a(s)},set value(Z){w(s,Z,!0)}});var Se=n(Be,2);Te(Se,{variant:"outline",size:"icon",onclick:z,title:"Use current location",children:(Z,ie)=>{var Je=It();o(Z,Je)},$$slots:{default:!0}}),t(F);var Re=n(F,2);{var Ye=Z=>{var ie=Ot(),Je=r(ie);t(ie),T(()=>k(Je,`Geohash: ${a(i)??""} (approximate location)`)),o(Z,ie)};L(Re,Z=>{a(i)&&Z(Ye)})}t(le),t(x),o(l,x)};L(he,l=>{a(te)&&l($e)})}var ia=n(he,2),Ta=r(ia);Ge(Ta,{for:"premium",children:(l,x)=>{I();var b=Y("Premium (%)");o(l,b)},$$slots:{default:!0}});var Ya=n(Ta,2);da(Ya,{id:"premium",type:"number",placeholder:"0",class:"mt-2",get value(){return a(S)},set value(l){w(S,l,!0)}}),I(2),t(ia);var La=n(ia,2),za=r(La);Ge(za,{for:"expiration",children:(l,x)=>{I();var b=Y("Expiration (hours)");o(l,b)},$$slots:{default:!0}});var fa=n(za,2),pa=r(fa);pa.value=pa.__value="1";var ha=n(pa);ha.value=ha.__value="6";var xa=n(ha);xa.value=xa.__value="12";var _a=n(xa);_a.value=_a.__value="24";var ya=n(_a);ya.value=ya.__value="48";var Ua=n(ya);Ua.value=Ua.__value="72",t(fa),t(La),t(we);var Ja=n(we,2);xe(Ja,()=>Za,(l,x)=>{x(l,{class:"mt-6 flex items-center justify-between gap-4",children:(b,le)=>{var F=Yt(),Be=H(F),Se=r(Be);Te(Se,{type:"button",variant:"outline",size:"icon",onclick:()=>w(W,!a(W)),get disabled(){return a(V)},class:"h-10 w-10",title:"Select relays",children:(De,Ee)=>{var We=Le(),He=H(We);{var ba=ea=>{var Xe=Ht();ra(Xe,21,()=>a(P),ua,(ka,wa)=>{const aa=R(()=>a(ae).find(Ve=>Ve.url===a(wa))),ta=R(()=>a(aa)?dt(a(aa).url):null);var va=Le(),Xa=H(va);{var qa=Ve=>{var ma=Nt();T(()=>ca(ma,"src",a(ta).info.icon)),o(Ve,ma)},Qa=Ve=>{var ma=Et();o(Ve,ma)};L(Xa,Ve=>{a(ta)?.info?.icon?Ve(qa):Ve(Qa,!1)})}o(ka,va)}),t(Xe),o(ea,Xe)},Wa=ea=>{var Xe=Gt(),ka=n(r(Xe),2);{var wa=aa=>{var ta=Vt(),va=r(ta,!0);t(ta),T(()=>k(va,a(P).length)),o(aa,ta)};L(ka,aa=>{a(P).length>2&&aa(wa)})}t(Xe),o(ea,Xe)};L(He,ea=>{a(P).length<=2&&a(P).length>0?ea(ba):ea(Wa,!1)})}o(De,We)},$$slots:{default:!0}});var Re=n(Se,2);{var Ye=De=>{var Ee=Zt(),We=r(Ee);ut(We,{get selectedRelayUrls(){return a(P)},onToggleRelay:U,onSelectOnly:oe,get isProtected(){return a($)},set isProtected(He){w($,He,!0)}}),t(Ee),it(Ee,(He,ba)=>ct?.(He,ba),()=>re),o(De,Ee)};L(Re,De=>{a(W)&&De(Ye)})}t(Be);var Z=n(Be,2),ie=r(Z);Te(ie,{variant:"outline",onclick:()=>{_(!1),e.onClose()},children:(De,Ee)=>{I();var We=Y("Cancel");o(De,We)},$$slots:{default:!0}});var Je=n(ie,2);{let De=R(()=>a(V)||!a(B)||!a(p));Te(Je,{onclick:ze,get disabled(){return a(De)},children:(Ee,We)=>{I();var He=Y();T(()=>k(He,a(V)?"Creating...":"Create Order")),o(Ee,He)},$$slots:{default:!0}})}t(Z),o(b,F)},$$slots:{default:!0}})}),T((l,x)=>{k(Q,`= ${l??""} BTC`),k(Ce,`‚âà $${x??""}/BTC`)},[()=>a(c).toFixed(8),()=>a(de).toFixed(2)]),ja(Ae,()=>a(A),l=>w(A,l)),ja(fa,()=>a(J),l=>w(J,l)),o(se,O)},$$slots:{default:!0}})}),o(X,G)},$$slots:{default:!0}})}),o(C,ye),oa()}const Xt={USD:{name:"US Dollar",flag:"üá∫üá∏"},EUR:{name:"Euro",flag:"üá™üá∫"},BRL:{name:"Brazilian Real",flag:"üáßüá∑"},ARS:{name:"Argentine Peso",flag:"üá¶üá∑"},GBP:{name:"British Pound",flag:"üá¨üáß"},PLN:{name:"Polish Z≈Çoty",flag:"üáµüá±"},JPY:{name:"Japanese Yen",flag:"üáØüáµ"},CAD:{name:"Canadian Dollar",flag:"üá®üá¶"},AUD:{name:"Australian Dollar",flag:"üá¶üá∫"},CHF:{name:"Swiss Franc",flag:"üá®üá≠"},CNY:{name:"Chinese Yuan",flag:"üá®üá≥"},INR:{name:"Indian Rupee",flag:"üáÆüá≥"},MXN:{name:"Mexican Peso",flag:"üá≤üáΩ"},ZAR:{name:"South African Rand",flag:"üáøüá¶"},SEK:{name:"Swedish Krona",flag:"üá∏üá™"},NOK:{name:"Norwegian Krone",flag:"üá≥üá¥"},DKK:{name:"Danish Krone",flag:"üá©üá∞"},NZD:{name:"New Zealand Dollar",flag:"üá≥üáø"},SGD:{name:"Singapore Dollar",flag:"üá∏üá¨"},HKD:{name:"Hong Kong Dollar",flag:"üá≠üá∞"},KRW:{name:"South Korean Won",flag:"üá∞üá∑"},TRY:{name:"Turkish Lira",flag:"üáπüá∑"},RUB:{name:"Russian Ruble",flag:"üá∑üá∫"},THB:{name:"Thai Baht",flag:"üáπüá≠"},MYR:{name:"Malaysian Ringgit",flag:"üá≤üáæ"},PHP:{name:"Philippine Peso",flag:"üáµüá≠"},IDR:{name:"Indonesian Rupiah",flag:"üáÆüá©"},VND:{name:"Vietnamese Dong",flag:"üáªüá≥"},COP:{name:"Colombian Peso",flag:"üá®üá¥"},CLP:{name:"Chilean Peso",flag:"üá®üá±"},PEN:{name:"Peruvian Sol",flag:"üáµüá™"},UAH:{name:"Ukrainian Hryvnia",flag:"üá∫üá¶"},AED:{name:"UAE Dirham",flag:"üá¶üá™"},SAR:{name:"Saudi Riyal",flag:"üá∏üá¶"},QAR:{name:"Qatari Riyal",flag:"üá∂üá¶"},KWD:{name:"Kuwaiti Dinar",flag:"üá∞üáº"},NGN:{name:"Nigerian Naira",flag:"üá≥üá¨"},KES:{name:"Kenyan Shilling",flag:"üá∞üá™"},GHS:{name:"Ghanaian Cedi",flag:"üá¨üá≠"},UGX:{name:"Ugandan Shilling",flag:"üá∫üá¨"},VES:{name:"Venezuelan Bol√≠var",flag:"üáªüá™"},UYU:{name:"Uruguayan Peso",flag:"üá∫üáæ"},BOB:{name:"Bolivian Boliviano",flag:"üáßüá¥"},CRC:{name:"Costa Rican Col√≥n",flag:"üá®üá∑"},GTQ:{name:"Guatemalan Quetzal",flag:"üá¨üáπ"},HNL:{name:"Honduran Lempira",flag:"üá≠üá≥"},NIO:{name:"Nicaraguan C√≥rdoba",flag:"üá≥üáÆ"},PAB:{name:"Panamanian Balboa",flag:"üáµüá¶"},PYG:{name:"Paraguayan Guarani",flag:"üáµüáæ"},DOP:{name:"Dominican Peso",flag:"üá©üá¥"},JMD:{name:"Jamaican Dollar",flag:"üáØüá≤"},TTD:{name:"Trinidad Dollar",flag:"üáπüáπ"},BSD:{name:"Bahamian Dollar",flag:"üáßüá∏"},BBD:{name:"Barbadian Dollar",flag:"üáßüáß"},BZD:{name:"Belize Dollar",flag:"üáßüáø"},XOF:{name:"West African CFA",flag:"üåç"},XAF:{name:"Central African CFA",flag:"üåç"},MAD:{name:"Moroccan Dirham",flag:"üá≤üá¶"},TND:{name:"Tunisian Dinar",flag:"üáπüá≥"},EGP:{name:"Egyptian Pound",flag:"üá™üá¨"},ILS:{name:"Israeli Shekel",flag:"üáÆüá±"},JOD:{name:"Jordanian Dinar",flag:"üáØüá¥"},LBP:{name:"Lebanese Pound",flag:"üá±üáß"},PKR:{name:"Pakistani Rupee",flag:"üáµüá∞"},BDT:{name:"Bangladeshi Taka",flag:"üáßüá©"},LKR:{name:"Sri Lankan Rupee",flag:"üá±üá∞"},NPR:{name:"Nepalese Rupee",flag:"üá≥üáµ"},MMK:{name:"Myanmar Kyat",flag:"üá≤üá≤"},KHR:{name:"Cambodian Riel",flag:"üá∞üá≠"},LAK:{name:"Lao Kip",flag:"üá±üá¶"},BND:{name:"Brunei Dollar",flag:"üáßüá≥"},TWD:{name:"Taiwan Dollar",flag:"üáπüáº"},HRK:{name:"Croatian Kuna",flag:"üá≠üá∑"},BGN:{name:"Bulgarian Lev",flag:"üáßüá¨"},RON:{name:"Romanian Leu",flag:"üá∑üá¥"},CZK:{name:"Czech Koruna",flag:"üá®üáø"},HUF:{name:"Hungarian Forint",flag:"üá≠üá∫"},ISK:{name:"Icelandic Kr√≥na",flag:"üáÆüá∏"},BAM:{name:"Bosnian Mark",flag:"üáßüá¶"},MKD:{name:"Macedonian Denar",flag:"üá≤üá∞"},ALL:{name:"Albanian Lek",flag:"üá¶üá±"},RSD:{name:"Serbian Dinar",flag:"üá∑üá∏"},GEL:{name:"Georgian Lari",flag:"üá¨üá™"},AZN:{name:"Azerbaijani Manat",flag:"üá¶üáø"},AMD:{name:"Armenian Dram",flag:"üá¶üá≤"},BYN:{name:"Belarusian Ruble",flag:"üáßüáæ"},MDL:{name:"Moldovan Leu",flag:"üá≤üá©"},KZT:{name:"Kazakhstani Tenge",flag:"üá∞üáø"},UZS:{name:"Uzbekistani Som",flag:"üá∫üáø"},TJS:{name:"Tajikistani Somoni",flag:"üáπüáØ"},KGS:{name:"Kyrgyzstani Som",flag:"üá∞üá¨"},TMT:{name:"Turkmenistani Manat",flag:"üáπüá≤"}};function qt(){const C=_e.$subscribe(()=>({filters:[{kinds:[38383],limit:100}],closeOnEose:!1})),e=R(()=>{const _=new Set;C.events.forEach(g=>{const h=g.tags,v=h.find(p=>p[0]==="z");if(v&&v[1]==="info")return;const A=h.find(p=>p[0]==="f")?.[1],B=h.find(p=>p[0]==="s")?.[1];A&&B==="pending"&&_.add(A.toUpperCase())});const K=Array.from(_).map(g=>{const h=Xt[g];return{code:g,name:h?.name||g,flag:h?.flag||"üí±"}}).sort((g,h)=>g.code.localeCompare(h.code));return[{code:"all",name:"All",flag:"üåç"},...K]});return{get currencies(){return a(e)}}}const Qt={Cash:{icon:"üíµ"},PIX:{icon:"üîÑ"},BLIK:{icon:"üì±"},Revolut:{icon:"üí≥"},revolut:{icon:"üí≥"},Zelle:{icon:"üè¶"},CashApp:{icon:"üì≤"},CVU:{icon:"üèß"},MercadoPago:{icon:"üèß"},f2f:{icon:"ü§ù"},"Bank Transfer":{icon:"üè¶"},Wire:{icon:"üè¶"},SEPA:{icon:"üá™üá∫"},PayPal:{icon:"üí∞"},Venmo:{icon:"üí∏"},Strike:{icon:"‚ö°"},Wise:{icon:"üåê"},N26:{icon:"üí≥"},Monzo:{icon:"üí≥"},Starling:{icon:"üí≥"},TransferWise:{icon:"üåê"},Instant:{icon:"‚ö°"}};function $t(){const C=_e.$subscribe(()=>({filters:[{kinds:[38383],limit:100}],closeOnEose:!1})),e=R(()=>{const _=new Set;C.events.forEach(g=>{const h=g.tags,v=h.find(p=>p[0]==="z");if(v&&v[1]==="info")return;const A=h.find(p=>p[0]==="pm")?.[1],B=h.find(p=>p[0]==="s")?.[1];A&&B==="pending"&&_.add(A)});const K=Array.from(_).map(g=>{const h=Qt[g];return{id:g,name:g,icon:h?.icon||"üí≥"}}).sort((g,h)=>g.name.localeCompare(h.name));return[{id:"all",name:"All Methods",icon:"üí∞"},...K]});return{get paymentMethods(){return a(e)}}}var er=(C,e)=>e.onChange({...e.filters,currency:C.currentTarget.value}),ar=m("<option> </option>"),tr=(C,e)=>e.onChange({...e.filters,paymentMethod:C.currentTarget.value}),rr=m("<option> </option>"),nr=(C,e)=>e.onChange({...e.filters,orderType:C.currentTarget.value}),or=(C,e)=>e.onChange({...e.filters,minAmount:parseInt(C.currentTarget.value)||0}),sr=(C,e)=>e.onChange({...e.filters,maxAmount:parseInt(C.currentTarget.value)||1e6}),lr=m('<div class="grid grid-cols-2 lg:grid-cols-1 gap-3 lg:gap-4"><div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Currency</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"></select></div> <div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> Payment Method</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"></select></div> <div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg> Order Type</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"><option>All Orders</option><option>Buy Orders</option><option>Sell Orders</option></select></div> <div><label class="text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2 block">Amount Range (sats)</label> <div class="flex items-center gap-2"><input type="number" class="w-full px-2 py-1.5 lg:py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Min"/> <span class="text-neutral-500 text-sm">-</span> <input type="number" class="w-full px-2 py-1.5 lg:py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Max"/></div></div></div>');function ir(C,e){na(e,!0);const{currencies:_}=qt(),{paymentMethods:K}=$t();var g=lr(),h=r(g),v=n(r(h),2);v.__change=[er,e],ra(v,21,()=>_,ua,(te,z)=>{var U=ar(),oe=r(U,!0);t(U);var re={};T(()=>{k(oe,a(z).code==="all"?a(z).name:`${a(z).flag} ${a(z).code} - ${a(z).name}`),re!==(re=a(z).code)&&(U.value=(U.__value=a(z).code)??"")}),o(te,U)}),t(v);var A;Ca(v),t(h);var B=n(h,2),p=n(r(B),2);p.__change=[tr,e],ra(p,21,()=>K,ua,(te,z)=>{var U=rr(),oe=r(U);t(U);var re={};T(()=>{k(oe,`${a(z).icon??""} ${a(z).name??""}`),re!==(re=a(z).id)&&(U.value=(U.__value=a(z).id)??"")}),o(te,U)}),t(p);var M;Ca(p),t(B);var f=n(B,2),s=n(r(f),2);s.__change=[nr,e];var i=r(s);i.value=i.__value="all";var S=n(i);S.value=S.__value="buy";var J=n(S);J.value=J.__value="sell",t(s);var V;Ca(s),t(f);var P=n(f,2),$=n(r(P),2),W=r($);Sa(W),W.__input=[or,e];var ae=n(W,4);Sa(ae),ae.__input=[sr,e],t($),t(P),t(g),T(()=>{A!==(A=e.filters.currency)&&(v.value=(v.__value=e.filters.currency)??"",Ma(v,e.filters.currency)),M!==(M=e.filters.paymentMethod)&&(p.value=(p.__value=e.filters.paymentMethod)??"",Ma(p,e.filters.paymentMethod)),V!==(V=e.filters.orderType)&&(s.value=(s.__value=e.filters.orderType)??"",Ma(s,e.filters.orderType)),Ia(W,e.filters.minAmount),Ia(ae,e.filters.maxAmount)}),o(C,g),oa()}Da(["change","input"]);const dr=C=>{var e=ur(),_=r(e),K=r(_),g=n(r(K),2);{var h=v=>{var A=cr();A.__click=()=>ga.open(),o(v,A)};L(g,v=>{_e.$currentUser&&v(h)})}t(K),t(_),t(e),o(C,e)};var cr=m('<button class="flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> <span>Create Order</span></button>'),ur=m('<div class="border-b border-border sticky top-0 z-20 bg-background"><div class="px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-foreground">P2P Trading</h1> <p class="text-sm text-neutral-400 mt-1">Buy and sell Bitcoin directly</p></div> <!></div></div></div>'),vr=m('<div class="p-3 lg:p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-3 lg:mb-4"><svg class="w-4 h-4 lg:w-5 lg:h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <h2 class="text-base lg:text-lg font-semibold text-foreground">Filters</h2></div> <!></div>'),mr=m('<div class="px-4 sm:px-6 lg:px-8 py-6"><!></div> <!>',1);function Lr(C,e){na(e,!0);const _=()=>tt(rt,"$page",K),[K,g]=at(),h=s=>{var i=vr(),S=n(r(i),2);ir(S,{get filters(){return a(v)},onChange:A}),t(i),o(s,i)},v=R(()=>({currency:_().url.searchParams.get("currency")||"all",paymentMethod:_().url.searchParams.get("paymentMethod")||"all",orderType:_().url.searchParams.get("orderType")||"all",minAmount:parseInt(_().url.searchParams.get("minAmount")||"0"),maxAmount:parseInt(_().url.searchParams.get("maxAmount")||"1000000")}));function A(s){const i=new URLSearchParams;s.currency!=="all"&&i.set("currency",s.currency),s.paymentMethod!=="all"&&i.set("paymentMethod",s.paymentMethod),s.orderType!=="all"&&i.set("orderType",s.orderType),s.minAmount>0&&i.set("minAmount",s.minAmount.toString()),s.maxAmount<1e6&&i.set("maxAmount",s.maxAmount.toString());const S=i.toString();nt(`/trades${S?`?${S}`:""}`,{replaceState:!0})}Ba(()=>(Oa.header=dr,Aa.rightSidebar=h,Aa.showOnMobile=!0,()=>{Oa.clear(),Aa.clear()}));var B=mr(),p=H(B),M=r(p);Lt(M,{get filters(){return a(v)}}),t(p);var f=n(p,2);Wt(f,{get onClose(){return ga.close},get open(){return ga.show},set open(s){ga.show=s}}),o(C,B),oa(),g()}Da(["click"]);export{Lr as component};
