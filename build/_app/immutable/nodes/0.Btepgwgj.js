import{p as lt,d as Ie,f as _,a as s,s as J,c as te,t as ue,j as De,i as Me}from"../chunks/CiPFrJr-.js";import{A as Pe,B as Qe,j as dt,Q as ct,b4 as vt,b5 as ut,E as ft,I as mt,b6 as ht,aR as Xe,ax as pt,J as gt,_ as je,p as _e,c as ke,r as o,e as n,d as h,t as ve,g as t,f as C,u as ee,y as H,b as N,s as u,x as bt,a as Ze}from"../chunks/CSbKtK4P.js";import{b as le,i as $,d as pe,p as Fe}from"../chunks/87vUJtvC.js";import{s as xt}from"../chunks/Dt5ZKhe2.js";import{e as _t,d as Ce,aE as kt,n as ye,ab as wt,aF as we,g as yt,f as et,S as At,a1 as tt,h as rt,N as Oe,j as Pt,i as $e,aG as Le,aH as Mt,aI as Ct,aJ as It}from"../chunks/D0X4VYcq.js";import{g as Be}from"../chunks/CTwadDAE.js";import{r as Ne,i as Dt,g as St,a as Et}from"../chunks/Ce4T6J7V.js";import{h as jt}from"../chunks/BoOg0jR9.js";import{t as st}from"../chunks/B0fEDaa-.js";import{l as he}from"../chunks/DFvV5mXa.js";import{D as at,a as Re,B as be,b as ot}from"../chunks/DFMKmhYe.js";import{D as Ve,I as Nt,a as $t}from"../chunks/C8b5RDJU.js";import{D as qe}from"../chunks/Do6nhxsB.js";import{a as Lt,p as Tt}from"../chunks/DzBAiUtV.js";import{b as Ke}from"../chunks/I2MJeYPS.js";import{N as Bt}from"../chunks/Cybom7lU.js";import{A as Ot}from"../chunks/BFBlLZUW.js";const zt=Qe?()=>performance.now():()=>Date.now(),xe={tick:r=>(Qe?requestAnimationFrame:Pe)(r),now:()=>zt(),tasks:new Set};function nt(){const r=xe.now();xe.tasks.forEach(e=>{e.c(r)||(xe.tasks.delete(e),e.f())}),xe.tasks.size!==0&&xe.tick(nt)}function Ht(r){let e;return xe.tasks.size===0&&xe.tick(nt),{promise:new Promise(a=>{xe.tasks.add(e={c:r,f:a})}),abort(){xe.tasks.delete(e)}}}function Te(r,e){Xe(()=>{r.dispatchEvent(new CustomEvent(e))})}function Ft(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Je(r){const e={},a=r.split(";");for(const i of a){const[d,v]=i.split(":");if(!d||v===void 0)break;const b=Ft(d.trim());e[b]=v.trim()}return e}const Rt=r=>r;function ze(r,e,a,i){var d=(r&ht)!==0,v="both",b,x=e.inert,f=e.style.overflow,m,c;function g(){return Xe(()=>b??=a()(e,i?.()??{},{direction:v}))}var l={is_global:d,in(){e.inert=x,Te(e,"introstart"),m=We(e,g(),c,1,()=>{Te(e,"introend"),m?.abort(),m=b=void 0,e.style.overflow=f})},out(w){e.inert=!0,Te(e,"outrostart"),c=We(e,g(),m,0,()=>{Te(e,"outroend"),w?.()})},stop:()=>{m?.abort(),c?.abort()}},k=dt;if((k.transitions??=[]).push(l),lt){var M=d;if(!M){for(var p=k.parent;p&&(p.f&ct)!==0;)for(;(p=p.parent)&&(p.f&vt)===0;);M=!p||(p.f&ut)!==0}M&&ft(()=>{mt(()=>l.in())})}}function We(r,e,a,i,d){var v=i===1;if(pt(e)){var b,x=!1;return gt(()=>{if(!x){var w=e({direction:v?"in":"out"});b=We(r,w,a,i,d)}}),{abort:()=>{x=!0,b?.abort()},deactivate:()=>b.deactivate(),reset:()=>b.reset(),t:()=>b.t()}}if(a?.deactivate(),!e?.duration)return d(),{abort:Pe,deactivate:Pe,reset:Pe,t:()=>i};const{delay:f=0,css:m,tick:c,easing:g=Rt}=e;var l=[];if(v&&a===void 0&&(c&&c(0,1),m)){var k=Je(m(0,1));l.push(k,k)}var M=()=>1-i,p=r.animate(l,{duration:f,fill:"forwards"});return p.onfinish=()=>{p.cancel();var w=a?.t()??1-i;a?.abort();var y=i-w,L=e.duration*Math.abs(y),D=[];if(L>0){var S=!1;if(m)for(var A=Math.ceil(L/16.666666666666668),E=0;E<=A;E+=1){var T=w+y*g(E/A),R=Je(m(T,1-T));D.push(R),S||=R.overflow==="hidden"}S&&(r.style.overflow="hidden"),M=()=>{var Q=p.currentTime;return w+y*g(Q/L)},c&&Ht(()=>{if(p.playState!=="running")return!1;var Q=M();return c(Q,1-Q),!0})}p=r.animate(D,{duration:L,fill:"forwards"}),p.onfinish=()=>{M=()=>i,c?.(i,1-i),d()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=Pe)},deactivate:()=>{d=Pe},reset:()=>{i===0&&c?.(1,0)},t:()=>M()}}const Vt=!1,Wt=!1,ws=Object.freeze(Object.defineProperty({__proto__:null,prerender:Wt,ssr:Vt},Symbol.toStringTag,{value:"Module"}));Ne("en",()=>je(()=>import("../chunks/CAmj-2g7.js"),[],import.meta.url));Ne("es",()=>je(()=>import("../chunks/Djh04Do9.js"),[],import.meta.url));Ne("fa",()=>je(()=>import("../chunks/Db3v5lxW.js"),[],import.meta.url));Ne("km",()=>je(()=>import("../chunks/CdpaW6Fh.js"),[],import.meta.url));Ne("sn",()=>je(()=>import("../chunks/C_Miweso.js"),[],import.meta.url));function qt(r){Dt({fallbackLocale:"en",initialLocale:r||St()})}var Kt=(r,e)=>st.dismiss(t(e).id),Jt=_('<div><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> <span class="text-sm font-medium"> </span> <button class="ml-2 hover:opacity-70 transition-opacity" aria-label="Dismiss"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ut=_('<div class="fixed top-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none"></div>');function Yt(r,e){_e(e,!0);function a(v){switch(v){case"success":return"bg-green-600 border-green-500";case"error":return"bg-red-600 border-red-500";case"info":default:return"bg-blue-600 border-blue-500"}}function i(v){switch(v){case"success":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />';case"error":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />';case"info":default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />'}}var d=Ut();_t(d,21,()=>st.messages,v=>v.id,(v,b)=>{var x=Jt(),f=n(x),m=n(f);jt(m,()=>i(t(b).type),!0),o(f);var c=h(f,2),g=n(c,!0);o(c);var l=h(c,2);l.__click=[Kt,b],o(x),ve(k=>{Ce(x,1,`pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg text-foreground animate-in slide-in-from-top duration-300 ${k??""}`),J(g,t(b).message)},[()=>a(t(b).type)]),s(v,x)}),o(d),s(r,d),ke()}Ie(["click"]);var Gt=_("<!> <!>",1),Qt=De('Start Your Journey <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>',1),Xt=_('Already have a Nostr account? <span class="font-semibold underline ml-1">Sign in here</span>',1),Zt=_('<div class="relative"><div class="absolute inset-x-0 -mx-6 -mt-6 h-32 bg-primary rounded-t-lg opacity-90"></div> <div class="relative pt-16"><!> <div class="space-y-4 mb-8 mt-6"><div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Own Your Voice</h3> <p class="text-sm text-muted-foreground">No censorship. No gatekeepers. Your content, your control, forever.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Earn From Your Stories</h3> <p class="text-sm text-muted-foreground">Get paid instantly in Bitcoin for valuable content. No banks, no fees.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Connect With Your Community</h3> <p class="text-sm text-muted-foreground">Trade, share, and build with people who understand your journey.</p></div></div></div> <div class="space-y-3"><!> <!></div></div></div>'),er=_("<!> <!>",1),tr=_('<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm"> </div>'),rr=De('<svg class="w-5 h-5 animate-spin ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>'),sr=_('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Browser Extension (NIP-07)</div> <div class="text-sm text-muted-foreground">Use Alby, nos2x, or similar</div></div> <!>',1),ar=_('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Private Key</div> <div class="text-sm text-muted-foreground">Login with your nsec or hex key</div></div>',1),or=_('<span class="font-semibold underline">Create a new account</span>'),nr=_(`<!> <!> <div class="relative my-6"><div class="absolute inset-0 flex items-center"><span class="w-full border-t border-border"></span></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-background px-2 text-muted-foreground">Don't have an account?</span></div></div> <!>`,1),ir=De('<svg class="w-4 h-4 animate-spin mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Logging in...',1),lr=De('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> Login',1),dr=_('<div class="space-y-4"><div class="p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-400 text-sm flex gap-2"><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div>Enter your private key (nsec or hex format). This will be stored locally in your browser.</div></div> <!> <div class="flex gap-2"><!> <!></div></div>'),cr=_('<!> <div class="space-y-3 pt-4"><!> <!></div>',1);function vr(r,e){_e(e,!0);let a=N(!1),i=N(null),d=N(""),v=N("");async function b(){if(!window.nostr){u(v,"No Nostr extension found. Please install Alby or nos2x.");return}try{u(a,!0),u(v,"");const l=new kt;await ye.$sessions.login(l),he.close()}catch(l){u(v,l instanceof Error?l.message:"Failed to login",!0)}finally{u(a,!1)}}async function x(){if(!t(d).trim()){u(v,"Please enter your nsec");return}try{u(a,!0),u(v,"");const l=new wt(t(d).trim());await ye.$sessions.login(l),he.close(),u(d,"")}catch(l){u(v,l instanceof Error?l.message:"Invalid nsec",!0)}finally{u(a,!1)}}function f(){he.close(),u(i,null),u(d,""),u(v,"")}function m(){f(),Be("/onboarding")}var c=te(),g=C(c);le(g,()=>ot,(l,k)=>{k(l,{get open(){return he.show},set open(M){he.show=M},children:(M,p)=>{var w=te(),y=C(w);{let L=ee(()=>he.state==="signup"?"max-w-lg":"max-w-md");le(y,()=>at,(D,S)=>{S(D,{get class(){return t(L)},onClose:()=>he.close(),children:(A,E)=>{var T=te(),R=C(T);{var Q=O=>{var F=Zt(),U=h(n(F),2),re=n(U);le(re,()=>Ve,(V,se)=>{se(V,{children:(I,z)=>{var W=Gt(),ne=C(W);le(ne,()=>Re,(q,ie)=>{ie(q,{class:"text-3xl text-center !font-black font-serif",children:(P,j)=>{H();var K=ue("Your Voice Matters");s(P,K)},$$slots:{default:!0}})});var ce=h(ne,2);le(ce,()=>qe,(q,ie)=>{ie(q,{class:"text-center text-lg",children:(P,j)=>{H();var K=ue("Join a global community where every story counts");s(P,K)},$$slots:{default:!0}})}),s(I,W)},$$slots:{default:!0}})});var oe=h(re,4),Y=n(oe);be(Y,{onclick:m,class:"w-full py-6 text-lg bg-primary hover:opacity-90",children:(V,se)=>{H();var I=Qt();H(),s(V,I)},$$slots:{default:!0}});var X=h(Y,2);be(X,{variant:"ghost",onclick:()=>he.setState("login"),class:"w-full",children:(V,se)=>{H();var I=Xt();H(),s(V,I)},$$slots:{default:!0}}),o(oe),o(U),o(F),s(O,F)},de=O=>{var F=cr(),U=C(F);le(U,()=>Ve,(I,z)=>{z(I,{children:(W,ne)=>{var ce=er(),q=C(ce);le(q,()=>Re,(P,j)=>{j(P,{children:(K,B)=>{H();var G=ue("Welcome Back");s(K,G)},$$slots:{default:!0}})});var ie=h(q,2);le(ie,()=>qe,(P,j)=>{j(P,{children:(K,B)=>{H();var G=ue("Sign in with your existing Nostr account");s(K,G)},$$slots:{default:!0}})}),s(W,ce)},$$slots:{default:!0}})});var re=h(U,2),oe=n(re);{var Y=I=>{var z=tr(),W=n(z,!0);o(z),ve(()=>J(W,t(v))),s(I,z)};$(oe,I=>{t(v)&&I(Y)})}var X=h(oe,2);{var V=I=>{var z=nr(),W=C(z);be(W,{variant:"outline",onclick:()=>{u(i,"nip07"),b()},get disabled(){return t(a)},class:"w-full p-4 h-auto justify-start",children:(q,ie)=>{var P=sr(),j=h(C(P),4);{var K=B=>{var G=rr();s(B,G)};$(j,B=>{t(a)&&t(i)==="nip07"&&B(K)})}s(q,P)},$$slots:{default:!0}});var ne=h(W,2);be(ne,{variant:"outline",onclick:()=>u(i,"nsec"),get disabled(){return t(a)},class:"w-full p-4 h-auto justify-start",children:(q,ie)=>{var P=ar();H(2),s(q,P)},$$slots:{default:!0}});var ce=h(ne,4);be(ce,{variant:"ghost",onclick:()=>he.setState("signup"),class:"w-full",children:(q,ie)=>{var P=or();s(q,P)},$$slots:{default:!0}}),s(I,z)},se=I=>{var z=te(),W=C(z);{var ne=ce=>{var q=dr(),ie=h(n(q),2);Nt(ie,{type:"password",placeholder:"nsec1... or hex key",get disabled(){return t(a)},onkeydown:B=>{B.key==="Enter"&&t(d)&&x()},get value(){return t(d)},set value(B){u(d,B,!0)}});var P=h(ie,2),j=n(P);be(j,{variant:"outline",onclick:()=>u(i,null),get disabled(){return t(a)},class:"flex-1",children:(B,G)=>{H();var ae=ue("Back");s(B,ae)},$$slots:{default:!0}});var K=h(j,2);{let B=ee(()=>t(a)||!t(d).trim());be(K,{onclick:x,get disabled(){return t(B)},class:"flex-1",children:(G,ae)=>{var me=te(),Se=C(me);{var Ae=Z=>{var ge=ir();H(),s(Z,ge)},Ee=Z=>{var ge=lr();H(),s(Z,ge)};$(Se,Z=>{t(a)?Z(Ae):Z(Ee,!1)})}s(G,me)},$$slots:{default:!0}})}o(P),o(q),s(ce,q)};$(W,ce=>{t(i)==="nsec"&&ce(ne)},!0)}s(I,z)};$(X,I=>{t(i)?I(se,!1):I(V)})}o(re),s(O,F)};$(R,O=>{he.state==="signup"?O(Q):O(de,!1)})}s(A,T)},$$slots:{default:!0}})})}s(M,w)},$$slots:{default:!0}})}),s(r,c),ke()}var ur=_('<div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <!></div>'),fr=De('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Authenticate',1),mr=_("<!> <!>",1),hr=_(`<div class="space-y-4"><div><p class="text-muted-foreground mb-2">The relay <strong class="font-semibold text-foreground"> </strong> is requesting authentication.</p> <p class="text-sm text-muted-foreground">This will create a signed authentication event using your Nostr identity. Your decision will be remembered for this relay.</p></div> <div class="p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"><div class="flex gap-2"><svg class="w-5 h-5 flex-shrink-0 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-blue-800 dark:text-blue-300"><strong class="font-semibold">Why authenticate?</strong> <p class="mt-1">Some relays require authentication to access content or reduce spam. This proves you're a real Nostr user.</p></div></div></div></div> <!>`,1),pr=_("<!> <!>",1);function gr(r,e){_e(e,!0);function a(){we.confirm()}function i(){we.reject()}function d(){we.reject()}const v=ee(()=>we.show&&!!we.request);var b=te(),x=C(b);le(x,()=>ot,(f,m)=>{m(f,{get open(){return t(v)},onOpenChange:c=>{c||d()},children:(c,g)=>{var l=te(),k=C(l);le(k,()=>at,(M,p)=>{p(M,{class:"max-w-md",children:(w,y)=>{var L=pr(),D=C(L);le(D,()=>Ve,(E,T)=>{T(E,{children:(R,Q)=>{var de=ur(),O=h(n(de),2);le(O,()=>Re,(F,U)=>{U(F,{children:(re,oe)=>{H();var Y=ue("Relay Authentication");s(re,Y)},$$slots:{default:!0}})}),o(de),s(R,de)},$$slots:{default:!0}})});var S=h(D,2);{var A=E=>{var T=hr(),R=C(T),Q=n(R),de=n(Q),O=h(n(de)),F=n(O,!0);o(O),H(),o(de),H(2),o(Q),H(2),o(R);var U=h(R,2);le(U,()=>$t,(re,oe)=>{oe(re,{class:"flex gap-3 sm:space-x-0",children:(Y,X)=>{var V=mr(),se=C(V);be(se,{variant:"outline",onclick:i,class:"flex-1",children:(z,W)=>{H();var ne=ue("Reject");s(z,ne)},$$slots:{default:!0}});var I=h(se,2);be(I,{onclick:a,class:"flex-1",children:(z,W)=>{var ne=fr();H(),s(z,ne)},$$slots:{default:!0}}),s(Y,V)},$$slots:{default:!0}})}),ve(()=>J(F,we.request.relayUrl)),s(E,T)};$(S,E=>{we.request&&E(A)})}s(w,L)},$$slots:{default:!0}})}),s(c,l)},$$slots:{default:!0}})}),s(r,b),ke()}function br(){if(!pe)return!1;const r=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(r)}function xr(){if(!pe)return!1;const r=window.navigator.userAgent.toLowerCase();return/android/.test(r)}function _r(){return pe?"standalone"in window.navigator?window.navigator.standalone===!0:!!(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches):!1}function kr(){return pe?/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(window.navigator.userAgent.toLowerCase()):!1}class wr{#e=N(null);get deferredPrompt(){return t(this.#e)}set deferredPrompt(e){u(this.#e,e,!0)}#t=N(!1);get isInstallable(){return t(this.#t)}set isInstallable(e){u(this.#t,e,!0)}#r=N(!1);get isInstalled(){return t(this.#r)}set isInstalled(e){u(this.#r,e,!0)}#s=N(!1);get isIOSDevice(){return t(this.#s)}set isIOSDevice(e){u(this.#s,e,!0)}#a=N(!1);get isAndroidDevice(){return t(this.#a)}set isAndroidDevice(e){u(this.#a,e,!0)}#o=N(!1);get isMobileDevice(){return t(this.#o)}set isMobileDevice(e){u(this.#o,e,!0)}#n=N(!1);get showPrompt(){return t(this.#n)}set showPrompt(e){u(this.#n,e,!0)}#i=N(!1);get userDismissed(){return t(this.#i)}set userDismissed(e){u(this.#i,e,!0)}#l=N(!1);get neverAskAgain(){return t(this.#l)}set neverAskAgain(e){u(this.#l,e,!0)}constructor(){if(pe){if(this.isIOSDevice=br(),this.isAndroidDevice=xr(),this.isMobileDevice=kr(),this.isInstalled=_r(),this.loadPreferences(),this.isInstalled){this.showPrompt=!1;return}window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.isInstallable=!0,!this.neverAskAgain&&!this.userDismissed&&setTimeout(()=>{this.showPrompt=!0},1e4)}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.isInstallable=!1,this.showPrompt=!1,this.deferredPrompt=null,console.log("PWA was installed successfully")}),this.isIOSDevice&&!this.isInstalled&&!this.neverAskAgain&&setTimeout(()=>{this.showPrompt=!0},1e4)}}async promptInstall(){if(!this.deferredPrompt){console.warn("Install prompt not available");return}await this.deferredPrompt.prompt(),(await this.deferredPrompt.userChoice).outcome==="accepted"?(console.log("User accepted the install prompt"),this.isInstalled=!0):(console.log("User dismissed the install prompt"),this.userDismissed=!0,this.savePreferences()),this.deferredPrompt=null,this.isInstallable=!1,this.showPrompt=!1}dismiss(){this.showPrompt=!1,this.userDismissed=!0,this.savePreferences()}dismissForever(){this.showPrompt=!1,this.neverAskAgain=!0,this.userDismissed=!0,this.savePreferences()}reset(){this.userDismissed=!1,this.neverAskAgain=!1,this.showPrompt=!1,this.savePreferences()}savePreferences(){if(pe)try{localStorage.setItem("pwa-user-dismissed",JSON.stringify(this.userDismissed)),localStorage.setItem("pwa-never-ask",JSON.stringify(this.neverAskAgain))}catch(e){console.error("Failed to save PWA preferences:",e)}}loadPreferences(){if(pe)try{const e=localStorage.getItem("pwa-user-dismissed"),a=localStorage.getItem("pwa-never-ask");e!==null&&(this.userDismissed=JSON.parse(e)),a!==null&&(this.neverAskAgain=JSON.parse(a))}catch(e){console.error("Failed to load PWA preferences:",e)}}}const fe=new wr,yr=r=>r;function Ar(r){const e=r-1;return e*e*e+1}function Ue(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}function Pr(r,{delay:e=0,duration:a=400,easing:i=yr}={}){const d=+getComputedStyle(r).opacity;return{delay:e,duration:a,easing:i,css:v=>`opacity: ${v*d}`}}function Ye(r,{delay:e=0,duration:a=400,easing:i=Ar,x:d=0,y:v=0,opacity:b=0}={}){const x=getComputedStyle(r),f=+x.opacity,m=x.transform==="none"?"":x.transform,c=f*(1-b),[g,l]=Ue(d),[k,M]=Ue(v);return{delay:e,duration:a,easing:i,css:(p,w)=>`
			transform: ${m} translate(${(1-p)*g}${l}, ${(1-p)*k}${M});
			opacity: ${f-c*w}`}}function Mr(r,e){fe.isAndroidDevice&&fe.deferredPrompt?fe.promptInstall():fe.isIOSDevice&&u(e,!0)}function Cr(){fe.dismiss()}function Ir(){fe.dismissForever()}function He(r,e){u(e,!1),fe.dismiss()}var Dr=_('<div class="fixed bottom-20 md:bottom-4 left-4 right-4 z-50"><div class="bg-gradient-to-r bg-primary opacity-90 text-foreground rounded-2xl shadow-2xl p-4 max-w-md mx-auto"><button class="absolute top-3 right-3 p-1 hover:bg-white/20 rounded-full transition-colors" aria-label="Dismiss"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <div class="flex items-start gap-4 mb-4"><div class="flex-shrink-0 w-14 h-14 bg-card rounded-2xl p-2 shadow-lg"><img src="/icons/manifest-icon-192.png" alt="Agora icon" class="w-full h-full"/></div> <div class="flex-1 pr-6"><h3 class="text-lg font-bold mb-1">Install Agora</h3> <p class="text-sm text-foreground/90">Get the full app experience with offline access and quick launch from your home screen.</p></div></div> <div class="flex gap-2"><button class="flex-1 bg-card text-primary font-semibold py-3 px-4 rounded-xl hover:bg-primary-50 transition-colors"><!></button> <button class="px-4 py-3 text-sm text-foreground/80 hover:text-foreground hover:bg-white/10 rounded-xl transition-colors">Not Now</button></div></div></div>'),Sr=r=>r.stopPropagation(),Er=_(`<div class="fixed inset-0 bg-background/70 backdrop-blur-sm z-50 flex items-end md:items-center justify-center p-4"><div class="bg-card rounded-t-3xl md:rounded-3xl max-w-md w-full overflow-hidden"><div class="p-6 border-b border-border"><div class="flex items-center justify-between mb-2"><h2 class="text-xl font-bold text-foreground">Install Agora on iOS</h2> <button class="p-2 hover:bg-muted rounded-full transition-colors" aria-label="Close"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <p class="text-sm text-muted-foreground">Follow these steps to add Agora to your home screen</p></div> <div class="p-6 space-y-6"><div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">1</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Tap the Share button</h3> <p class="text-sm text-muted-foreground mb-2">Look for the share icon in Safari's bottom menu bar</p> <div class="inline-flex items-center gap-2 bg-muted px-3 py-2 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="currentColor" viewBox="0 0 24 24"><path d="M16.5 6.5v-1.75a.75.75 0 00-1.5 0V6.5h-6V4.75a.75.75 0 00-1.5 0V6.5h-1.75A2.75 2.75 0 003 9.25v9A2.75 2.75 0 005.75 21h12.5A2.75 2.75 0 0021 18.25v-9A2.75 2.75 0 0018.25 6.5H16.5zm-.75 4.25a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5zm-4.5 0a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5zm-4.5 0a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5z"></path></svg> <span class="text-muted-foreground text-sm">Share</span></div></div></div> <div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">2</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Select "Add to Home Screen"</h3> <p class="text-sm text-muted-foreground">Scroll down in the share menu and tap "Add to Home Screen"</p></div></div> <div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">3</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Confirm installation</h3> <p class="text-sm text-muted-foreground">Tap "Add" in the top right corner to complete the installation</p></div></div></div> <div class="p-6 border-t border-border"><button class="w-full bg-primary hover:bg-accent-dark text-foreground font-semibold py-3 px-4 rounded-xl transition-colors">Got it!</button></div></div></div>`),jr=_("<!> <!>",1);function Nr(r,e){_e(e,!0);const a=ee(()=>fe.showPrompt&&fe.isMobileDevice&&!fe.isInstalled);let i=N(!1);var d=jr(),v=C(d);{var b=m=>{var c=Dr(),g=n(c),l=n(g);l.__click=[Cr];var k=h(l,4),M=n(k);M.__click=[Mr,i];var p=n(M);{var w=D=>{var S=ue("View Instructions");s(D,S)},y=D=>{var S=ue("Install Now");s(D,S)};$(p,D=>{fe.isIOSDevice?D(w):D(y,!1)})}o(M);var L=h(M,2);L.__click=[Ir],o(k),o(g),o(c),ze(3,c,()=>Ye,()=>({y:100,duration:300})),s(m,c)};$(v,m=>{t(a)&&!t(i)&&m(b)})}var x=h(v,2);{var f=m=>{var c=Er();c.__click=[He,i];var g=n(c);g.__click=[Sr];var l=n(g),k=n(l),M=h(n(k),2);M.__click=[He,i],o(k),H(2),o(l);var p=h(l,4),w=n(p);w.__click=[He,i],o(p),o(g),o(c),Lt(c,y=>Tt?.(y)),ze(3,g,()=>Ye,()=>({y:100,duration:300})),ze(3,c,()=>Pr,()=>({duration:200})),s(m,c)};$(x,m=>{t(i)&&m(f)})}s(r,d),ke()}Ie(["click"]);async function $r(r,e,a){if(r.stopPropagation(),!t(e)){u(e,!0);try{await tt.toggleHashtag(a.hashtag)}catch(i){console.error("Failed to toggle hashtag:",i)}finally{u(e,!1)}}}var Lr=De('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Tr=_("<button><!></button>"),Br=_('<div class="space-y-2"><div class="text-xs font-medium text-muted-foreground uppercase tracking-wider">Recent note</div> <div class="bg-muted/50 rounded-lg p-3 border border-border"><div class="flex items-center gap-2 mb-2"><!> <div class="flex-1 min-w-0"><div class="text-xs font-medium text-foreground truncate"> </div></div> <div class="text-xs text-muted-foreground"> </div></div> <div class="text-sm text-muted-foreground line-clamp-3 leading-relaxed svelte-44chnw"><!></div></div></div>'),Or=_('<div class="text-center py-6 text-muted-foreground"><svg class="w-12 h-12 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <p class="text-sm">No recent notes found</p></div>'),zr=_('<div class="fixed z-50 pointer-events-none animate-in fade-in duration-200 svelte-44chnw"><div class="relative pointer-events-auto"><div class="relative w-80 bg-card border border-border rounded-xl shadow-2xl overflow-hidden"><div class="relative h-20 bg-gradient-to-br bg-primary/30"><div class="absolute inset-0 bg-gradient-to-b from-transparent to-neutral-900 opacity-60"></div> <div class="absolute inset-0 flex items-center justify-center"><div class="text-3xl font-bold text-foreground/20 select-none"> </div></div></div> <div class="relative px-5 pb-5 -mt-8"><div class="flex items-center justify-between mb-4 gap-3"><h3 class="text-2xl font-bold text-foreground"><span class="text-primary">#</span> </h3> <!></div> <div class="flex items-center gap-4 mb-4 text-sm border-b border-border pb-4"><div class="flex items-center gap-1.5"><span class="font-medium text-foreground"> </span> <span class="text-muted-foreground"> </span></div> <div class="flex items-center gap-1.5"><span class="font-medium text-foreground"> </span> <span class="text-muted-foreground"> </span></div> <div class="flex items-center gap-1.5 text-muted-foreground"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>24h</span></div></div> <!></div></div></div></div>');function Hr(r,e){_e(e,!0);const a=ye.$currentUser,i=ee(()=>tt.interests.includes(e.hashtag.toLowerCase()));let d=N(!1);const v=ye.$subscribe(()=>e.hashtag&&e.isVisible?{filters:[{kinds:[1],"#t":[e.hashtag.toLowerCase()],since:Math.floor(Date.now()/1e3)-1440*60}],bufferMs:100}:void 0),b=ee(()=>{const p=new Set;return v.events.forEach(w=>p.add(w.pubkey)),Array.from(p)}),x=ee(()=>v.events.length),f=ee(()=>t(b).length),m=ee(()=>a&&[...v.events].sort((w,y)=>(y.created_at??0)-(w.created_at??0))[0]||null);function c(p){const y=Date.now()/1e3-p;return y<60?"just now":y<3600?`${Math.floor(y/60)}m ago`:y<86400?`${Math.floor(y/3600)}h ago`:`${Math.floor(y/86400)}d ago`}const g=ee(()=>t(m)?ye.$fetchProfile(()=>t(m).pubkey):null);var l=te(),k=C(l);{var M=p=>{var w=zr(),y=n(w),L=n(y),D=n(L),S=h(n(D),2),A=n(S),E=n(A);o(A),o(S),o(D);var T=h(D,2),R=n(T),Q=n(R),de=h(n(Q),1,!0);o(Q);var O=h(Q,2);{var F=P=>{var j=Tr();j.__click=[$r,d,e];var K=n(j);{var B=ae=>{var me=Lr();s(ae,me)},G=ae=>{var me=te(),Se=C(me);{var Ae=Z=>{var ge=ue("Following");s(Z,ge)},Ee=Z=>{var ge=ue("Follow");s(Z,ge)};$(Se,Z=>{t(i)?Z(Ae):Z(Ee,!1)},!0)}s(ae,me)};$(K,ae=>{t(d)?ae(B):ae(G,!1)})}o(j),ve(()=>{j.disabled=t(d),Ce(j,1,`px-4 py-2 rounded-full text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0 ${t(i)?"bg-muted text-foreground hover:bg-muted border border":"bg-primary text-foreground hover:bg-primary"}`)}),s(P,j)};$(O,P=>{a&&P(F)})}o(R);var U=h(R,2),re=n(U),oe=n(re),Y=n(oe,!0);o(oe);var X=h(oe,2),V=n(X,!0);o(X),o(re);var se=h(re,2),I=n(se),z=n(I,!0);o(I);var W=h(I,2),ne=n(W,!0);o(W),o(se),H(2),o(U);var ce=h(U,2);{var q=P=>{var j=Br(),K=h(n(j),2),B=n(K),G=n(B);et(G,{get ndk(){return ye},get pubkey(){return t(m).pubkey},class:"w-6 h-6 rounded-full"});var ae=h(G,2),me=n(ae),Se=n(me,!0);o(me),o(ae);var Ae=h(ae,2),Ee=n(Ae,!0);o(Ae),o(B);var Z=h(B,2),ge=n(Z);At(ge,{get ndk(){return ye},get content(){return t(m).content},class:"text-muted-foreground"}),o(Z),o(K),o(j),ve(it=>{J(Se,t(g)?.displayName||t(g)?.name||"Anonymous"),J(Ee,it)},[()=>c(t(m).created_at??0)]),s(P,j)},ie=P=>{var j=te(),K=C(j);{var B=G=>{var ae=Or();s(G,ae)};$(K,G=>{v.events.length===0&&G(B)},!0)}s(P,j)};$(ce,P=>{t(m)?P(q):P(ie,!1)})}o(T),o(L),o(y),o(w),ve(()=>{yt(w,`left: ${e.position.x??""}px; top: ${e.position.y??""}px;`),J(E,`#${e.hashtag??""}`),J(de,e.hashtag),J(Y,t(x)),J(V,t(x)===1?"note":"notes"),J(z,t(f)),J(ne,t(f)===1?"person":"people")}),Me("mouseenter",y,function(...P){e.onMouseEnter?.apply(this,P)}),Me("mouseleave",y,function(...P){e.onMouseLeave?.apply(this,P)}),s(p,w)};$(k,p=>{e.isVisible&&p(M)})}s(r,l),ke()}Ie(["click"]);function Ge(r,e){e.onClick&&(r.preventDefault(),r.stopPropagation(),e.onClick(e.hashtag))}var Fr=_('<button type="button"><span class="hashtag-prefix svelte-1v69seg">#</span> <span class="hashtag-text svelte-1v69seg"> </span></button>'),Rr=_("<a> </a>"),Vr=_("<!> <!>",1);function Wr(r,e){_e(e,!0);let a=Fe(e,"class",3,""),i=Fe(e,"format",3,"inline"),d=N(!1),v=N(!1),b=null,x=null,f=N(!1),m=N(bt({x:0,y:0})),c=N(null);function g(S){u(d,!0),x&&(clearTimeout(x),x=null),b&&clearTimeout(b),b=setTimeout(()=>{if(t(d)&&t(c)){const A=t(c).getBoundingClientRect();u(m,{x:A.left,y:A.bottom+8},!0),u(f,!0)}},500)}function l(){u(d,!1),b&&(clearTimeout(b),b=null),x=setTimeout(()=>{!t(d)&&!t(v)&&u(f,!1)},100)}function k(){u(v,!0),x&&(clearTimeout(x),x=null)}function M(){u(v,!1),x=setTimeout(()=>{!t(d)&&!t(v)&&u(f,!1)},100)}var p=Vr(),w=C(p);{var y=S=>{var A=Fr();A.__click=[Ge,e];var E=h(n(A),2),T=n(E,!0);o(E),o(A),Ke(A,R=>u(c,R),()=>t(c)),ve(()=>{Ce(A,1,`hashtag-pill ${a()??""}`,"svelte-1v69seg"),J(T,e.hashtag)}),Me("mouseenter",A,g),Me("mouseleave",A,l),s(S,A)},L=S=>{var A=Rr();A.__click=[Ge,e];var E=n(A);o(A),Ke(A,T=>u(c,T),()=>t(c)),ve(()=>{rt(A,"href",`/t/${e.hashtag}`),Ce(A,1,`hashtag-inline ${a()??""}`,"svelte-1v69seg"),J(E,`#${e.hashtag??""}`)}),Me("mouseenter",A,g),Me("mouseleave",A,l),s(S,A)};$(w,S=>{i()==="pill"?S(y):S(L,!1)})}var D=h(w,2);Hr(D,{get hashtag(){return e.hashtag},get isVisible(){return t(f)},get position(){return t(m)},onMouseEnter:k,onMouseLeave:M}),s(r,p),ke()}Ie(["click"]);var qr=_('<div class="flex items-center gap-2 p-4 border border-border rounded-lg bg-card/50 my-2"><div class="inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-muted-foreground border-r-transparent"></div> <span class="text-sm text-muted-foreground">Loading event...</span></div>'),Kr=_('<div class="flex items-center gap-2 p-4 border border-red-200 dark:border-red-900 rounded-lg bg-red-50 dark:bg-red-950/30 my-2"><span class="text-red-600 dark:text-red-400">⚠️</span> <span class="text-sm text-red-600 dark:text-red-400"> </span></div>'),Jr=_('<div class="my-2 border border-border rounded-lg overflow-hidden bg-card"><!></div>'),Ur=_('<div class="my-2"><!></div>'),Yr=_('<div class="p-4 border border-border rounded-lg bg-card/50 my-2 cursor-pointer hover:bg-card/70 transition-colors" role="button" tabindex="0"><div class="text-sm text-muted-foreground mb-1"> </div> <div class="text-sm text-foreground line-clamp-3"> </div></div>'),Gr=_('<div class="flex items-center gap-2 p-4 border border-border rounded-lg bg-card/50 my-2"><span class="text-muted-foreground">❌</span> <span class="text-sm text-muted-foreground">No event to display</span></div>');function Qr(r,e){_e(e,!0);let a=N(null),i=N(!0),d=N(null);Ze(()=>{!e.bech32||!e.ndk||(u(i,!0),u(d,null),e.ndk.fetchEvent(e.bech32).then(l=>{l?u(a,l,!0):u(d,"Event not found"),u(i,!1)}).catch(l=>{console.error("Failed to fetch event:",l),u(d,"Failed to load event"),u(i,!1)}))});function v(){e.onEventClick&&t(a)&&e.onEventClick(e.bech32,t(a))}const b=ee(()=>t(a)&&(t(a).kind===Oe.Text||t(a).kind===Oe.GenericReply)),x=ee(()=>t(a)&&t(a).kind===Oe.Article);var f=te(),m=C(f);{var c=l=>{var k=qr();s(l,k)},g=l=>{var k=te(),M=C(k);{var p=y=>{var L=Kr(),D=h(n(L),2),S=n(D,!0);o(D),o(L),ve(()=>J(S,t(d))),s(y,L)},w=y=>{var L=te(),D=C(L);{var S=E=>{var T=te(),R=C(T);{var Q=O=>{var F=Jr(),U=n(F);Bt(U,{get event(){return t(a)},showActions:!1,onNavigate:v}),o(F),s(O,F)},de=O=>{var F=te(),U=C(F);{var re=Y=>{var X=Ur(),V=n(X);{let se=ee(()=>Pt.from(t(a)));Ot(V,{get article(){return t(se)},variant:"compact"})}o(X),s(Y,X)},oe=Y=>{var X=Yr();X.__click=v;var V=n(X),se=n(V);o(V);var I=h(V,2),z=n(I);o(I),o(X),ve(W=>{J(se,`Kind ${t(a).kind??""} event`),J(z,`${W??""}${t(a).content.length>200?"...":""}`)},[()=>t(a).content.slice(0,200)]),s(Y,X)};$(U,Y=>{t(x)?Y(re):Y(oe,!1)},!0)}s(O,F)};$(R,O=>{t(b)?O(Q):O(de,!1)})}s(E,T)},A=E=>{var T=Gr();s(E,T)};$(D,E=>{t(a)?E(S):E(A,!1)},!0)}s(y,L)};$(M,y=>{t(d)?y(p):y(w,!1)},!0)}s(l,k)};$(m,l=>{t(i)?l(c):l(g,!1)})}s(r,f),ke()}Ie(["click"]);function Xr(r,e){e.onClick&&(r.preventDefault(),r.stopPropagation(),e.onClick(e.bech32))}var Zr=_("<span> </span>"),es=_('<a><!> <span class="text-sm"> </span></a>');function ts(r,e){_e(e,!0);let a=Fe(e,"class",3,"");const i=ee(()=>e.ndk?e.ndk.$fetchUser(()=>e.bech32):null),d=ee(()=>e.ndk&&t(i)&&t(i).ready?e.ndk.$fetchProfile(()=>t(i).pubkey):null),v=ee(()=>t(d)?.displayName?t(d).displayName.slice(0,48):t(d)?.name?t(d).name.slice(0,48):`${e.bech32.slice(0,12)}...`);var b=te(),x=C(b);{var f=c=>{var g=Zr(),l=n(g,!0);o(g),ve(k=>{Ce(g,1,`inline-flex items-center gap-1 text-primary font-medium ${a()??""}`),J(l,k)},[()=>e.bech32.slice(0,12)]),s(c,g)},m=c=>{var g=es();g.__click=[Xr,e];var l=n(g);et(l,{get ndk(){return e.ndk},get pubkey(){return t(i).pubkey},size:16,class:"flex-shrink-0"});var k=h(l,2),M=n(k,!0);o(k),o(g),ve(()=>{rt(g,"href",`/p/${e.bech32}`),Ce(g,1,`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-primary/10 hover:bg-primary/15 text-primary font-medium transition-colors no-underline ${a()??""}`),J(M,t(v))}),s(c,g)};$(x,c=>{!t(i)||!t(i).ready?c(f):c(m,!1)})}s(r,b),ke()}Ie(["click"]);var rs=_("<!> <!> <!> <!>",1),ss=_('<div class="flex items-center justify-center min-h-screen bg-background"><div class="text-center"><div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"></div> <p class="mt-4 text-muted-foreground">Initializing...</p></div></div>'),as=_("<!> <!>",1);function ys(r,e){_e(e,!0);let a=N(!1);if(pe&&(qt($e.language),Ze(()=>{Et.set($e.language)})),pe&&(Le.onMentionClick=f=>{Be(`/p/${f}`)},Le.onEventClick=(f,m)=>{Be(`/e/${f}`)},Le.onHashtagClick=f=>{Be(`/t/${f}`)},Le.onLinkClick=f=>{window.open(f,"_blank")},Mt({mention:ts,hashtag:Wr,embeddedEvent:Qr})),pe){const f=$e.theme;f==="dark"||f==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.add("light"),Ct($e.themeColor),It.then(()=>{u(a,!0)})}else u(a,!0);var i=as(),d=C(i);Yt(d,{});var v=h(d,2);{var b=f=>{var m=rs(),c=C(m);xt(c,()=>e.children);var g=h(c,2);Nr(g,{});var l=h(g,2);vr(l,{});var k=h(l,2);gr(k,{}),s(f,m)},x=f=>{var m=ss();s(f,m)};$(v,f=>{t(a)?f(b):f(x,!1)})}s(r,i),ke()}export{ys as component,ws as universal};
