import{d as vt,f as v,a as l,s as m,c as dt}from"../chunks/CiPFrJr-.js";import{p as ct,e as a,t as p,c as ut,d as s,r as e,f as N,g as u,u as z}from"../chunks/CSbKtK4P.js";import{i as _}from"../chunks/87vUJtvC.js";import{h as O,e as gt,t as ft}from"../chunks/D0X4VYcq.js";import{g as mt}from"../chunks/CTwadDAE.js";var _t=()=>mt("/marketplace"),ht=v('<div class="flex items-center justify-center py-12"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),xt=v('<div class="text-center py-12"><p class="text-muted-foreground">Listing not found</p></div>'),pt=v('<div class="mb-6"><img class="w-full rounded-lg object-cover aspect-video"/></div>'),bt=v('<span class="text-sm"> </span>'),kt=v('<div class="text-lg px-4 py-2 bg-primary/20 text-primary rounded-lg font-semibold"> <!></div>'),wt=v('<div class="mb-4 p-4 bg-red-900/20 text-red-400 rounded-lg text-center font-semibold">This item has been sold</div>'),yt=v('<div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></div>'),jt=v('<span class="inline-flex items-center gap-1 px-3 py-1 bg-primary-900/20 text-primary rounded-full text-sm"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> </span>'),Mt=v('<div class="flex flex-wrap gap-2 mb-6"></div>'),Vt=v('<!> <div class="mb-6"><div class="flex items-start justify-between mb-4"><h1 class="text-2xl font-bold text-foreground svelte-17ht8x9"> </h1> <!></div> <!> <div class="flex flex-wrap gap-4 text-sm text-muted-foreground mb-6"><!> <div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div></div> <!> <div class="prose prose-invert max-w-none"><h3 class="text-lg font-semibold mb-2 text-foreground">Description</h3> <div class="whitespace-pre-wrap text-muted-foreground"> </div></div></div>',1),Lt=v('<div class="listing-detail-container svelte-17ht8x9"><div class="listing-header svelte-17ht8x9"><button class="back-btn svelte-17ht8x9"><svg class="w-6 h-6 svelte-17ht8x9" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h1 class="svelte-17ht8x9"> </h1></div> <div class="listing-content svelte-17ht8x9"><!></div></div>');function At(Q,i){ct(i,!0);const R=z(()=>{if(!i.listing?.created_at)return"recently";const n=Date.now(),o=i.listing.created_at*1e3,h=n-o,b=Math.floor(h/6e4),k=Math.floor(h/36e5),d=Math.floor(h/864e5);return d>0?`${d} day${d>1?"s":""} ago`:k>0?`${k} hour${k>1?"s":""} ago`:b>0?`${b} minute${b>1?"s":""} ago`:"just now"});function S(n){if(!n)return null;const o=n.tags.find(h=>h[0]==="price");return!o||!o[1]||!o[2]?null:{amount:o[1],currency:o[2],frequency:o[3]}}var y=Lt(),j=a(y),B=a(j);B.__click=[_t];var C=s(B,2),W=a(C,!0);e(C),e(j);var T=s(j,2),X=a(T);{var Y=n=>{var o=ht();l(n,o)},Z=n=>{var o=dt(),h=N(o);{var b=d=>{var f=xt();l(d,f)},k=d=>{const f=z(()=>S(i.listing)),A=z(()=>i.listing.tags.filter(t=>t[0]==="t").map(t=>t[1]));var D=Vt(),P=N(D);{var $=t=>{var r=pt(),c=a(r);e(r),p((x,g)=>{O(c,"src",x),O(c,"alt",g)},[()=>i.listing.tagValue("image"),()=>i.listing.tagValue("title")||"Listing"]),l(t,r)};_(P,t=>{i.listing.tagValue("image")&&t($)})}var U=s(P,2),M=a(U),V=a(M),tt=a(V,!0);e(V);var et=s(V,2);{var at=t=>{var r=kt(),c=a(r),x=s(c);{var g=w=>{var q=bt(),lt=a(q);e(q),p(()=>m(lt,`/${u(f).frequency??""}`)),l(w,q)};_(x,w=>{u(f).frequency&&u(f).frequency!=="once"&&w(g)})}e(r),p(()=>m(c,`${u(f).amount??""} ${u(f).currency??""} `)),l(t,r)};_(et,t=>{u(f)&&t(at)})}e(M);var E=s(M,2);{var rt=t=>{var r=wt();l(t,r)};_(E,t=>{i.listing.tagValue("status")==="sold"&&t(rt)})}var L=s(E,2),F=a(L);{var it=t=>{var r=yt(),c=s(a(r),2),x=a(c,!0);e(c),e(r),p(g=>m(x,g),[()=>i.listing.tagValue("location")]),l(t,r)};_(F,t=>{i.listing.tagValue("location")&&t(it)})}var G=s(F,2),H=s(a(G),2),st=a(H);e(H),e(G),e(L);var I=s(L,2);{var nt=t=>{var r=Mt();gt(r,21,()=>u(A),ft,(c,x)=>{var g=jt(),w=s(a(g));e(g),p(()=>m(w,` ${u(x)??""}`)),l(c,g)}),e(r),l(t,r)};_(I,t=>{u(A).length>0&&t(nt)})}var J=s(I,2),K=s(a(J),2),ot=a(K,!0);e(K),e(J),e(U),p(t=>{m(tt,t),m(st,`Posted ${u(R)??""}`),m(ot,i.listing.content)},[()=>i.listing.tagValue("title")||"Untitled"]),l(d,D)};_(h,d=>{i.listing?d(k,!1):d(b)},!0)}l(n,o)};_(X,n=>{i.loading?n(Y):n(Z,!1)})}e(T),e(y),p(n=>m(W,n),[()=>i.listing?.tagValue("title")||"Listing"]),l(Q,y),ut()}vt(["click"]);export{At as component};
