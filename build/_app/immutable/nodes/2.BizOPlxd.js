import{d as Ve,c as G,a as o,f as u,s as j,j as ue}from"../chunks/CiPFrJr-.js";import{h as Yt,i as Dt,P as Kt,p as ke,f as w,c as we,e as a,d as i,r,y as ut,t as b,g as e,u as z,a as Xe,b as et,s as Ue}from"../chunks/CSbKtK4P.js";import{e as Jt,s as Ke}from"../chunks/Dt5ZKhe2.js";import{B as Zt,p as ft,i as v,c as qt,s as ht,a as tt}from"../chunks/87vUJtvC.js";import{n as L,d as T,h as Q,f as pt,b as Gt,i as I,g as Qt,k as Pe,a2 as gt,e as at,N as Ct,M as wt,P as Xt,j as er}from"../chunks/D0X4VYcq.js";import{p as $t}from"../chunks/fk9xBW3Y.js";import{g as We}from"../chunks/CTwadDAE.js";import{$ as jt}from"../chunks/Ce4T6J7V.js";import{s as Ee}from"../chunks/BRVPpNUj.js";import{h as yt}from"../chunks/BHoCnjht.js";import{l as Qe}from"../chunks/Bk0a0VIz.js";import{c as tr}from"../chunks/Aqrs6FWH.js";import{c as zt}from"../chunks/Cq_3NAdW.js";import{N as rr,c as Lt}from"../chunks/SCFdHRfV.js";import{h as rt,c as At,R as ar}from"../chunks/BcBT0am5.js";import{c as or}from"../chunks/Bqe8dEVD.js";import{m as _e}from"../chunks/CBcsBXzE.js";import{n as ct}from"../chunks/DwHRoI11.js";import{g as sr}from"../chunks/BgxlgyeA.js";import{l as Ht}from"../chunks/DFvV5mXa.js";import{b as Mt}from"../chunks/I2MJeYPS.js";import{u as nr}from"../chunks/B6l-2YVB.js";function ir(g,l,f){Yt&&Dt();var h=new Zt(g);Kt(()=>{var H=l();h.ensure(H,f)})}const lr=9735,cr=3e4;class vr{zapSubscription=null;checkInterval=null;isProcessing=!1;start(){if(!ct.enabled)return;const l=L.$currentUser;if(!l){console.warn("[NpubCashMonitor] No active user, cannot start monitoring");return}console.log("[NpubCashMonitor] Starting zap monitoring for",l.pubkey),this.zapSubscription=L.subscribe({kinds:[lr],"#p":[l.pubkey]},{closeOnEose:!1}),this.zapSubscription.on("event",()=>{console.log("[NpubCashMonitor] Zap received, checking npub.cash balance"),this.checkAndClaim()}),this.checkInterval=setInterval(()=>{this.checkAndClaim()},cr),this.checkAndClaim()}stop(){this.zapSubscription&&(this.zapSubscription.stop(),this.zapSubscription=null),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),console.log("[NpubCashMonitor] Stopped monitoring")}async checkAndClaim(){if(ct.enabled&&!this.isProcessing){if(!L.$wallet){console.warn("[NpubCashMonitor] No wallet available, skipping token claim");return}this.isProcessing=!0;try{const l=await ct.claimTokens();l&&(console.log("[NpubCashMonitor] Token claimed, redeeming to wallet"),await this.redeemToWallet(l))}catch(l){console.error("[NpubCashMonitor] Error checking/claiming tokens:",l)}finally{this.isProcessing=!1}}}async redeemToWallet(l){if(!L.$wallet){console.warn("[NpubCashMonitor] No wallet available, cannot redeem token");return}try{await L.$wallet.receiveToken(l),console.log("[NpubCashMonitor] ✓ Token redeemed to wallet")}catch(f){console.error("[NpubCashMonitor] Failed to redeem token to wallet:",f)}}}const vt=new vr;function dr(){L.$sessions.logout()}var ur=u('<img class="w-6 h-6 rounded-full object-cover"/>'),pr=u('<div class="w-6 h-6 rounded-full bg-primary flex items-center justify-center"><span class="text-xs font-bold"> </span></div>'),fr=u('<button class="flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted text-foreground rounded-lg transition-colors"><!> <span> </span> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button>'),hr=()=>Ht.open("signup"),gr=u('<button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg> <span>Login</span></button>');function mr(g,l){ke(l,!0);const f=ft(l,"class",3,"px-4 py-2 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-semibold"),h=L.$currentUser,H=L.$fetchProfile(()=>h?.pubkey),N=z(()=>H?.name||H?.displayName||"Anon");var C=G(),U=w(C);{var s=m=>{var k=fr();k.__click=[dr];var D=a(k);{var te=E=>{var x=ur();b(()=>{Q(x,"src",H.image),Q(x,"alt",e(N))}),o(E,x)},d=E=>{var x=pr(),A=a(x),$=a(A,!0);r(A),r(x),b(_=>j($,_),[()=>e(N).charAt(0).toUpperCase()]),o(E,x)};v(D,E=>{H?.image?E(te):E(d,!1)})}var p=i(D,2),V=a(p,!0);r(p),ut(2),r(k),b(()=>j(V,e(N))),o(m,k)},c=m=>{var k=gr();k.__click=[hr],b(()=>T(k,1,qt(f()))),o(m,k)};v(U,m=>{h?m(s):m(c,!1)})}o(g,C),we()}Ve(["click"]);function _r(g,l){Ue(l,!e(l))}function br(g,l){L.$sessions.logout(),l()}function xr(g,l,f){e(l)&&(We(`/p/${e(l)}`),f())}function kr(g,l){We("/settings"),l()}function wr(){const g=I.theme;g==="light"?I.setTheme("dark"):g==="dark"?I.setTheme("system"):I.setTheme("light")}var yr=u('<div class="flex-1 min-w-0 text-left"><p class="font-medium text-sm truncate text-foreground"> </p> <p class="text-xs text-muted-foreground truncate"> </p></div>'),Mr=u("<button><!> <!></button>"),Cr=u('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <span> </span>',1),$r=u('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> <span> </span>',1),jr=u('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> <span> </span>',1),zr=u('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> <span> </span></button></div>'),Lr=u("<!> <!>",1);function Ar(g,l){ke(l,!0);const f=()=>tt(jt,"$t",h),[h,H]=ht(),N=ft(l,"collapsed",3,!1);let C=et(!1),U=et(void 0),s=et(void 0);const c=L.$currentUser,m=L.$fetchProfile(()=>c?.pubkey),k=z(()=>m?.displayName||m?.name||"Anonymous"),D=z(()=>c?.npub);function te(){Ue(C,!1)}Xe(()=>{if(!e(C))return;const A=$=>{e(U)&&!e(U).contains($.target)&&e(s)&&!e(s).contains($.target)&&Ue(C,!1)};return document.addEventListener("click",A),()=>document.removeEventListener("click",A)});var d=Lr(),p=w(d);{var V=A=>{var $=Mr();$.__click=[_r,C];var _=a($);pt(_,{get ndk(){return L},get pubkey(){return c.pubkey},class:"w-10 h-10"});var R=i(_,2);{var K=J=>{var W=yr(),Y=a(W),S=a(Y,!0);r(Y);var ee=i(Y,2),Z=a(ee,!0);r(ee),r(W),b(F=>{j(S,e(k)),j(Z,F)},[()=>m?.nip05||(e(D)?`${e(D).slice(0,16)}...`:"")]),o(J,W)};v(R,J=>{N()||J(K)})}r($),Mt($,J=>Ue(s,J),()=>e(s)),b(()=>{T($,1,`w-full flex items-center ${N()?"justify-center p-3":"gap-3 px-2 py-2"} rounded-lg hover:bg-muted transition-colors cursor-pointer`),Q($,"title",N()?e(k):void 0)}),o(A,$)};v(p,A=>{c&&A(V)})}var E=i(p,2);{var x=A=>{var $=G(),_=w($);ir(_,()=>e(C),R=>{var K=G(),J=w(K);Jt(J,()=>"div",!1,(W,Y)=>{Gt(W,()=>({style:"display: contents"}));var S=zr(),ee=a(S);ee.__click=[xr,D,te];var Z=a(ee);pt(Z,{get ndk(){return L},get pubkey(){return c.pubkey},class:"w-12 h-12"});var F=i(Z,2),O=a(F),oe=a(O,!0);r(O);var ie=i(O,2),Fe=a(ie,!0);r(ie),r(F),r(ee);var Re=i(ee,4);Re.__click=[wr];var Je=a(Re);{var ot=le=>{var he=Cr(),ce=i(w(he),2),Ce=a(ce,!0);r(ce),b($e=>j(Ce,$e),[()=>f()("settings.sections.appearance.themes.light")]),o(le,he)},ye=le=>{var he=G(),ce=w(he);{var Ce=ve=>{var je=$r(),ze=i(w(je),2),ge=a(ze,!0);r(ze),b(Oe=>j(ge,Oe),[()=>f()("settings.sections.appearance.themes.dark")]),o(ve,je)},$e=ve=>{var je=jr(),ze=i(w(je),2),ge=a(ze,!0);r(ze),b(Oe=>j(ge,Oe),[()=>f()("settings.sections.appearance.themes.system")]),o(ve,je)};v(ce,ve=>{I.theme==="dark"?ve(Ce):ve($e,!1)},!0)}o(le,he)};v(Je,le=>{I.theme==="light"?le(ot):le(ye,!1)})}r(Re);var Se=i(Re,2);Se.__click=[kr,te];var Ze=i(a(Se),2),Me=a(Ze,!0);r(Ze),r(Se);var be=i(Se,4);be.__click=[br,te];var qe=i(a(be),2),st=a(qe,!0);r(qe),r(be),r(S),Mt(S,le=>Ue(U,le),()=>e(U)),b((le,he,ce,Ce,$e)=>{Qt(S,`position: fixed; bottom: ${le??""}px; left: ${he??""}px; z-index: 9999;`),j(oe,e(k)),j(Fe,ce),j(Me,Ce),j(st,$e)},[()=>window.innerHeight-e(s).getBoundingClientRect().top+8,()=>e(s).getBoundingClientRect().left,()=>f()("profile.editProfile"),()=>f()("navigation.settings"),()=>f()("navigation.logout")]),o(Y,S)}),o(R,K)}),o(A,$)};v(E,A=>{e(C)&&e(s)&&A(x)})}o(g,d),we(),H()}Ve(["click"]);var Hr=()=>We("/marketplace"),Br=u('<div class="text-center py-6 text-sm text-muted-foreground">No marketplace items yet</div>'),Nr=(g,l)=>We(`/marketplace/${e(l).encode()}`),Ur=u('<div class="w-12 h-12 bg-muted rounded-lg overflow-hidden flex-shrink-0"><img class="w-full h-full object-cover"/></div>'),Pr=u('<p class="text-xs text-muted-foreground mt-1"> </p>'),Vr=u('<button class="w-full bg-muted/50 rounded-lg p-3 transition-all hover:bg-muted hover:scale-[1.02] text-left"><div class="flex gap-3"><!> <div class="flex-1 min-w-0"><h4 class="text-sm font-medium text-card-foreground truncate"> </h4> <!></div></div></button>'),Rr=u('<div class="bg-card rounded-2xl p-5 border border-border backdrop-blur-sm"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg> <h3 class="text-lg font-semibold text-card-foreground">Recent Marketplace</h3></div> <button class="flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors">View All <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="space-y-3"><!></div></div>');function Sr(g,l){ke(l,!0);const f=z(()=>gt(I.selectedRelay,I.relays.filter(d=>d.enabled&&d.read).map(d=>d.url))),h=L.$subscribe(()=>({filters:[{kinds:[30402],limit:5}],bufferMs:100,relayUrls:e(f).length>0?e(f):void 0,cacheUsage:e(f).length>0?Pe.ONLY_RELAY:Pe.PARALLEL})),H=z(()=>h.events.filter(d=>(d.tagValue("status")||"active")==="active").slice(0,5));function N(d){return d.tagValue("image")}function C(d){const p=d.tags.find(V=>V[0]==="price");return!p||!p[1]||!p[2]?null:{amount:p[1],currency:p[2]}}var U=Rr(),s=a(U),c=i(a(s),2);c.__click=[Hr],r(s);var m=i(s,2),k=a(m);{var D=d=>{var p=Br();o(d,p)},te=d=>{var p=G(),V=w(p);at(V,17,()=>e(H),E=>E.id,(E,x)=>{const A=z(()=>C(e(x)));var $=Vr();$.__click=[Nr,x];var _=a($),R=a(_);{var K=Z=>{var F=Ur(),O=a(F);r(F),b((oe,ie)=>{Q(O,"src",oe),Q(O,"alt",ie)},[()=>N(e(x)),()=>e(x).tagValue("title")||"Listing"]),o(Z,F)};v(R,Z=>{N(e(x))&&Z(K)})}var J=i(R,2),W=a(J),Y=a(W,!0);r(W);var S=i(W,2);{var ee=Z=>{var F=Pr(),O=a(F);r(F),b(()=>j(O,`${e(A).amount??""} ${e(A).currency??""}`)),o(Z,F)};v(S,Z=>{e(A)&&Z(ee)})}r(J),r(_),r($),b(Z=>j(Y,Z),[()=>e(x).tagValue("title")||"Untitled"]),o(E,$)}),o(d,p)};v(k,d=>{e(H).length===0?d(D):d(te,!1)})}r(m),r(U),o(g,U),we()}Ve(["click"]);var Tr=u('<div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">New Members</h2></div> <div class="space-y-3"></div></div>');function Ir(g,l){ke(l,!0);const f=z(()=>!!I.selectedRelay),h=z(()=>I.selectedRelay?L.$subscribe(()=>({filters:[{kinds:[514],limit:10}],relayUrls:[I.selectedRelay],cacheUsage:Pe.ONLY_RELAY,subId:"new-members-514"})):null),H=z(()=>e(h)?e(h).events.map(m=>{const k=m.tagValue("p");return{memberPubkey:m.pubkey,inviterPubkey:k,joinedAt:m.created_at||0}}).sort((m,k)=>k.joinedAt-m.joinedAt).slice(0,5):[]);var N=G(),C=w(N);{var U=s=>{var c=Tr(),m=i(a(c),2);at(m,21,()=>e(H),k=>k.memberPubkey,(k,D)=>{rr(k,{get memberPubkey(){return e(D).memberPubkey},get inviterPubkey(){return e(D).inviterPubkey},get joinedAt(){return e(D).joinedAt}})}),r(m),r(c),o(s,c)};v(C,s=>{e(f)&&e(H).length>0&&s(U)})}o(g,N),we()}var Er=u('<div class="text-center py-4 text-sm text-muted-foreground">No journalists found yet</div>'),Wr=(g,l,f)=>l(e(f).pubkey),Fr=u("<button> </button>"),Or=u('<div class="flex items-center gap-3"><a class="flex-shrink-0"><!></a> <a class="flex-1 min-w-0 group"><p class="text-sm font-medium text-card-foreground truncate group-hover:text-primary transition-colors"> </p> <p class="text-xs text-muted-foreground"> </p></a> <!></div>'),Yr=u('<div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">Journalists</h2></div> <div class="space-y-3"><!></div></div>');function Dr(g,l){ke(l,!0);const f=z(()=>gt(I.selectedRelay,I.relays.filter(d=>d.enabled&&d.read).map(d=>d.url))),h=L.$subscribe(()=>({filters:[{kinds:[Ct.Article],limit:50}],bufferMs:500,relayUrls:e(f).length>0?e(f):void 0,cacheUsage:e(f).length>0?Pe.ONLY_RELAY:Pe.PARALLEL,closeOnEose:!0})),H=z(()=>{const d=new Map;for(const p of h.events){const V=d.get(p.pubkey)||0;d.set(p.pubkey,V+1)}return Array.from(d.entries()).map(([p,V])=>({pubkey:p,articleCount:V})).sort((p,V)=>V.articleCount-p.articleCount).slice(0,5)}),N=L.$currentUser,C=z(()=>L.$sessions?.follows||new Set);function U(d){return e(C).has(d)}async function s(d){if(N)try{const p=L.$fetchUser(()=>d);U(d)?await L.$follows?.removeContact(p):await L.$follows?.addContact(p)}catch(p){console.error("Failed to toggle follow:",p)}}var c=Yr(),m=i(a(c),2),k=a(m);{var D=d=>{var p=Er();o(d,p)},te=d=>{var p=G(),V=w(p);at(V,17,()=>e(H),E=>E.pubkey,(E,x)=>{const A=z(()=>L.$fetchProfile(()=>e(x).pubkey)),$=z(()=>L.getUser({pubkey:e(x).pubkey})),_=z(()=>U(e(x).pubkey));var R=Or(),K=a(R),J=a(K);pt(J,{get ndk(){return L},get pubkey(){return e(x).pubkey},class:"w-10 h-10 rounded-full"}),r(K);var W=i(K,2),Y=a(W),S=a(Y,!0);r(Y);var ee=i(Y,2),Z=a(ee);r(ee),r(W);var F=i(W,2);{var O=oe=>{var ie=Fr();ie.__click=[Wr,s,x];var Fe=a(ie,!0);r(ie),b(()=>{T(ie,1,`px-3 py-1 text-xs font-medium rounded-full transition-colors flex-shrink-0 ${e(_)?"bg-muted text-muted-foreground hover:bg-muted/80":"text-primary hover:bg-primary/10"}`),j(Fe,e(_)?"Following":"Follow")}),o(oe,ie)};v(F,oe=>{N&&e(x).pubkey!==N.pubkey&&oe(O)})}r(R),b(()=>{Q(K,"href",`/p/${e($).npub??""}`),Q(W,"href",`/p/${e($).npub??""}`),j(S,e(A)?.displayName||e(A)?.name||"Anonymous"),j(Z,`${e(x).articleCount??""} ${e(x).articleCount===1?"article":"articles"}`)}),o(E,R)}),o(d,p)};v(k,d=>{e(H).length===0?d(D):d(te,!1)})}r(m),r(c),o(g,c),we()}Ve(["click"]);function Kr(g,l){l?window.location.href=`/p/${l.npub}`:Ht.open("signup")}var Jr=ue('<svg class="w-6 h-6" viewBox="0 0 80 80" fill="currentColor"><polygon points="8,10 20,13 60,13 72,10"></polygon><polygon points="21,15 22,16 58,16 59,15"></polygon><g><rect x="21" y="20" width="3" height="45"></rect><rect x="27" y="20" width="3" height="45"></rect><polygon points="19,18 19,20 33,20 33,18 27,16 25,16"></polygon><rect x="19" y="65" width="14" height="2"></rect></g><g><rect x="38.5" y="20" width="3" height="45"></rect><rect x="44.5" y="20" width="3" height="45"></rect><polygon points="36.5,18 36.5,20 50.5,20 50.5,18 44.5,16 42.5,16"></polygon><rect x="36.5" y="65" width="14" height="2"></rect></g><g><rect x="56" y="20" width="3" height="45"></rect><rect x="62" y="20" width="3" height="45"></rect><polygon points="54,18 54,20 68,20 68,18 62,16 60,16"></polygon><rect x="54" y="65" width="14" height="2"></rect></g></svg>'),Zr=u('<img alt="" class="w-6 h-6 rounded"/>'),qr=ue('<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg>'),Gr=ue('<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>'),Qr=u('<div class="absolute top-1.5 right-1.5 min-w-[18px] h-[18px] px-1 rounded-full bg-primary flex items-center justify-center"><span class="text-[10px] font-bold text-primary-foreground"> </span></div>'),Xr=u('<nav class="block lg:hidden fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border z-[1000]"><div class="flex justify-around items-center px-2 py-3 safe-bottom svelte-2rf3uy"><a href="/" aria-label="Home"><!></a> <a href="/notifications" aria-label="Notifications"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg></a> <a href="/messages" aria-label="Messages"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg> <!></a> <a href="/wallet" aria-label="Wallet"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3"></path></svg></a> <button aria-label="Profile"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></button></div></nav>');function ea(g,l){ke(l,!0);const f=()=>tt($t,"$page",h),[h,H]=ht(),N=L.$currentUser,C=z(()=>f().url.pathname),U=_=>_==="/"?e(C)==="/":e(C).startsWith(_),s=z(()=>!I.selectedRelay||wt(I.selectedRelay)?null:nr(I.selectedRelay));var c=Xr(),m=a(c),k=a(m),D=a(k);{var te=_=>{var R=Jr();o(_,R)},d=_=>{var R=G(),K=w(R);{var J=Y=>{var S=Zr();b(()=>Q(S,"src",e(s).info.icon)),o(Y,S)},W=Y=>{var S=G(),ee=w(S);{var Z=O=>{var oe=qr();o(O,oe)},F=O=>{var oe=Gr();o(O,oe)};v(ee,O=>{I.selectedRelay?O(Z):O(F,!1)},!0)}o(Y,S)};v(K,Y=>{I.selectedRelay&&e(s)?.info?.icon?Y(J):Y(W,!1)},!0)}o(_,R)};v(D,_=>{wt(I.selectedRelay)?_(te):_(d,!1)})}r(k);var p=i(k,2),V=i(p,2),E=i(a(V),2);{var x=_=>{var R=Qr(),K=a(R),J=a(K,!0);r(K),r(R),b(()=>j(J,_e.totalUnreadCount>9?"9+":_e.totalUnreadCount)),o(_,R)};v(E,_=>{_e.totalUnreadCount>0&&_(x)})}r(V);var A=i(V,2),$=i(A,2);$.__click=[Kr,N],r(m),r(c),b((_,R,K,J,W)=>{T(k,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${_??""}`),T(p,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${R??""}`),T(V,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${K??""} relative`),T(A,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${J??""}`),T($,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${W??""}`)},[()=>U("/")?"text-primary":"text-muted-foreground",()=>U("/notifications")?"text-primary":"text-muted-foreground",()=>U("/messages")?"text-primary":"text-muted-foreground",()=>U("/wallet")?"text-primary":"text-muted-foreground",()=>e(C).startsWith("/p/")?"text-primary":"text-muted-foreground"]),o(g,c),we(),H()}Ve(["click"]);function ta(g,l,f){l.onclick?l.onclick():e(f)==="images"?At.open():We("/compose")}var ra=u('<button class="block lg:hidden fixed bottom-24 right-4 w-14 h-14 bg-primary hover:bg-accent-dark text-foreground rounded-full shadow-lg hover:shadow-xl transition-all z-[500] flex items-center justify-center active:scale-95"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button>');function dt(g,l){ke(l,!0);const f=ft(l,"isHomePage",3,!1),h=z(()=>f()?rt.selected:null),H=z(()=>e(h)==="images"?"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z":"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),N=z(()=>e(h)==="images"?"Create media post":"Compose");var C=ra();C.__click=[ta,l,h];var U=a(C),s=a(U);r(U),r(C),b(()=>{Q(C,"aria-label",e(N)),Q(s,"d",e(H))}),o(g,C),we()}Ve(["click"]);var aa=(g,l)=>Ue(l,!e(l)),oa=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"></path></svg>'),sa=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg>'),na=u('<span class="font-medium">Notifications</span>'),ia=u('<span class="font-medium"> </span>'),la=u('<div class="absolute top-1.5 right-1.5 min-w-[18px] h-[18px] px-1 rounded-full bg-primary flex items-center justify-center"><span class="text-[10px] font-bold text-primary-foreground"> </span></div>'),ca=u('<span class="text-xs px-2 py-1 rounded-full bg-primary text-primary-foreground font-medium"> </span>'),va=u('<span class="font-medium">Community Invites</span>'),da=u('<a href="/agora/invites"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <!></a>'),ua=u('<span class="font-medium"> </span>'),pa=u('<span class="font-medium"> </span>'),fa=u('<span class="text-xs px-2 py-1 rounded-full bg-primary/20 text-primary font-medium"> </span>'),ha=u('<span class="font-medium"> </span>'),ga=u('<span class="font-medium"> </span>'),ma=(g,l)=>{e(l)==="/marketplace"?zt.open():e(l)==="/trades"?or.open():e(l).startsWith("/packs")?tr.open():e(l)==="/agora/invites"?Lt.open():e(l)==="/"&&rt.selected==="images"?At.open():We("/compose")},_a=u("<span> </span>"),ba=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg><!>',1),xa=u("<span>Create Trade</span>"),ka=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg><!>',1),wa=u("<span>Create Pack</span>"),ya=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg><!>',1),Ma=u("<span>Create Invite</span>"),Ca=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg><!>',1),$a=u("<span>Create media post</span>"),ja=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><!>',1),za=u("<span> </span>"),La=ue('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg><!>',1),Aa=u('<div class="lg:hidden p-3 border-b border-border bg-background"><!></div>'),Ha=u('<div class="h-4 bg-muted rounded animate-pulse"></div> <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div> <div class="h-4 bg-muted rounded animate-pulse"></div>',1),Ba=u('<a class="block text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-2"> </a>'),Na=u('<!> <div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground"> </h2></div> <div class="space-y-3"><!></div></div> <!> <!> <div class="text-xs text-muted-foreground space-y-2"><div class="flex flex-wrap gap-3"><a href="#" class="hover:text-foreground transition-colors">Terms</a> <a href="#" class="hover:text-foreground transition-colors">Privacy</a> <a href="#" class="hover:text-foreground transition-colors">About</a> <a href="#" class="hover:text-foreground transition-colors">Help</a></div> <p>© 2024 Agora</p></div>',1),Ua=u('<aside class="hidden lg:block w-80 p-4 space-y-4"><div class="sticky top-4 space-y-4"><!></div></aside>'),Pa=u(`<div class="min-h-screen bg-background flex justify-center overflow-x-hidden"><div class="flex w-full max-w-[1400px] relative"><aside><div><div><svg viewBox="0 0 686 250" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg"><style>.st0{fill:#F68E1D;}
            .st1{fill:currentColor;}
            .st2{fill:currentColor;opacity:0.9;}</style><path class="st0" d="M109.5,196.1h66.7c17.5,0,31.6-14.2,31.6-31.6V97.8c0-17.5-14.2-31.6-31.6-31.6h-66.7
            c-17.5,0-31.6,14.2-31.6,31.6v66.7C77.9,182,92,196.1,109.5,196.1z"></path><g><path class="st1" d="M233.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L251,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H233.9z M273.1,87.7h8.8l-7.8,9.2h-3L273.1,87.7z"></path><path class="st1" d="M358.3,135.2c0-1.5-0.6-2.7-1.8-3.7c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H378v0.9c-2.9,0.3-4.9,0.9-6.1,1.8
              c-1.2,0.9-1.8,2.1-1.8,3.7v32.9c0,1.5,0.6,2.7,1.8,3.7c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-29v-0.9c3.5-0.3,5.9-0.9,7.2-1.8
              c1.3-0.9,2-2.1,2-3.7v-11.1c-1.5,2.9-3.7,5.2-6.7,6.7c-2.9,1.6-6.8,2.3-11.5,2.3c-4.5,0-8.7-0.7-12.3-2.2c-3.7-1.5-6.8-3.6-9.4-6.4
              c-2.6-2.8-4.6-6.2-6-10.2c-1.4-4-2.1-8.6-2.1-13.6c0-5.1,0.7-9.6,2.2-13.7c1.5-4.1,3.7-7.5,6.6-10.4c2.9-2.9,6.5-5.1,10.9-6.7
              c4.4-1.6,9.4-2.3,15.1-2.3c3.8,0,7.5,0.3,11.2,1c3.7,0.7,7.2,1.7,10.6,3v15.6h-1.3c-1.1-2.5-2.3-4.8-3.7-6.8c-1.4-2-3-3.8-4.7-5.3
              c-1.8-1.5-3.7-2.6-5.9-3.4c-2.2-0.8-4.6-1.2-7.3-1.2c-3.6,0-6.8,0.7-9.5,2.1c-2.7,1.4-4.9,3.4-6.7,6c-1.8,2.6-3.2,5.7-4,9.3
              c-0.9,3.6-1.3,7.7-1.3,12.2c0,9.2,1.8,16.2,5.5,20.8c3.7,4.7,8.6,7,14.6,7c4.8,0,8.5-1.6,11.3-4.8c2.7-3.2,4.2-8.5,4.5-15.8V135.2z
              "></path><path class="st1" d="M480.2,101.4c12.3,0,21.4,1.4,27.3,4.3c5.8,2.9,8.8,6.9,8.8,12.1c0,3.8-1.6,7.1-4.7,9.7
              c-3.2,2.6-8,4.5-14.7,5.6l19,25.9c0.9,1.3,2.2,2.4,3.8,3.5c1.6,1,3.8,1.7,6.7,2v0.9h-27.7v-0.9c2.9-0.3,4.5-1,4.8-2
              c0.3-1,0-2.2-0.9-3.5l-17.9-24.8c-0.7,0.1-1.4,0.1-2.1,0.1c-0.8,0-1.5,0-2.3,0h-7.1V159c0,1.5,0.6,2.7,1.8,3.7
              c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-27.7v-0.9c2.9-0.3,4.9-0.9,6.1-1.8c1.2-0.9,1.8-2.1,1.8-3.7v-51.2c0-1.5-0.6-2.7-1.8-3.7
              c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H480.2z M480.2,131.6c8.2,0,14.3-1.2,18.1-3.5c3.8-2.3,5.7-5.7,5.7-10.2c0-4.5-1.9-7.9-5.7-10.2
              c-3.8-2.3-9.8-3.5-18.1-3.5h-7.1v27.5H480.2z"></path><path class="st1" d="M528.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L546,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H528.9z"></path><path class="st1" d="M445.1,120c-1.5-4-3.7-7.5-6.5-10.3c-2.8-2.9-6.2-5.1-10.1-6.6c-4-1.6-8.4-2.3-13.4-2.3
              c-4.9,0-9.3,0.8-13.3,2.3c-4,1.6-7.4,3.8-10.2,6.6c-2.8,2.9-5,6.3-6.5,10.3c-1.5,4-2.3,8.5-2.3,13.5s0.8,9.4,2.3,13.5
              c1.5,4,3.7,7.5,6.5,10.3c2.8,2.9,6.2,5.1,10.2,6.6c4,1.6,8.4,2.3,13.3,2.3c5,0,9.4-0.8,13.4-2.3c3.9-1.6,7.3-3.8,10.1-6.6
              c2.8-2.9,5-6.3,6.5-10.3c1.5-4,2.3-8.5,2.3-13.5S446.6,124,445.1,120z M415,163.4c-12.4,0-20.9-13.4-20.9-30s8.2-30,20.9-30
              c13,0,20.9,13.4,20.9,30S428,163.4,415,163.4z"></path></g><path d="M144.2,133.4h-2.9v0.1C142.3,133.5,143.3,133.5,144.2,133.4z"></path><polygon class="st2" points="143.9,97.2 101,109.3 101,113.8 186.8,113.8 186.8,109.3 "></polygon><polygon class="st2" points="104.4,115.4 106,117.6 181.2,117.6 182.6,115.4 "></polygon><path class="st2" d="M125,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L125,120.4z M111.2,157h-2.6
            v-29.2h2.6V157z M117.1,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M185.3,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L185.3,120.4z M171.4,157h-2.6
            v-29.2h2.6V157z M177.3,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M155.2,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L155.2,120.4z M141.3,157h-2.6
            v-29.2h2.6V157z M147.2,157h-2.6v-29.2h2.6V157z"></path><path class="st1" d="M284.4,150.2h-2.6v0.1C282.7,150.3,283.6,150.3,284.4,150.2z"></path></svg></div> <button class="p-2 rounded-lg hover:bg-muted transition-colors text-muted-foreground hover:text-primary flex-shrink-0"><!></button></div> <nav class="flex-1 space-y-2"><!> <a href="/notifications"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg> <!></a> <a href="/messages"><div><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg> <!></div> <!></a> <!> <a href="/packs"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <!></a> <a href="/wallet"><div><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3"></path></svg> <!></div> <!></a> <a href="/trades"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg> <!></a> <a href="/marketplace"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <!></a> <button><!></button></nav> <div class="mt-auto pt-4 border-t border-border"><!></div></aside> <div><div><main class="flex-1 pb-20 md:pb-0 bg-background"><!> <!> <!></main></div> <!></div></div> <!> <!></div>`);function Va(g,l){ke(l,!0);const f=()=>tt($t,"$page",H),h=()=>tt(jt,"$t",H),[H,N]=ht(),C=L.$currentUser,U=L.$wallet;let s=et(!1);const c=z(()=>f().url.pathname),m=z(()=>Qe.mode==="article"||Qe.mode==="profile"||Qe.mode==="reads"||e(c).startsWith("/note/")||e(c).startsWith("/messages/")||e(c).startsWith("/packs")||e(c).startsWith("/agora/invites")),k=z(()=>Qe.mode==="article"),D=z(()=>gt(I.selectedRelay,I.relays.filter(t=>t.enabled&&t.read).map(t=>t.url))),te=z(()=>!e(m)&&!Ee.rightSidebar?L.$subscribe(()=>({filters:[{kinds:[Ct.Article],limit:5}],bufferMs:500,relayUrls:e(D).length>0?e(D):void 0,cacheUsage:e(D).length>0?Pe.ONLY_RELAY:Pe.PARALLEL,closeOnEose:!0})):null),d=z(()=>e(te)?e(te).events.map(t=>er.from(t)).filter(t=>t.title&&t.content).sort((t,n)=>(n.published_at??n.created_at??0)-(t.published_at??t.created_at??0)).slice(0,5):[]);Xe(()=>{e(k)&&Ue(s,!0)}),Xe(()=>{C||_e.stop()}),Xe(()=>(C?vt.start():vt.stop(),()=>{vt.stop()}));function p(t){return t===0?"0 sats":new Intl.NumberFormat("en-US").format(t)+" sats"}var V=Pa(),E=a(V),x=a(E),A=a(x),$=a(A),_=i($,2);_.__click=[aa,s];var R=a(_);{var K=t=>{var n=oa();o(t,n)},J=t=>{var n=sa();o(t,n)};v(R,t=>{e(s)?t(K):t(J,!1)})}r(_),r(A);var W=i(A,2),Y=a(W);{let t=z(()=>e(c)==="/");ar(Y,{get active(){return e(t)},get collapsed(){return e(s)}})}var S=i(Y,2),ee=i(a(S),2);{var Z=t=>{var n=na();o(t,n)};v(ee,t=>{e(s)||t(Z)})}r(S);var F=i(S,2),O=a(F),oe=i(a(O),2);{var ie=t=>{var n=ia(),y=a(n,!0);r(n),b(P=>j(y,P),[()=>h()("navigation.messages")]),o(t,n)};v(oe,t=>{e(s)||t(ie)})}r(O);var Fe=i(O,2);{var Re=t=>{var n=G(),y=w(n);{var P=M=>{var B=la(),q=a(B),re=a(q,!0);r(q),r(B),b(()=>j(re,_e.totalUnreadCount>9?"9+":_e.totalUnreadCount)),o(M,B)},X=M=>{var B=ca(),q=a(B,!0);r(B),b(()=>j(q,_e.totalUnreadCount>99?"99+":_e.totalUnreadCount)),o(M,B)};v(y,M=>{e(s)?M(P):M(X,!1)})}o(t,n)};v(Fe,t=>{_e.totalUnreadCount>0&&t(Re)})}r(F);var Je=i(F,2);{var ot=t=>{var n=da(),y=i(a(n),2);{var P=X=>{var M=va();o(X,M)};v(y,X=>{e(s)||X(P)})}r(n),b(X=>{T(n,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${X??""}`),Q(n,"title",e(s)?"Community Invites":void 0)},[()=>e(c).startsWith("/agora/invites")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),o(t,n)};v(Je,t=>{I.selectedRelay&&Xt(I.selectedRelay)&&t(ot)})}var ye=i(Je,2),Se=i(a(ye),2);{var Ze=t=>{var n=ua(),y=a(n,!0);r(n),b(P=>j(y,P),[()=>h()("navigation.followPacks")]),o(t,n)};v(Se,t=>{e(s)||t(Ze)})}r(ye);var Me=i(ye,2),be=a(Me),qe=i(a(be),2);{var st=t=>{var n=pa(),y=a(n,!0);r(n),b(P=>j(y,P),[()=>h()("navigation.wallet")]),o(t,n)};v(qe,t=>{e(s)||t(st)})}r(be);var le=i(be,2);{var he=t=>{var n=fa(),y=a(n,!0);r(n),b(P=>j(y,P),[()=>p(U.balance)]),o(t,n)};v(le,t=>{e(s)||t(he)})}r(Me);var ce=i(Me,2),Ce=i(a(ce),2);{var $e=t=>{var n=ha(),y=a(n,!0);r(n),b(P=>j(y,P),[()=>h()("navigation.trades")]),o(t,n)};v(Ce,t=>{e(s)||t($e)})}r(ce);var ve=i(ce,2),je=i(a(ve),2);{var ze=t=>{var n=ga(),y=a(n,!0);r(n),b(P=>j(y,P),[()=>h()("navigation.marketplace")]),o(t,n)};v(je,t=>{e(s)||t(ze)})}r(ve);var ge=i(ve,2);ge.__click=[ma,c];var Oe=a(ge);{var Bt=t=>{var n=ba(),y=i(w(n));{var P=X=>{var M=_a(),B=a(M,!0);r(M),b(q=>j(B,q),[()=>h()("classifieds.createListing")]),o(X,M)};v(y,X=>{e(s)||X(P)})}o(t,n)},Nt=t=>{var n=G(),y=w(n);{var P=M=>{var B=ka(),q=i(w(B));{var re=se=>{var de=xa();o(se,de)};v(q,se=>{e(s)||se(re)})}o(M,B)},X=M=>{var B=G(),q=w(B);{var re=de=>{var xe=ya(),Ye=i(w(xe));{var Te=Le=>{var pe=wa();o(Le,pe)};v(Ye,Le=>{e(s)||Le(Te)})}o(de,xe)},se=de=>{var xe=G(),Ye=w(xe);{var Te=pe=>{var Ae=Ca(),Ie=i(w(Ae));{var De=ae=>{var ne=Ma();o(ae,ne)};v(Ie,ae=>{e(s)||ae(De)})}o(pe,Ae)},Le=pe=>{var Ae=G(),Ie=w(Ae);{var De=ne=>{var He=ja(),Be=i(w(He));{var Ne=me=>{var fe=$a();o(me,fe)};v(Be,me=>{e(s)||me(Ne)})}o(ne,He)},ae=ne=>{var He=La(),Be=i(w(He));{var Ne=me=>{var fe=za(),it=a(fe,!0);r(fe),b(lt=>j(it,lt),[()=>h()("navigation.compose")]),o(me,fe)};v(Be,me=>{e(s)||me(Ne)})}o(ne,He)};v(Ie,ne=>{e(c)==="/"&&rt.selected==="images"?ne(De):ne(ae,!1)},!0)}o(pe,Ae)};v(Ye,pe=>{e(c)==="/agora/invites"?pe(Te):pe(Le,!1)},!0)}o(de,xe)};v(q,de=>{e(c).startsWith("/packs")?de(re):de(se,!1)},!0)}o(M,B)};v(y,M=>{e(c)==="/trades"?M(P):M(X,!1)},!0)}o(t,n)};v(Oe,t=>{e(c)==="/marketplace"?t(Bt):t(Nt,!1)})}r(ge),r(W);var mt=i(W,2),Ut=a(mt);{var Pt=t=>{Ar(t,{get collapsed(){return e(s)}})},Vt=t=>{{let n=z(()=>e(s)?"p-3":"gap-2 px-4 py-3");mr(t,{get class(){return`w-full flex items-center justify-center ${e(n)??""} bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full transition-colors`}})}};v(Ut,t=>{C?t(Pt):t(Vt,!1)})}r(mt),r(x);var nt=i(x,2),Ge=a(nt),_t=a(Ge),bt=a(_t);{var Rt=t=>{var n=G(),y=w(n);Ke(y,()=>yt.header),o(t,n)};v(bt,t=>{yt.header&&t(Rt)})}var xt=i(bt,2);{var St=t=>{var n=Aa(),y=a(n);Ke(y,()=>Ee.rightSidebar),r(n),o(t,n)};v(xt,t=>{Ee.showOnMobile&&Ee.rightSidebar&&!e(m)&&t(St)})}var Tt=i(xt,2);Ke(Tt,()=>l.children),r(_t),r(Ge);var It=i(Ge,2);{var Et=t=>{var n=Ua(),y=a(n),P=a(y);{var X=B=>{var q=G(),re=w(q);Ke(re,()=>Ee.rightSidebar),o(B,q)},M=B=>{var q=Na(),re=w(q);Ir(re,{});var se=i(re,2),de=a(se),xe=i(a(de),2),Ye=a(xe,!0);r(xe),r(de);var Te=i(de,2),Le=a(Te);{var pe=ae=>{var ne=Ha();ut(4),o(ae,ne)},Ae=ae=>{var ne=G(),He=w(ne);at(He,17,()=>e(d),Be=>Be.id,(Be,Ne)=>{const me=z(()=>L.$fetchUser(()=>e(Ne).pubkey));var fe=Ba(),it=a(fe,!0);r(fe),b(lt=>{Q(fe,"href",lt),j(it,e(Ne).title)},[()=>sr(e(Ne),e(me))]),o(Be,fe)}),o(ae,ne)};v(Le,ae=>{e(d).length===0?ae(pe):ae(Ae,!1)})}r(Te),r(se);var Ie=i(se,2);Dr(Ie,{});var De=i(Ie,2);Sr(De,{}),ut(2),b(ae=>j(Ye,ae),[()=>h()("feed.mediaTypes.articles")]),o(B,q)};v(P,B=>{Ee.rightSidebar?B(X):B(M,!1)})}r(y),r(n),o(t,n)};v(It,t=>{e(m)||t(Et)})}r(nt),r(E);var kt=i(E,2);ea(kt,{});var Wt=i(kt,2);{var Ft=t=>{dt(t,{isHomePage:!0})},Ot=t=>{var n=G(),y=w(n);{var P=M=>{dt(M,{onclick:()=>zt.open()})},X=M=>{var B=G(),q=w(B);{var re=se=>{dt(se,{onclick:()=>Lt.open()})};v(q,se=>{e(c)==="/agora/invites"&&se(re)},!0)}o(M,B)};v(y,M=>{e(c)==="/marketplace"?M(P):M(X,!1)},!0)}o(t,n)};v(Wt,t=>{e(c)==="/"?t(Ft):t(Ot,!1)})}r(V),b((t,n,y,P,X,M,B,q,re)=>{T(x,1,`hidden lg:flex ${e(s)?"w-20":"w-64"} flex-col border-r border-border p-4 fixed left-0 top-0 bottom-0 overflow-y-auto overflow-x-visible transition-all duration-300 ease-in-out bg-background`),T(A,1,`mb-6 flex items-center ${e(s)?"justify-center":"justify-between"} gap-2`),T($,1,`px-2 ${e(s)?"hidden":"flex-1"} transition-opacity duration-300 text-foreground`),Q(_,"aria-label",e(s)?"Expand sidebar":"Collapse sidebar"),T(S,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${t??""}`),Q(S,"title",e(s)?"Notifications":void 0),T(F,1,`flex items-center ${e(s)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${n??""} relative`),Q(F,"title",y),T(O,1,`flex items-center ${e(s)?"":"gap-3"}`),T(ye,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${P??""}`),Q(ye,"title",X),T(Me,1,`flex items-center ${e(s)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${e(c)==="/wallet"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),Q(Me,"title",M),T(be,1,`flex items-center ${e(s)?"":"gap-3"}`),T(ce,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(c)==="/trades"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),Q(ce,"title",B),T(ve,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(c)==="/marketplace"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),Q(ve,"title",q),T(ge,1,`w-full flex items-center justify-center ${e(s)?"p-3":"gap-2 px-6 py-3"} bg-primary hover:bg-primary/90 text-foreground font-semibold rounded-full transition-colors mt-4`),Q(ge,"title",re),T(nt,1,`flex-1 flex ${e(s)?"lg:ml-20":"lg:ml-64"} transition-all duration-300 ease-in-out min-h-screen`),T(Ge,1,`w-full lg:flex-1 ${e(m)?"lg:max-w-[900px]":"lg:max-w-[600px]"} min-w-0 flex flex-col h-full border-x border-border`)},[()=>e(c).startsWith("/notifications")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(c).startsWith("/messages")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(s)?h()("navigation.messages"):void 0,()=>e(c).startsWith("/packs")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(s)?h()("navigation.followPacks"):void 0,()=>e(s)?h()("navigation.wallet"):void 0,()=>e(s)?h()("navigation.trades"):void 0,()=>e(s)?h()("navigation.marketplace"):void 0,()=>e(s)?e(c)==="/marketplace"?h()("classifieds.createListing"):e(c)==="/trades"?"Create Trade":e(c).startsWith("/packs")?"Create Pack":e(c)==="/agora/invites"?"Create Invite":e(c)==="/"&&rt.selected==="images"?"Create media post":h()("navigation.compose"):void 0]),o(g,V),we(),N()}Ve(["click"]);function so(g,l){Va(g,{children:(f,h)=>{var H=G(),N=w(H);Ke(N,()=>l.children),o(f,H)},$$slots:{default:!0}})}export{so as component};
