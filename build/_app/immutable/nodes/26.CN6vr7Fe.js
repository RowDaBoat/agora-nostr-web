import{d as we,f as M,s as i,j as Te,r as Ye,a as h,c as qe,i as Qe,t as it}from"../chunks/DNmf0A2m.js";import{p as Pe,e as t,g as r,a as pe,d as o,r as e,t as Y,b as D,c as Ce,s as W,f as ye,y as Re,x as st,z as lt,u as Xe}from"../chunks/DpkVnRja.js";import{i as Z}from"../chunks/Btb_Ey2R.js";import{a as xe,c as De,r as Ge,b as $e,s as He,e as dt}from"../chunks/Ci0hv7jC.js";import{a as et,e as tt,N as ct,A as Ve,J as vt,n as he,j as rt,K as ut}from"../chunks/QTLWRGLp.js";import{g as gt}from"../chunks/BFZgCa8b.js";import{o as de}from"../chunks/DzpuDWEf.js";import{e as Je}from"../chunks/DD8s4tVe.js";import{a as Ie,s as ze}from"../chunks/DyCGT0HY.js";import{$ as je,a as mt}from"../chunks/CJuHvAJe.js";import{c as Oe}from"../chunks/CSx53_lc.js";import{p as ft}from"../chunks/f_qAQkK6.js";import{F as Ee}from"../chunks/RiWhrYJz.js";import{A as pt,a as bt,N as xt}from"../chunks/DiXitoXJ.js";import"../chunks/BYRURnlO.js";import{g as ht}from"../chunks/DSAIpCcp.js";import{b as at}from"../chunks/-Mgh5RB7.js";import{N as ot,c as nt}from"../chunks/CwXZxT0m.js";async function _t(b,a){const n=new Set;try{const d=await b.signer?.user();if(!d)throw new Error("No user logged in");const y=await b.fetchEvent({kinds:[3],authors:[d.pubkey]}),P=new Set;y&&y.tags.filter(l=>l[0]==="p").forEach(l=>P.add(l[1]));for(const l of a)try{const v=await b.fetchEvent(l);v&&et.from(v).pubkeys?.forEach(m=>{P.has(m)||n.add(m)})}catch(v){console.error(`Error processing pack ${l}:`,v)}if(n.size>0){const l=new tt(b);l.kind=3,l.content=y?.content||"",y?l.tags=[...y.tags]:l.tags=[];for(const v of n)l.tags.push(["p",v]);await l.publish()}return Array.from(n)}catch(d){throw console.error("Error following pack users:",d),d}}var kt=M('<img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community gathering" class="absolute inset-0 w-full h-full object-cover"/>'),yt=M('<div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-700"></div>'),wt=M('<button><div class="relative h-32"><img class="absolute inset-0 w-full h-full object-cover"/> <div style="display: none;"></div> <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div> <div class="absolute bottom-3 left-3 right-3"><div class="flex items-center gap-2 text-foreground"><span class="text-2xl"> </span> <span class="font-semibold"> </span></div> <div class="text-xs text-foreground/80 mt-1"> </div></div></div></button>'),Pt=M('<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><!> <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div> <div class="absolute bottom-12 left-12 right-12 text-foreground"><h1 class="text-5xl font-bold mb-4"> </h1> <p class="text-xl opacity-90"> </p></div></div> <div class="flex-1 flex items-center justify-center p-8 lg:p-12"><div class="max-w-xl w-full"><div class="mb-12 lg:hidden"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-muted-foreground"> </p></div> <div class="lg:mb-8"><h2 class="text-2xl font-semibold mb-3"> </h2> <p class="text-muted-foreground text-sm"> </p></div> <div class="grid grid-cols-2 gap-3 mb-8"></div> <button> </button></div></div></div>');function Ct(b,a){Pe(a,!0);const n=()=>Ie(je,"$t",d),[d,y]=ze(),P=[{id:"venezuela",name:"Venezuela",flag:"üáªüá™",description:"Connect with the resilient Venezuelan community",image:"https://images.unsplash.com/photo-1520525003249-2b9cdda513bc?w=800&q=80",fallbackColor:"from-yellow-500 to-blue-600",leaders:["Mar√≠a Rodr√≠guez","Carlos Mendoza","Ana Lucia"]},{id:"cambodia",name:"Cambodia",flag:"üá∞üá≠",description:"Join voices from the Kingdom of Wonder",image:"https://images.unsplash.com/photo-1569154941061-e231b4725ef1?w=800&q=80",fallbackColor:"from-red-500 to-blue-700",leaders:["Sokha Chen","Dara Vong","Srey Mom"]},{id:"nicaragua",name:"Nicaragua",flag:"üá≥üáÆ",description:"Unite with Nicaraguan changemakers",image:"https://images.unsplash.com/photo-1503542724004-53f16c988e63?w=800&q=80",fallbackColor:"from-blue-500 to-sky-600",leaders:["Roberto Silva","Elena Martinez","Juan Carlos"]},{id:"zimbabwe",name:"Zimbabwe",flag:"üáøüáº",description:"Connect with Zimbabwe's innovators",image:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?w=800&q=80",fallbackColor:"from-green-600 to-yellow-500",leaders:["Tendai Moyo","Grace Ndlovu","David Chuma"]},{id:"afghanistan",name:"Afghanistan",flag:"üá¶üá´",description:"Support Afghan voices of hope",image:"https://images.unsplash.com/photo-1574482620811-1aa16ffe3c82?w=800&q=80",fallbackColor:"from-black to-red-700",leaders:["Ahmad Shah","Fatima Rashidi","Nasir Khan"]},{id:"iran",name:"Iran",flag:"üáÆüá∑",description:"Join the Persian community",image:"https://images.unsplash.com/photo-1608592077365-c6399182e63c?w=800&q=80",fallbackColor:"from-green-600 to-red-600",leaders:["Reza Hosseini","Maryam Azadi","Ali Karimi"]}];let l=pe(!1);var v=Pt(),f=t(v),m=t(f);{var w=k=>{var p=kt();Te("error",p,()=>W(l,!0)),Ye(p),h(k,p)},C=k=>{var p=yt();h(k,p)};Z(m,k=>{r(l)?k(C,!1):k(w)})}var L=o(m,4),B=t(L),H=t(B,!0);e(B);var O=o(B,2),A=t(O,!0);e(O),e(L),e(f);var z=o(f,2),S=t(z),j=t(S),E=t(j),ae=t(E,!0);e(E);var ie=o(E,2),Q=t(ie,!0);e(ie),e(j);var u=o(j,2),x=t(u),T=t(x,!0);e(x);var K=o(x,2),oe=t(K,!0);e(K),e(u);var q=o(u,2);Je(q,21,()=>P,k=>k.id,(k,p)=>{const R=D(()=>a.selectedCommunity===r(p).id);var s=wt();s.__click=()=>a.onSelectCommunity(r(p).id);var _=t(s),c=t(_),I=o(c,2),G=o(I,4),ne=t(G),X=t(ne),$=t(X,!0);e(X);var ee=o(X,2),re=t(ee,!0);e(ee),e(ne);var se=o(ne,2),be=t(se);e(se),e(G),e(_),e(s),Y(ge=>{xe(s,1,`
              relative overflow-hidden rounded-lg border-2 transition-all
              ${r(R)?"border-black dark:border-white shadow-lg scale-[1.02]":"border hover:border dark:hover:border"}
            `),De(c,"src",r(p).image),De(c,"alt",r(p).name),xe(I,1,`absolute inset-0 bg-gradient-to-br ${r(p).fallbackColor}`),i($,r(p).flag),i(re,r(p).name),i(be,`${r(p).leaders.length??""} ${ge??""}`)},[()=>n()("onboarding.step1Community.communityLeaders")]),Te("error",c,ge=>{const ce=ge.currentTarget;ce.style.display="none";const _e=ce.nextElementSibling;_e&&(_e.style.display="block")}),Ye(c),h(k,s)}),e(q);var F=o(q,2);F.__click=function(...k){a.onNext?.apply(this,k)};var te=t(F);e(F),e(S),e(z),e(v),Y((k,p,R,s,_,c,I)=>{i(H,k),i(A,p),i(ae,R),i(Q,s),i(T,_),i(oe,c),F.disabled=!a.selectedCommunity,xe(F,1,`
          w-full py-4 px-6 rounded-lg font-medium transition-all
          ${a.selectedCommunity?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),i(te,`${I??""} ‚Üí`)},[()=>n()("onboarding.step1Community.title"),()=>n()("onboarding.step1Community.subtitle"),()=>n()("onboarding.step1Community.titleMobile"),()=>n()("onboarding.step1Community.subtitleMobile"),()=>n()("onboarding.step1Community.chooseCommunity"),()=>n()("onboarding.step1Community.selectDescription"),()=>n()("onboarding.step1Community.continue")]),h(b,v),Ce(),y()}we(["click"]);const St={venezuela:[Ve[1]],nicaragua:[Ve[2]]},It={venezuela:["naddr1qvzqqqyckypzp75v7yjjc7h7lzaf3gfvpck39mvcjmylz7aleup9mtutd5yrlxv7qythwumn8ghj7un9d3shjtnswf5k6ctv9ehx2ap0qythwumn8ghj7un9d3shjtnwdaehgu3wvfskuep0qqv4qmmv946xjcmp94tx2mn90f6k2mrp945kwart09hsc909n2"]},Nt=ct.FollowPack,Ze={venezuela:{name:"Venezuela",description:"Connect with the Venezuelan community"},cambodia:{name:"Cambodia",description:"Join voices from the Kingdom of Wonder"},nicaragua:{name:"Nicaragua",description:"Unite with Nicaraguan changemakers"},zimbabwe:{name:"Zimbabwe",description:"Connect with Zimbabwe's innovators"},afghanistan:{name:"Afghanistan",description:"Support Afghan voices of hope"},iran:{name:"Iran",description:"Join the Persian community"}};var Dt=M('<button data-follow-pack-compact="" type="button"><!> <div class="flex-1 min-w-0 text-left"><!> <!> <div class="flex items-center gap-3"><!> <div class="flex items-center gap-1.5 text-xs text-muted-foreground"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <!></div></div></div></button>');function zt(b,a){Pe(a,!0);let n=ft(a,"class",3,"");const d=ht(a.ndk);var y=qe(),P=ye(y);Oe(P,()=>Ee.Root,(l,v)=>{v(l,{get ndk(){return d},get followPack(){return a.followPack},get onclick(){return a.onclick},children:(f,m)=>{var w=Dt();w.__click=function(...j){a.onclick?.apply(this,j)};var C=t(w);Oe(C,()=>Ee.Image,(j,E)=>{E(j,{class:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden"})});var L=o(C,2),B=t(L);Oe(B,()=>Ee.Title,(j,E)=>{E(j,{class:"text-sm font-semibold mb-1",lines:1})});var H=o(B,2);Oe(H,()=>Ee.Description,(j,E)=>{E(j,{class:"text-xs text-muted-foreground mb-3",maxLength:80,lines:2})});var O=o(H,2),A=t(O);pt(A,{get ndk(){return d},get pubkeys(){return a.followPack.pubkeys},max:3,size:20});var z=o(A,2),S=o(t(z),2);Oe(S,()=>Ee.MemberCount,(j,E)=>{E(j,{format:"long"})}),e(z),e(O),e(L),e(w),Y(()=>xe(w,1,`group flex items-center gap-4 w-full p-4 rounded-xl bg-card hover:bg-muted transition-colors ${n()??""}`)),h(f,w)},$$slots:{default:!0}})}),h(b,y),Ce()}we(["click"]);var jt=M('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div> <p class="mt-4 text-sm text-muted-foreground"> </p></div>'),Ft=M('<div class="text-center py-8 text-muted-foreground"> </div>'),Ut=M('<div class="absolute top-1/2 right-4 -translate-y-1/2 bg-primary text-foreground rounded-full p-1.5 z-10 pointer-events-none"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Mt=M('<div class="relative"><!> <!></div>'),At=M('<div class="space-y-2 mb-6 lg:mb-8 max-h-[50vh] lg:max-h-[60vh] overflow-y-auto p-2 -m-2"></div>'),Ot=M('<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community leaders" class="absolute inset-0 w-full h-full object-cover"/> <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"></div> <div class="absolute bottom-0 left-0 right-0 p-12"><div class="mb-8"><p class="text-3xl text-foreground/90 italic leading-relaxed"> </p></div> <div class="flex items-center gap-4"><div class="w-12 h-12 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-foreground font-semibold">MR</div> <div class="text-foreground"><div class="font-semibold"> </div> <div class="text-sm opacity-75"> </div></div></div></div></div> <div class="w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-12"><div class="max-w-xl w-full"><div class="mb-6 lg:mb-8"><h1 class="text-2xl lg:text-3xl font-bold mb-2 lg:mb-3"> </h1> <p class="text-sm lg:text-base text-muted-foreground"> </p></div> <!> <button> </button></div></div></div>');function Et(b,a){Pe(a,!0);const n=()=>Ie(je,"$t",d),[d,y]=ze(),P=D(()=>a.selectedCommunity||"venezuela"),l=D(()=>It[r(P)]),v=D(()=>{if(r(l)&&r(l).length>0){const c=r(l).map(I=>vt(I));return he.$subscribe(()=>({filters:c,subId:"followpacks",closeOnEose:!0}))}else{const c=St[r(P)];return!c||c.length===0?(console.warn(`No relay configured for community: ${r(P)}`),null):he.$subscribe(()=>({filters:[{kinds:[Nt]}],subId:"followpacks",closeOnEose:!0,relayUrls:c,exclusiveRelay:!0}))}}),f=D(()=>r(v)?Array.from(r(v).events??[]).map(I=>et.from(I)):[]),m=D(()=>r(v)?.eoseReceived===!1),w=D(()=>Ze[r(P)]||Ze.venezuela);function C(c){const I=c.encode();console.log("[Step2] Pack clicked:",c.title,"packId:",I),a.selectedPacks.includes(I)?(console.log("[Step2] Deselecting pack"),a.onSelectPacks(a.selectedPacks.filter(G=>G!==I))):(console.log("[Step2] Selecting pack"),a.onSelectPacks([...a.selectedPacks,I])),console.log("[Step2] Selected packs count:",a.selectedPacks.length)}function L(){console.log("[Step2] Calling onNext"),a.onNext()}var B=Ot(),H=t(B),O=o(t(H),4),A=t(O),z=t(A),S=t(z);e(z),e(A);var j=o(A,2),E=o(t(j),2),ae=t(E),ie=t(ae,!0);e(ae);var Q=o(ae,2),u=t(Q,!0);e(Q),e(E),e(j),e(O),e(H);var x=o(H,2),T=t(x),K=t(T),oe=t(K),q=t(oe,!0);e(oe);var F=o(oe,2),te=t(F,!0);e(F),e(K);var k=o(K,2);{var p=c=>{var I=jt(),G=o(t(I),2),ne=t(G,!0);e(G),e(I),Y(X=>i(ne,X),[()=>n()("onboarding.step2FollowPacks.loading")]),h(c,I)},R=c=>{var I=qe(),G=ye(I);{var ne=$=>{var ee=Ft(),re=t(ee,!0);e(ee),Y(se=>i(re,se),[()=>n()("onboarding.step2FollowPacks.noPacksAvailable")]),h($,ee)},X=$=>{var ee=At();Je(ee,21,()=>r(f).slice(0,6),re=>re.id,(re,se)=>{const be=D(()=>a.selectedPacks.includes(r(se).encode()));var ge=Mt(),ce=t(ge);{let N=D(()=>r(be)?"ring-2 ring-orange-500 bg-primary-50 dark:bg-primary-950/20":"");zt(ce,{get ndk(){return he},get followPack(){return r(se)},onclick:()=>C(r(se)),get class(){return r(N)}})}var _e=o(ce,2);{var g=N=>{var J=Ut();h(N,J)};Z(_e,N=>{r(be)&&N(g)})}e(ge),h(re,ge)}),e(ee),h($,ee)};Z(G,$=>{r(f).length===0?$(ne):$(X,!1)},!0)}h(c,I)};Z(k,c=>{r(m)?c(p):c(R,!1)})}var s=o(k,2);s.__click=L,xe(s,1,`
          w-full py-3 lg:py-4 px-6 rounded-lg font-medium transition-all text-sm lg:text-base
          bg-primary/80 text-primary-foreground dark:text-foreground hover:bg-primary
          }
        `);var _=t(s);e(s),e(T),e(x),e(B),Y((c,I,G,ne,X,$)=>{i(S,`"${c??""}"`),i(ie,I),i(u,G),i(q,ne),i(te,X),i(_,`${$??""} ‚Üí`)},[()=>n()("onboarding.step2FollowPacks.quote"),()=>n()("onboarding.step2FollowPacks.quoteName"),()=>n()("onboarding.step2FollowPacks.quoteTitle"),()=>n()("onboarding.step2FollowPacks.title"),()=>n()("onboarding.step2FollowPacks.subtitle",{values:{community:r(w).name}}),()=>a.selectedPacks.length>0?n()("onboarding.step2FollowPacks.continue"):n()("onboarding.step2FollowPacks.skip")]),h(b,B),Ce(),y()}we(["click"]);var Tt=M(`<div class="min-h-screen flex items-center justify-center p-8 py-16"><div class="max-w-5xl w-full"><div class="text-center mb-12"><h2 class="text-3xl font-bold mb-3"> </h2> <p class="text-lg text-muted-foreground"> </p></div> <div class="grid md:grid-cols-3 gap-6 mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üõçÔ∏è</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">MR</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Mar√≠a's Bakery</div> <div class="text-xs text-muted-foreground">2km away</div></div></div> <div class="text-sm font-medium mb-1">Fresh Bread & Pastries</div> <div class="text-xs text-muted-foreground mb-2">Daily baked goods, accepting sats</div> <div class="text-sm font-semibold">2,500 sats / dozen</div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">ü§ù</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 border border"><div class="space-y-2"><div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-green-600 dark:text-green-400 font-semibold">BUY</span> <span class="font-medium">100 USD</span></div> <div class="text-right"><div class="font-semibold">485k sats</div></div></div> <div class="flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-red-600 dark:text-red-400 font-semibold">SELL</span> <span class="font-medium">50 USD</span></div> <div class="text-right"><div class="font-semibold">240k sats</div></div></div></div> <div class="flex items-center justify-center gap-1 text-xs text-muted-foreground mt-3"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span> </span></div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üì∞</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">CM</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Carlos Mendoza</div> <div class="text-xs text-muted-foreground">2 hours ago</div></div></div> <div class="text-sm font-medium mb-1">Alternative Supply Chain</div> <div class="text-xs text-muted-foreground mb-2">Direct farmer-to-community network reduces costs by 40%...</div> <div class="flex items-center gap-3 text-xs text-muted-foreground"><span>‚ö° 23.5k</span> <span>üí¨ 156</span> <span>üîÅ 89</span></div></div></div></div> <div class="text-center"><button class="bg-background dark:bg-white text-foreground dark:text-black px-8 py-3 rounded-lg font-medium hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div></div>`);function Rt(b,a){Pe(a,!0);const n=()=>Ie(je,"$t",d),[d,y]=ze();var P=Tt(),l=t(P),v=t(l),f=t(v),m=t(f,!0);e(f);var w=o(f,2),C=t(w,!0);e(w),e(v);var L=o(v,2),B=t(L),H=o(t(B),2),O=t(H,!0);e(H);var A=o(H,2),z=t(A,!0);e(A),Re(2),e(B);var S=o(B,2),j=o(t(S),2),E=t(j,!0);e(j);var ae=o(j,2),ie=t(ae,!0);e(ae);var Q=o(ae,2),u=o(t(Q),2),x=o(t(u),2),T=t(x,!0);e(x),e(u),e(Q),e(S);var K=o(S,2),oe=o(t(K),2),q=t(oe,!0);e(oe);var F=o(oe,2),te=t(F,!0);e(F),Re(2),e(K),e(L);var k=o(L,2),p=t(k);p.__click=function(...s){a.onNext?.apply(this,s)};var R=t(p);e(p),e(k),e(l),e(P),Y((s,_,c,I,G,ne,X,$,ee,re)=>{i(m,s),i(C,_),i(O,c),i(z,I),i(E,G),i(ie,ne),i(T,X),i(q,$),i(te,ee),i(R,`${re??""} ‚Üí`)},[()=>n()("onboarding.step3Features.title"),()=>n()("onboarding.step3Features.subtitle"),()=>n()("onboarding.step3Features.marketplace.title"),()=>n()("onboarding.step3Features.marketplace.description"),()=>n()("onboarding.step3Features.p2p.title"),()=>n()("onboarding.step3Features.p2p.description"),()=>n()("onboarding.step3Features.p2p.reputationBased"),()=>n()("onboarding.step3Features.news.title"),()=>n()("onboarding.step3Features.news.description"),()=>n()("onboarding.step3Features.continue")]),h(b,P),Ce(),y()}we(["click"]);var Lt=M('<img alt="Profile" class="w-full h-full object-cover"/> <div class="absolute inset-0 bg-background/0 hover:bg-background/40 transition-all flex items-center justify-center opacity-0 hover:opacity-100"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),qt=M('<p class="text-xs mt-2 text-muted-foreground"> </p>'),Wt=M('<div class="w-full h-full bg-neutral-100 dark:bg-muted flex flex-col items-center justify-center"><div class="w-12 h-12 border-4 border border-t-neutral-900 dark:border-t-white rounded-full animate-spin"></div> <!></div>'),Bt=M('<span class="text-3xl font-bold group-hover:opacity-50 transition-opacity"> </span> <div class="opacity-0 group-hover:opacity-100 transition-opacity absolute inset-0 flex items-center justify-center bg-background/40"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Kt=Qe('<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-muted-foreground"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>'),Ht=M('<div class="w-full h-full bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100 transition-colors flex flex-col items-center justify-center gap-2 group"><!></div>'),Vt=M('<p class="text-xs text-red-600 dark:text-red-400 mt-2 text-center"> </p>'),Jt=M('<div class="w-full"><input type="file" accept="image/*" class="hidden"/> <div role="button" tabindex="0"><!></div> <!></div>');function Yt(b,a){Pe(a,!0);const n=()=>Ie(je,"$t",d),[d,y]=ze(),P=new ot(a.ndk,a.signer),l=nt(P);let v,f=pe(st(a.currentImageUrl||null)),m=pe(!1);async function w(u){if(!u.type.startsWith("image/")){alert(n()("onboarding.pictureUpload.invalidFile"));return}const x=new FileReader;x.onload=T=>{W(f,T.target?.result,!0)},x.readAsDataURL(u);try{await l.upload(u,{fallbackServer:"https://blossom.primal.net"}),l.result?.url&&a.onUploadComplete(l.result.url)}catch(T){console.error("Upload failed:",T),W(f,null)}}function C(u){const T=u.target.files?.[0];T&&w(T)}function L(u){u.preventDefault(),W(m,!0)}function B(){W(m,!1)}async function H(u){u.preventDefault(),W(m,!1);const x=u.dataTransfer?.files[0];x&&await w(x)}function O(){v?.click()}var A=Jt(),z=t(A);z.__change=C,at(z,u=>v=u,()=>v);var S=o(z,2);S.__click=O,S.__keydown=u=>u.key==="Enter"&&O();var j=t(S);{var E=u=>{var x=Lt(),T=ye(x);Re(2),Y(()=>De(T,"src",r(f))),h(u,x)},ae=u=>{var x=qe(),T=ye(x);{var K=q=>{var F=Wt(),te=o(t(F),2);{var k=p=>{var R=qt(),s=t(R);e(R),Y(()=>i(s,`${l.progress.percentage??""}%`)),h(p,R)};Z(te,p=>{l.progress&&p(k)})}e(F),h(q,F)},oe=q=>{var F=Ht(),te=t(F);{var k=R=>{var s=Bt(),_=ye(s),c=t(_,!0);e(_),Re(2),Y(()=>i(c,a.fallbackInitials)),h(R,s)},p=R=>{var s=Kt();h(R,s)};Z(te,R=>{a.fallbackInitials?R(k):R(p,!1)})}e(F),h(q,F)};Z(T,q=>{l.status==="uploading"?q(K):q(oe,!1)},!0)}h(u,x)};Z(j,u=>{r(f)&&l.status!=="uploading"?u(E):u(ae,!1)})}e(S);var ie=o(S,2);{var Q=u=>{var x=Vt(),T=t(x,!0);e(x),Y(K=>i(T,K),[()=>l.error?.message||n()("onboarding.pictureUpload.uploadFailed")]),h(u,x)};Z(ie,u=>{l.status==="error"&&u(Q)})}e(A),Y(()=>xe(S,1,`
      relative w-32 h-32 rounded-full overflow-hidden cursor-pointer
      border-4 border-background
      transition-all duration-200
      ${r(m)?"scale-105 border-foreground":""}
      ${l.status==="uploading"?"pointer-events-none":""}
    `)),Te("dragover",S,L),Te("dragleave",S,B),Te("drop",S,H),h(b,A),Ce(),y()}we(["change","click","keydown"]);function Gt(b){try{return new URL(b).hostname}catch{return""}}async function Zt(b,a){if(!b||!a)return{available:!1,error:"Username and domain are required"};if(!/^[a-z0-9_-]+$/i.test(b))return{available:!1,error:"Username can only contain letters, numbers, underscore, and hyphen"};try{const d=`${a.includes("localhost")||a.includes("test")?"http":"https"}://${a}/.well-known/nostr.json?name=${encodeURIComponent(b)}`,y=await fetch(d);if(y.status===404)return{available:!0};if(y.ok){const P=await y.json();return P.names&&P.names[b]?{available:!1,error:"Username is already taken"}:{available:!0}}return{available:!1,error:"Unable to check availability. Please try again."}}catch(n){return console.error("Error checking NIP-05 availability:",n),{available:!0}}}function Qt(b,a){return`${b}@${a}`}var Xt=M('<div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),$t=Qe('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>'),er=M('<div class="px-2 py-1 bg-red-500/10 border-t border-red-500/20"><p class="text-xs text-red-600 dark:text-red-400"> </p></div>'),tr=M("<div> </div>"),rr=M('<div class="space-y-1"><div class="text-xs text-muted-foreground font-medium"> </div> <div class="flex items-center gap-1"><input type="text" class="text-sm text-foreground bg-transparent border-b-2 border hover:border focus:border-primary dark:focus:border-primary outline-none transition-colors flex-1 min-w-0"/> <span class="text-sm text-muted-foreground"> </span></div> <!></div>'),ar=M('<div class="min-h-screen flex flex-col items-center justify-center p-8"><div class="text-center mb-8 max-w-2xl"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-lg text-muted-foreground"> </p></div> <div class="relative flex items-center justify-center gap-6 mb-12"><div class="w-80 bg-card border border rounded-xl overflow-hidden transform -rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OQwX.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OQwW.jpg" alt="Leopoldo L√≥pez" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Leopoldo L√≥pez</h3> <p class="text-sm text-muted-foreground mb-2">‚úì leo@primal.net</p> <p class="text-sm text-muted-foreground">Former Mayor of Caracas (2000-08). Political prisoner 2014-21. Co-founder of World Liberty Congress.</p></div></div></div> <div class="w-96 bg-card border-2 border-foreground rounded-xl overflow-hidden shadow-2xl transform scale-105 z-10"><input type="file" accept="image/*" class="hidden"/> <button type="button" class="h-36 relative w-full group bg-gradient-to-br from-primary-500 to-primary-600"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button> <!> <div class="relative -mt-14 px-6 pb-6"><!> <div class="space-y-3"><div><input type="text" class="text-2xl font-bold bg-transparent border-b-2 border-transparent hover:border !ring-0 outline-none transition-colors w-full text-foreground"/></div> <div><textarea class="text-sm text-muted-foreground bg-transparent border border-transparent hover:border !ring-0 outline-none transition-colors w-full resize-none rounded p-2"></textarea></div> <!></div></div></div> <div class="w-80 bg-card border border rounded-xl overflow-hidden transform rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OTue.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OTkq.jpg" alt="Enderson Sequera" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Enderson Sequera</h3> <p class="text-sm text-muted-foreground mb-2">üáªüá™ Political Scientist</p> <p class="text-sm text-muted-foreground">Political advisor & freedom fighter. Bitcoin is freedom - in the fight against dictatorship it saves lives.</p></div></div></div></div> <button> </button></div>');function or(b,a){Pe(a,!0);const n=()=>Ie(je,"$t",d),[d,y]=ze(),P=D(()=>a.inviteRelay&&rt(a.inviteRelay)),l=D(()=>a.inviteRelay?Gt(a.inviteRelay):"");let v=pe(""),f=pe(!1),m=pe(null),w=pe(!1),C=null;function L(g){if(W(v,g,!0),!g||!r(l)){W(m,null),W(w,!1);return}C&&clearTimeout(C),W(f,!0),W(m,{type:"info",text:n()("onboarding.step4Profile.availability.checking")},!0),C=setTimeout(async()=>{const N=await Zt(g,r(l));N.available?(W(m,{type:"success",text:n()("onboarding.step4Profile.availability.available")},!0),W(w,!0)):(W(m,{type:"error",text:N.error||n()("onboarding.step4Profile.availability.notAvailable")},!0),W(w,!1)),W(f,!1)},500)}const B=D(()=>he.$currentUser),H=D(()=>r(B)?new ot(he,a.signer):null),O=D(()=>r(H)?nt(r(H)):null);let A,z=pe(null);async function S(g){const J=g.target.files?.[0];if(J){if(!r(O)){W(z,n()("onboarding.step4Profile.upload.notAvailable"),!0);return}if(!J.type.startsWith("image/")){W(z,n()("onboarding.step4Profile.upload.invalidFile"),!0);return}if(J.size>5*1024*1024){W(z,n()("onboarding.step4Profile.upload.sizeTooLarge"),!0);return}W(z,null);try{await r(O).upload(J,{fallbackServer:"https://blossom.primal.net"}),r(O).result?.url&&a.onUpdateProfile({...a.profileData,banner:r(O).result.url})}catch(me){console.error("Upload failed:",me),W(z,n()("onboarding.step4Profile.upload.failed"),!0)}}}function j(g){return g?g.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?"}function E(g,N){a.onUpdateProfile({...a.profileData,[g]:N})}async function ae(){if(r(w)&&r(v)&&r(l)){const g=Qt(r(v),r(l));a.onUpdateProfile({...a.profileData,nip05:g})}a.onNext()}function ie(g){a.onUpdateProfile({...a.profileData,picture:g})}var Q=ar(),u=t(Q),x=t(u),T=t(x,!0);e(x);var K=o(x,2),oe=t(K,!0);e(K),e(u);var q=o(u,2),F=o(t(q),2),te=t(F);te.__change=S,at(te,g=>A=g,()=>A);var k=o(te,2);k.__click=()=>A?.click();var p=t(k),R=t(p);{var s=g=>{var N=Xt(),J=o(ye(N),2),me=t(J);e(J),Y(()=>i(me,`${r(O).progress?.percentage??""}%`)),h(g,N)},_=g=>{var N=$t();h(g,N)};Z(R,g=>{r(O)?.status==="uploading"?g(s):g(_,!1)})}e(p),e(k);var c=o(k,2);{var I=g=>{var N=er(),J=t(N),me=t(J,!0);e(J),e(N),Y(()=>i(me,r(z))),h(g,N)};Z(c,g=>{r(z)&&g(I)})}var G=o(c,2),ne=t(G);{let g=D(()=>j(a.profileData.name));Yt(ne,{get ndk(){return he},get signer(){return a.signer},onUploadComplete:ie,get currentImageUrl(){return a.profileData.picture},get fallbackInitials(){return r(g)}})}var X=o(ne,2),$=t(X),ee=t($);Ge(ee),ee.__input=g=>E("name",g.currentTarget.value),e($);var re=o($,2),se=t(re);lt(se),se.__input=g=>E("bio",g.currentTarget.value),De(se,"rows",3),e(re);var be=o(re,2);{var ge=g=>{var N=rr(),J=t(N),me=t(J,!0);e(J);var fe=o(J,2),Ne=t(fe);Ge(Ne),Ne.__input=le=>L(le.currentTarget.value);var U=o(Ne,2),V=t(U);e(U),e(fe);var ve=o(fe,2);{var ue=le=>{var ke=tr(),Fe=t(ke,!0);e(ke),Y(()=>{xe(ke,1,`text-xs ${r(m).type==="success"?"text-green-600 dark:text-green-400":r(m).type==="error"?"text-red-600 dark:text-red-400":"text-muted-foreground"}`),i(Fe,r(m).text)}),h(le,ke)};Z(ve,le=>{r(m)&&le(ue)})}e(N),Y((le,ke)=>{i(me,le),He(Ne,r(v)),De(Ne,"placeholder",ke),i(V,`@${r(l)??""}`)},[()=>n()("onboarding.step4Profile.usernameLabel"),()=>n()("onboarding.step4Profile.usernamePlaceholder")]),h(g,N)};Z(be,g=>{r(P)&&g(ge)})}e(X),e(G),e(F),Re(2),e(q);var ce=o(q,2);ce.__click=ae;var _e=t(ce);e(ce),e(Q),Y((g,N,J,me,fe)=>{i(T,g),i(oe,N),k.disabled=r(O)?.status==="uploading",$e(k,a.profileData.banner?`background-image: url(${a.profileData.banner}); background-size: cover; background-position: center;`:""),He(ee,a.profileData.name),De(ee,"placeholder",J),He(se,a.profileData.bio),De(se,"placeholder",me),ce.disabled=!a.profileData.name,xe(ce,1,`
      px-8 py-3 rounded-lg font-medium transition-all
      ${a.profileData.name?"bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100":"bg-neutral-100 dark:bg-muted text-muted-foreground cursor-not-allowed"}
    `),i(_e,`${fe??""} ‚Üí`)},[()=>n()("onboarding.step4Profile.title"),()=>n()("onboarding.step4Profile.subtitle"),()=>n()("onboarding.step4Profile.namePlaceholder"),()=>n()("onboarding.step4Profile.bioPlaceholder"),()=>n()("onboarding.step4Profile.continue")]),h(b,Q),Ce(),y()}we(["change","click","input"]);function nr(b,a){const n=a&&rt(a)?[a]:[...Ve],d=Math.floor(Date.now()/1e3)-720*60,y=b.$fetchEvents(()=>({filters:{kinds:[1],"#t":["introduction"],since:d},relayUrls:n})),P=D(()=>y?Array.from(y).map(f=>f.id):[]),l=b.$fetchEvents(()=>r(P).length>0?{filters:{"#e":r(P)},relayUrls:n}:void 0),v=D(()=>{if(!y||y.length===0)return[];const f=new Map;if(l)for(const m of l){const w=m.tags.filter(C=>C[0]==="e");for(const C of w){const L=C[1];r(P).includes(L)&&f.set(L,(f.get(L)||0)+1)}}return Array.from(y).map(m=>({event:m,engagementCount:f.get(m.id)||0})).sort((m,w)=>w.engagementCount-m.engagementCount).slice(0,10)});return{introductionPosts:r(v)}}const Le={en:"introduction",es:"bienvenidas",fa:"ŸÖÿπÿ±ŸÅ€å",km:"·ûÄ·û∂·ûö·ûé·üÇ·ûì·û∂·üÜ",sn:"kuzivisa"};function ir(b){if(!b)return Le.en;const a=b.split("-")[0];return Le[a]||Le.en}function sr(b){const a=ir(b);return a===Le.en?["introduction"]:["introduction",a]}var lr=M('<svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg> <span class="text-muted-foreground"> </span>',1),dr=M('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg> <span class="text-muted-foreground"> </span>',1),cr=M('<div class="mt-4 p-3 bg-primary-50 dark:bg-primary-900/10 border border-primary-200 dark:border-primary-800 rounded-lg"><div class="flex items-center justify-between"><div class="flex items-center gap-2 text-sm"><!></div> <button class="text-xs px-2 py-1 rounded hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-colors text-primary dark:text-primary font-medium"> </button></div></div>'),vr=M('<div class="text-center py-8 text-muted-foreground"><p> </p></div>'),ur=M('<div class="min-h-screen flex flex-col"><div class="flex-1 px-4 lg:px-8 py-6 max-w-[1400px] mx-auto w-full pb-32 lg:pb-6"><div class="text-center mb-6"><h1 class="text-2xl lg:text-3xl font-bold mb-2"> </h1> <p class="text-muted-foreground"> </p></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:h-[calc(100vh-200px)]"><div class="flex flex-col order-1 lg:order-2"><div class="lg:p-6"><label class="block font-semibold mb-3"> </label> <div class="p-4 bg-card border border rounded-lg"><!></div> <div class="flex items-center justify-between mt-3"><div class="text-xs text-muted-foreground"><!></div> <div class="text-xs"><span> </span></div></div> <!> <div class="hidden lg:flex gap-3 mt-6"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div> <div class="flex flex-col order-2 lg:order-1"><h3 class="font-semibold text-sm text-muted-foreground uppercase tracking-wide mb-4"> </h3> <div class="space-y-3 overflow-y-auto flex-1 pr-2 max-h-[400px] lg:max-h-none"><!></div></div></div></div> <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-card border-t border p-4 z-50"><div class="flex gap-3 max-w-[1400px] mx-auto"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div>');function gr(b,a){Pe(a,!0);const n=()=>Ie(mt,"$locale",y),d=()=>Ie(je,"$t",y),[y,P]=ze();let l=pe(""),v=pe(!1),f=pe(!!a.inviterPubkey);const m=D(()=>r(l).length>10),w=D(()=>r(l).length);let C=pe(null);Xe(()=>{if(!a.inviterPubkey){W(C,null);return}he.fetchUser(a.inviterPubkey).then(U=>{U?.fetchProfile().then(V=>{W(C,V,!0)})})});const L=D(()=>r(C)?.displayName||r(C)?.name||"your inviter"),{introductionPosts:B}=nr(he,a.inviteRelay);async function H(){if(r(m)){W(v,!0);try{const U=sr(n());let V=r(l).trim();for(const ue of U){const le=`#${ue}`;V.includes(le)||(V=`${V} ${le}`)}const ve={content:V,hashtags:U,mentionInviter:r(f)&&a.inviterPubkey?a.inviterPubkey:void 0};de.setIntroductionText(JSON.stringify(ve)),a.onNext()}catch(U){console.error("Error saving introduction:",U),W(v,!1)}}}var O=ur(),A=t(O),z=t(A),S=t(z),j=t(S,!0);e(S);var E=o(S,2),ae=t(E,!0);e(E),e(z);var ie=o(z,2),Q=t(ie),u=t(Q),x=t(u),T=t(x,!0);e(x);var K=o(x,2),oe=t(K);{let U=D(()=>d()("onboarding.step5Introduction.placeholder"));bt(oe,{get placeholder(){return r(U)},get disabled(){return r(v)},get value(){return r(l)},set value(V){W(l,V,!0)}})}e(K);var q=o(K,2),F=t(q),te=t(F);{var k=U=>{var V=it();Y(ve=>i(V,ve),[()=>d()("onboarding.step5Introduction.tipLocation",{values:{location:a.profileData.location}})]),h(U,V)};Z(te,U=>{a.profileData.location&&U(k)})}e(F);var p=o(F,2),R=t(p),s=t(R);e(R),e(p),e(q);var _=o(q,2);{var c=U=>{var V=cr(),ve=t(V),ue=t(ve),le=t(ue);{var ke=Se=>{var Me=lr(),Ae=o(ye(Me),2),Be=t(Ae,!0);e(Ae),Y(Ke=>i(Be,Ke),[()=>d()("onboarding.step5Introduction.inviterNotify",{values:{name:r(L)}})]),h(Se,Me)},Fe=Se=>{var Me=dr(),Ae=o(ye(Me),2),Be=t(Ae,!0);e(Ae),Y(Ke=>i(Be,Ke),[()=>d()("onboarding.step5Introduction.inviterNoNotify",{values:{name:r(L)}})]),h(Se,Me)};Z(le,Se=>{r(f)?Se(ke):Se(Fe,!1)})}e(ue);var Ue=o(ue,2);Ue.__click=()=>W(f,!r(f));var We=t(Ue,!0);e(Ue),e(ve),e(V),Y(Se=>i(We,Se),[()=>r(f)?d()("onboarding.step5Introduction.inviterRemove"):d()("onboarding.step5Introduction.inviterAddBack")]),h(U,V)};Z(_,U=>{a.inviterPubkey&&U(c)})}var I=o(_,2),G=t(I);G.__click=function(...U){a.onSkip?.apply(this,U)};var ne=t(G,!0);e(G);var X=o(G,2);X.__click=H;var $=t(X,!0);e(X),e(I),e(u),e(Q);var ee=o(Q,2),re=t(ee),se=t(re,!0);e(re);var be=o(re,2),ge=t(be);{var ce=U=>{var V=qe(),ve=ye(V);Je(ve,17,()=>B,ue=>ue.event.id,(ue,le)=>{xt(ue,{get event(){return r(le).event}})}),h(U,V)},_e=U=>{var V=vr(),ve=t(V),ue=t(ve,!0);e(ve),e(V),Y(le=>i(ue,le),[()=>d()("onboarding.step5Introduction.loadingIntroductions")]),h(U,V)};Z(ge,U=>{B.length>0?U(ce):U(_e,!1)})}e(be),e(ee),e(ie),e(A);var g=o(A,2),N=t(g),J=t(N);J.__click=function(...U){a.onSkip?.apply(this,U)};var me=t(J,!0);e(J);var fe=o(J,2);fe.__click=H;var Ne=t(fe,!0);e(fe),e(N),e(g),e(O),Y((U,V,ve,ue,le,ke,Fe,Ue,We)=>{i(j,U),i(ae,V),i(T,ve),xe(R,1,dt(r(w)>500?"text-red-500":"text-muted-foreground")),i(s,`${r(w)??""} ${ue??""}`),i(ne,le),X.disabled=!r(m)||r(v),xe(X,1,`
                flex-1 py-3 px-6 rounded-lg font-medium transition-all
                ${r(m)&&!r(v)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
              `),i($,ke),i(se,Fe),i(me,Ue),fe.disabled=!r(m)||r(v),xe(fe,1,`
          flex-1 py-3 px-6 rounded-lg font-medium transition-all
          ${r(m)&&!r(v)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),i(Ne,We)},[()=>d()("onboarding.step5Introduction.title"),()=>d()("onboarding.step5Introduction.subtitle"),()=>d()("onboarding.step5Introduction.writeLabel"),()=>d()("onboarding.step5Introduction.characters"),()=>d()("onboarding.step5Introduction.skipForNow"),()=>r(v)?d()("onboarding.step5Introduction.publishing"):d()("onboarding.step5Introduction.postIntroduction"),()=>d()("onboarding.step5Introduction.recentIntroductions"),()=>d()("onboarding.step5Introduction.skipForNow"),()=>r(v)?d()("onboarding.step5Introduction.publishing"):d()("onboarding.step5Introduction.postIntroduction")]),h(b,O),Ce(),P()}we(["click"]);var mr=M('<div class="min-h-screen flex items-center justify-center p-8"><div class="max-w-2xl w-full text-center"><div class="text-7xl mb-6">üéâ</div> <h1 class="text-4xl font-bold mb-4"> </h1> <p class="text-xl text-muted-foreground mb-12"> </p> <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground"> </div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground"> </div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1">1</div> <div class="text-sm text-muted-foreground"> </div></div></div> <div class="bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-900 dark:to-neutral-800 rounded-xl p-8 mb-8 text-left max-w-lg mx-auto"><h3 class="font-semibold mb-4"> </h3> <ul class="space-y-3 text-sm"><li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li></ul></div> <button class="bg-background dark:bg-white text-foreground dark:text-black px-12 py-4 rounded-lg font-medium text-lg hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div>');function fr(b,a){Pe(a,!0);const n=()=>Ie(je,"$t",d),[d,y]=ze(),P=D(()=>a.selectedPacks.length*25);var l=mr(),v=t(l),f=o(t(v),2),m=t(f,!0);e(f);var w=o(f,2),C=t(w,!0);e(w);var L=o(w,2),B=t(L),H=t(B),O=t(H,!0);e(H);var A=o(H,2),z=t(A,!0);e(A),e(B);var S=o(B,2),j=t(S),E=t(j,!0);e(j);var ae=o(j,2),ie=t(ae,!0);e(ae),e(S);var Q=o(S,2),u=o(t(Q),2),x=t(u,!0);e(u),e(Q),e(L);var T=o(L,2),K=t(T),oe=t(K,!0);e(K);var q=o(K,2),F=t(q),te=o(t(F),2),k=t(te,!0);e(te),e(F);var p=o(F,2),R=o(t(p),2),s=t(R,!0);e(R),e(p);var _=o(p,2),c=o(t(_),2),I=t(c,!0);e(c),e(_);var G=o(_,2),ne=o(t(G),2),X=t(ne,!0);e(ne),e(G),e(q),e(T);var $=o(T,2);$.__click=function(...re){a.onComplete?.apply(this,re)};var ee=t($);e($),e(v),e(l),Y((re,se,be,ge,ce,_e,g,N,J,me,fe)=>{i(m,re),i(C,se),i(O,r(P)),i(z,be),i(E,a.selectedPacks.length),i(ie,ge),i(x,ce),i(oe,_e),i(k,g),i(s,N),i(I,J),i(X,me),i(ee,`${fe??""} ‚Üí`)},[()=>n()("onboarding.step8Welcome.title",{values:{name:a.profileData.name||n()("onboarding.step8Welcome.friend")}}),()=>n()("onboarding.step8Welcome.subtitle"),()=>n()("onboarding.step8Welcome.stats.peopleFollowing"),()=>n()("onboarding.step8Welcome.stats.followPacks"),()=>n()("onboarding.step8Welcome.stats.postPublished"),()=>n()("onboarding.step8Welcome.whatsNext.title"),()=>n()("onboarding.step8Welcome.whatsNext.feedReady",{values:{count:r(P)}}),()=>n()("onboarding.step8Welcome.whatsNext.marketplace"),()=>n()("onboarding.step8Welcome.whatsNext.p2pTrades"),()=>n()("onboarding.step8Welcome.whatsNext.earnSats"),()=>n()("onboarding.step8Welcome.enterAgora")]),h(b,l),Ce(),y()}we(["click"]);var pr=M('<button class="fixed top-6 left-6 z-50 w-9 h-9 bg-card border border rounded-full flex items-center justify-center hover:bg-accent transition-colors"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button>'),br=M('<div class="min-h-screen bg-card"><div class="fixed top-0 left-0 right-0 z-40 bg-card"><div class="h-1 bg-neutral-200 dark:bg-muted"><div class="h-full bg-background dark:bg-white transition-all duration-300 ease-out"></div></div></div> <!> <div class="relative pt-8"><!> <!> <!> <!> <!> <!></div></div>');function Or(b,a){Pe(a,!0);let n=pe(null);const d=D(()=>de.currentStep),y=D(()=>de.totalSteps),P=D(()=>r(d)/r(y)*100),l=D(()=>de.invite),v=D(()=>de.hasCompletedInviteSetup),f=D(()=>de.selectedCommunity),m=D(()=>de.selectedPacks),w=D(()=>de.profileData);Xe(()=>{r(n)||(W(n,ut.generate(),!0),console.log("[Onboarding] ‚úì Generated new keypair, pubkey:",r(n).pubkey))});function C(s){de.setStep(s),typeof window<"u"&&window.scrollTo(0,0)}function L(){r(d)>de.minStep&&C(r(d)-1)}async function B(){C(3)}async function H(){C(5)}async function O(){if(!r(n)){console.error("[Onboarding] ‚úó No signer available");return}try{console.log("[Onboarding] Starting onboarding completion..."),console.log("[Onboarding] Logging in..."),await he.$sessions?.login(r(n)),console.log("[Onboarding] ‚úì Logged in with pubkey:",r(n).pubkey),r(l)&&!r(v)?(console.log("[Onboarding] Invite flow: completing invite setup"),await de.completeInviteSetup(r(n))):(console.log("[Onboarding] Regular flow: publishing profile and setup"),await de.publishProfileAndSetup(r(n))),r(m).length>0&&(console.log("[Onboarding] Publishing kind:3 from",r(m).length,"packs"),await _t(he,r(m)));const s=de.introductionText;if(s){console.log("[Onboarding] Publishing introduction post");try{const _=JSON.parse(s),c=new tt(he);c.kind=1,c.content=_.content,c.tags=_.hashtags.map(I=>["t",I]),_.mentionInviter&&c.tags.push(["p",_.mentionInviter]),await c.publish(),console.log("[Onboarding] ‚úì Published introduction")}catch(_){console.error("[Onboarding] ‚úó Error publishing introduction:",_)}}console.log("[Onboarding] ‚úì Onboarding complete"),de.clear(),gt("/")}catch(s){console.error("[Onboarding] ‚úó Error during onboarding completion:",s)}}var A=br(),z=t(A),S=t(z),j=t(S);e(S),e(z);var E=o(z,2);{var ae=s=>{var _=pr();_.__click=L,h(s,_)};Z(E,s=>{r(d)>(r(l)?3:1)&&s(ae)})}var ie=o(E,2),Q=t(ie);{var u=s=>{Ct(s,{get selectedCommunity(){return r(f)},onSelectCommunity:_=>de.setSelectedCommunity(_),onNext:()=>C(2)})};Z(Q,s=>{r(d)===1&&!r(l)&&s(u)})}var x=o(Q,2);{var T=s=>{Et(s,{get selectedCommunity(){return r(f)},get selectedPacks(){return r(m)},onSelectPacks:_=>de.setSelectedPacks(_),onNext:B})};Z(x,s=>{r(d)===2&&!r(l)&&s(T)})}var K=o(x,2);{var oe=s=>{Rt(s,{onNext:()=>C(4)})};Z(K,s=>{r(d)===3&&s(oe)})}var q=o(K,2);{var F=s=>{{let _=D(()=>r(l)?.inviteRelay);or(s,{get profileData(){return r(w)},onUpdateProfile:c=>de.setProfileData(c),onNext:H,get inviteRelay(){return r(_)},get signer(){return r(n)}})}};Z(q,s=>{r(d)===4&&s(F)})}var te=o(q,2);{var k=s=>{{let _=D(()=>r(l)?.inviter),c=D(()=>r(l)?.inviteRelay);gr(s,{get profileData(){return r(w)},get inviterPubkey(){return r(_)},get inviteRelay(){return r(c)},onNext:()=>C(6),onSkip:()=>C(6)})}};Z(te,s=>{r(d)===5&&s(k)})}var p=o(te,2);{var R=s=>{fr(s,{get selectedPacks(){return r(m)},get profileData(){return r(w)},onComplete:O})};Z(p,s=>{r(d)===6&&s(R)})}e(ie),e(A),Y(()=>$e(j,`width: ${r(P)}%`)),h(b,A),Ce()}we(["click"]);export{Or as component};
