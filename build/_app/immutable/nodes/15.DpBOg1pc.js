import{d as Je,c as Re,a as s,f,s as C,j as me,i as Kt,t as ct}from"../chunks/CiPFrJr-.js";import{p as Fe,f as X,c as He,e as a,u as N,g as e,r,d as o,t as O,$ as Wt,s as y,b as ye,y as Ce,x as Gt,a as Ut,z as Yt}from"../chunks/CSbKtK4P.js";import{i as U,s as vt,a as rt,p as at,b as Oe}from"../chunks/87vUJtvC.js";import{n as z,e as Ge,f as ot,h as Qe,g as pt,S as Qt,r as Te,m as Jt,o as Xt,A as Zt,N as Pt,d as Ee,j as qt}from"../chunks/D0X4VYcq.js";import{p as er}from"../chunks/fk9xBW3Y.js";import{g as tr,N as Mt}from"../chunks/Cybom7lU.js";import{F as rr}from"../chunks/DKw2pikm.js";import{t as We}from"../chunks/B0fEDaa-.js";import{$ as ft}from"../chunks/Ce4T6J7V.js";import{c as Ke,L as Ye}from"../chunks/BZ_HYA_A.js";import{K as ar}from"../chunks/5sINTuNg.js";import{Q as or}from"../chunks/BFdlQWLJ.js";import{D as St,a as zt,B as De,b as Nt}from"../chunks/DFMKmhYe.js";import{D as Bt}from"../chunks/C8b5RDJU.js";import{M as sr}from"../chunks/BVXFxIlg.js";import{A as nr}from"../chunks/BFBlLZUW.js";import{H as ir}from"../chunks/D_SIBIBl.js";import{g as $t}from"../chunks/CTwadDAE.js";import{g as lr}from"../chunks/B-JzvGpb.js";import{g as dr}from"../chunks/DeBk5QYO.js";import{C as ur}from"../chunks/CWwZauO4.js";import{b as Ve}from"../chunks/DphWBL27.js";import{b as Ct}from"../chunks/I2MJeYPS.js";import{c as jt,N as cr}from"../chunks/B_cmhmk_.js";import{D as vr}from"../chunks/Do6nhxsB.js";import{l as Lt}from"../chunks/Bk0a0VIz.js";async function pr(w,t,m,n,x){if(t?.pubkey)try{let d=m.events[0];if(d||(d=z.createEvent({kind:1e4,content:"",tags:[]})),e(n)?(d.tags=d.tags.filter(k=>!(k[0]==="p"&&k[1]===x.pubkey)),We.success("User unmuted")):(d.tags.push(["p",x.pubkey]),We.success("User muted")),await d.sign(),await d.publishReplaceable(),d.publishStatus==="error"){const P=d.publishError?.relayErrors||{},p=Object.entries(P).map(([u,B])=>`${u}: ${B}`).join(`
`);We.error(`Failed to publish:
${p||"Unknown error"}`);return}x.onClose()}catch(d){console.error("Failed to toggle mute:",d),We.error(`Failed to ${e(n)?"unmute":"mute"} user: ${d instanceof Error?d.message:"Unknown error"}`)}}function fr(w,t){t.onClose(),t.onOpenCreatePack()}var gr=me('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>'),mr=me('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>'),hr=(w,t,m)=>t(e(m).id),br=me('<svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),_r=f('<button class="w-full px-4 py-2.5 text-left text-sm text-muted-foreground hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between gap-2"><span class="truncate"> </span> <!></button>'),xr=f('<div class="border-t border-border mt-1 pt-1"><div class="px-4 py-2 text-xs text-muted-foreground font-medium"> </div> <!></div>'),kr=f('<div class="absolute right-0 mt-2 w-64 bg-popover border border-border rounded-lg shadow-xl overflow-hidden z-50"><div class="py-1"><button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button> <div class="border-t border-border my-1"></div> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> </button> <!></div></div>');function yr(w,t){Fe(t,!0);const m=()=>rt(ft,"$t",n),[n,x]=vt(),d=z.$currentUser,k=Ke(z,()=>d?.pubkey?{filters:[{kinds:[39089,39092],authors:[d.pubkey],limit:100}]}:void 0,{initialLimit:100,pageSize:100}),P=z.$subscribe(()=>d?.pubkey?{filters:[{kinds:[1e4],authors:[d.pubkey],limit:1}],bufferMs:100}:void 0),p=N(()=>k.events.map(h=>({id:h.id||"",title:h.tagValue("title")||"Untitled Pack",pubkeys:h.tags.filter(b=>b[0]==="p").map(b=>b[1])}))),u=N(()=>{const h=P.events[0];return h?h.tags.some(b=>b[0]==="p"&&b[1]===t.pubkey):!1});async function B(h){if(!t.pubkey)return;const b=k.events.find($=>$.id===h);if(b)try{if(b.tags.filter(F=>F[0]==="p").map(F=>F[1]).includes(t.pubkey))return;if(b.tags.push(["p",t.pubkey]),await b.sign(),await b.publishReplaceable(),b.publishStatus==="error"){const Y=b.publishError?.relayErrors||{},ae=Object.entries(Y).map(([S,L])=>`${S}: ${L}`).join(`
`);We.error(`Failed to publish:
${ae||"Unknown error"}`);return}We.success("Added to pack"),t.onClose()}catch($){console.error("Failed to add to pack:",$),We.error(`Failed to add to pack: ${$ instanceof Error?$.message:"Unknown error"}`)}}var g=Re(),c=X(g);{var I=h=>{var b=kr(),$=a(b),F=a($);F.__click=[pr,d,P,u,t];var Y=a(F),ae=a(Y);{var S=T=>{var K=gr();s(T,K)},L=T=>{var K=mr();s(T,K)};U(ae,T=>{e(u)?T(S):T(L,!1)})}r(Y);var H=o(Y);r(F);var D=o(F,4);D.__click=[fr,t];var he=o(a(D));r(D);var ce=o(D,2);{var be=T=>{var K=xr(),_e=a(K),le=a(_e,!0);r(_e);var je=o(_e,2);Ge(je,17,()=>e(p),de=>de.id,(de,xe)=>{const ve=N(()=>e(xe).pubkeys.includes(t.pubkey));var oe=_r();oe.__click=[hr,B,xe];var pe=a(oe),Le=a(pe,!0);r(pe);var se=o(pe,2);{var Z=W=>{var fe=br();s(W,fe)};U(se,W=>{e(ve)&&W(Z)})}r(oe),O(()=>{oe.disabled=e(ve),C(Le,e(xe).title)}),s(de,oe)}),r(K),O(de=>C(le,de),[()=>m()("followPacks.addToExisting")]),s(T,K)};U(ce,T=>{e(p).length>0&&T(be)})}r($),r(b),O((T,K)=>{C(H,` ${T??""}`),C(he,` ${K??""}`)},[()=>e(u)?m()("userDropdown.unmute"):m()("userDropdown.mute"),()=>m()("followPacks.createNew")]),s(h,b)};U(c,h=>{t.isOpen&&h(I)})}s(w,g),He(),x()}Je(["click"]);var wr=f('<a class="inline-flex items-center gap-2.5 px-3 py-2 rounded-lg bg-card border border-border hover:bg-muted/50 transition-colors text-sm group"><div class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <!></div> <span class="text-gray-400 group-hover:text-gray-300 transition-colors">Invited by <span class="font-medium text-gray-200"> </span></span></a>');function Pr(w,t){Fe(t,!0);const m=z.$subscribe(()=>t.pubkey?{filters:[{kinds:[ar],authors:[t.pubkey],limit:1}],bufferMs:100}:void 0),n=N(()=>m.events[0]),x=N(()=>{if(e(n))return e(n).tags.find(B=>B[0]==="p")?.[1]}),d=z.$fetchUser(()=>e(x)),k=z.$fetchProfile(()=>e(x));var P=Re(),p=X(P);{var u=B=>{var g=wr(),c=a(g),I=o(a(c),2);ot(I,{get ndk(){return z},get pubkey(){return e(x)},size:"xs",class:"w-6 h-6 rounded-full"}),r(c);var h=o(c,2),b=o(a(h)),$=a(b,!0);r(b),r(h),r(g),O(()=>{Qe(g,"href",`/p/${d.npub}`),C($,k?.name||k?.displayName||"Anonymous")}),s(B,g)};U(p,B=>{e(x)&&d.ready&&B(u)})}s(w,P),He()}var Mr=f('<img alt="Banner" class="w-full h-full object-cover"/>'),Cr=f('<button class="p-1 text-muted-foreground hover:text-muted-foreground transition-colors" aria-label="Share profile"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg></button>'),jr=f('<button class="px-4 py-2 rounded-full font-medium transition-colors bg-primary text-foreground hover:bg-primary-700"><svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> </button>'),Lr=(w,t)=>{w.stopPropagation(),y(t,!e(t))},Ur=f('<div class="relative" data-user-dropdown=""><button class="p-2 rounded-full border border text-muted-foreground hover:bg-muted transition-colors" aria-label="More options"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Sr=f('<div class="mt-3"><!></div>'),zr=f('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 hover:text-primary"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg> <span> </span></a>'),Nr=f('<div class="bg-background border-b border-border"><div class="h-48 sm:h-64 relative"><!></div> <div class="px-4 sm:px-6 pb-4 pt-4"><div class="relative -mt-24 sm:-mt-28 mb-4"><!></div> <div class="mb-4"><div class="flex items-start justify-between gap-4"><div class="flex-1"><h1 class="text-xl sm:text-2xl font-bold text-foreground"> </h1> <div class="flex items-center gap-2"><p class="text-muted-foreground"> </p> <!></div> <div class="mt-2"><!></div></div> <div class="flex items-center gap-2"><!> <!></div></div> <!></div> <div class="flex flex-wrap gap-4 text-sm text-muted-foreground"><!></div> <div class="flex gap-6 mt-4"><div><span class="font-semibold text-foreground"> </span> <span class="text-muted-foreground ml-1"> </span></div> <div><span class="font-semibold text-foreground"> </span> <span class="text-muted-foreground ml-1"> </span></div></div></div></div>');function Br(w,t){Fe(t,!0);const m=()=>rt(ft,"$t",n),[n,x]=vt(),d=z.$currentUser;let k=ye(!1);function P(v){v.target.closest("[data-user-dropdown]")||y(k,!1)}var p=Nr();Kt("click",Wt,P);var u=a(p),B=a(u);{var g=v=>{var _=Mr();O(()=>Qe(_,"src",t.profile.banner)),s(v,_)};U(B,v=>{t.profile?.banner&&v(g)})}r(u);var c=o(u,2),I=a(c),h=a(I);ot(h,{get ndk(){return z},get pubkey(){return t.pubkey},size:"sm",class:"w-48 h-48 sm:w-48 sm:h-48 rounded-full border-4 border-black"}),r(I);var b=o(I,2),$=a(b),F=a($),Y=a(F),ae=a(Y,!0);r(Y);var S=o(Y,2),L=a(S),H=a(L,!0);r(L);var D=o(L,2);{var he=v=>{var _=Cr();_.__click=function(...E){t.onShareProfile?.apply(this,E)},s(v,_)};U(D,v=>{t.onShareProfile&&v(he)})}r(S);var ce=o(S,2),be=a(ce);Pr(be,{get pubkey(){return t.pubkey}}),r(ce),r(F);var T=o(F,2),K=a(T);{var _e=v=>{var _=jr();_.__click=function(...G){t.onEditProfile?.apply(this,G)};var E=o(a(_));r(_),O(G=>C(E,` ${G??""}`),[()=>m()("profile.editProfile")]),s(v,_)},le=v=>{rr(v,{get pubkey(){return t.pubkey}})};U(K,v=>{t.isOwnProfile&&t.onEditProfile?v(_e):v(le,!1)})}var je=o(K,2);{var de=v=>{var _=Ur(),E=a(_);E.__click=[Lr,k];var G=o(E,2);yr(G,{get pubkey(){return t.pubkey},get isOpen(){return e(k)},onClose:()=>y(k,!1),get onOpenCreatePack(){return t.onOpenCreatePack}}),r(_),s(v,_)};U(je,v=>{!t.isOwnProfile&&d&&t.onOpenCreatePack&&v(de)})}r(T),r($);var xe=o($,2);{var ve=v=>{var _=Sr(),E=a(_);Qt(E,{get content(){return t.profile.about},class:"text-muted-foreground"}),r(_),s(v,_)};U(xe,v=>{t.profile?.about&&v(ve)})}r(b);var oe=o(b,2),pe=a(oe);{var Le=v=>{var _=zr(),E=o(a(_),2),G=a(E,!0);r(E),r(_),O(re=>{Qe(_,"href",t.profile.website),C(G,re)},[()=>t.profile.website.replace(/^https?:\/\//,"")]),s(v,_)};U(pe,v=>{t.profile?.website&&v(Le)})}r(oe);var se=o(oe,2),Z=a(se),W=a(Z),fe=a(W,!0);r(W);var ke=o(W,2),we=a(ke,!0);r(ke),r(Z);var Pe=o(Z,2),ue=a(Pe),Ue=a(ue,!0);r(ue);var A=o(ue,2),V=a(A,!0);r(A),r(Pe),r(se),r(c),r(p),O((v,_,E,G)=>{pt(u,v),C(ae,t.profile?.name||"Anonymous"),C(H,_),C(fe,t.notesCount),C(we,E),C(Ue,t.followingCount),C(V,G)},[()=>t.profile?.banner?"":`background: ${tr(t.pubkey)}`,()=>t.profile?.nip05?`@${t.profile.nip05.split("@")[0]}`:`${t.pubkey.slice(0,12)}...`,()=>m()("profile.tabs.notes"),()=>m()("profile.following")]),s(w,p),He(),x()}Je(["click"]);var $r=f('<p class="text-foreground/80 text-sm"> </p>'),Ar=me('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Er=me('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),Or=f('<span class="text-sm font-medium"> </span> <!>',1),Fr=me('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Hr=me('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),Ir=f('<span class="text-sm font-medium">Copy npub</span> <!>',1),Vr=me('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path></svg> WhatsApp',1),Rr=me('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg> X',1),Tr=me('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg> Telegram',1),Dr=me('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg> Facebook',1),Kr=me('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> More Options',1),Wr=f('<!> <div class="space-y-4"><div class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl p-6 mb-6"><div class="flex flex-col items-center text-foreground"><div class="relative mb-4"><!></div> <h3 class="text-xl font-bold mb-1"> </h3> <!></div></div> <div class="flex justify-center mb-6"><!></div> <div class="space-y-3"><!> <!></div> <div class="space-y-2"><p class="text-sm text-muted-foreground">Share on:</p> <div class="grid grid-cols-2 gap-3"><!> <!> <!> <!></div> <!></div></div>',1);function Gr(w,t){Fe(t,!0);let m=at(t,"isOpen",15);const n=z.$fetchProfile(()=>t.pubkey);let x=ye(!1),d=ye(!1);const k=`https://njump.me/${t.npub}`,P=N(()=>`Find me on Nostr: ${k}`);async function p(I,h){await navigator.clipboard.writeText(I),h==="url"?(y(x,!0),setTimeout(()=>y(x,!1),2e3)):(y(d,!0),setTimeout(()=>y(d,!1),2e3))}function u(I){const h=encodeURIComponent(e(P)),b=encodeURIComponent(k),$={whatsapp:`https://wa.me/?text=${h}`,twitter:`https://twitter.com/intent/tweet?text=${h}`,telegram:`https://t.me/share/url?url=${b}&text=${encodeURIComponent("Find me on Nostr")}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${b}`};window.open($[I],"_blank")}async function B(){if(navigator.share)try{await navigator.share({title:`${n?.name||"Anonymous"} on Nostr`,text:"Find me on Nostr",url:k})}catch(I){console.error("Error sharing:",I)}}var g=Re(),c=X(g);Oe(c,()=>Nt,(I,h)=>{h(I,{get open(){return m()},onOpenChange:b=>{m(b),b||t.onClose()},children:(b,$)=>{var F=Re(),Y=X(F);Oe(Y,()=>St,(ae,S)=>{S(ae,{class:"max-w-md",children:(L,H)=>{var D=Wr(),he=X(D);Oe(he,()=>Bt,(A,V)=>{V(A,{children:(v,_)=>{var E=Re(),G=X(E);Oe(G,()=>zt,(re,ne)=>{ne(re,{children:(ee,Ie)=>{Ce();var Ne=ct("Share Profile");s(ee,Ne)},$$slots:{default:!0}})}),s(v,E)},$$slots:{default:!0}})});var ce=o(he,2),be=a(ce),T=a(be),K=a(T),_e=a(K);ot(_e,{get ndk(){return z},get pubkey(){return t.pubkey},class:"w-20 h-20 ring-4 ring-white/20"}),r(K);var le=o(K,2),je=a(le,!0);r(le);var de=o(le,2);{var xe=A=>{var V=$r(),v=a(V);r(V),O(_=>C(v,`@${_??""}`),[()=>n.nip05.split("@")[0]]),s(A,V)};U(de,A=>{n?.nip05&&A(xe)})}r(T),r(be);var ve=o(be,2),oe=a(ve);or(oe,{get value(){return k},size:200}),r(ve);var pe=o(ve,2),Le=a(pe);De(Le,{variant:"outline",onclick:()=>p(k,"url"),class:"w-full justify-between",children:(A,V)=>{var v=Or(),_=X(v),E=a(_);r(_);var G=o(_,2);{var re=ee=>{var Ie=Ar();s(ee,Ie)},ne=ee=>{var Ie=Er();s(ee,Ie)};U(G,ee=>{e(x)?ee(re):ee(ne,!1)})}O(ee=>C(E,`njump.me/${ee??""}...`),[()=>t.npub.slice(0,8)]),s(A,v)},$$slots:{default:!0}});var se=o(Le,2);De(se,{variant:"outline",onclick:()=>p(t.npub,"npub"),class:"w-full justify-between",children:(A,V)=>{var v=Ir(),_=o(X(v),2);{var E=re=>{var ne=Fr();s(re,ne)},G=re=>{var ne=Hr();s(re,ne)};U(_,re=>{e(d)?re(E):re(G,!1)})}s(A,v)},$$slots:{default:!0}}),r(pe);var Z=o(pe,2),W=o(a(Z),2),fe=a(W);De(fe,{onclick:()=>u("whatsapp"),class:"bg-green-500 hover:bg-green-600 text-white dark:text-white",children:(A,V)=>{var v=Vr();Ce(),s(A,v)},$$slots:{default:!0}});var ke=o(fe,2);De(ke,{variant:"outline",onclick:()=>u("twitter"),children:(A,V)=>{var v=Rr();Ce(),s(A,v)},$$slots:{default:!0}});var we=o(ke,2);De(we,{onclick:()=>u("telegram"),class:"bg-blue-500 hover:bg-blue-600 text-white dark:text-white",children:(A,V)=>{var v=Tr();Ce(),s(A,v)},$$slots:{default:!0}});var Pe=o(we,2);De(Pe,{onclick:()=>u("facebook"),class:"bg-blue-600 hover:bg-blue-700 text-white dark:text-white",children:(A,V)=>{var v=Dr();Ce(),s(A,v)},$$slots:{default:!0}}),r(W);var ue=o(W,2);{var Ue=A=>{De(A,{onclick:B,class:"w-full mt-3",children:(V,v)=>{var _=Kr();Ce(),s(V,_)},$$slots:{default:!0}})};U(ue,A=>{typeof navigator<"u"&&navigator.share&&A(Ue)})}r(Z),r(ce),O(()=>C(je,n?.name||"Anonymous")),s(L,D)},$$slots:{default:!0}})}),s(b,F)},$$slots:{default:!0}})}),s(w,g),He()}var Yr=f('<div class="text-center py-8 text-muted-foreground"> </div>'),Qr=f('<div class="divide-y divide-neutral-800/50"></div>');function Jr(w,t){Fe(t,!0);const m=at(t,"emptyMessage",3,"No articles yet");var n=Re(),x=X(n);{var d=P=>{var p=Yr(),u=a(p,!0);r(p),O(()=>C(u,m())),s(P,p)},k=P=>{var p=Qr();Ge(p,21,()=>t.articles,u=>u.id,(u,B)=>{nr(u,{get article(){return e(B)}})}),r(p),s(P,p)};U(x,P=>{t.articles.length===0?P(d):P(k,!1)})}s(w,n),He()}var Xr=f('<div class="text-center py-8 text-muted-foreground"> </div>'),Zr=f('<div class="divide-y divide-neutral-800/50"></div>');function qr(w,t){Fe(t,!0);const m=at(t,"emptyMessage",3,"No highlights yet");var n=Re(),x=X(n);{var d=P=>{var p=Xr(),u=a(p,!0);r(p),O(()=>C(u,m())),s(P,p)},k=P=>{var p=Zr();Ge(p,21,()=>t.highlights,u=>u.id,(u,B)=>{ir(u,{get event(){return e(B)}})}),r(p),s(P,p)};U(x,P=>{t.highlights.length===0?P(d):P(k,!1)})}s(w,n),He()}var ea=(w,t)=>w.key==="Enter"&&t(),ta=f('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),ra=f('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),aa=(w,t)=>{w.stopPropagation(),$t(dr(t))},oa=f('<button type="button" class="relative cursor-pointer"><!></button>'),sa=f('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),na=f('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>');function ia(w,t){Fe(t,!0),at(t,"variant",3,"default");const m=z.$fetchUser(()=>t.pack.pubkey),n=N(()=>lr(t.pack,m));function x(){$t(e(n))}var d=na();d.__click=x,d.__keydown=[ea,x];var k=a(d);{var P=S=>{var L=ta(),H=a(L);r(L),O(()=>{Qe(H,"src",t.pack.image),Qe(H,"alt",t.pack.title)}),s(S,L)};U(k,S=>{t.pack.image&&S(P)})}var p=o(k,2),u=a(p),B=a(u),g=a(B,!0);r(B);var c=o(B,2),I=a(c);r(c),r(u);var h=o(u,2);{var b=S=>{var L=ra(),H=a(L,!0);r(L),O(()=>C(H,t.pack.description)),s(S,L)};U(h,S=>{t.pack.description&&S(b)})}var $=o(h,2),F=a($);Ge(F,18,()=>t.pack.pubkeys.slice(0,4),S=>S,(S,L,H)=>{var D=oa();D.__click=[aa,L];var he=a(D);ot(he,{get ndk(){return z},get pubkey(){return L},class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"}),r(D),O(()=>pt(D,`z-index: ${4-e(H)}`)),s(S,D)});var Y=o(F,2);{var ae=S=>{var L=sa(),H=a(L),D=a(H);r(H),r(L),O(()=>C(D,`+${t.pack.pubkeys.length-4}`)),s(S,L)};U(Y,S=>{t.pack.pubkeys.length>4&&S(ae)})}r($),r(p),r(d),O(()=>{C(g,t.pack.title),C(I,`${t.pack.pubkeys.length??""} members`)}),s(w,d),He()}Je(["click","keydown"]);async function la(w,t,m,n){const d=w.target.files?.[0];if(d){if(!e(t)){y(m,"Upload not available. Please ensure you are logged in.");return}if(!d.type.startsWith("image/")){y(m,"Please select an image file");return}y(m,null);try{const k={fallbackServer:"https://blossom.primal.net"};console.log("Calling pictureUpload.upload with options:",k),await e(t).upload(d,k),e(t).result?.url&&(e(n).picture=e(t).result.url)}catch(k){console.error("Upload failed:",k),y(m,"Failed to upload image. Please try again.")}}}async function da(w,t,m,n){const d=w.target.files?.[0];if(d){if(!e(t)){y(m,"Upload not available. Please ensure you are logged in.");return}if(!d.type.startsWith("image/")){y(m,"Please select an image file");return}if(d.size>5*1024*1024){y(m,"Image size must be less than 5MB");return}y(m,null);try{await e(t).upload(d,{fallbackServer:"https://blossom.primal.net"}),e(t).result?.url&&(e(n).banner=e(t).result.url)}catch(k){console.error("Upload failed:",k),y(m,"Failed to upload banner. Please try again.")}}}async function ua(w,t,m,n,x){if(!z.signer){y(t,"No signer available");return}y(m,!0),y(t,null),y(n,!1);try{const d=new Jt(z);if(d.kind=0,d.content=JSON.stringify({name:e(x).name,display_name:e(x).displayName,about:e(x).about,picture:e(x).picture,banner:e(x).banner,nip05:e(x).nip05,lud16:e(x).lud16,website:e(x).website}),e(x).hashtags.trim()){const P=e(x).hashtags.split(",").map(p=>p.trim().toLowerCase()).filter(p=>p.length>0);d.tags=P.map(p=>["t",p])}await d.publishReplaceable();const k=Xt.fromRelayUrls(["wss://purplepag.es/",...Zt],z);d.publishReplaceable(k),y(n,!0),setTimeout(()=>y(n,!1),3e3)}catch(d){console.error("Failed to save profile:",d),y(t,"Failed to save profile. Please try again.")}finally{y(m,!1)}}var ca=f('<div class="bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-sm font-medium text-green-800 dark:text-green-200">Profile updated successfully!</span></div>'),va=f('<div class="bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3"><svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-medium text-red-800 dark:text-red-200"> </span></div>'),pa=f('<div class="w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),fa=f('<svg class="w-10 h-10 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-foreground text-sm font-medium">Click to upload banner</span>',1),ga=f('<img alt="Profile" class="w-full h-full object-cover"/>'),ma=f('<span class="text-foreground text-2xl font-bold"> </span>'),ha=f('<div class="flex flex-col items-center gap-1"><div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-xs"> </span></div>'),ba=me('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),_a=f('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span>Saving...</span>',1),xa=f("<span>Save Profile</span>"),ka=f('<div class="max-w-2xl mx-auto space-y-8"><!> <!> <div class="space-y-2"><label class="block text-sm font-medium text-foreground">Banner Image</label> <input type="file" accept="image/*" class="hidden"/> <button type="button" class="w-full h-48 rounded-xl overflow-hidden relative group bg-gradient-to-br from-primary-500 to-primary-600 hover:opacity-90 transition-opacity"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button></div> <div class="space-y-2"><label class="block text-sm font-medium text-foreground">Profile Picture</label> <input type="file" accept="image/*" class="hidden"/> <div class="flex items-center gap-4"><button type="button" class="w-24 h-24 rounded-full overflow-hidden relative group bg-gradient-to-br from-primary-500 to-primary-600 hover:ring-4 hover:ring-orange-500/20 transition-all flex items-center justify-center"><!> <div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"><!></div></button> <div class="flex-1"><input type="url" placeholder="Or paste image URL" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div></div></div> <div class="space-y-2"><label for="name" class="block text-sm font-medium text-foreground">Name</label> <input id="name" type="text" placeholder="Satoshi Nakamoto" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="displayName" class="block text-sm font-medium text-foreground">Display Name <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="displayName" type="text" placeholder="satoshi" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="about-textarea" class="block text-sm font-medium text-foreground">About</label> <textarea id="about-textarea" placeholder="Tell the world about yourself..." rows="5" class="w-full px-4 py-3 rounded-lg border border bg-card text-foreground placeholder-neutral-500 resize-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"></textarea></div> <div class="space-y-2"><label for="nip05" class="block text-sm font-medium text-foreground">NIP-05 Verification <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="nip05" type="text" placeholder="name@domain.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="lud16" class="block text-sm font-medium text-foreground">Lightning Address <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="lud16" type="text" placeholder="name@getalby.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="website" class="block text-sm font-medium text-foreground">Website <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="website" type="url" placeholder="https://example.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="hashtags" class="block text-sm font-medium text-foreground">Interest Hashtags <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="hashtags" type="text" placeholder="bitcoin, nostr, freedom (comma-separated)" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/> <p class="text-xs text-muted-foreground">Add hashtags that describe your interests. Separate multiple tags with commas.</p></div> <div class="flex justify-end pt-4"><button type="button" class="px-6 py-3 bg-primary hover:bg-accent-dark text-foreground font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!></button></div></div>');function ya(w,t){Fe(t,!0);let m=N(()=>z.$currentUser),n=z.$fetchProfile(()=>e(m)?.pubkey),x=z.$fetchEvent(()=>e(m)?{kinds:[0],authors:[e(m).pubkey]}:void 0),d=ye(!1),k=ye(!1),P=ye(null),p=N(()=>e(m)?new cr(z):null),u=N(()=>e(p)?jt(e(p)):null),B=N(()=>e(p)?jt(e(p)):null),g=ye(Gt({name:n?.name||"",displayName:n?.displayName||"",about:n?.about||"",picture:n?.image||"",banner:n?.banner||"",nip05:n?.nip05||"",lud16:n?.lud16||"",website:n?.website||"",hashtags:""}));Ut(()=>{if(n.ready){const i=x?.tags?.filter(M=>M[0]==="t")?.map(M=>M[1])?.join(", ")||"";y(g,{name:n.name||"",displayName:n.displayName||"",about:n.about||"",picture:n.image||"",banner:n.banner||"",nip05:n.nip05||"",lud16:n.lud16||"",website:n.website||"",hashtags:i},!0)}});let c,I;function h(i){return i?i.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2):"?"}var b=ka(),$=a(b);{var F=i=>{var M=ca();s(i,M)};U($,i=>{e(k)&&i(F)})}var Y=o($,2);{var ae=i=>{var M=va(),ge=o(a(M),2),Be=a(ge,!0);r(ge),r(M),O(()=>C(Be,e(P))),s(i,M)};U(Y,i=>{e(P)&&i(ae)})}var S=o(Y,2),L=o(a(S),2);L.__change=[da,B,P,g],Ct(L,i=>I=i,()=>I);var H=o(L,2);H.__click=()=>I?.click();var D=a(H),he=a(D);{var ce=i=>{var M=pa(),ge=o(X(M),2),Be=a(ge);r(ge),O(()=>C(Be,`${e(B).progress?.percentage??""}%`)),s(i,M)},be=i=>{var M=fa();Ce(2),s(i,M)};U(he,i=>{e(B)?.status==="uploading"?i(ce):i(be,!1)})}r(D),r(H),r(S);var T=o(S,2),K=o(a(T),2);K.__change=[la,u,P,g],Ct(K,i=>c=i,()=>c);var _e=o(K,2),le=a(_e);le.__click=()=>c?.click();var je=a(le);{var de=i=>{var M=ga();O(()=>Qe(M,"src",e(g).picture)),s(i,M)},xe=i=>{var M=ma(),ge=a(M,!0);r(M),O(Be=>C(ge,Be),[()=>h(e(g).name)]),s(i,M)};U(je,i=>{e(g).picture?i(de):i(xe,!1)})}var ve=o(je,2),oe=a(ve);{var pe=i=>{var M=ha(),ge=o(a(M),2),Be=a(ge);r(ge),r(M),O(()=>C(Be,`${e(u).progress?.percentage??""}%`)),s(i,M)},Le=i=>{var M=ba();s(i,M)};U(oe,i=>{e(u)?.status==="uploading"?i(pe):i(Le,!1)})}r(ve),r(le);var se=o(le,2),Z=a(se);Te(Z),r(se),r(_e),r(T);var W=o(T,2),fe=o(a(W),2);Te(fe),r(W);var ke=o(W,2),we=o(a(ke),2);Te(we),r(ke);var Pe=o(ke,2),ue=o(a(Pe),2);Yt(ue),r(Pe);var Ue=o(Pe,2),A=o(a(Ue),2);Te(A),r(Ue);var V=o(Ue,2),v=o(a(V),2);Te(v),r(V);var _=o(V,2),E=o(a(_),2);Te(E),r(_);var G=o(_,2),re=o(a(G),2);Te(re),Ce(2),r(G);var ne=o(G,2),ee=a(ne);ee.__click=[ua,P,d,k,g];var Ie=a(ee);{var Ne=i=>{var M=_a();Ce(2),s(i,M)},Xe=i=>{var M=xa();s(i,M)};U(Ie,i=>{e(d)?i(Ne):i(Xe,!1)})}r(ee),r(ne),r(b),O(()=>{H.disabled=e(B)?.status==="uploading",pt(H,e(g).banner?`background-image: url(${e(g).banner}); background-size: cover; background-position: center;`:""),le.disabled=e(u)?.status==="uploading",Z.disabled=e(u)?.status==="uploading",ee.disabled=e(d)||e(u)?.status==="uploading"||e(B)?.status==="uploading"}),Ve(Z,()=>e(g).picture,i=>e(g).picture=i),Ve(fe,()=>e(g).name,i=>e(g).name=i),Ve(we,()=>e(g).displayName,i=>e(g).displayName=i),Ve(ue,()=>e(g).about,i=>e(g).about=i),Ve(A,()=>e(g).nip05,i=>e(g).nip05=i),Ve(v,()=>e(g).lud16,i=>e(g).lud16=i),Ve(E,()=>e(g).website,i=>e(g).website=i),Ve(re,()=>e(g).hashtags,i=>e(g).hashtags=i),s(w,b),He()}Je(["change","click"]);var wa=(w,t)=>y(t,"notes"),Pa=(w,t)=>y(t,"replies"),Ma=(w,t)=>y(t,"media"),Ca=(w,t)=>y(t,"articles"),ja=(w,t)=>y(t,"highlights"),La=(w,t)=>y(t,"packs"),Ua=f('<div class="text-center py-8 text-muted-foreground"> </div>'),Sa=f('<div class="divide-y divide-neutral-800/50"></div>'),za=f("<!> <!>",1),Na=f('<div class="text-center py-8 text-muted-foreground"> </div>'),Ba=f('<div class="divide-y divide-neutral-800/50"></div>'),$a=f("<!> <!>",1),Aa=f('<div class="p-4"><!></div> <!>',1),Ea=f("<!> <!>",1),Oa=f("<!> <!>",1),Fa=(w,t)=>y(t,"all"),Ha=(w,t)=>y(t,"created"),Ia=(w,t)=>y(t,"appears"),Va=f('<div class="grid gap-4 md:grid-cols-2"></div>'),Ra=f('<div class="text-center py-8 text-muted-foreground"> </div>'),Ta=f('<div class="p-4 space-y-4"><div class="flex gap-2 mb-4"><button> </button> <button> </button> <button> </button></div> <!></div> <!>',1),Da=f("<!> <!>",1),Ka=f('<!> <div class="py-4"><!></div>',1),Wa=f('<div class="w-full"><!> <div class="sticky top-0 z-30 bg-background/80 backdrop-blur-sm border-b border-border"><div class="flex justify-around lg:justify-start px-2 lg:px-4 overflow-x-auto"><button aria-label="Notes"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Replies"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Media"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Articles"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Highlights"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Follow Packs"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <span class="hidden lg:inline"> </span></button></div></div> <div><!> <!> <!> <!> <!> <!></div> <!> <!> <!></div>');function xo(w,t){Fe(t,!0);const m=()=>rt(er,"$page",x),n=()=>rt(ft,"$t",x),[x,d]=vt(),k=N(()=>m().params.identifier||""),P=z.$fetchUser(()=>e(k)),p=z.$fetchProfile(()=>P?.pubkey),u=N(()=>P?.pubkey||""),B=z.$currentUser,g=N(()=>B?.pubkey===e(u));let c=ye("notes"),I=ye(!1),h=ye("all"),b=ye(!1),$=ye(!1);const F=Ke(z,()=>e(u)?{filters:[{kinds:[Pt.Text],authors:[e(u)],limit:200}]}:void 0,{initialLimit:20,pageSize:20}),Y=Ke(z,()=>e(c)==="media"&&e(u)?{filters:[{kinds:[20,21,22],authors:[e(u)],limit:200}]}:void 0,{initialLimit:30,pageSize:30}),ae=Ke(z,()=>e(c)==="articles"&&e(u)?{filters:[{kinds:[Pt.Article],authors:[e(u)],limit:100}]}:void 0,{initialLimit:10,pageSize:10}),S=Ke(z,()=>e(c)==="highlights"&&e(u)?{filters:[{kinds:[9802],authors:[e(u)],limit:100}]}:void 0,{initialLimit:10,pageSize:10}),L=Ke(z,()=>e(c)==="packs"&&e(u)?{filters:[{kinds:[39089,39092],authors:[e(u)],limit:100}]}:void 0,{initialLimit:20,pageSize:20}),H=Ke(z,()=>e(c)==="packs"&&e(u)?{filters:[{kinds:[39089,39092],"#p":[e(u)],limit:100}]}:void 0,{initialLimit:20,pageSize:20}),D=z.$subscribe(()=>e(u)?{filters:[{kinds:[3],authors:[e(u)],limit:1}],bufferMs:100}:void 0),he=N(()=>{const l=D.events[0];return l?l.tags.filter(j=>j[0]==="p").length:0}),ce=N(()=>F.events.filter(l=>!l.tags.some(j=>j[0]==="e"))),be=N(()=>F.events.filter(l=>l.tags.some(j=>j[0]==="e")));function T(l){return/(https?:\/\/[^\s]+\.(jpg|jpeg|png|gif|webp|svg|avif|mp4|webm|mov|avi|mkv))/gi.test(l)}const K=N(()=>F.allEvents.filter(l=>T(l.content))),_e=N(()=>[...Y.events,...e(K)]),le=N(()=>ae.events.map(l=>qt.from(l))),je=N(()=>S.events),de=N(()=>L.events.map(l=>({id:l.id||"",title:l.tagValue("title")||"Untitled Pack",description:l.tagValue("description"),image:l.tagValue("image"),pubkeys:l.tags.filter(j=>j[0]==="p").map(j=>j[1]),encode:()=>l.encode(),kind:l.kind||39089,pubkey:l.pubkey,created_at:l.created_at||0}))),xe=N(()=>H.events.map(l=>({id:l.id||"",title:l.tagValue("title")||"Untitled Pack",description:l.tagValue("description"),image:l.tagValue("image"),pubkeys:l.tags.filter(j=>j[0]==="p").map(j=>j[1]),encode:()=>l.encode(),kind:l.kind||39089,pubkey:l.pubkey,created_at:l.created_at||0}))),ve=N(()=>[...e(de),...e(xe)]),oe=N(()=>e(h)==="created"?e(de):e(h)==="appears"?e(xe):e(ve)),pe=N(()=>P?.npub||"");function Le(){y(b,!0)}function se(){e(c)==="notes"||e(c)==="replies"?F.loadMore():e(c)==="media"?Y.loadMore():e(c)==="articles"?ae.loadMore():e(c)==="highlights"?S.loadMore():e(c)==="packs"&&(e(h)==="created"?L.loadMore():(e(h)==="appears"||L.loadMore(),H.loadMore()))}const Z=N(()=>e(c)==="notes"||e(c)==="replies"?F.hasMore:e(c)==="media"?Y.hasMore:e(c)==="articles"?ae.hasMore:e(c)==="highlights"?S.hasMore:e(c)==="packs"?e(h)==="created"?L.hasMore:e(h)==="appears"?H.hasMore:L.hasMore||H.hasMore:!1),W=N(()=>e(c)==="notes"||e(c)==="replies"?F.isLoading:e(c)==="media"?Y.isLoading:e(c)==="articles"?ae.isLoading:e(c)==="highlights"?S.isLoading:e(c)==="packs"?L.isLoading||H.isLoading:!1);Ut(()=>(Lt.setProfileMode(),()=>{Lt.reset()}));var fe=Wa(),ke=a(fe);Br(ke,{get pubkey(){return e(u)},get profile(){return p},get isOwnProfile(){return e(g)},get notesCount(){return e(ce).length},get followingCount(){return e(he)},onEditProfile:()=>y($,!0),onShareProfile:()=>y(I,!0),onOpenCreatePack:Le});var we=o(ke,2),Pe=a(we),ue=a(Pe);ue.__click=[wa,c];var Ue=o(a(ue),2),A=a(Ue,!0);r(Ue),r(ue);var V=o(ue,2);V.__click=[Pa,c];var v=o(a(V),2),_=a(v,!0);r(v),r(V);var E=o(V,2);E.__click=[Ma,c];var G=o(a(E),2),re=a(G,!0);r(G),r(E);var ne=o(E,2);ne.__click=[Ca,c];var ee=o(a(ne),2),Ie=a(ee,!0);r(ee),r(ne);var Ne=o(ne,2);Ne.__click=[ja,c];var Xe=o(a(Ne),2),i=a(Xe,!0);r(Xe),r(Ne);var M=o(Ne,2);M.__click=[La,c];var ge=o(a(M),2),Be=a(ge,!0);r(ge),r(M),r(Pe),r(we);var st=o(we,2),gt=a(st);{var At=l=>{var j=za(),R=X(j);{var ie=Q=>{var q=Ua(),te=a(q,!0);r(q),O(Se=>C(te,Se),[()=>n()("profile.emptyStates.noNotes")]),s(Q,q)},J=Q=>{var q=Sa();Ge(q,21,()=>e(ce),te=>te.id,(te,Se)=>{Mt(te,{get event(){return e(Se)}})}),r(q),s(Q,q)};U(R,Q=>{e(ce).length===0?Q(ie):Q(J,!1)})}var $e=o(R,2);Ye($e,{onIntersect:se,get hasMore(){return e(Z)},get isLoading(){return e(W)}}),s(l,j)};U(gt,l=>{e(c)==="notes"&&l(At)})}var mt=o(gt,2);{var Et=l=>{var j=$a(),R=X(j);{var ie=Q=>{var q=Na(),te=a(q,!0);r(q),O(Se=>C(te,Se),[()=>n()("profile.emptyStates.noReplies")]),s(Q,q)},J=Q=>{var q=Ba();Ge(q,21,()=>e(be),te=>te.id,(te,Se)=>{Mt(te,{get event(){return e(Se)}})}),r(q),s(Q,q)};U(R,Q=>{e(be).length===0?Q(ie):Q(J,!1)})}var $e=o(R,2);Ye($e,{onIntersect:se,get hasMore(){return e(Z)},get isLoading(){return e(W)}}),s(l,j)};U(mt,l=>{e(c)==="replies"&&l(Et)})}var ht=o(mt,2);{var Ot=l=>{var j=Aa(),R=X(j),ie=a(R);sr(ie,{get events(){return e(_e)}}),r(R);var J=o(R,2);Ye(J,{onIntersect:se,get hasMore(){return e(Z)},get isLoading(){return e(W)}}),s(l,j)};U(ht,l=>{e(c)==="media"&&l(Ot)})}var bt=o(ht,2);{var Ft=l=>{var j=Ea(),R=X(j);{let J=N(()=>e(g)?n()("profile.emptyStates.noArticlesOwn"):n()("profile.emptyStates.noArticlesUser"));Jr(R,{get articles(){return e(le)},get emptyMessage(){return e(J)}})}var ie=o(R,2);Ye(ie,{onIntersect:se,get hasMore(){return e(Z)},get isLoading(){return e(W)}}),s(l,j)};U(bt,l=>{e(c)==="articles"&&l(Ft)})}var _t=o(bt,2);{var Ht=l=>{var j=Oa(),R=X(j);{let J=N(()=>e(g)?n()("profile.emptyStates.noHighlightsOwn"):n()("profile.emptyStates.noHighlightsUser"));qr(R,{get highlights(){return e(je)},get emptyMessage(){return e(J)}})}var ie=o(R,2);Ye(ie,{onIntersect:se,get hasMore(){return e(Z)},get isLoading(){return e(W)}}),s(l,j)};U(_t,l=>{e(c)==="highlights"&&l(Ht)})}var It=o(_t,2);{var Vt=l=>{var j=Ta(),R=X(j),ie=a(R),J=a(ie);J.__click=[Fa,h];var $e=a(J,!0);r(J);var Q=o(J,2);Q.__click=[Ha,h];var q=a(Q,!0);r(Q);var te=o(Q,2);te.__click=[Ia,h];var Se=a(te,!0);r(te),r(ie);var Ze=o(ie,2);{var qe=ze=>{var Me=Va();Ge(Me,21,()=>e(oe),Ae=>Ae.id,(Ae,tt)=>{ia(Ae,{get pack(){return e(tt)},variant:"compact"})}),r(Me),s(ze,Me)},et=ze=>{var Me=Ra(),Ae=a(Me,!0);r(Me),O(tt=>C(Ae,tt),[()=>e(h)==="created"?e(g)?n()("profile.emptyStates.noPacksCreatedOwn"):n()("profile.emptyStates.noPacksCreatedUser",{username:p?.name||"user"}):e(h)==="appears"?e(g)?n()("profile.emptyStates.noPacksAppearsOwn"):n()("profile.emptyStates.noPacksAppearsUser",{username:p?.name||"user"}):n()("profile.emptyStates.noPacksFound")]),s(ze,Me)};U(Ze,ze=>{e(oe).length>0?ze(qe):ze(et,!1)})}r(R);var nt=o(R,2);Ye(nt,{onIntersect:se,get hasMore(){return e(Z)},get isLoading(){return e(W)}}),O((ze,Me,Ae)=>{Ee(J,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e(h)==="all"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),C($e,ze),Ee(Q,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e(h)==="created"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),C(q,Me),Ee(te,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e(h)==="appears"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),C(Se,Ae)},[()=>n()("profile.tabs.all"),()=>e(g)?n()("profile.tabs.byYou"):n()("profile.tabs.byUser",{username:p?.name||p?.displayName||e(u).slice(0,8)}),()=>e(g)?n()("profile.tabs.withYou"):n()("profile.tabs.withUser",{username:p?.name||p?.displayName||e(u).slice(0,8)})]),s(l,j)};U(It,l=>{e(c)==="packs"&&l(Vt)})}r(st);var xt=o(st,2);Gr(xt,{get isOpen(){return e(I)},onClose:()=>y(I,!1),get pubkey(){return e(u)},get npub(){return e(pe)}});var kt=o(xt,2);ur(kt,{get initialPubkey(){return e(u)},get open(){return e(b)},set open(l){y(b,l,!0)}});var Rt=o(kt,2);Oe(Rt,()=>Nt,(l,j)=>{j(l,{get open(){return e($)},set open(R){y($,R,!0)},children:(R,ie)=>{var J=Re(),$e=X(J);Oe($e,()=>St,(Q,q)=>{q(Q,{class:"max-w-2xl max-h-[90vh] overflow-y-auto",onClose:()=>y($,!1),children:(te,Se)=>{var Ze=Ka(),qe=X(Ze);Oe(qe,()=>Bt,(ze,Me)=>{Me(ze,{children:(Ae,tt)=>{var yt=Da(),wt=X(yt);Oe(wt,()=>zt,(it,lt)=>{lt(it,{children:(dt,Dt)=>{Ce();var ut=ct("Edit Profile");s(dt,ut)},$$slots:{default:!0}})});var Tt=o(wt,2);Oe(Tt,()=>vr,(it,lt)=>{lt(it,{children:(dt,Dt)=>{Ce();var ut=ct("Update your profile information and settings");s(dt,ut)},$$slots:{default:!0}})}),s(Ae,yt)},$$slots:{default:!0}})});var et=o(qe,2),nt=a(et);ya(nt,{}),r(et),s(te,Ze)},$$slots:{default:!0}})}),s(R,J)},$$slots:{default:!0}})}),r(fe),O((l,j,R,ie,J,$e)=>{Ee(ue,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(c)==="notes"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),C(A,l),Ee(V,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(c)==="replies"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),C(_,j),Ee(E,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(c)==="media"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),C(re,R),Ee(ne,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(c)==="articles"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),C(Ie,ie),Ee(Ne,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(c)==="highlights"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),C(i,J),Ee(M,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(c)==="packs"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),C(Be,$e)},[()=>n()("profile.tabs.notes"),()=>n()("profile.tabs.replies"),()=>n()("profile.tabs.media"),()=>n()("profile.tabs.articles"),()=>n()("profile.tabs.highlights"),()=>n()("profile.tabs.followPacks")]),s(w,fe),He(),d()}Je(["click"]);export{xo as component};
