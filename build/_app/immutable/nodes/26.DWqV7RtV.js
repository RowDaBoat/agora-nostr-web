import"../chunks/DsnmJJEf.js";import{d as he,p as ae,i as S,k as a,g as e,b as ie,L as me,r,j as o,t as F,a as y,l as p,P as Oe,aR as Xe,e as f,h as oe,s as E,be as ct,N as vt,bd as Be,c as Se,f as de,K as ut,M as et,O as gt,u as tt,Q as ft}from"../chunks/UP8uQ6W_.js";import{i as L}from"../chunks/_gFmmxLT.js";import{a as X,c as fe,r as We,b as rt,s as Re,d as mt}from"../chunks/BUa9uPHk.js";import{a as at,f as ot,N as bt,A as Je,R as pt,n as ue,k as nt,K as xt}from"../chunks/CnpwhG0Y.js";import{g as ht}from"../chunks/C3QbOBEF.js";import{o as Q}from"../chunks/BnuMXndI.js";import{e as Ge}from"../chunks/DA17f6bB.js";import{c as Fe}from"../chunks/BjHSVvfl.js";import{p as ye}from"../chunks/B36lUvow.js";import{g as it,a as kt}from"../chunks/BoWL87Fx.js";import{a as qe,s as Ze}from"../chunks/B2G7F-H5.js";import{$ as Qe,a as _t}from"../chunks/D5Dopks2.js";import{b as st}from"../chunks/CEMA3FH2.js";import{N as lt,c as dt}from"../chunks/DAJSYuaf.js";import{a as wt,N as yt}from"../chunks/Btpm2RVz.js";async function Pt(g,t){const i=new Set;try{const n=await g.signer?.user();if(!n)throw new Error("No user logged in");const d=await g.fetchEvent({kinds:[3],authors:[n.pubkey]}),v=new Set;d&&d.tags.filter(s=>s[0]==="p").forEach(s=>v.add(s[1]));for(const s of t)try{const c=await g.fetchEvent(s);c&&at.from(c).pubkeys?.forEach(b=>{v.has(b)||i.add(b)})}catch(c){console.error(`Error processing pack ${s}:`,c)}if(i.size>0){const s=new ot(g);s.kind=3,s.content=d?.content||"",d?s.tags=[...d.tags]:s.tags=[];for(const c of i)s.tags.push(["p",c]);await s.publish()}return Array.from(i)}catch(n){throw console.error("Error following pack users:",n),n}}var Ct=S('<img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community gathering" class="absolute inset-0 w-full h-full object-cover"/>'),St=S('<div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-700"></div>'),It=S('<button><div class="relative h-32"><img class="absolute inset-0 w-full h-full object-cover"/> <div style="display: none;"></div> <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div> <div class="absolute bottom-3 left-3 right-3"><div class="flex items-center gap-2 text-foreground"><span class="text-2xl"> </span> <span class="font-semibold"> </span></div> <div class="text-xs text-foreground/80 mt-1"> </div></div></div></button>'),Nt=S(`<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><!> <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div> <div class="absolute bottom-12 left-12 right-12 text-foreground"><h1 class="text-5xl font-bold mb-4">Your Voice Matters</h1> <p class="text-xl opacity-90">Join a community where every voice counts. Connect with leaders,
        share stories, and build the future together.</p></div></div> <div class="flex-1 flex items-center justify-center p-8 lg:p-12"><div class="max-w-xl w-full"><div class="mb-12 lg:hidden"><h1 class="text-4xl font-bold mb-3">Your Voice Matters</h1> <p class="text-muted-foreground">Choose your community to connect with local voices</p></div> <div class="lg:mb-8"><h2 class="text-2xl font-semibold mb-3">Choose Your Community</h2> <p class="text-muted-foreground text-sm">Select where you want to connect and contribute</p></div> <div class="grid grid-cols-2 gap-3 mb-8"></div> <button>Continue ‚Üí</button></div></div></div>`);function zt(g,t){ae(t,!0);const i=[{id:"venezuela",name:"Venezuela",flag:"üáªüá™",description:"Connect with the resilient Venezuelan community",image:"https://images.unsplash.com/photo-1520525003249-2b9cdda513bc?w=800&q=80",fallbackColor:"from-yellow-500 to-blue-600",leaders:["Mar√≠a Rodr√≠guez","Carlos Mendoza","Ana Lucia"]},{id:"cambodia",name:"Cambodia",flag:"üá∞üá≠",description:"Join voices from the Kingdom of Wonder",image:"https://images.unsplash.com/photo-1569154941061-e231b4725ef1?w=800&q=80",fallbackColor:"from-red-500 to-blue-700",leaders:["Sokha Chen","Dara Vong","Srey Mom"]},{id:"nicaragua",name:"Nicaragua",flag:"üá≥üáÆ",description:"Unite with Nicaraguan changemakers",image:"https://images.unsplash.com/photo-1503542724004-53f16c988e63?w=800&q=80",fallbackColor:"from-blue-500 to-sky-600",leaders:["Roberto Silva","Elena Martinez","Juan Carlos"]},{id:"zimbabwe",name:"Zimbabwe",flag:"üáøüáº",description:"Connect with Zimbabwe's innovators",image:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?w=800&q=80",fallbackColor:"from-green-600 to-yellow-500",leaders:["Tendai Moyo","Grace Ndlovu","David Chuma"]},{id:"afghanistan",name:"Afghanistan",flag:"üá¶üá´",description:"Support Afghan voices of hope",image:"https://images.unsplash.com/photo-1574482620811-1aa16ffe3c82?w=800&q=80",fallbackColor:"from-black to-red-700",leaders:["Ahmad Shah","Fatima Rashidi","Nasir Khan"]},{id:"iran",name:"Iran",flag:"üáÆüá∑",description:"Join the Persian community",image:"https://images.unsplash.com/photo-1608592077365-c6399182e63c?w=800&q=80",fallbackColor:"from-green-600 to-red-600",leaders:["Reza Hosseini","Maryam Azadi","Ali Karimi"]}];let n=ie(!1);var d=Nt(),v=a(d),s=a(v);{var c=C=>{var h=Ct();Oe("error",h,()=>E(n,!0)),Xe(h),f(C,h)},P=C=>{var h=St();f(C,h)};L(s,C=>{e(n)?C(P,!1):C(c)})}me(4),r(v);var b=o(v,2),x=a(b),u=o(a(x),4);Ge(u,21,()=>i,C=>C.id,(C,h)=>{const w=y(()=>t.selectedCommunity===e(h).id);var z=It();z.__click=()=>t.onSelectCommunity(e(h).id);var U=a(z),R=a(U),D=o(R,2),A=o(D,4),l=a(A),_=a(l),M=a(_,!0);r(_);var Z=o(_,2),J=a(Z,!0);r(Z),r(l);var B=o(l,2),O=a(B);r(B),r(A),r(U),r(z),F(()=>{X(z,1,`
              relative overflow-hidden rounded-lg border-2 transition-all
              ${e(w)?"border-black dark:border-white shadow-lg scale-[1.02]":"border hover:border dark:hover:border"}
            `),fe(R,"src",e(h).image),fe(R,"alt",e(h).name),X(D,1,`absolute inset-0 bg-gradient-to-br ${e(h).fallbackColor}`),p(M,e(h).flag),p(J,e(h).name),p(O,`${e(h).leaders.length??""} community leaders`)}),Oe("error",R,G=>{const H=G.currentTarget;H.style.display="none";const Y=H.nextElementSibling;Y&&(Y.style.display="block")}),Xe(R),f(C,z)}),r(u);var I=o(u,2);I.__click=function(...C){t.onNext?.apply(this,C)},r(x),r(b),r(d),F(()=>{I.disabled=!t.selectedCommunity,X(I,1,`
          w-full py-4 px-6 rounded-lg font-medium transition-all
          ${t.selectedCommunity?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `)}),f(g,d),oe()}he(["click"]);const Dt={venezuela:[Je[1]],nicaragua:[Je[2]]},Mt={venezuela:["naddr1qvzqqqyckypzp75v7yjjc7h7lzaf3gfvpck39mvcjmylz7aleup9mtutd5yrlxv7qythwumn8ghj7un9d3shjtnswf5k6ctv9ehx2ap0qythwumn8ghj7un9d3shjtnwdaehgu3wvfskuep0qqv4qmmv946xjcmp94tx2mn90f6k2mrp945kwart09hsc909n2"]},jt=bt.FollowPack,$e={venezuela:{name:"Venezuela",description:"Connect with the Venezuelan community"},cambodia:{name:"Cambodia",description:"Join voices from the Kingdom of Wonder"},nicaragua:{name:"Nicaragua",description:"Unite with Nicaraguan changemakers"},zimbabwe:{name:"Zimbabwe",description:"Connect with Zimbabwe's innovators"},afghanistan:{name:"Afghanistan",description:"Support Afghan voices of hope"},iran:{name:"Iran",description:"Join the Persian community"}},Ee=Symbol("follow-pack");var Ut=S("<div><!></div>");function Ft(g,t){ae(t,!0);let i=ye(t,"class",3,"");const n=it(t.ndk);ct(Ee,{get ndk(){return n},get followPack(){return t.followPack},get onclick(){return t.onclick}});var v=Ut(),s=a(v);vt(s,()=>t.children),r(v),F(()=>X(v,1,`follow-pack-root ${i()??""}`,"svelte-1d0f0zq")),f(g,v),oe()}var At=S("<span> </span>");function Ot(g,t){ae(t,!0);let i=ye(t,"class",3,"");const n=Be(Ee),d=y(()=>n.followPack.title||"Untitled Pack"),v=y(()=>t.lines?`line-clamp-${t.lines}`:"");var s=At(),c=a(s,!0);r(s),F(()=>{X(s,1,`follow-pack-title ${e(v)??""} ${i()??""}`),p(c,e(d))}),f(g,s),oe()}var Et=S('<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>'),Lt=S('<div><img class="w-full h-full object-cover"/> <!></div>'),Rt=S('<div><svg class="w-1/3 h-1/3 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>');function Tt(g,t){ae(t,!0);let i=ye(t,"class",3,""),n=ye(t,"showGradient",3,!1);const d=Be(Ee),v=y(()=>d.followPack.image||t.fallback);var s=Se(),c=de(s);{var P=x=>{var u=Lt(),I=a(u),C=o(I,2);{var h=w=>{var z=Et();f(w,z)};L(C,w=>{n()&&w(h)})}r(u),F(()=>{X(u,1,`follow-pack-image relative overflow-hidden ${i()??""}`),fe(I,"src",e(v)),fe(I,"alt",d.followPack.title||"Follow pack")}),f(x,u)},b=x=>{var u=Se(),I=de(u);{var C=h=>{var w=Rt();F(()=>X(w,1,`follow-pack-image-fallback bg-muted flex items-center justify-center ${i()??""}`)),f(h,w)};L(I,h=>{t.fallback===void 0&&h(C)},!0)}f(x,u)};L(c,x=>{e(v)?x(P):x(b,!1)})}f(g,s),oe()}var qt=S("<span> </span>");function Bt(g,t){ae(t,!0);let i=ye(t,"class",3,"");const n=Be(Ee),d=y(()=>n.followPack.description||""),v=y(()=>t.maxLength&&e(d).length>t.maxLength?e(d).slice(0,t.maxLength)+"...":e(d)),s=y(()=>t.lines?`line-clamp-${t.lines}`:"");var c=Se(),P=de(c);{var b=x=>{var u=qt(),I=a(u,!0);r(u),F(()=>{X(u,1,`follow-pack-description ${e(s)??""} ${i()??""}`),p(I,e(v))}),f(x,u)};L(P,x=>{e(d)&&x(b)})}f(g,c),oe()}var Kt=S("<span> </span>");function Ht(g,t){ae(t,!0);let i=ye(t,"class",3,""),n=ye(t,"format",3,"short");const d=Be(Ee),v=y(()=>d.followPack.pubkeys.length),s=y(()=>n()==="long"?`${e(v)} ${e(v)===1?"person":"people"}`:e(v).toString());var c=Kt(),P=a(c,!0);r(c),F(()=>{X(c,1,`follow-pack-member-count ${i()??""}`),p(P,e(s))}),f(g,c),oe()}const Ae={Root:Ft,Title:Ot,Image:Tt,Description:Bt,MemberCount:Ht};var Yt=S('<button type="button"><!> <div class="flex-1 min-w-0 text-left"><!> <!> <div class="flex items-center gap-3"><!> <div class="flex items-center gap-1.5 text-xs text-muted-foreground"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <!></div></div></div></button>');function Vt(g,t){ae(t,!0);let i=ye(t,"class",3,"");const n=it(t.ndk);var d=Se(),v=de(d);Fe(v,()=>Ae.Root,(s,c)=>{c(s,{get ndk(){return n},get followPack(){return t.followPack},get onclick(){return t.onclick},children:(P,b)=>{var x=Yt();x.__click=function(...D){t.onclick?.apply(this,D)};var u=a(x);Fe(u,()=>Ae.Image,(D,A)=>{A(D,{class:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden"})});var I=o(u,2),C=a(I);Fe(C,()=>Ae.Title,(D,A)=>{A(D,{class:"text-sm font-semibold mb-1",lines:1})});var h=o(C,2);Fe(h,()=>Ae.Description,(D,A)=>{A(D,{class:"text-xs text-muted-foreground mb-2",maxLength:80,lines:2})});var w=o(h,2),z=a(w);kt(z,{get ndk(){return n},get pubkeys(){return t.followPack.pubkeys},max:3,size:20});var U=o(z,2),R=o(a(U),2);Fe(R,()=>Ae.MemberCount,(D,A)=>{A(D,{format:"long"})}),r(U),r(w),r(I),r(x),F(()=>X(x,1,`group flex items-center gap-4 w-full p-4 rounded-xl bg-card hover:bg-muted transition-colors ${i()??""}`)),f(P,x)},$$slots:{default:!0}})}),f(g,d),oe()}he(["click"]);var Wt=S('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div> <p class="mt-4 text-sm text-muted-foreground">Loading follow packs...</p></div>'),Jt=S('<div class="text-center py-8 text-muted-foreground">No follow packs available for this community yet</div>'),Gt=S('<div class="absolute top-1/2 right-4 -translate-y-1/2 bg-primary text-foreground rounded-full p-1.5 z-10 pointer-events-none"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Zt=S('<div class="relative"><!> <!></div>'),Qt=S('<div class="space-y-2 mb-6 lg:mb-8 max-h-[50vh] lg:max-h-[60vh] overflow-y-auto p-2 -m-2"></div>'),Xt=S(`<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community leaders" class="absolute inset-0 w-full h-full object-cover"/> <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"></div> <div class="absolute bottom-0 left-0 right-0 p-12"><div class="mb-8"><p class="text-3xl text-foreground/90 italic leading-relaxed">"We're not just surviving‚Äîwe're building the future our community deserves. One voice at a time."</p></div> <div class="flex items-center gap-4"><div class="w-12 h-12 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-foreground font-semibold">MR</div> <div class="text-foreground"><div class="font-semibold">Mar√≠a Rodr√≠guez</div> <div class="text-sm opacity-75">Community Organizer ¬∑ Caracas</div></div></div></div></div> <div class="w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-12"><div class="max-w-xl w-full"><div class="mb-6 lg:mb-8"><h1 class="text-2xl lg:text-3xl font-bold mb-2 lg:mb-3">Build Your Network</h1> <p class="text-sm lg:text-base text-muted-foreground"> </p></div> <!> <button> </button></div></div></div>`);function $t(g,t){ae(t,!0);const i=y(()=>t.selectedCommunity||"venezuela"),n=y(()=>Mt[e(i)]),d=y(()=>{if(e(n)&&e(n).length>0){const l=e(n).map(_=>pt(_));return ue.$subscribe(()=>({filters:l,subId:"followpacks",closeOnEose:!0}))}else{const l=Dt[e(i)];return!l||l.length===0?(console.warn(`No relay configured for community: ${e(i)}`),null):ue.$subscribe(()=>({filters:[{kinds:[jt]}],subId:"followpacks",closeOnEose:!0,relayUrls:l,exclusiveRelay:!0}))}}),v=y(()=>e(d)?Array.from(e(d).events??[]).map(_=>at.from(_)):[]),s=y(()=>e(d)?.eoseReceived===!1),c=y(()=>$e[e(i)]||$e.venezuela);function P(l){const _=l.encode();console.log("[Step2] Pack clicked:",l.title,"packId:",_),t.selectedPacks.includes(_)?(console.log("[Step2] Deselecting pack"),t.onSelectPacks(t.selectedPacks.filter(M=>M!==_))):(console.log("[Step2] Selecting pack"),t.onSelectPacks([...t.selectedPacks,_])),console.log("[Step2] Selected packs count:",t.selectedPacks.length)}function b(){if(console.log("[Step2] handleNext called, selectedPacks:",t.selectedPacks.length),t.selectedPacks.length===0){console.log("[Step2] No packs selected, returning");return}console.log("[Step2] Calling onNext"),t.onNext()}var x=Xt(),u=o(a(x),2),I=a(u),C=a(I),h=o(a(C),2),w=a(h);r(h),r(C);var z=o(C,2);{var U=l=>{var _=Wt();f(l,_)},R=l=>{var _=Se(),M=de(_);{var Z=B=>{var O=Jt();f(B,O)},J=B=>{var O=Qt();Ge(O,21,()=>e(v).slice(0,6),G=>G.id,(G,H)=>{const Y=y(()=>t.selectedPacks.includes(e(H).encode()));var q=Zt(),V=a(q);{let m=y(()=>e(Y)?"ring-2 ring-orange-500 bg-primary-50 dark:bg-primary-950/20":"");Vt(V,{get ndk(){return ue},get followPack(){return e(H)},onclick:()=>P(e(H)),get class(){return e(m)}})}var $=o(V,2);{var ne=m=>{var T=Gt();f(m,T)};L($,m=>{e(Y)&&m(ne)})}r(q),f(G,q)}),r(O),f(B,O)};L(M,B=>{e(v).length===0?B(Z):B(J,!1)},!0)}f(l,_)};L(z,l=>{e(s)?l(U):l(R,!1)})}var D=o(z,2);D.__click=b;var A=a(D);r(D),r(I),r(u),r(x),F(()=>{p(w,`Follow curated packs from the ${e(c).name??""} community`),D.disabled=t.selectedPacks.length===0||e(s),X(D,1,`
          w-full py-3 lg:py-4 px-6 rounded-lg font-medium transition-all text-sm lg:text-base
          ${t.selectedPacks.length>0&&!e(s)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),p(A,`Continue ${t.selectedPacks.length>0?`(${t.selectedPacks.length} selected)`:"‚Üí"}`)}),f(g,x),oe()}he(["click"]);var er=S(`<div class="min-h-screen flex items-center justify-center p-8 py-16"><div class="max-w-5xl w-full"><div class="text-center mb-12"><h2 class="text-3xl font-bold mb-3"> </h2> <p class="text-lg text-muted-foreground"> </p></div> <div class="grid md:grid-cols-3 gap-6 mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üõçÔ∏è</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">MR</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Mar√≠a's Bakery</div> <div class="text-xs text-muted-foreground">2km away</div></div></div> <div class="text-sm font-medium mb-1">Fresh Bread & Pastries</div> <div class="text-xs text-muted-foreground mb-2">Daily baked goods, accepting sats</div> <div class="text-sm font-semibold">2,500 sats / dozen</div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">ü§ù</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 border border"><div class="space-y-2"><div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-green-600 dark:text-green-400 font-semibold">BUY</span> <span class="font-medium">100 USD</span></div> <div class="text-right"><div class="font-semibold">485k sats</div></div></div> <div class="flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-red-600 dark:text-red-400 font-semibold">SELL</span> <span class="font-medium">50 USD</span></div> <div class="text-right"><div class="font-semibold">240k sats</div></div></div></div> <div class="flex items-center justify-center gap-1 text-xs text-muted-foreground mt-3"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span> </span></div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üì∞</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">CM</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Carlos Mendoza</div> <div class="text-xs text-muted-foreground">2 hours ago</div></div></div> <div class="text-sm font-medium mb-1">Alternative Supply Chain</div> <div class="text-xs text-muted-foreground mb-2">Direct farmer-to-community network reduces costs by 40%...</div> <div class="flex items-center gap-3 text-xs text-muted-foreground"><span>‚ö° 23.5k</span> <span>üí¨ 156</span> <span>üîÅ 89</span></div></div></div></div> <div class="text-center"><button class="bg-background dark:bg-white text-foreground dark:text-black px-8 py-3 rounded-lg font-medium hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div></div>`);function tr(g,t){ae(t,!0);const i=()=>qe(Qe,"$t",n),[n,d]=Ze();var v=er(),s=a(v),c=a(s),P=a(c),b=a(P,!0);r(P);var x=o(P,2),u=a(x,!0);r(x),r(c);var I=o(c,2),C=a(I),h=o(a(C),2),w=a(h,!0);r(h);var z=o(h,2),U=a(z,!0);r(z),me(2),r(C);var R=o(C,2),D=o(a(R),2),A=a(D,!0);r(D);var l=o(D,2),_=a(l,!0);r(l);var M=o(l,2),Z=o(a(M),2),J=o(a(Z),2),B=a(J,!0);r(J),r(Z),r(M),r(R);var O=o(R,2),G=o(a(O),2),H=a(G,!0);r(G);var Y=o(G,2),q=a(Y,!0);r(Y),me(2),r(O),r(I);var V=o(I,2),$=a(V);$.__click=function(...m){t.onNext?.apply(this,m)};var ne=a($);r($),r(V),r(s),r(v),F((m,T,ee,ke,be,Ie,ge,Pe,pe,xe)=>{p(b,m),p(u,T),p(w,ee),p(U,ke),p(A,be),p(_,Ie),p(B,ge),p(H,Pe),p(q,pe),p(ne,`${xe??""} ‚Üí`)},[()=>i()("onboarding.step3Features.title"),()=>i()("onboarding.step3Features.subtitle"),()=>i()("onboarding.step3Features.marketplace.title"),()=>i()("onboarding.step3Features.marketplace.description"),()=>i()("onboarding.step3Features.p2p.title"),()=>i()("onboarding.step3Features.p2p.description"),()=>i()("onboarding.step3Features.p2p.escrowProtected"),()=>i()("onboarding.step3Features.news.title"),()=>i()("onboarding.step3Features.news.description"),()=>i()("onboarding.step3Features.continue")]),f(g,v),oe(),d()}he(["click"]);var rr=S('<img alt="Profile" class="w-full h-full object-cover"/> <div class="absolute inset-0 bg-background/0 hover:bg-background/40 transition-all flex items-center justify-center opacity-0 hover:opacity-100"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),ar=S('<p class="text-xs mt-2 text-muted-foreground"> </p>'),or=S('<div class="w-full h-full bg-neutral-100 dark:bg-muted flex flex-col items-center justify-center"><div class="w-12 h-12 border-4 border border-t-neutral-900 dark:border-t-white rounded-full animate-spin"></div> <!></div>'),nr=S('<span class="text-3xl font-bold group-hover:opacity-50 transition-opacity"> </span> <div class="opacity-0 group-hover:opacity-100 transition-opacity absolute inset-0 flex items-center justify-center bg-background/40"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),ir=et('<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-muted-foreground"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>'),sr=S('<div class="w-full h-full bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100 transition-colors flex flex-col items-center justify-center gap-2 group"><!></div>'),lr=S('<p class="text-xs text-red-600 dark:text-red-400 mt-2 text-center"> </p>'),dr=S('<div class="w-full"><input type="file" accept="image/*" class="hidden"/> <div role="button" tabindex="0"><!></div> <!></div>');function cr(g,t){ae(t,!0);const i=new lt(t.ndk),n=dt(i);let d,v=ie(ut(t.currentImageUrl||null)),s=ie(!1);async function c(l){if(!l.type.startsWith("image/")){alert("Please select an image file");return}const _=new FileReader;_.onload=M=>{E(v,M.target?.result,!0)},_.readAsDataURL(l);try{await n.upload(l,{fallbackServer:"https://blossom.primal.net"}),n.result?.url&&t.onUploadComplete(n.result.url)}catch(M){console.error("Upload failed:",M),E(v,null)}}function P(l){const M=l.target.files?.[0];M&&c(M)}function b(l){l.preventDefault(),E(s,!0)}function x(){E(s,!1)}async function u(l){l.preventDefault(),E(s,!1);const _=l.dataTransfer?.files[0];_&&await c(_)}function I(){d?.click()}var C=dr(),h=a(C);h.__change=P,st(h,l=>d=l,()=>d);var w=o(h,2);w.__click=I,w.__keydown=l=>l.key==="Enter"&&I();var z=a(w);{var U=l=>{var _=rr(),M=de(_);me(2),F(()=>fe(M,"src",e(v))),f(l,_)},R=l=>{var _=Se(),M=de(_);{var Z=B=>{var O=or(),G=o(a(O),2);{var H=Y=>{var q=ar(),V=a(q);r(q),F(()=>p(V,`${n.progress.percentage??""}%`)),f(Y,q)};L(G,Y=>{n.progress&&Y(H)})}r(O),f(B,O)},J=B=>{var O=sr(),G=a(O);{var H=q=>{var V=nr(),$=de(V),ne=a($,!0);r($),me(2),F(()=>p(ne,t.fallbackInitials)),f(q,V)},Y=q=>{var V=ir();f(q,V)};L(G,q=>{t.fallbackInitials?q(H):q(Y,!1)})}r(O),f(B,O)};L(M,B=>{n.status==="uploading"?B(Z):B(J,!1)},!0)}f(l,_)};L(z,l=>{e(v)&&n.status!=="uploading"?l(U):l(R,!1)})}r(w);var D=o(w,2);{var A=l=>{var _=lr(),M=a(_,!0);r(_),F(()=>p(M,n.error?.message||"Upload failed")),f(l,_)};L(D,l=>{n.status==="error"&&l(A)})}r(C),F(()=>X(w,1,`
      relative w-32 h-32 rounded-full overflow-hidden cursor-pointer
      border-4 border-background
      transition-all duration-200
      ${e(s)?"scale-105 border-foreground":""}
      ${n.status==="uploading"?"pointer-events-none":""}
    `)),Oe("dragover",w,b),Oe("dragleave",w,x),Oe("drop",w,u),f(g,C),oe()}he(["change","click","keydown"]);function vr(g){try{return new URL(g).hostname}catch{return""}}async function ur(g,t){if(!g||!t)return{available:!1,error:"Username and domain are required"};if(!/^[a-z0-9_-]+$/i.test(g))return{available:!1,error:"Username can only contain letters, numbers, underscore, and hyphen"};try{const n=`${t.includes("localhost")||t.includes("test")?"http":"https"}://${t}/.well-known/nostr.json?name=${encodeURIComponent(g)}`,d=await fetch(n);if(d.status===404)return{available:!0};if(d.ok){const v=await d.json();return v.names&&v.names[g]?{available:!1,error:"Username is already taken"}:{available:!0}}return{available:!1,error:"Unable to check availability. Please try again."}}catch(i){return console.error("Error checking NIP-05 availability:",i),{available:!0}}}function gr(g,t){return`${g}@${t}`}var fr=S('<div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),mr=et('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>'),br=S('<div class="px-2 py-1 bg-red-500/10 border-t border-red-500/20"><p class="text-xs text-red-600 dark:text-red-400"> </p></div>'),pr=S("<div> </div>"),xr=S('<div class="space-y-1"><div class="text-xs text-muted-foreground font-medium"> </div> <div class="flex items-center gap-1"><input type="text" class="text-sm text-foreground bg-transparent border-b-2 border hover:border focus:border-primary dark:focus:border-primary outline-none transition-colors flex-1 min-w-0"/> <span class="text-sm text-muted-foreground"> </span></div> <!></div>'),hr=S('<div class="min-h-screen flex flex-col items-center justify-center p-8"><div class="text-center mb-8 max-w-2xl"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-lg text-muted-foreground"> </p></div> <div class="relative flex items-center justify-center gap-6 mb-12"><div class="w-80 bg-card border border rounded-xl overflow-hidden transform -rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OQwX.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OQwW.jpg" alt="Leopoldo L√≥pez" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Leopoldo L√≥pez</h3> <p class="text-sm text-muted-foreground mb-2">‚úì leo@primal.net</p> <p class="text-sm text-muted-foreground">Former Mayor of Caracas (2000-08). Political prisoner 2014-21. Co-founder of World Liberty Congress.</p></div></div></div> <div class="w-96 bg-card border-2 border-foreground rounded-xl overflow-hidden shadow-2xl transform scale-105 z-10"><input type="file" accept="image/*" class="hidden"/> <button type="button" class="h-36 relative w-full group bg-gradient-to-br from-primary-500 to-primary-600"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button> <!> <div class="relative -mt-14 px-6 pb-6"><!> <div class="space-y-3"><div><input type="text" class="text-2xl font-bold bg-transparent border-b-2 border-transparent hover:border !ring-0 outline-none transition-colors w-full text-foreground"/></div> <div><input type="text" class="text-sm text-muted-foreground bg-transparent border-b border-transparent hover:border !ring-0 focus:outline-none transition-colors w-full"/></div> <div><textarea class="text-sm text-muted-foreground bg-transparent border border-transparent hover:border !ring-0 outline-none transition-colors w-full resize-none rounded p-2"></textarea></div> <!></div></div></div> <div class="w-80 bg-card border border rounded-xl overflow-hidden transform rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OTue.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OTkq.jpg" alt="Enderson Sequera" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Enderson Sequera</h3> <p class="text-sm text-muted-foreground mb-2">üáªüá™ Political Scientist</p> <p class="text-sm text-muted-foreground">Political advisor & freedom fighter. Bitcoin is freedom - in the fight against dictatorship it saves lives.</p></div></div></div></div> <button> </button></div>');function kr(g,t){ae(t,!0);const i=()=>qe(Qe,"$t",n),[n,d]=Ze(),v=y(()=>t.inviteRelay&&nt(t.inviteRelay)),s=y(()=>t.inviteRelay?vr(t.inviteRelay):"");let c=ie(""),P=ie(!1),b=ie(null),x=ie(!1),u=null;function I(k){if(E(c,k,!0),!k||!e(s)){E(b,null),E(x,!1);return}u&&clearTimeout(u),E(P,!0),E(b,{type:"info",text:i()("onboarding.step4Profile.availability.checking")},!0),u=setTimeout(async()=>{const K=await ur(k,e(s));K.available?(E(b,{type:"success",text:i()("onboarding.step4Profile.availability.available")},!0),E(x,!0)):(E(b,{type:"error",text:K.error||i()("onboarding.step4Profile.availability.notAvailable")},!0),E(x,!1)),E(P,!1)},500)}const C=y(()=>ue.$currentUser),h=y(()=>e(C)?new lt(ue):null),w=y(()=>e(h)?dt(e(h)):null);let z,U=ie(null);async function R(k){const W=k.target.files?.[0];if(W){if(!e(w)){E(U,"Upload not available. Please ensure you are logged in.");return}if(!W.type.startsWith("image/")){E(U,"Please select an image file");return}if(W.size>5*1024*1024){E(U,"Image size must be less than 5MB");return}E(U,null);try{await e(w).upload(W,{fallbackServer:"https://blossom.primal.net"}),e(w).result?.url&&t.onUpdateProfile({...t.profileData,banner:e(w).result.url})}catch(ce){console.error("Upload failed:",ce),E(U,"Failed to upload banner. Please try again.")}}}function D(k){return k?k.split(" ").map(K=>K[0]).join("").toUpperCase().slice(0,2):"?"}function A(k,K){t.onUpdateProfile({...t.profileData,[k]:K})}async function l(){if(e(x)&&e(c)&&e(s)){const k=gr(e(c),e(s));t.onUpdateProfile({...t.profileData,nip05:k})}t.onNext()}function _(k){t.onUpdateProfile({...t.profileData,picture:k})}var M=hr(),Z=a(M),J=a(Z),B=a(J,!0);r(J);var O=o(J,2),G=a(O,!0);r(O),r(Z);var H=o(Z,2),Y=o(a(H),2),q=a(Y);q.__change=R,st(q,k=>z=k,()=>z);var V=o(q,2);V.__click=()=>z?.click();var $=a(V),ne=a($);{var m=k=>{var K=fr(),W=o(de(K),2),ce=a(W);r(W),F(()=>p(ce,`${e(w).progress?.percentage??""}%`)),f(k,K)},T=k=>{var K=mr();f(k,K)};L(ne,k=>{e(w)?.status==="uploading"?k(m):k(T,!1)})}r($),r(V);var ee=o(V,2);{var ke=k=>{var K=br(),W=a(K),ce=a(W,!0);r(W),r(K),F(()=>p(ce,e(U))),f(k,K)};L(ee,k=>{e(U)&&k(ke)})}var be=o(ee,2),Ie=a(be);{let k=y(()=>D(t.profileData.name));cr(Ie,{get ndk(){return ue},onUploadComplete:_,get currentImageUrl(){return t.profileData.picture},get fallbackInitials(){return e(k)}})}var ge=o(Ie,2),Pe=a(ge),pe=a(Pe);We(pe),pe.__input=k=>A("name",k.currentTarget.value),r(Pe);var xe=o(Pe,2),Ne=a(xe);We(Ne),Ne.__input=k=>A("location",k.currentTarget.value),r(xe);var ze=o(xe,2),Ce=a(ze);gt(Ce),Ce.__input=k=>A("bio",k.currentTarget.value),fe(Ce,"rows",3),r(ze);var Ke=o(ze,2);{var He=k=>{var K=xr(),W=a(K),ce=a(W,!0);r(W);var N=o(W,2),j=a(N);We(j),j.__input=ve=>I(ve.currentTarget.value);var te=o(j,2),re=a(te);r(te),r(N);var se=o(N,2);{var De=ve=>{var le=pr(),Me=a(le,!0);r(le),F(()=>{X(le,1,`text-xs ${e(b).type==="success"?"text-green-600 dark:text-green-400":e(b).type==="error"?"text-red-600 dark:text-red-400":"text-muted-foreground"}`),p(Me,e(b).text)}),f(ve,le)};L(se,ve=>{e(b)&&ve(De)})}r(K),F((ve,le)=>{p(ce,ve),Re(j,e(c)),fe(j,"placeholder",le),p(re,`@${e(s)??""}`)},[()=>i()("onboarding.step4Profile.usernameLabel"),()=>i()("onboarding.step4Profile.usernamePlaceholder")]),f(k,K)};L(Ke,k=>{e(v)&&k(He)})}r(ge),r(be),r(Y),me(2),r(H);var _e=o(H,2);_e.__click=l;var Le=a(_e);r(_e),r(M),F((k,K,W,ce,N,j)=>{p(B,k),p(G,K),V.disabled=e(w)?.status==="uploading",rt(V,t.profileData.banner?`background-image: url(${t.profileData.banner}); background-size: cover; background-position: center;`:""),Re(pe,t.profileData.name),fe(pe,"placeholder",W),Re(Ne,t.profileData.location),fe(Ne,"placeholder",ce),Re(Ce,t.profileData.bio),fe(Ce,"placeholder",N),_e.disabled=!t.profileData.name,X(_e,1,`
      px-8 py-3 rounded-lg font-medium transition-all
      ${t.profileData.name?"bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100":"bg-neutral-100 dark:bg-muted text-muted-foreground cursor-not-allowed"}
    `),p(Le,`${j??""} ‚Üí`)},[()=>i()("onboarding.step4Profile.title"),()=>i()("onboarding.step4Profile.subtitle"),()=>i()("onboarding.step4Profile.namePlaceholder"),()=>i()("onboarding.step4Profile.locationPlaceholder"),()=>i()("onboarding.step4Profile.bioPlaceholder"),()=>i()("onboarding.step4Profile.continue")]),f(g,M),oe(),d()}he(["change","click","input"]);function _r(g,t){const i=t&&nt(t)?[t]:[...Je],n=Math.floor(Date.now()/1e3)-720*60,d=g.$fetchEvents(()=>({filters:{kinds:[1],"#t":["introduction"],since:n},relayUrls:i})),v=y(()=>d?Array.from(d).map(P=>P.id):[]),s=g.$fetchEvents(()=>e(v).length>0?{filters:{"#e":e(v)},relayUrls:i}:void 0),c=y(()=>{if(!d||d.size===0)return[];const P=new Map;if(s)for(const b of s){const x=b.tags.filter(u=>u[0]==="e");for(const u of x){const I=u[1];e(v).includes(I)&&P.set(I,(P.get(I)||0)+1)}}return Array.from(d).map(b=>({event:b,engagementCount:P.get(b.id)||0})).sort((b,x)=>x.engagementCount-b.engagementCount).slice(0,10)});return{introductionPosts:e(c)}}const Te={en:"introduction",es:"bienvenidas",fa:"ŸÖÿπÿ±ŸÅ€å",km:"·ûÄ·û∂·ûö·ûé·üÇ·ûì·û∂·üÜ",sn:"kuzivisa"};function wr(g){if(!g)return Te.en;const t=g.split("-")[0];return Te[t]||Te.en}function yr(g){const t=wr(g);return t===Te.en?["introduction"]:["introduction",t]}var Pr=S('<svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg> <span class="text-muted-foreground"> </span>',1),Cr=S('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg> <span class="text-muted-foreground"> </span>',1),Sr=S('<div class="mt-4 p-3 bg-primary-50 dark:bg-primary-900/10 border border-primary-200 dark:border-primary-800 rounded-lg"><div class="flex items-center justify-between"><div class="flex items-center gap-2 text-sm"><!></div> <button class="text-xs px-2 py-1 rounded hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-colors text-primary dark:text-primary font-medium"> </button></div></div>'),Ir=S('<div class="text-center py-8 text-muted-foreground"><p> </p></div>'),Nr=S('<div class="min-h-screen flex flex-col"><div class="flex-1 px-4 lg:px-8 py-6 max-w-[1400px] mx-auto w-full pb-32 lg:pb-6"><div class="text-center mb-6"><h1 class="text-2xl lg:text-3xl font-bold mb-2"> </h1> <p class="text-muted-foreground"> </p></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:h-[calc(100vh-200px)]"><div class="flex flex-col order-1 lg:order-2"><div class="lg:p-6"><label class="block font-semibold mb-3"> </label> <div class="p-4 bg-card border border rounded-lg"><!></div> <div class="flex items-center justify-between mt-3"><div class="text-xs text-muted-foreground"><!></div> <div class="text-xs"><span> </span></div></div> <!> <div class="hidden lg:flex gap-3 mt-6"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div> <div class="flex flex-col order-2 lg:order-1"><h3 class="font-semibold text-sm text-muted-foreground uppercase tracking-wide mb-4"> </h3> <div class="space-y-3 overflow-y-auto flex-1 pr-2 max-h-[400px] lg:max-h-none"><!></div></div></div></div> <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-card border-t border p-4 z-50"><div class="flex gap-3 max-w-[1400px] mx-auto"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div>');function zr(g,t){ae(t,!0);const i=()=>qe(_t,"$locale",d),n=()=>qe(Qe,"$t",d),[d,v]=Ze();let s=ie(""),c=ie(!1),P=ie(!!t.inviterPubkey);const b=y(()=>e(s).length>10),x=y(()=>e(s).length);let u=ie(null);tt(()=>{if(!t.inviterPubkey){E(u,null);return}ue.fetchUser(t.inviterPubkey).then(N=>{N?.fetchProfile().then(j=>{E(u,j,!0)})})});const I=y(()=>e(u)?.displayName||e(u)?.name||"your inviter"),{introductionPosts:C}=_r(ue,t.inviteRelay);async function h(){if(e(b)){E(c,!0);try{const N=yr(i());let j=e(s).trim();for(const re of N){const se=`#${re}`;j.includes(se)||(j=`${j} ${se}`)}const te={content:j,hashtags:N,mentionInviter:e(P)&&t.inviterPubkey?t.inviterPubkey:void 0};Q.setIntroductionText(JSON.stringify(te)),t.onNext()}catch(N){console.error("Error saving introduction:",N),E(c,!1)}}}var w=Nr(),z=a(w),U=a(z),R=a(U),D=a(R,!0);r(R);var A=o(R,2),l=a(A,!0);r(A),r(U);var _=o(U,2),M=a(_),Z=a(M),J=a(Z),B=a(J,!0);r(J);var O=o(J,2),G=a(O);{let N=y(()=>n()("onboarding.step5Introduction.placeholder"));wt(G,{get placeholder(){return e(N)},get disabled(){return e(c)},get value(){return e(s)},set value(j){E(s,j,!0)}})}r(O);var H=o(O,2),Y=a(H),q=a(Y);{var V=N=>{var j=ft();F(te=>p(j,te),[()=>n()("onboarding.step5Introduction.tipLocation",{values:{location:t.profileData.location}})]),f(N,j)};L(q,N=>{t.profileData.location&&N(V)})}r(Y);var $=o(Y,2),ne=a($),m=a(ne);r(ne),r($),r(H);var T=o(H,2);{var ee=N=>{var j=Sr(),te=a(j),re=a(te),se=a(re);{var De=we=>{var je=Pr(),Ue=o(de(je),2),Ye=a(Ue,!0);r(Ue),F(Ve=>p(Ye,Ve),[()=>n()("onboarding.step5Introduction.inviterNotify",{values:{name:e(I)}})]),f(we,je)},ve=we=>{var je=Cr(),Ue=o(de(je),2),Ye=a(Ue,!0);r(Ue),F(Ve=>p(Ye,Ve),[()=>n()("onboarding.step5Introduction.inviterNoNotify",{values:{name:e(I)}})]),f(we,je)};L(se,we=>{e(P)?we(De):we(ve,!1)})}r(re);var le=o(re,2);le.__click=()=>E(P,!e(P));var Me=a(le,!0);r(le),r(te),r(j),F(we=>p(Me,we),[()=>e(P)?n()("onboarding.step5Introduction.inviterRemove"):n()("onboarding.step5Introduction.inviterAddBack")]),f(N,j)};L(T,N=>{t.inviterPubkey&&N(ee)})}var ke=o(T,2),be=a(ke);be.__click=function(...N){t.onSkip?.apply(this,N)};var Ie=a(be,!0);r(be);var ge=o(be,2);ge.__click=h;var Pe=a(ge,!0);r(ge),r(ke),r(Z),r(M);var pe=o(M,2),xe=a(pe),Ne=a(xe,!0);r(xe);var ze=o(xe,2),Ce=a(ze);{var Ke=N=>{var j=Se(),te=de(j);Ge(te,17,()=>C,re=>re.event.id,(re,se)=>{yt(re,{get event(){return e(se).event}})}),f(N,j)},He=N=>{var j=Ir(),te=a(j),re=a(te,!0);r(te),r(j),F(se=>p(re,se),[()=>n()("onboarding.step5Introduction.loadingIntroductions")]),f(N,j)};L(Ce,N=>{C.length>0?N(Ke):N(He,!1)})}r(ze),r(pe),r(_),r(z);var _e=o(z,2),Le=a(_e),k=a(Le);k.__click=function(...N){t.onSkip?.apply(this,N)};var K=a(k,!0);r(k);var W=o(k,2);W.__click=h;var ce=a(W,!0);r(W),r(Le),r(_e),r(w),F((N,j,te,re,se,De,ve,le,Me)=>{p(D,N),p(l,j),p(B,te),X(ne,1,mt(e(x)>500?"text-red-500":"text-muted-foreground")),p(m,`${e(x)??""} ${re??""}`),p(Ie,se),ge.disabled=!e(b)||e(c),X(ge,1,`
                flex-1 py-3 px-6 rounded-lg font-medium transition-all
                ${e(b)&&!e(c)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
              `),p(Pe,De),p(Ne,ve),p(K,le),W.disabled=!e(b)||e(c),X(W,1,`
          flex-1 py-3 px-6 rounded-lg font-medium transition-all
          ${e(b)&&!e(c)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),p(ce,Me)},[()=>n()("onboarding.step5Introduction.title"),()=>n()("onboarding.step5Introduction.subtitle"),()=>n()("onboarding.step5Introduction.writeLabel"),()=>n()("onboarding.step5Introduction.characters"),()=>n()("onboarding.step5Introduction.skipForNow"),()=>e(c)?n()("onboarding.step5Introduction.publishing"):n()("onboarding.step5Introduction.postIntroduction"),()=>n()("onboarding.step5Introduction.recentIntroductions"),()=>n()("onboarding.step5Introduction.skipForNow"),()=>e(c)?n()("onboarding.step5Introduction.publishing"):n()("onboarding.step5Introduction.postIntroduction")]),f(g,w),oe(),v()}he(["click"]);var Dr=S(`<div class="min-h-screen flex items-center justify-center p-8"><div class="max-w-2xl w-full text-center"><div class="text-7xl mb-6">üéâ</div> <h1 class="text-4xl font-bold mb-4"> </h1> <p class="text-xl text-muted-foreground mb-12">Your voice matters. Your community is here.</p> <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground">People Following</div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground">Follow Packs</div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1">1</div> <div class="text-sm text-muted-foreground">Post Published</div></div></div> <div class="bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-900 dark:to-neutral-800 rounded-xl p-8 mb-8 text-left max-w-lg mx-auto"><h3 class="font-semibold mb-4">What's Next?</h3> <ul class="space-y-3 text-sm"><li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>You can start buying and selling in the marketplace</span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>Join P2P trades with verified community members</span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>Share your stories and earn sats for valuable content</span></li></ul></div> <button class="bg-background dark:bg-white text-foreground dark:text-black px-12 py-4 rounded-lg font-medium text-lg hover:bg-muted dark:hover:bg-neutral-200 transition-colors">Enter Agora ‚Üí</button></div></div>`);function Mr(g,t){ae(t,!0);const i=y(()=>t.selectedPacks.length*25);var n=Dr(),d=a(n),v=o(a(d),2),s=a(v);r(v);var c=o(v,4),P=a(c),b=a(P),x=a(b,!0);r(b),me(2),r(P);var u=o(P,2),I=a(u),C=a(I,!0);r(I),me(2),r(u),me(2),r(c);var h=o(c,2),w=o(a(h),2),z=a(w),U=o(a(z),2),R=a(U);r(U),r(z),me(6),r(w),r(h);var D=o(h,2);D.__click=function(...A){t.onComplete?.apply(this,A)},r(d),r(n),F(()=>{p(s,`Welcome to Agora, ${(t.profileData.name||"Friend")??""}!`),p(x,e(i)),p(C,t.selectedPacks.length),p(R,`Your feed is ready with content from ${e(i)??""} community voices`)}),f(g,n),oe()}he(["click"]);var jr=S('<button class="fixed top-6 left-6 z-50 w-9 h-9 bg-card border border rounded-full flex items-center justify-center hover:bg-accent transition-colors"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button>'),Ur=S('<div class="min-h-screen bg-card"><div class="fixed top-0 left-0 right-0 z-40 bg-card"><div class="h-1 bg-neutral-200 dark:bg-muted"><div class="h-full bg-background dark:bg-white transition-all duration-300 ease-out"></div></div></div> <!> <div class="relative pt-8"><!> <!> <!> <!> <!> <!></div></div>');function Zr(g,t){ae(t,!0);let i=ie(null);const n=y(()=>Q.currentStep),d=y(()=>Q.totalSteps),v=y(()=>e(n)/e(d)*100),s=y(()=>Q.invite),c=y(()=>Q.hasCompletedInviteSetup),P=y(()=>Q.selectedCommunity),b=y(()=>Q.selectedPacks),x=y(()=>Q.profileData);tt(()=>{e(i)||(E(i,xt.generate(),!0),console.log("[Onboarding] ‚úì Generated new keypair, pubkey:",e(i).pubkey))});function u(m){Q.setStep(m),typeof window<"u"&&window.scrollTo(0,0)}function I(){e(n)>Q.minStep&&u(e(n)-1)}async function C(){u(3)}async function h(){u(5)}async function w(){if(!e(i)){console.error("[Onboarding] ‚úó No signer available");return}try{console.log("[Onboarding] Starting onboarding completion..."),console.log("[Onboarding] Logging in..."),await ue.$sessions?.login(e(i)),console.log("[Onboarding] ‚úì Logged in with pubkey:",e(i).pubkey),e(s)&&!e(c)?(console.log("[Onboarding] Invite flow: completing invite setup"),await Q.completeInviteSetup(e(i))):(console.log("[Onboarding] Regular flow: publishing profile and setup"),await Q.publishProfileAndSetup(e(i))),e(b).length>0&&(console.log("[Onboarding] Publishing kind:3 from",e(b).length,"packs"),await Pt(ue,e(b)));const m=Q.introductionText;if(m){console.log("[Onboarding] Publishing introduction post");try{const T=JSON.parse(m),ee=new ot(ue);ee.kind=1,ee.content=T.content,ee.tags=T.hashtags.map(ke=>["t",ke]),T.mentionInviter&&ee.tags.push(["p",T.mentionInviter]),await ee.publish(),console.log("[Onboarding] ‚úì Published introduction")}catch(T){console.error("[Onboarding] ‚úó Error publishing introduction:",T)}}console.log("[Onboarding] ‚úì Onboarding complete"),Q.clear(),ht("/")}catch(m){console.error("[Onboarding] ‚úó Error during onboarding completion:",m)}}var z=Ur(),U=a(z),R=a(U),D=a(R);r(R),r(U);var A=o(U,2);{var l=m=>{var T=jr();T.__click=I,f(m,T)};L(A,m=>{e(n)>(e(s)?3:1)&&m(l)})}var _=o(A,2),M=a(_);{var Z=m=>{zt(m,{get selectedCommunity(){return e(P)},onSelectCommunity:T=>Q.setSelectedCommunity(T),onNext:()=>u(2)})};L(M,m=>{e(n)===1&&!e(s)&&m(Z)})}var J=o(M,2);{var B=m=>{$t(m,{get selectedCommunity(){return e(P)},get selectedPacks(){return e(b)},onSelectPacks:T=>Q.setSelectedPacks(T),onNext:C})};L(J,m=>{e(n)===2&&!e(s)&&m(B)})}var O=o(J,2);{var G=m=>{tr(m,{onNext:()=>u(4)})};L(O,m=>{e(n)===3&&m(G)})}var H=o(O,2);{var Y=m=>{{let T=y(()=>e(s)?.inviteRelay);kr(m,{get profileData(){return e(x)},onUpdateProfile:ee=>Q.setProfileData(ee),onNext:h,get inviteRelay(){return e(T)}})}};L(H,m=>{e(n)===4&&m(Y)})}var q=o(H,2);{var V=m=>{{let T=y(()=>e(s)?.inviter),ee=y(()=>e(s)?.inviteRelay);zr(m,{get profileData(){return e(x)},get inviterPubkey(){return e(T)},get inviteRelay(){return e(ee)},onNext:()=>u(6),onSkip:()=>u(6)})}};L(q,m=>{e(n)===5&&m(V)})}var $=o(q,2);{var ne=m=>{Mr(m,{get selectedPacks(){return e(b)},get profileData(){return e(x)},onComplete:w})};L($,m=>{e(n)===6&&m(ne)})}r(_),r(z),F(()=>rt(D,`width: ${e(v)}%`)),f(g,z),oe()}he(["click"]);export{Zr as component};
