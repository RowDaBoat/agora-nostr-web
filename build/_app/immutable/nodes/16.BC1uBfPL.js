import{d as ft,f as v,a as s,s as B,c as oe,j as wr,t as vt,i as Ce}from"../chunks/DNmf0A2m.js";import{p as Te,f as M,d as r,s as c,a as ae,g as e,b as L,c as Ve,e as a,y as de,r as t,t as V,u as Ge,aH as yr,aJ as Pr,x as Wt,z as Cr}from"../chunks/DpkVnRja.js";import{i as C}from"../chunks/Btb_Ey2R.js";import{e as lt}from"../chunks/DD8s4tVe.js";import{c as J}from"../chunks/CSx53_lc.js";import{c as et,b as jt,e as St,a as Ke,d as Yt,r as st}from"../chunks/Ci0hv7jC.js";import{s as Ut,a as Pt}from"../chunks/DyCGT0HY.js";import{p as Mr}from"../chunks/Uk33IviR.js";import{n as A,w as Ot,e as Gt,f as $r,A as jr,N as Dt,b as Sr}from"../chunks/QTLWRGLp.js";import{N as It}from"../chunks/DiXitoXJ.js";import{U as tt,c as dt}from"../chunks/BYRURnlO.js";import{E as Ur}from"../chunks/DHn-jlDO.js";import{F as zr}from"../chunks/CV9zymzg.js";import{g as $t}from"../chunks/BFZgCa8b.js";import{t as nt}from"../chunks/BHGJODx2.js";import{$ as zt}from"../chunks/CJuHvAJe.js";import{c as it,L as ct}from"../chunks/CLRodnOG.js";import{R as Lr}from"../chunks/B0-zVn1k.js";import{I as kt}from"../chunks/B7jIYntu.js";import{f as Ar}from"../chunks/CR7Fa_Et.js";import{p as Re}from"../chunks/f_qAQkK6.js";import{M as Qt,D as Xt,a as Jt,R as Zt,b as qt,c as er,d as tr,g as rr}from"../chunks/ExIc70cS.js";import{Q as Ft}from"../chunks/BEjQ2UYp.js";import{D as ar}from"../chunks/DuCXCqgL.js";import{D as or,a as sr}from"../chunks/BJCNLf3C.js";import{B as De}from"../chunks/OHIcQ-QL.js";import{M as Br}from"../chunks/Cp8mZpvR.js";import{g as Nr}from"../chunks/Dtp51Kds.js";import{a as Er,b as nr,c as ir,d as lr,e as dr,A as Hr}from"../chunks/B3mHM0sn.js";import{E as ur}from"../chunks/Dp9c8i_H.js";import{H as Or}from"../chunks/BEgNpPxX.js";import{g as Dr}from"../chunks/CsenwR2S.js";import{g as Ir}from"../chunks/C5Sp5Tgr.js";import{C as Fr}from"../chunks/B1ISCy5e.js";import{b as qe}from"../chunks/Cl1e4hnh.js";import{b as Rt}from"../chunks/-Mgh5RB7.js";import{c as Tt,N as Rr}from"../chunks/CwXZxT0m.js";import{D as Tr,a as Vr}from"../chunks/B-DQEjp8.js";import{l as Vt}from"../chunks/C43Cn2wZ.js";var Kr=v('<button class="w-full px-4 py-2.5 text-left text-sm text-muted-foreground hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between gap-2"><span class="truncate"> </span> <!></button>'),Wr=v('<div class="border-t border-border mt-1 pt-1"><div class="px-4 py-2 text-xs text-muted-foreground font-medium"> </div> <!></div>'),Yr=v('<div class="absolute right-0 mt-2 w-64 bg-popover border border-border rounded-lg shadow-xl overflow-hidden z-50"><div class="py-1"><button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> Send Message</button> <div class="border-t border-border my-1"></div> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> </button> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> </button> <div class="border-t border-border my-1"></div> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> </button> <!></div></div>'),Gr=v("<!> <!>",1);function Qr(O,o){Te(o,!0);const S=()=>Pt(zt,"$t",p),[p,u]=Ut(),U=L(()=>new Ot({pubkey:o.pubkey})),k=it(A,()=>A.$currentUser?.pubkey?{filters:[{kinds:[39089,39092],authors:[A.$currentUser.pubkey],limit:100}]}:void 0,{initialLimit:100,pageSize:100}),b=A.$subscribe(()=>A.$currentUser?.pubkey?{filters:[{kinds:[1e4],authors:[A.$currentUser.pubkey],limit:1}],bufferMs:100}:void 0),d=L(()=>k.events.map(h=>({id:h.id||"",title:h.tagValue("title")||"Untitled Pack",pubkeys:h.tags.filter(y=>y[0]==="p").map(y=>y[1])}))),l=L(()=>{const h=b.events[0];return h?h.tags.some(y=>y[0]==="p"&&y[1]===o.pubkey):!1});let g=ae(!1);async function D(h){if(!o.pubkey)return;const y=k.events.find(Y=>Y.id===h);if(y)try{if(y.tags.filter(m=>m[0]==="p").map(m=>m[1]).includes(o.pubkey))return;if(y.tags.push(["p",o.pubkey]),await y.sign(),await y.publishReplaceable(),y.publishStatus==="error"){const j=y.publishError?.relayErrors||{},G=Object.entries(j).map(([X,xe])=>`${X}: ${xe}`).join(`
`);nt.error(`Failed to publish:
${G||"Unknown error"}`);return}nt.success("Added to pack"),o.onClose()}catch(Y){console.error("Failed to add to pack:",Y),nt.error(`Failed to add to pack: ${Y instanceof Error?Y.message:"Unknown error"}`)}}async function n(){if(A.$currentUser?.pubkey)try{let h=b.events[0];if(h||(h=new Gt(A),h.kind=1e4,h.content="",h.tags=[]),e(l)?(h.tags=h.tags.filter(y=>!(y[0]==="p"&&y[1]===o.pubkey)),nt.success("User unmuted")):(h.tags.push(["p",o.pubkey]),nt.success("User muted")),await h.sign(),await h.publishReplaceable(),h.publishStatus==="error"){const Y=h.publishError?.relayErrors||{},m=Object.entries(Y).map(([j,G])=>`${j}: ${G}`).join(`
`);nt.error(`Failed to publish:
${m||"Unknown error"}`);return}o.onClose()}catch(h){console.error("Failed to toggle mute:",h),nt.error(`Failed to ${e(l)?"unmute":"mute"} user: ${h instanceof Error?h.message:"Unknown error"}`)}}function N(){o.onClose(),o.onOpenCreatePack()}function $(){c(g,!0),o.onClose()}function te(){const h=new Ot({pubkey:o.pubkey});$t(`/messages/${h.npub}`),o.onClose()}var E=Gr(),I=M(E);{var W=h=>{var y=Yr(),Y=a(y),m=a(Y);m.__click=te;var j=a(m);kt(j,{name:"message",size:"md",class:"text-primary"}),de(),t(m);var G=r(m,4);G.__click=n;var X=a(G);{let ke=L(()=>e(l)?"speaker":"speaker-muted");kt(X,{get name(){return e(ke)},size:"md",class:"text-red-500"})}var xe=r(X);t(G);var $e=r(G,2);$e.__click=$;var ze=a($e);kt(ze,{name:"alert",size:"md",class:"text-yellow-500"});var Ne=r(ze);t($e);var ve=r($e,4);ve.__click=N;var fe=a(ve);kt(fe,{name:"plus",size:"md",class:"text-primary"});var Le=r(fe);t(ve);var se=r(ve,2);{var Ae=ke=>{var je=Wr(),Me=a(je),Ie=a(Me,!0);t(Me);var we=r(Me,2);lt(we,17,()=>e(d),ne=>ne.id,(ne,pe)=>{const Se=L(()=>e(pe).pubkeys.includes(o.pubkey));var ye=Kr();ye.__click=()=>D(e(pe).id);var H=a(ye),ee=a(H,!0);t(H);var K=r(H,2);{var ie=he=>{kt(he,{name:"check",size:"sm",class:"text-green-500 flex-shrink-0"})};C(K,he=>{e(Se)&&he(ie)})}t(ye),V(()=>{ye.disabled=e(Se),B(ee,e(pe).title)}),s(ne,ye)}),t(je),V(ne=>B(Ie,ne),[()=>S()("followPacks.addToExisting")]),s(ke,je)};C(se,ke=>{e(d).length>0&&ke(Ae)})}t(Y),t(y),V((ke,je,Me)=>{B(xe,` ${ke??""}`),B(Ne,` ${je??""}`),B(Le,` ${Me??""}`)},[()=>e(l)?S()("userDropdown.unmute"):S()("userDropdown.mute"),()=>S()("userDropdown.report"),()=>S()("followPacks.createNew")]),s(h,y)};C(I,h=>{o.isOpen&&h(W)})}var T=r(I,2);Lr(T,{get target(){return e(U)},get open(){return e(g)},onClose:()=>c(g,!1)}),s(O,E),Ve(),u()}ft(["click"]);var Xr=v('<a class="inline-flex items-center gap-2.5 px-3 py-2 rounded-lg bg-card border border-border hover:bg-muted/50 transition-colors text-sm group"><div class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <!></div> <span class="text-gray-400 group-hover:text-gray-300 transition-colors">Invited by <span class="font-medium text-gray-200"> </span></span></a>');function Jr(O,o){Te(o,!0);const S=A.$subscribe(()=>o.pubkey?{filters:[{kinds:[Ar],authors:[o.pubkey],limit:1}],bufferMs:100}:void 0),p=L(()=>S.events[0]),u=L(()=>{if(e(p))return e(p).tags.find(g=>g[0]==="p")?.[1]});let U=ae(void 0),k=ae(null);Ge(()=>{if(!e(u)){c(U,void 0),c(k,null);return}A.fetchUser(e(u)).then(g=>{c(U,g,!0),g?.fetchProfile().then(D=>{c(k,D,!0)})})});var b=oe(),d=M(b);{var l=g=>{var D=Xr(),n=a(D),N=r(a(n),2);J(N,()=>tt.Root,(I,W)=>{W(I,{get ndk(){return A},get pubkey(){return e(u)},children:(T,h)=>{var y=oe(),Y=M(y);J(Y,()=>tt.Avatar,(m,j)=>{j(m,{class:"w-6 h-6 rounded-full"})}),s(T,y)},$$slots:{default:!0}})}),t(n);var $=r(n,2),te=r(a($)),E=a(te,!0);t(te),t($),t(D),V(()=>{et(D,"href",`/p/${e(U).npub}`),B(E,e(k)?.name||e(k)?.displayName||"Anonymous")}),s(g,D)};C(d,g=>{e(u)&&e(U)?.pubkey&&g(l)})}s(O,b),Ve()}function Zr(O){if(!O||O.length<8)return"linear-gradient(135deg, hsl(220, 70%, 50%), hsl(280, 70%, 50%))";const o=O.slice(0,4),S=O.slice(4,8),p=parseInt(o,16)%360,u=parseInt(S,16)%360,U=60+parseInt(O.slice(8,10)||"00",16)%20,k=60+parseInt(O.slice(10,12)||"00",16)%20,b=45+parseInt(O.slice(12,14)||"00",16)%10,d=45+parseInt(O.slice(14,16)||"00",16)%10;return`linear-gradient(135deg, hsl(${p}, ${U}%, ${b}%), hsl(${u}, ${k}%, ${d}%))`}var qr=v('<img alt="Banner" class="w-full h-full object-cover"/>'),ea=v('<button class="p-1 text-muted-foreground hover:text-muted-foreground transition-colors" aria-label="Share profile"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg></button>'),ta=v('<button class="px-4 py-2 rounded-full font-medium transition-colors bg-primary text-foreground hover:bg-primary-700 text-sm"><svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> </button>'),ra=v('<div class="relative" data-user-dropdown=""><button class="p-2 rounded-full border border text-muted-foreground hover:bg-muted transition-colors" aria-label="More options"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),aa=v('<div class="mb-4"><!></div>'),oa=v('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 hover:text-primary"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg> <span> </span></a>'),sa=v('<div class="bg-background border-b border-border"><div class="h-48 sm:h-64 relative"><!></div> <div class="px-4 sm:px-6 pb-4 relative z-10"><div class="flex gap-4 items-start -mt-12 sm:-mt-20 mb-4"><div class="shrink-0"><!></div> <div class="flex-1 mt-13 sm:mt-20 min-w-0"><div class="flex items-start justify-between gap-4 flex-wrap"><div class="flex-1 min-w-0"><h1 class="text-xl sm:text-2xl font-bold text-foreground"> </h1> <div class="flex items-center gap-2 mt-1"><p class="text-muted-foreground"> </p> <!></div> <div class="mt-2"><!></div></div> <div class="flex items-center gap-2"><!> <!></div></div></div></div> <!> <div class="flex flex-wrap gap-4 text-sm text-muted-foreground"><!></div> <div class="flex gap-6 mt-4"><div><span class="font-semibold text-foreground"> </span> <span class="text-muted-foreground ml-1"> </span></div> <div><span class="font-semibold text-foreground"> </span> <span class="text-muted-foreground ml-1"> </span></div></div></div></div>');function na(O,o){Te(o,!0);const S=()=>Pt(zt,"$t",p),[p,u]=Ut();let U=ae(null),k=ae(null);Ge(()=>{if(!o.pubkey){c(U,null),c(k,null);return}A.fetchUser(o.pubkey).then(n=>{c(U,n,!0),n?.fetchProfile().then(N=>{c(k,N,!0)})})});let b=ae(!1);function d(n){n.target.closest("[data-user-dropdown]")||c(b,!1)}var l=oe();wr("click",yr,d);var g=M(l);{var D=n=>{var N=sa(),$=a(N),te=a($);{var E=_=>{var f=qr();V(()=>et(f,"src",e(k).banner)),s(_,f)};C(te,_=>{e(k)?.banner&&_(E)})}t($);var I=r($,2),W=a(I),T=a(W),h=a(T);J(h,()=>tt.Root,(_,f)=>{f(_,{get ndk(){return A},get pubkey(){return o.pubkey},children:(F,Z)=>{var ce=oe(),i=M(ce);J(i,()=>tt.Avatar,(w,P)=>{P(w,{class:"w-24 h-24 sm:w-48 sm:h-48 rounded-full border-4 border-black"})}),s(F,ce)},$$slots:{default:!0}})}),t(T);var y=r(T,2),Y=a(y),m=a(Y),j=a(m),G=a(j,!0);t(j);var X=r(j,2),xe=a(X),$e=a(xe,!0);t(xe);var ze=r(xe,2);{var Ne=_=>{var f=ea();f.__click=function(...F){o.onShareProfile?.apply(this,F)},s(_,f)};C(ze,_=>{o.onShareProfile&&_(Ne)})}t(X);var ve=r(X,2),fe=a(ve);Jr(fe,{get pubkey(){return o.pubkey}}),t(ve),t(m);var Le=r(m,2),se=a(Le);{var Ae=_=>{var f=ta();f.__click=function(...Z){o.onEditProfile?.apply(this,Z)};var F=r(a(f));t(f),V(Z=>B(F,` ${Z??""}`),[()=>S()("profile.editProfile")]),s(_,f)},ke=_=>{zr(_,{get ndk(){return A},get target(){return o.pubkey},showIcon:!1,class:"px-4 py-2 rounded-full font-medium transition-colors bg-accent text-accent-foreground hover:bg-accent/90 text-sm"})};C(se,_=>{o.isOwnProfile&&o.onEditProfile?_(Ae):_(ke,!1)})}var je=r(se,2);{var Me=_=>{var f=ra(),F=a(f);F.__click=ce=>{ce.stopPropagation(),c(b,!e(b))};var Z=r(F,2);Qr(Z,{get pubkey(){return o.pubkey},get isOpen(){return e(b)},onClose:()=>c(b,!1),get onOpenCreatePack(){return o.onOpenCreatePack}}),t(f),s(_,f)};C(je,_=>{!o.isOwnProfile&&A.$currentUser&&o.onOpenCreatePack&&_(Me)})}t(Le),t(Y),t(y),t(W);var Ie=r(W,2);{var we=_=>{var f=aa(),F=a(f);Ur(F,{get ndk(){return A},get content(){return e(k).about},class:"text-muted-foreground"}),t(f),s(_,f)};C(Ie,_=>{e(k)?.about&&_(we)})}var ne=r(Ie,2),pe=a(ne);{var Se=_=>{var f=oa(),F=r(a(f),2),Z=a(F,!0);t(F),t(f),V(ce=>{et(f,"href",e(k).website),B(Z,ce)},[()=>e(k).website.replace(/^https?:\/\//,"")]),s(_,f)};C(pe,_=>{e(k)?.website&&_(Se)})}t(ne);var ye=r(ne,2),H=a(ye),ee=a(H),K=a(ee,!0);t(ee);var ie=r(ee,2),he=a(ie,!0);t(ie),t(H);var be=r(H,2),ue=a(be),Ue=a(ue,!0);t(ue);var re=r(ue,2),z=a(re,!0);t(re),t(be),t(ye),t(I),t(N),V((_,f,F,Z)=>{jt($,_),B(G,e(k)?.name||"Anonymous"),B($e,f),B(K,o.notesCount),B(he,F),B(Ue,o.followingCount),B(z,Z)},[()=>e(k)?.banner?"":`background: ${Zr(o.pubkey)}`,()=>e(k)?.nip05?`@${e(k).nip05.split("@")[0]}`:`${e(U)?.npub.slice(0,12)}...`,()=>S()("profile.tabs.notes"),()=>S()("profile.following")]),s(n,N)};C(g,n=>{o.pubkey&&n(D)})}s(O,l),Ve(),u()}ft(["click"]);var ia=Ce('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),la=Ce('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),da=v('<span class="text-sm font-medium"> </span> <!>',1),ua=Ce('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),ca=Ce('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),va=v('<span class="text-sm font-medium">Copy npub</span> <!>',1),fa=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path></svg> WhatsApp',1),pa=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg> X',1),ga=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg> Telegram',1),ma=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg> Facebook',1),ha=Ce('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> More Options',1),ba=v('<!> <div class="space-y-4"><div class="flex justify-center mb-6"><!></div> <div class="space-y-3"><!> <!></div> <div class="space-y-2"><p class="text-sm text-muted-foreground">Share on:</p> <div class="grid grid-cols-2 gap-3"><!> <!> <!> <!></div> <!></div></div>',1),_a=v('<p class="text-foreground/80 text-sm"> </p>'),xa=Ce('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),ka=Ce('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),wa=v('<span class="text-sm font-medium"> </span> <!>',1),ya=Ce('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Pa=Ce('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),Ca=v('<span class="text-sm font-medium">Copy npub</span> <!>',1),Ma=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path></svg> WhatsApp',1),$a=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg> X',1),ja=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg> Telegram',1),Sa=Ce('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg> Facebook',1),Ua=Ce('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> More Options',1),za=v('<button type="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background shadow-xs hover:bg-accent hover:text-accent-foreground border h-9 px-4 py-2 w-full">Close</button>'),La=v('<!> <div class="space-y-4 px-4"><div class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl p-6 mb-6"><div class="flex flex-col items-center text-foreground"><div class="relative mb-4"><!></div> <h3 class="text-xl font-bold mb-1"> </h3> <!></div></div> <div class="flex justify-center mb-6"><!></div> <div class="space-y-3"><!> <!></div> <div class="space-y-2"><p class="text-sm text-muted-foreground">Share on:</p> <div class="grid grid-cols-2 gap-3"><!> <!> <!> <!></div> <!></div></div> <!>',1);function Aa(O,o){Te(o,!0);let S=Re(o,"isOpen",15);const p=new Qt("(min-width: 768px)");let u=ae(null);Ge(()=>{A.fetchUser(o.pubkey).then(E=>{E?.fetchProfile().then(I=>{c(u,I,!0)})})});let U=ae(!1),k=ae(!1);const b=`https://njump.me/${o.npub}`,d=L(()=>`Find me on Nostr: ${b}`);async function l(E,I){await navigator.clipboard.writeText(E),I==="url"?(c(U,!0),setTimeout(()=>c(U,!1),2e3)):(c(k,!0),setTimeout(()=>c(k,!1),2e3))}function g(E){const I=encodeURIComponent(e(d)),W=encodeURIComponent(b),T={whatsapp:`https://wa.me/?text=${I}`,twitter:`https://twitter.com/intent/tweet?text=${I}`,telegram:`https://t.me/share/url?url=${W}&text=${encodeURIComponent("Find me on Nostr")}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${W}`};window.open(T[E],"_blank")}async function D(){if(navigator.share)try{await navigator.share({title:`${e(u)?.name||"Anonymous"} on Nostr`,text:"Find me on Nostr",url:b})}catch(E){console.error("Error sharing:",E)}}var n=oe(),N=M(n);{var $=E=>{var I=oe(),W=M(I);J(W,()=>Zt,(T,h)=>{h(T,{get open(){return S()},onOpenChange:y=>{S(y),y||o.onClose()},children:(y,Y)=>{var m=oe(),j=M(m);J(j,()=>Xt,(G,X)=>{X(G,{class:"max-w-md",children:(xe,$e)=>{var ze=ba(),Ne=M(ze);J(Ne,()=>or,(H,ee)=>{ee(H,{children:(K,ie)=>{var he=oe(),be=M(he);J(be,()=>Jt,(ue,Ue)=>{Ue(ue,{children:(re,z)=>{de();var _=vt("Share Profile");s(re,_)},$$slots:{default:!0}})}),s(K,he)},$$slots:{default:!0}})});var ve=r(Ne,2),fe=a(ve),Le=a(fe);Ft(Le,{get value(){return b},size:200}),t(fe);var se=r(fe,2),Ae=a(se);De(Ae,{variant:"outline",onclick:()=>l(b,"url"),class:"w-full justify-between",children:(H,ee)=>{var K=da(),ie=M(K),he=a(ie);t(ie);var be=r(ie,2);{var ue=re=>{var z=ia();s(re,z)},Ue=re=>{var z=la();s(re,z)};C(be,re=>{e(U)?re(ue):re(Ue,!1)})}V(re=>B(he,`njump.me/${re??""}...`),[()=>o.npub.slice(0,8)]),s(H,K)},$$slots:{default:!0}});var ke=r(Ae,2);De(ke,{variant:"outline",onclick:()=>l(o.npub,"npub"),class:"w-full justify-between",children:(H,ee)=>{var K=va(),ie=r(M(K),2);{var he=ue=>{var Ue=ua();s(ue,Ue)},be=ue=>{var Ue=ca();s(ue,Ue)};C(ie,ue=>{e(k)?ue(he):ue(be,!1)})}s(H,K)},$$slots:{default:!0}}),t(se);var je=r(se,2),Me=r(a(je),2),Ie=a(Me);De(Ie,{onclick:()=>g("whatsapp"),class:"bg-green-500 hover:bg-green-600 text-white dark:text-white",children:(H,ee)=>{var K=fa();de(),s(H,K)},$$slots:{default:!0}});var we=r(Ie,2);De(we,{variant:"outline",onclick:()=>g("twitter"),children:(H,ee)=>{var K=pa();de(),s(H,K)},$$slots:{default:!0}});var ne=r(we,2);De(ne,{onclick:()=>g("telegram"),class:"bg-blue-500 hover:bg-blue-600 text-white dark:text-white",children:(H,ee)=>{var K=ga();de(),s(H,K)},$$slots:{default:!0}});var pe=r(ne,2);De(pe,{onclick:()=>g("facebook"),class:"bg-blue-600 hover:bg-blue-700 text-white dark:text-white",children:(H,ee)=>{var K=ma();de(),s(H,K)},$$slots:{default:!0}}),t(Me);var Se=r(Me,2);{var ye=H=>{De(H,{onclick:D,class:"w-full mt-3",children:(ee,K)=>{var ie=ha();de(),s(ee,ie)},$$slots:{default:!0}})};C(Se,H=>{typeof navigator<"u"&&navigator.share&&H(ye)})}t(je),t(ve),s(xe,ze)},$$slots:{default:!0}})}),s(y,m)},$$slots:{default:!0}})}),s(E,I)},te=E=>{var I=oe(),W=M(I);J(W,()=>tr,(T,h)=>{h(T,{get open(){return S()},onOpenChange:y=>{S(y),y||o.onClose()},children:(y,Y)=>{var m=oe(),j=M(m);J(j,()=>qt,(G,X)=>{X(G,{children:(xe,$e)=>{var ze=La(),Ne=M(ze);J(Ne,()=>sr,(z,_)=>{_(z,{class:"text-left",children:(f,F)=>{var Z=oe(),ce=M(Z);J(ce,()=>er,(i,w)=>{w(i,{children:(P,Q)=>{de();var pt=vt("Share Profile");s(P,pt)},$$slots:{default:!0}})}),s(f,Z)},$$slots:{default:!0}})});var ve=r(Ne,2),fe=a(ve),Le=a(fe),se=a(Le),Ae=a(se);J(Ae,()=>tt.Root,(z,_)=>{_(z,{get ndk(){return A},get pubkey(){return o.pubkey},children:(f,F)=>{var Z=oe(),ce=M(Z);J(ce,()=>tt.Avatar,(i,w)=>{w(i,{class:"w-20 h-20 ring-4 ring-white/20"})}),s(f,Z)},$$slots:{default:!0}})}),t(se);var ke=r(se,2),je=a(ke,!0);t(ke);var Me=r(ke,2);{var Ie=z=>{var _=_a(),f=a(_);t(_),V(F=>B(f,`@${F??""}`),[()=>e(u).nip05.split("@")[0]]),s(z,_)};C(Me,z=>{e(u)?.nip05&&z(Ie)})}t(Le),t(fe);var we=r(fe,2),ne=a(we);Ft(ne,{get value(){return b},size:200}),t(we);var pe=r(we,2),Se=a(pe);De(Se,{variant:"outline",onclick:()=>l(b,"url"),class:"w-full justify-between",children:(z,_)=>{var f=wa(),F=M(f),Z=a(F);t(F);var ce=r(F,2);{var i=P=>{var Q=xa();s(P,Q)},w=P=>{var Q=ka();s(P,Q)};C(ce,P=>{e(U)?P(i):P(w,!1)})}V(P=>B(Z,`njump.me/${P??""}...`),[()=>o.npub.slice(0,8)]),s(z,f)},$$slots:{default:!0}});var ye=r(Se,2);De(ye,{variant:"outline",onclick:()=>l(o.npub,"npub"),class:"w-full justify-between",children:(z,_)=>{var f=Ca(),F=r(M(f),2);{var Z=i=>{var w=ya();s(i,w)},ce=i=>{var w=Pa();s(i,w)};C(F,i=>{e(k)?i(Z):i(ce,!1)})}s(z,f)},$$slots:{default:!0}}),t(pe);var H=r(pe,2),ee=r(a(H),2),K=a(ee);De(K,{onclick:()=>g("whatsapp"),class:"bg-green-500 hover:bg-green-600 text-white dark:text-white",children:(z,_)=>{var f=Ma();de(),s(z,f)},$$slots:{default:!0}});var ie=r(K,2);De(ie,{variant:"outline",onclick:()=>g("twitter"),children:(z,_)=>{var f=$a();de(),s(z,f)},$$slots:{default:!0}});var he=r(ie,2);De(he,{onclick:()=>g("telegram"),class:"bg-blue-500 hover:bg-blue-600 text-white dark:text-white",children:(z,_)=>{var f=ja();de(),s(z,f)},$$slots:{default:!0}});var be=r(he,2);De(be,{onclick:()=>g("facebook"),class:"bg-blue-600 hover:bg-blue-700 text-white dark:text-white",children:(z,_)=>{var f=Sa();de(),s(z,f)},$$slots:{default:!0}}),t(ee);var ue=r(ee,2);{var Ue=z=>{De(z,{onclick:D,class:"w-full mt-3",children:(_,f)=>{var F=Ua();de(),s(_,F)},$$slots:{default:!0}})};C(ue,z=>{typeof navigator<"u"&&navigator.share&&z(Ue)})}t(H),t(ve);var re=r(ve,2);J(re,()=>ar,(z,_)=>{_(z,{class:"pt-2",children:(f,F)=>{var Z=za();Z.__click=()=>{S(!1),o.onClose()},s(f,Z)},$$slots:{default:!0}})}),V(()=>B(je,e(u)?.name||"Anonymous")),s(xe,ze)},$$slots:{default:!0}})}),s(y,m)},$$slots:{default:!0}})}),s(E,I)};C(N,E=>{p.current?E($):E(te,!1)})}s(O,n),Ve()}ft(["click"]);var Ba=v('<img loading="lazy"/>');function cr(O,o){Te(o,!0);let S=Re(o,"class",3,"");const p=Pr(Er);if(!p)throw new Error("Article.Image must be used within Article.Root");const u=L(()=>p.article.image);var U=oe(),k=M(U);{var b=d=>{var l=Ba();V(g=>{et(l,"src",e(u)),et(l,"alt",p.article.title||"Article cover"),Ke(l,1,g)},[()=>St(dt(S(),"object-cover"))]),s(d,l)};C(k,d=>{e(u)&&d(b)})}s(O,U),Ve()}var Na=v('<div class="flex items-start gap-4 sm:gap-6"><div class="flex-1 min-w-0"><!> <!> <!></div> <div><!></div></div>');function Ea(O,o){Te(o,!0);let S=Re(o,"imageSize",3,"medium"),p=Re(o,"class",3,"");const u=L(()=>{switch(S()){case"small":return"w-32 h-24 sm:w-36 sm:h-28";case"large":return"w-48 h-36 sm:w-56 sm:h-40";default:return"w-40 h-32 sm:w-48 sm:h-36"}}),U=dt("bg-background","group block w-full","p-4 sm:p-6","transition-colors","border-b border-border last:border-b-0","text-left",p()),k=o.onclick?"hover:bg-card/30 cursor-pointer":"";nr(O,{get ndk(){return o.ndk},get article(){return o.article},children:(b,d)=>{var l=oe(),g=M(l);rr(g,()=>o.onclick?"button":"div",!1,(D,n)=>{Yt(D,h=>({"data-article-card-medium":"","data-image-size":S(),type:o.onclick?"button":void 0,role:o.onclick?"button":void 0,onclick:o.onclick,class:h}),[()=>dt(U,k)]);var N=Na(),$=a(N),te=a($);ir(te,{class:"text-xl sm:text-2xl mb-2 font-serif line-clamp-2"});var E=r(te,2);lr(E,{class:"text-sm text-foreground/80 mb-4 leading-relaxed line-clamp-3",maxLength:150});var I=r(E,2);dr(I,{class:"text-xs sm:text-sm"}),t($);var W=r($,2),T=a(W);cr(T,{class:"w-full h-full object-cover"}),t(W),t(N),V(h=>Ke(W,1,h),[()=>St(dt("flex-shrink-0 rounded-lg overflow-hidden",e(u)))]),s(n,N)}),s(b,l)},$$slots:{default:!0}}),Ve()}var Ha=v('<div><!> <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div></div> <div class="p-4 flex flex-col flex-1 min-h-0 text-left"><!> <!> <div class="mt-auto pt-2 border-t border-border"><div class="flex items-center justify-between"><!> <svg width="16" height="16" class="text-primary opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></div></div>',1);function Oa(O,o){Te(o,!0);let S=Re(o,"width",3,"w-[320px]"),p=Re(o,"height",3,"h-[420px]"),u=Re(o,"imageHeight",3,"h-56"),U=Re(o,"class",3,"");const k=dt("article-card-portrait","group flex flex-col flex-shrink-0","rounded-2xl overflow-hidden","bg-card","transition-all duration-300","text-left",S(),p(),U()),b=o.onclick?"hover:bg-muted hover:scale-[1.02] hover:shadow-2xl hover:shadow-primary/10 cursor-pointer":"";nr(O,{get ndk(){return o.ndk},get article(){return o.article},children:(d,l)=>{var g=oe(),D=M(g);rr(D,()=>o.onclick?"button":"div",!1,(n,N)=>{Yt(n,m=>({"data-article-card-portrait":"",type:o.onclick?"button":void 0,role:o.onclick?"button":void 0,onclick:o.onclick,class:m}),[()=>dt(k,b)]);var $=Ha(),te=M($),E=a(te);cr(E,{class:"w-full h-full object-cover"}),de(2),t(te);var I=r(te,2),W=a(I);ir(W,{class:"text-base mb-2 leading-snug font-serif text-left line-clamp-2"});var T=r(W,2);lr(T,{class:"text-xs mb-3 leading-relaxed flex-1 text-left line-clamp-3",maxLength:100});var h=r(T,2),y=a(h),Y=a(y);dr(Y,{class:"text-xs"}),de(2),t(y),t(h),t(I),V(m=>Ke(te,1,m),[()=>St(dt("relative overflow-hidden",u()))]),s(N,$)}),s(d,g)},$$slots:{default:!0}}),Ve()}function Da(O,o){Te(o,!0);let S=Re(o,"variant",3,"default");function p(d){d.preventDefault();const l=o.article.author,g=Nr(o.article,l);window.location.href=g}var u=oe(),U=M(u);{var k=d=>{Hr(d,{get ndk(){return A},get article(){return o.article},onclick:p,height:"h-96",class:"mb-6"})},b=d=>{var l=oe(),g=M(l);{var D=N=>{Oa(N,{get ndk(){return A},get article(){return o.article},onclick:p,class:"hover:shadow-lg transition-shadow"})},n=N=>{{let $=L(()=>S()==="compact"?"small":"medium");Ea(N,{get ndk(){return A},get article(){return o.article},get imageSize(){return e($)},onclick:p,class:"hover:bg-accent/50 transition-colors"})}};C(g,N=>{S()==="portrait"?N(D):N(n,!1)},!0)}s(d,l)};C(U,d=>{S()==="hero"?d(k):d(b,!1)})}s(O,u),Ve()}var Ia=v('<div class="divide-y divide-neutral-800/50"></div>');function Fa(O,o){Te(o,!0);const S=Re(o,"emptyMessage",3,"No articles yet");var p=oe(),u=M(p);{var U=b=>{ur(b,{icon:"article",get title(){return S()}})},k=b=>{var d=Ia();lt(d,21,()=>o.articles,l=>l.id,(l,g)=>{Da(l,{get article(){return e(g)}})}),t(d),s(b,d)};C(u,b=>{o.articles.length===0?b(U):b(k,!1)})}s(O,p),Ve()}var Ra=v('<div class="divide-y divide-neutral-800/50"></div>');function Ta(O,o){Te(o,!0);const S=Re(o,"emptyMessage",3,"No highlights yet");var p=oe(),u=M(p);{var U=b=>{ur(b,{icon:"highlight",get title(){return S()}})},k=b=>{var d=Ra();lt(d,21,()=>o.highlights,l=>l.id,(l,g)=>{Or(l,{get event(){return e(g)}})}),t(d),s(b,d)};C(u,b=>{o.highlights.length===0?b(U):b(k,!1)})}s(O,p),Ve()}var Va=v('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),Ka=v('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),Wa=v('<button type="button" class="relative cursor-pointer"><!></button>'),Ya=v('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),Ga=v('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>');function Qa(O,o){Te(o,!0),Re(o,"variant",3,"default");const S=L(()=>Dr(o.pack)),p=L(()=>o.pack.tagValue("title")||"Untitled Pack"),u=L(()=>o.pack.tagValue("description")),U=L(()=>o.pack.tagValue("image")),k=L(()=>o.pack.tags.filter(m=>m[0]==="p").map(m=>m[1]));function b(){$t(e(S))}var d=Ga();d.__click=b,d.__keydown=m=>m.key==="Enter"&&b();var l=a(d);{var g=m=>{var j=Va(),G=a(j);t(j),V(()=>{et(G,"src",e(U)),et(G,"alt",e(p))}),s(m,j)};C(l,m=>{e(U)&&m(g)})}var D=r(l,2),n=a(D),N=a(n),$=a(N,!0);t(N);var te=r(N,2),E=a(te);t(te),t(n);var I=r(n,2);{var W=m=>{var j=Ka(),G=a(j,!0);t(j),V(()=>B(G,e(u))),s(m,j)};C(I,m=>{e(u)&&m(W)})}var T=r(I,2),h=a(T);lt(h,18,()=>e(k).slice(0,4),m=>m,(m,j,G)=>{var X=Wa();X.__click=$e=>{$e.stopPropagation(),$t(Ir(j))};var xe=a(X);J(xe,()=>tt.Root,($e,ze)=>{ze($e,{get ndk(){return A},get pubkey(){return j},children:(Ne,ve)=>{var fe=oe(),Le=M(fe);J(Le,()=>tt.Avatar,(se,Ae)=>{Ae(se,{class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"})}),s(Ne,fe)},$$slots:{default:!0}})}),t(X),V(()=>jt(X,`z-index: ${4-e(G)}`)),s(m,X)});var y=r(h,2);{var Y=m=>{var j=Ya(),G=a(j),X=a(G);t(G),t(j),V(()=>B(X,`+${e(k).length-4}`)),s(m,j)};C(y,m=>{e(k).length>4&&m(Y)})}t(T),t(D),t(d),V(()=>{B($,e(p)),B(E,`${e(k).length??""} members`)}),s(O,d),Ve()}ft(["click","keydown"]);var Xa=v('<div class="bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-sm font-medium text-green-800 dark:text-green-200">Profile updated successfully!</span></div>'),Ja=v('<div class="bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3"><svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-medium text-red-800 dark:text-red-200"> </span></div>'),Za=v('<div class="w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),qa=v('<svg class="w-10 h-10 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-foreground text-sm font-medium">Click to upload banner</span>',1),eo=v('<img alt="Profile" class="w-full h-full object-cover"/>'),to=v('<span class="text-foreground text-2xl font-bold"> </span>'),ro=v('<div class="flex flex-col items-center gap-1"><div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-xs"> </span></div>'),ao=Ce('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),oo=v('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span>Saving...</span>',1),so=v("<span>Save Profile</span>"),no=v('<div class="flex justify-end pt-4"><button type="button" class="px-6 py-3 bg-primary hover:bg-accent-dark text-foreground font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!></button></div>'),io=v('<div class="max-w-2xl mx-auto space-y-8"><!> <!> <div class="space-y-2"><label class="block text-sm font-medium text-foreground">Banner Image</label> <input type="file" accept="image/*" class="hidden"/> <button type="button" class="w-full h-48 rounded-xl overflow-hidden relative group bg-gradient-to-br from-primary-500 to-primary-600 hover:opacity-90 transition-opacity"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button></div> <div class="space-y-2"><label class="block text-sm font-medium text-foreground">Profile Picture</label> <input type="file" accept="image/*" class="hidden"/> <div class="flex items-center gap-4"><button type="button" class="w-24 h-24 rounded-full overflow-hidden relative group bg-gradient-to-br from-primary-500 to-primary-600 hover:ring-4 hover:ring-orange-500/20 transition-all flex items-center justify-center"><!> <div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"><!></div></button> <div class="flex-1"><input type="url" placeholder="Or paste image URL" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div></div></div> <div class="space-y-2"><label for="name" class="block text-sm font-medium text-foreground">Name</label> <input id="name" type="text" placeholder="Satoshi Nakamoto" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="displayName" class="block text-sm font-medium text-foreground">Display Name <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="displayName" type="text" placeholder="satoshi" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="about-textarea" class="block text-sm font-medium text-foreground">About</label> <textarea id="about-textarea" placeholder="Tell the world about yourself..." rows="5" class="w-full px-4 py-3 rounded-lg border border bg-card text-foreground placeholder-neutral-500 resize-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"></textarea></div> <div class="space-y-2"><label for="nip05" class="block text-sm font-medium text-foreground">NIP-05 Verification <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="nip05" type="text" placeholder="name@domain.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="lud16" class="block text-sm font-medium text-foreground">Lightning Address <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="lud16" type="text" placeholder="name@getalby.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="website" class="block text-sm font-medium text-foreground">Website <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="website" type="url" placeholder="https://example.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="hashtags" class="block text-sm font-medium text-foreground">Interest Hashtags <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="hashtags" type="text" placeholder="bitcoin, nostr, freedom (comma-separated)" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/> <p class="text-xs text-muted-foreground">Add hashtags that describe your interests. Separate multiple tags with commas.</p></div> <!></div>');function Kt(O,o){Te(o,!0);let S=Re(o,"hideSubmitButton",3,!1),p=L(()=>A.$currentUser),u=ae(null);Ge(()=>{const i=e(p)?.pubkey;if(!i){c(u,null);return}A.fetchUser(i).then(w=>{w?.fetchProfile().then(P=>{c(u,P,!0)})})});let U=ae(null);Ge(()=>{if(!e(p)?.pubkey){c(U,null);return}A.fetchEvent({kinds:[0],authors:[e(p).pubkey]}).then(i=>{c(U,i||null,!0)})});let k=ae(!1),b=ae(!1),d=ae(null),l=L(()=>e(p)?new Rr(A):null),g=L(()=>e(l)?Tt(e(l)):null),D=L(()=>e(l)?Tt(e(l)):null),n=ae(Wt({name:e(u)?.name||"",displayName:e(u)?.displayName||"",about:e(u)?.about||"",picture:e(u)?.image||"",banner:e(u)?.banner||"",nip05:e(u)?.nip05||"",lud16:e(u)?.lud16||"",website:e(u)?.website||"",hashtags:""}));Ge(()=>{if(e(u)&&(e(u).name||e(u).displayName||e(u).about||e(u).image||e(u).banner)){const i=e(U)?.tags?.filter(w=>w[0]==="t")?.map(w=>w[1])?.join(", ")||"";c(n,{name:e(u).name||"",displayName:e(u).displayName||"",about:e(u).about||"",picture:e(u).image||"",banner:e(u).banner||"",nip05:e(u).nip05||"",lud16:e(u).lud16||"",website:e(u).website||"",hashtags:i},!0)}}),Ge(()=>{o.onSubmit&&o.onSubmit(I)}),Ge(()=>{if(o.onFormStateChange){const i=e(g)?.status==="uploading"||e(D)?.status==="uploading";o.onFormStateChange({isSubmitting:e(k),isUploading:i})}});let N,$;async function te(i){const P=i.target.files?.[0];if(P){if(!e(g)){c(d,"Upload not available. Please ensure you are logged in.");return}if(!P.type.startsWith("image/")){c(d,"Please select an image file");return}c(d,null);try{const Q={fallbackServer:"https://blossom.primal.net"};console.log("Calling pictureUpload.upload with options:",Q),await e(g).upload(P,Q),e(g).result?.url&&(e(n).picture=e(g).result.url)}catch(Q){console.error("Upload failed:",Q),c(d,"Failed to upload image. Please try again.")}}}async function E(i){const P=i.target.files?.[0];if(P){if(!e(D)){c(d,"Upload not available. Please ensure you are logged in.");return}if(!P.type.startsWith("image/")){c(d,"Please select an image file");return}if(P.size>5*1024*1024){c(d,"Image size must be less than 5MB");return}c(d,null);try{await e(D).upload(P,{fallbackServer:"https://blossom.primal.net"}),e(D).result?.url&&(e(n).banner=e(D).result.url)}catch(Q){console.error("Upload failed:",Q),c(d,"Failed to upload banner. Please try again.")}}}async function I(){if(!A.signer){c(d,"No signer available");return}c(k,!0),c(d,null),c(b,!1);try{const i=new Gt(A);if(i.kind=0,i.content=JSON.stringify({name:e(n).name,display_name:e(n).displayName,about:e(n).about,picture:e(n).picture,banner:e(n).banner,nip05:e(n).nip05,lud16:e(n).lud16,website:e(n).website}),e(n).hashtags.trim()){const P=e(n).hashtags.split(",").map(Q=>Q.trim().toLowerCase()).filter(Q=>Q.length>0);i.tags=P.map(Q=>["t",Q])}await i.publishReplaceable();const w=$r.fromRelayUrls(["wss://purplepag.es/",...jr],A);i.publishReplaceable(w),c(b,!0),setTimeout(()=>c(b,!1),3e3)}catch(i){console.error("Failed to save profile:",i),c(d,"Failed to save profile. Please try again.")}finally{c(k,!1)}}function W(i){return i?i.split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2):"?"}var T=io(),h=a(T);{var y=i=>{var w=Xa();s(i,w)};C(h,i=>{e(b)&&i(y)})}var Y=r(h,2);{var m=i=>{var w=Ja(),P=r(a(w),2),Q=a(P,!0);t(P),t(w),V(()=>B(Q,e(d))),s(i,w)};C(Y,i=>{e(d)&&i(m)})}var j=r(Y,2),G=r(a(j),2);G.__change=E,Rt(G,i=>$=i,()=>$);var X=r(G,2);X.__click=()=>$?.click();var xe=a(X),$e=a(xe);{var ze=i=>{var w=Za(),P=r(M(w),2),Q=a(P);t(P),V(()=>B(Q,`${e(D).progress?.percentage??""}%`)),s(i,w)},Ne=i=>{var w=qa();de(2),s(i,w)};C($e,i=>{e(D)?.status==="uploading"?i(ze):i(Ne,!1)})}t(xe),t(X),t(j);var ve=r(j,2),fe=r(a(ve),2);fe.__change=te,Rt(fe,i=>N=i,()=>N);var Le=r(fe,2),se=a(Le);se.__click=()=>N?.click();var Ae=a(se);{var ke=i=>{var w=eo();V(()=>et(w,"src",e(n).picture)),s(i,w)},je=i=>{var w=to(),P=a(w,!0);t(w),V(Q=>B(P,Q),[()=>W(e(n).name)]),s(i,w)};C(Ae,i=>{e(n).picture?i(ke):i(je,!1)})}var Me=r(Ae,2),Ie=a(Me);{var we=i=>{var w=ro(),P=r(a(w),2),Q=a(P);t(P),t(w),V(()=>B(Q,`${e(g).progress?.percentage??""}%`)),s(i,w)},ne=i=>{var w=ao();s(i,w)};C(Ie,i=>{e(g)?.status==="uploading"?i(we):i(ne,!1)})}t(Me),t(se);var pe=r(se,2),Se=a(pe);st(Se),t(pe),t(Le),t(ve);var ye=r(ve,2),H=r(a(ye),2);st(H),t(ye);var ee=r(ye,2),K=r(a(ee),2);st(K),t(ee);var ie=r(ee,2),he=r(a(ie),2);Cr(he),t(ie);var be=r(ie,2),ue=r(a(be),2);st(ue),t(be);var Ue=r(be,2),re=r(a(Ue),2);st(re),t(Ue);var z=r(Ue,2),_=r(a(z),2);st(_),t(z);var f=r(z,2),F=r(a(f),2);st(F),de(2),t(f);var Z=r(f,2);{var ce=i=>{var w=no(),P=a(w);P.__click=I;var Q=a(P);{var pt=Qe=>{var mt=oo();de(2),s(Qe,mt)},gt=Qe=>{var mt=so();s(Qe,mt)};C(Q,Qe=>{e(k)?Qe(pt):Qe(gt,!1)})}t(P),t(w),V(()=>P.disabled=e(k)||e(g)?.status==="uploading"||e(D)?.status==="uploading"),s(i,w)};C(Z,i=>{S()||i(ce)})}t(T),V(()=>{X.disabled=e(D)?.status==="uploading",jt(X,e(n).banner?`background-image: url(${e(n).banner}); background-size: cover; background-position: center;`:""),se.disabled=e(g)?.status==="uploading",Se.disabled=e(g)?.status==="uploading"}),qe(Se,()=>e(n).picture,i=>e(n).picture=i),qe(H,()=>e(n).name,i=>e(n).name=i),qe(K,()=>e(n).displayName,i=>e(n).displayName=i),qe(he,()=>e(n).about,i=>e(n).about=i),qe(ue,()=>e(n).nip05,i=>e(n).nip05=i),qe(re,()=>e(n).lud16,i=>e(n).lud16=i),qe(_,()=>e(n).website,i=>e(n).website=i),qe(F,()=>e(n).hashtags,i=>e(n).hashtags=i),s(O,T),Ve()}ft(["change","click"]);var lo=v('<div class="text-center py-8 text-muted-foreground"> </div>'),uo=v('<div class="divide-y divide-neutral-800/50"></div>'),co=v("<!> <!>",1),vo=v('<div class="text-center py-8 text-muted-foreground"> </div>'),fo=v('<div class="divide-y divide-neutral-800/50"></div>'),po=v("<!> <!>",1),go=v('<div class="sm:p-4"><!></div> <!>',1),mo=v("<!> <!>",1),ho=v("<!> <!>",1),bo=v('<div class="grid gap-4 md:grid-cols-2"></div>'),_o=v('<div class="text-center py-8 text-muted-foreground"> </div>'),xo=v('<div class="p-4 space-y-4"><div class="flex gap-2 mb-4"><button> </button> <button> </button> <button> </button></div> <!></div> <!>',1),ko=v("<!> <!>",1),wo=v('<!> <div class="py-4"><!></div>',1),yo=v("<!> <!>",1),Po=v('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span>Saving...</span>',1),Co=v("<span>Save Profile</span>"),Mo=v('<button type="button" class="w-full px-6 py-3 bg-primary hover:bg-accent-dark text-foreground font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button>'),$o=v('<!> <div class="overflow-y-auto px-4 pb-4"><!></div> <!>',1),jo=v('<div class="w-full"><!> <div class="sticky top-0 z-30 bg-background/80 backdrop-blur-sm border-b border-border"><div class="flex justify-around lg:justify-start px-2 lg:px-4 overflow-x-auto"><button aria-label="Notes"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Replies"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Media"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Articles"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Highlights"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Follow Packs"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <span class="hidden lg:inline"> </span></button></div></div> <div><!> <!> <!> <!> <!> <!></div> <!> <!> <!></div>');function ps(O,o){Te(o,!0);const S=()=>Pt(Mr,"$page",u),p=()=>Pt(zt,"$t",u),[u,U]=Ut(),k=L(()=>S().params.identifier);let b=ae(void 0),d=ae(null);Ge(()=>{A.fetchUser(e(k)).then(x=>{c(b,x,!0),x?.pubkey&&A.fetchUser(x.pubkey).then(R=>{R?.fetchProfile().then(q=>{c(d,q,!0)})})})});const l=L(()=>e(b)?.pubkey),g=L(()=>A.$currentPubkey===e(l)),D=new Qt("(min-width: 768px)");let n=ae("notes"),N=ae(!1),$=ae("all"),te=ae(!1),E=ae(!1),I=ae(null),W=ae(Wt({isSubmitting:!1,isUploading:!1}));const T=it(A,()=>e(l)?{filters:[{kinds:[Dt.Text],authors:[e(l)],limit:200}]}:void 0,{initialLimit:20,pageSize:20}),h=it(A,()=>e(n)==="media"&&e(l)?{filters:[{kinds:[20,21,22],authors:[e(l)],limit:200}]}:void 0,{initialLimit:30,pageSize:30}),y=it(A,()=>e(n)==="articles"&&e(l)?{filters:[{kinds:[Dt.Article],authors:[e(l)],limit:100}]}:void 0,{initialLimit:10,pageSize:10}),Y=it(A,()=>e(n)==="highlights"&&e(l)?{filters:[{kinds:[9802],authors:[e(l)],limit:100}]}:void 0,{initialLimit:10,pageSize:10}),m=it(A,()=>e(n)==="packs"&&e(l)?{filters:[{kinds:[39089,39092],authors:[e(l)],limit:100}]}:void 0,{initialLimit:20,pageSize:20}),j=it(A,()=>e(n)==="packs"&&e(l)?{filters:[{kinds:[39089,39092],"#p":[e(l)],limit:100}]}:void 0,{initialLimit:20,pageSize:20}),G=A.$subscribe(()=>e(l)?{filters:[{kinds:[3],authors:[e(l)],limit:1}],bufferMs:100}:void 0),X=L(()=>{const x=G.events[0];return x?x.tags.filter(R=>R[0]==="p").length:0}),xe=L(()=>T.events.filter(x=>!x.tags.some(R=>R[0]==="e"))),$e=L(()=>T.events.filter(x=>x.tags.some(R=>R[0]==="e")));function ze(x){return/(https?:\/\/[^\s]+\.(jpg|jpeg|png|gif|webp|svg|avif|mp4|webm|mov|avi|mkv))/gi.test(x)}const Ne=L(()=>T.allEvents.filter(x=>ze(x.content))),ve=L(()=>[...h.events,...e(Ne)]),fe=L(()=>y.events.map(x=>Sr.from(x))),Le=L(()=>Y.events),se=L(()=>m.events),Ae=L(()=>j.events),ke=L(()=>[...e(se),...e(Ae)]),je=L(()=>e($)==="created"?e(se):e($)==="appears"?e(Ae):e(ke)),Me=L(()=>e(b)?.npub||"");function Ie(){c(te,!0)}function we(){e(n)==="notes"||e(n)==="replies"?T.loadMore():e(n)==="media"?h.loadMore():e(n)==="articles"?y.loadMore():e(n)==="highlights"?Y.loadMore():e(n)==="packs"&&(e($)==="created"?m.loadMore():(e($)==="appears"||m.loadMore(),j.loadMore()))}const ne=L(()=>e(n)==="notes"||e(n)==="replies"?T.hasMore:e(n)==="media"?h.hasMore:e(n)==="articles"?y.hasMore:e(n)==="highlights"?Y.hasMore:e(n)==="packs"?e($)==="created"?m.hasMore:e($)==="appears"?j.hasMore:m.hasMore||j.hasMore:!1),pe=L(()=>e(n)==="notes"||e(n)==="replies"?T.isLoading:e(n)==="media"?h.isLoading:e(n)==="articles"?y.isLoading:e(n)==="highlights"?Y.isLoading:e(n)==="packs"?m.isLoading||j.isLoading:!1);Ge(()=>(Vt.setProfileMode(),()=>{Vt.reset()}));var Se=jo(),ye=a(Se);na(ye,{get pubkey(){return e(l)},get isOwnProfile(){return e(g)},get notesCount(){return T.allEvents.length},get followingCount(){return e(X)},onEditProfile:()=>c(E,!0),onShareProfile:()=>c(N,!0),onOpenCreatePack:Ie});var H=r(ye,2),ee=a(H),K=a(ee);K.__click=()=>c(n,"notes");var ie=r(a(K),2),he=a(ie,!0);t(ie),t(K);var be=r(K,2);be.__click=()=>c(n,"replies");var ue=r(a(be),2),Ue=a(ue,!0);t(ue),t(be);var re=r(be,2);re.__click=()=>c(n,"media");var z=r(a(re),2),_=a(z,!0);t(z),t(re);var f=r(re,2);f.__click=()=>c(n,"articles");var F=r(a(f),2),Z=a(F,!0);t(F),t(f);var ce=r(f,2);ce.__click=()=>c(n,"highlights");var i=r(a(ce),2),w=a(i,!0);t(i),t(ce);var P=r(ce,2);P.__click=()=>c(n,"packs");var Q=r(a(P),2),pt=a(Q,!0);t(Q),t(P),t(ee),t(H);var gt=r(H,2),Qe=a(gt);{var mt=x=>{var R=co(),q=M(R);{var Pe=me=>{var le=lo(),_e=a(le,!0);t(le),V(Fe=>B(_e,Fe),[()=>p()("profile.emptyStates.noNotes")]),s(me,le)},ge=me=>{var le=uo();lt(le,21,()=>e(xe),_e=>_e.id,(_e,Fe)=>{It(_e,{get event(){return e(Fe)}})}),t(le),s(me,le)};C(q,me=>{e(xe).length===0?me(Pe):me(ge,!1)})}var Ee=r(q,2);ct(Ee,{onIntersect:we,get hasMore(){return e(ne)},get isLoading(){return e(pe)}}),s(x,R)};C(Qe,x=>{e(n)==="notes"&&x(mt)})}var Lt=r(Qe,2);{var vr=x=>{var R=po(),q=M(R);{var Pe=me=>{var le=vo(),_e=a(le,!0);t(le),V(Fe=>B(_e,Fe),[()=>p()("profile.emptyStates.noReplies")]),s(me,le)},ge=me=>{var le=fo();lt(le,21,()=>e($e),_e=>_e.id,(_e,Fe)=>{It(_e,{get event(){return e(Fe)}})}),t(le),s(me,le)};C(q,me=>{e($e).length===0?me(Pe):me(ge,!1)})}var Ee=r(q,2);ct(Ee,{onIntersect:we,get hasMore(){return e(ne)},get isLoading(){return e(pe)}}),s(x,R)};C(Lt,x=>{e(n)==="replies"&&x(vr)})}var At=r(Lt,2);{var fr=x=>{var R=go(),q=M(R),Pe=a(q);Br(Pe,{get events(){return e(ve)}}),t(q);var ge=r(q,2);ct(ge,{onIntersect:we,get hasMore(){return e(ne)},get isLoading(){return e(pe)}}),s(x,R)};C(At,x=>{e(n)==="media"&&x(fr)})}var Bt=r(At,2);{var pr=x=>{var R=mo(),q=M(R);{let ge=L(()=>e(g)?p()("profile.emptyStates.noArticlesOwn"):p()("profile.emptyStates.noArticlesUser"));Fa(q,{get articles(){return e(fe)},get emptyMessage(){return e(ge)}})}var Pe=r(q,2);ct(Pe,{onIntersect:we,get hasMore(){return e(ne)},get isLoading(){return e(pe)}}),s(x,R)};C(Bt,x=>{e(n)==="articles"&&x(pr)})}var Nt=r(Bt,2);{var gr=x=>{var R=ho(),q=M(R);{let ge=L(()=>e(g)?p()("profile.emptyStates.noHighlightsOwn"):p()("profile.emptyStates.noHighlightsUser"));Ta(q,{get highlights(){return e(Le)},get emptyMessage(){return e(ge)}})}var Pe=r(q,2);ct(Pe,{onIntersect:we,get hasMore(){return e(ne)},get isLoading(){return e(pe)}}),s(x,R)};C(Nt,x=>{e(n)==="highlights"&&x(gr)})}var mr=r(Nt,2);{var hr=x=>{var R=xo(),q=M(R),Pe=a(q),ge=a(Pe);ge.__click=()=>c($,"all");var Ee=a(ge,!0);t(ge);var me=r(ge,2);me.__click=()=>c($,"created");var le=a(me,!0);t(me);var _e=r(me,2);_e.__click=()=>c($,"appears");var Fe=a(_e,!0);t(_e),t(Pe);var ht=r(Pe,2);{var bt=He=>{var Be=bo();lt(Be,21,()=>e(je),We=>We.id,(We,at)=>{Qa(We,{get pack(){return e(at)},variant:"compact"})}),t(Be),s(He,Be)},Ct=He=>{var Be=_o(),We=a(Be,!0);t(Be),V(at=>B(We,at),[()=>e($)==="created"?e(g)?p()("profile.emptyStates.noPacksCreatedOwn"):p()("profile.emptyStates.noPacksCreatedUser",{username:e(d)?.name||"user"}):e($)==="appears"?e(g)?p()("profile.emptyStates.noPacksAppearsOwn"):p()("profile.emptyStates.noPacksAppearsUser",{username:e(d)?.name||"user"}):p()("profile.emptyStates.noPacksFound")]),s(He,Be)};C(ht,He=>{e(je).length>0?He(bt):He(Ct,!1)})}t(q);var rt=r(q,2);ct(rt,{onIntersect:we,get hasMore(){return e(ne)},get isLoading(){return e(pe)}}),V((He,Be,We)=>{Ke(ge,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e($)==="all"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),B(Ee,He),Ke(me,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e($)==="created"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),B(le,Be),Ke(_e,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e($)==="appears"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),B(Fe,We)},[()=>p()("profile.tabs.all"),()=>e(g)?p()("profile.tabs.byYou"):p()("profile.tabs.byUser",{username:e(d)?.name||e(d)?.displayName||e(l).slice(0,8)}),()=>e(g)?p()("profile.tabs.withYou"):p()("profile.tabs.withUser",{username:e(d)?.name||e(d)?.displayName||e(l).slice(0,8)})]),s(x,R)};C(mr,x=>{e(n)==="packs"&&x(hr)})}t(gt);var Et=r(gt,2);{var br=x=>{Aa(x,{get isOpen(){return e(N)},onClose:()=>c(N,!1),get pubkey(){return e(l)},get npub(){return e(Me)}})};C(Et,x=>{e(l)&&x(br)})}var Ht=r(Et,2);Fr(Ht,{get initialPubkey(){return e(l)},get open(){return e(te)},set open(x){c(te,x,!0)}});var _r=r(Ht,2);{var xr=x=>{var R=oe(),q=M(R);J(q,()=>Zt,(Pe,ge)=>{ge(Pe,{get open(){return e(E)},set open(Ee){c(E,Ee,!0)},children:(Ee,me)=>{var le=oe(),_e=M(le);J(_e,()=>Xt,(Fe,ht)=>{ht(Fe,{class:"max-w-2xl max-h-[90vh] overflow-y-auto",onClose:()=>c(E,!1),children:(bt,Ct)=>{var rt=wo(),He=M(rt);J(He,()=>or,(at,Xe)=>{Xe(at,{children:(_t,wt)=>{var yt=ko(),Ye=M(yt);J(Ye,()=>Jt,(ot,Je)=>{Je(ot,{children:(Oe,Ze)=>{de();var xt=vt("Edit Profile");s(Oe,xt)},$$slots:{default:!0}})});var ut=r(Ye,2);J(ut,()=>Tr,(ot,Je)=>{Je(ot,{children:(Oe,Ze)=>{de();var xt=vt("Update your profile information and settings");s(Oe,xt)},$$slots:{default:!0}})}),s(_t,yt)},$$slots:{default:!0}})});var Be=r(He,2),We=a(Be);Kt(We,{}),t(Be),s(bt,rt)},$$slots:{default:!0}})}),s(Ee,le)},$$slots:{default:!0}})}),s(x,R)},kr=x=>{var R=oe(),q=M(R);J(q,()=>tr,(Pe,ge)=>{ge(Pe,{get open(){return e(E)},set open(Ee){c(E,Ee,!0)},children:(Ee,me)=>{var le=oe(),_e=M(le);J(_e,()=>qt,(Fe,ht)=>{ht(Fe,{children:(bt,Ct)=>{var rt=$o(),He=M(rt);J(He,()=>sr,(Xe,_t)=>{_t(Xe,{class:"text-left",children:(wt,yt)=>{var Ye=yo(),ut=M(Ye);J(ut,()=>er,(Je,Oe)=>{Oe(Je,{children:(Ze,xt)=>{de();var Mt=vt("Edit Profile");s(Ze,Mt)},$$slots:{default:!0}})});var ot=r(ut,2);J(ot,()=>Vr,(Je,Oe)=>{Oe(Je,{children:(Ze,xt)=>{de();var Mt=vt("Update your profile information and settings");s(Ze,Mt)},$$slots:{default:!0}})}),s(wt,Ye)},$$slots:{default:!0}})});var Be=r(He,2),We=a(Be);Kt(We,{hideSubmitButton:!0,onSubmit:Xe=>c(I,Xe,!0),onFormStateChange:Xe=>c(W,Xe,!0)}),t(Be);var at=r(Be,2);J(at,()=>ar,(Xe,_t)=>{_t(Xe,{class:"pt-2",children:(wt,yt)=>{var Ye=Mo();Ye.__click=()=>e(I)?.();var ut=a(Ye);{var ot=Oe=>{var Ze=Po();de(2),s(Oe,Ze)},Je=Oe=>{var Ze=Co();s(Oe,Ze)};C(ut,Oe=>{e(W).isSubmitting?Oe(ot):Oe(Je,!1)})}t(Ye),V(()=>Ye.disabled=e(W).isSubmitting||e(W).isUploading),s(wt,Ye)},$$slots:{default:!0}})}),s(bt,rt)},$$slots:{default:!0}})}),s(Ee,le)},$$slots:{default:!0}})}),s(x,R)};C(_r,x=>{D.current?x(xr):x(kr,!1)})}t(Se),V((x,R,q,Pe,ge,Ee)=>{Ke(K,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(n)==="notes"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),B(he,x),Ke(be,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(n)==="replies"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),B(Ue,R),Ke(re,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(n)==="media"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),B(_,q),Ke(f,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(n)==="articles"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),B(Z,Pe),Ke(ce,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(n)==="highlights"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),B(w,ge),Ke(P,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(n)==="packs"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),B(pt,Ee)},[()=>p()("profile.tabs.notes"),()=>p()("profile.tabs.replies"),()=>p()("profile.tabs.media"),()=>p()("profile.tabs.articles"),()=>p()("profile.tabs.highlights"),()=>p()("profile.tabs.followPacks")]),s(O,Se),Ve(),U()}ft(["click"]);export{ps as component};
