import{d as U,c as b,a as n,f as N,s as q}from"../chunks/CiPFrJr-.js";import{p as z,g as a,u,a as B,s as r,b as f,f as _,c as J,d as k,e as x,r as h,t as L}from"../chunks/CSbKtK4P.js";import{i as y,s as M,a as Q}from"../chunks/87vUJtvC.js";import{p as V}from"../chunks/fk9xBW3Y.js";import{g as i}from"../chunks/CTwadDAE.js";import{n as $,N as F,a as W}from"../chunks/D0X4VYcq.js";var X=N('<div class="flex flex-col items-center justify-center min-h-screen bg-background"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div> <p class="mt-4 text-muted-foreground">Redirecting...</p></div>'),Y=()=>i("/"),Z=N('<div class="flex flex-col items-center justify-center min-h-screen px-4 bg-background"><h1 class="text-2xl font-bold text-foreground mb-2">Content Not Found</h1> <p class="text-muted-foreground mb-4"> </p> <button type="button" class="px-4 py-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg transition-colors text-sm font-medium">Go Home</button></div>');function oe(S,I){z(I,!0);const p=()=>Q(V,"$page",K),[K,j]=M(),w=u(()=>p().params.nip05),m=u(()=>p().params.identifier);let C=f(null),o=f(!0),s=f(null);const D=$.$fetchUser(()=>a(w)),g=u(()=>D?.pubkey);B(()=>{if(!a(g)||!a(m)){r(o,!1),r(s,"Invalid user or identifier");return}r(o,!0),r(s,null),$.guardrailOff("fetch-events-usage").fetchEvent({authors:[a(g)],"#d":[a(m)]}).then(e=>{if(!e){r(s,"Event not found"),r(o,!1);return}r(C,e,!0);const t=e.encode();e.kind===F.Article?i(`/article/${t}`,{replaceState:!0}):F.Classified===e.kind?i(`/marketplace/${t}`,{replaceState:!0}):[W.kind].includes(e.kind||0)?i(`/packs/${t}`,{replaceState:!0}):i(`/e/${t}`,{replaceState:!0})}).catch(e=>{console.error("Failed to fetch event:",e),r(s,"Failed to load event"),r(o,!1)})});var v=b(),A=_(v);{var G=e=>{var t=X();n(e,t)},H=e=>{var t=b(),O=_(t);{var P=l=>{var c=Z(),d=k(x(c),2),R=x(d,!0);h(d);var T=k(d,2);T.__click=[Y],h(c),L(()=>q(R,a(s))),n(l,c)};y(O,l=>{a(s)&&l(P)},!0)}n(e,t)};y(A,e=>{a(o)?e(G):e(H,!1)})}n(S,v),J(),j()}U(["click"]);export{oe as component};
