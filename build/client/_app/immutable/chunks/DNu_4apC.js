import{c as P,a as g,f as D,v as lt,p as Ve}from"./CvdcXPsy.js";import{u as pe,aa as at,f as m,g as r,p as $,h as _,e as ee,s as V,a as n,aF as ut,A as ce,d as le,c as G,r as Z,b as Ee,t as ht}from"./-h67YDCL.js";import{i as M}from"./DG6c9x1x.js";import{e as Me}from"./DBJvd_ZN.js";import{s as Q}from"./0JHOh1sT.js";import{c as X}from"./C52XBfTo.js";import{e as j,f as dt,a as Oe,s as ct}from"./vjiKTA8K.js";import{p,r as ge,s as _e}from"./6dG0wjw8.js";import{e as pt}from"./CAJmB2zv.js";import{r as gt,c as he,U as ye}from"./Dk4THxss.js";import{s as ft,m as re,C as De,a as Ne,D as we,o as vt,w as oe,h as Ue,f as mt,b as y,e as bt,g as Ke,j as Le,A as ie,k as de,l as yt,p as _t,q as Nt,r as wt,t as Ct,u as St,M as Pt,E as Be,F as xt,v as It,x as kt,y as At,z as Ot,B as Ht,G as Rt,H as Ft,I as Tt,J as Vt,K as Et,L as Mt,T as He,N as Dt,O as ze,Q as We,R as qe,U as Ye,V as Ge,d as Ut,W as Kt,X as Re,n as J,Y as Lt,c as Ze}from"./Ce4Vc0Tb.js";import{g as Bt,b as zt,F as Wt,P as qt,a as Yt}from"./csaG7mQg.js";import{b as Gt}from"./Bif2btQW.js";const Zt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"},Qt=ft(Zt);function Xt(s){pe(()=>at(()=>s()))}class jt{#e=()=>{};#t=m(()=>this.#e());constructor(e,t){let o;t!==void 0&&(o=t),this.#e=()=>{try{return o}finally{o=e()}}}get current(){return r(this.#t)}}function Jt(s,e,t=!0){if(!(s.length===0||e<0||e>=s.length))return s.length===1&&e===0?s[0]:e===s.length-1?t?s[0]:void 0:s[e+1]}function $t(s,e,t=!0){if(!(s.length===0||e<0||e>=s.length))return s.length===1&&e===0?s[0]:e===0?t?s[s.length-1]:void 0:s[e-1]}function eo(s,e,t,o=!0){if(s.length===0||e<0||e>=s.length)return;let i=e+t;return o?i=(i%s.length+s.length)%s.length:i=Math.max(0,Math.min(i,s.length-1)),s[i]}function to(s,e,t,o=!0){if(s.length===0||e<0||e>=s.length)return;let i=e-t;return o?i=(i%s.length+s.length)%s.length:i=Math.max(0,Math.min(i,s.length-1)),s[i]}var oo=D("<input/>"),ro=D("<input/>");function so(s,e){$(e,!0);let t=p(e,"value",15),o=ge(e,["$$slots","$$events","$$legacy","value"]);const i=m(()=>re(o,{"aria-hidden":"true",tabindex:-1,style:Qt}));var u=P(),h=_(u);{var b=I=>{var N=oo();j(N,()=>({...r(i),value:t()}),void 0,void 0,void 0,void 0,!0),g(I,N)},x=I=>{var N=ro();j(N,()=>({...r(i)}),void 0,void 0,void 0,void 0,!0),Gt(N,t),g(I,N)};M(h,I=>{r(i).type==="checkbox"?I(b):I(x,!1)})}g(s,u),ee()}const Fe=[yt,Le,_t,Nt,wt,Ct,St,Pt,Be,xt,It,kt,At,Ot,Ht,Rt,Ft,Tt,Vt,Et,Mt],no=[de,ze,We],io=[ie,qe,Ye],lo=[...no,...io],ao=bt({component:"select",parts:["trigger","content","item","viewport","scroll-up-button","scroll-down-button","group","group-label","separator","arrow","input","content-wrapper","item-text","value"]}),ae=new De("Select.Root | Combobox.Root"),uo=new De("Select.Content | Combobox.Content");class Qe{opts;#e=V(!1);get touchedInput(){return r(this.#e)}set touchedInput(e){n(this.#e,e,!0)}#t=V(null);get inputNode(){return r(this.#t)}set inputNode(e){n(this.#t,e,!0)}#o=V(null);get contentNode(){return r(this.#o)}set contentNode(e){n(this.#o,e,!0)}contentPresence;#r=V(null);get viewportNode(){return r(this.#r)}set viewportNode(e){n(this.#r,e,!0)}#s=V(null);get triggerNode(){return r(this.#s)}set triggerNode(e){n(this.#s,e,!0)}#n=V("");get valueId(){return r(this.#n)}set valueId(e){n(this.#n,e,!0)}#i=V(null);get highlightedNode(){return r(this.#i)}set highlightedNode(e){n(this.#i,e,!0)}#l=m(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-value"):null);get highlightedValue(){return r(this.#l)}set highlightedValue(e){n(this.#l,e)}#a=m(()=>{if(this.highlightedNode)return this.highlightedNode.id});get highlightedId(){return r(this.#a)}set highlightedId(e){n(this.#a,e)}#u=m(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-label"):null);get highlightedLabel(){return r(this.#u)}set highlightedLabel(e){n(this.#u,e)}isUsingKeyboard=!1;isCombobox=!1;domContext=new we(()=>null);constructor(e){this.opts=e,this.isCombobox=e.isCombobox,this.contentPresence=new mt({ref:y(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),ut(()=>{this.opts.open.current||this.setHighlightedNode(null)})}setHighlightedNode(e,t=!1){this.highlightedNode=e,e&&(this.isUsingKeyboard||t)&&e.scrollIntoView({block:this.opts.scrollAlignment.current})}getCandidateNodes(){const e=this.contentNode;return e?Array.from(e.querySelectorAll(`[${this.getBitsAttr("item")}]:not([data-disabled])`)):[]}setHighlightedToFirstCandidate(e=!1){this.setHighlightedNode(null);let t=this.getCandidateNodes();if(t.length){if(this.viewportNode){const o=this.viewportNode.getBoundingClientRect();t=t.filter(i=>{if(!this.viewportNode)return!1;const u=i.getBoundingClientRect();return u.right<o.right&&u.left>o.left&&u.bottom<o.bottom&&u.top>o.top})}this.setHighlightedNode(t[0],e)}}getNodeByValue(e){return this.getCandidateNodes().find(o=>o.dataset.value===e)??null}setOpen(e){this.opts.open.current=e}toggleOpen(){this.opts.open.current=!this.opts.open.current}handleOpen(){this.setOpen(!0)}handleClose(){this.setHighlightedNode(null),this.setOpen(!1)}toggleMenu(){this.toggleOpen()}getBitsAttr=e=>ao.getAttr(e,this.isCombobox?"combobox":void 0)}class ho extends Qe{opts;isMulti=!1;#e=m(()=>this.opts.value.current!=="");get hasValue(){return r(this.#e)}set hasValue(e){n(this.#e,e)}#t=m(()=>this.opts.items.current.length?this.opts.items.current.find(e=>e.value===this.opts.value.current)?.label??"":"");get currentLabel(){return r(this.#t)}set currentLabel(e){n(this.#t,e)}#o=m(()=>this.opts.items.current.length?this.opts.items.current.filter(t=>!t.disabled).map(t=>t.label):[]);get candidateLabels(){return r(this.#o)}set candidateLabels(e){n(this.#o,e)}#r=m(()=>!(this.isMulti||this.opts.items.current.length===0));get dataTypeaheadEnabled(){return r(this.#r)}set dataTypeaheadEnabled(e){n(this.#r,e)}constructor(e){super(e),this.opts=e,pe(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),oe(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current===e}toggleItem(e,t=e){const o=this.includesItem(e)?"":e;this.opts.value.current=o,o!==""&&(this.opts.inputValue.current=t)}setInitialHighlightedNode(){Ue(()=>{if(!(this.highlightedNode&&this.domContext.getDocument().contains(this.highlightedNode))){if(this.opts.value.current!==""){const e=this.getNodeByValue(this.opts.value.current);if(e){this.setHighlightedNode(e,!0);return}}this.setHighlightedToFirstCandidate(!0)}})}}class co extends Qe{opts;isMulti=!0;#e=m(()=>this.opts.value.current.length>0);get hasValue(){return r(this.#e)}set hasValue(e){n(this.#e,e)}constructor(e){super(e),this.opts=e,pe(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),oe(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current.includes(e)}toggleItem(e,t=e){this.includesItem(e)?this.opts.value.current=this.opts.value.current.filter(o=>o!==e):this.opts.value.current=[...this.opts.value.current,e],this.opts.inputValue.current=t}setInitialHighlightedNode(){Ue(()=>{if(this.domContext&&!(this.highlightedNode&&this.domContext.getDocument().contains(this.highlightedNode))){if(this.opts.value.current.length&&this.opts.value.current[0]!==""){const e=this.getNodeByValue(this.opts.value.current[0]);if(e){this.setHighlightedNode(e,!0);return}}this.setHighlightedToFirstCandidate(!0)}})}}class po{static create(e){const{type:t,...o}=e,i=t==="single"?new ho(o):new co(o);return ae.set(i)}}class Ce{static create(e){return new Ce(e,ae.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=Ne(e.ref,o=>this.root.inputNode=o),this.root.domContext=new we(e.ref),this.onkeydown=this.onkeydown.bind(this),this.oninput=this.oninput.bind(this),oe([()=>this.root.opts.value.current,()=>this.opts.clearOnDeselect.current],([o,i],[u])=>{i&&(Array.isArray(o)&&Array.isArray(u)?o.length===0&&u.length!==0&&(this.root.opts.inputValue.current=""):o===""&&u!==""&&(this.root.opts.inputValue.current=""))})}onkeydown(e){if(this.root.isUsingKeyboard=!0,e.key!==Le){if((e.key===ie||e.key===de)&&e.preventDefault(),!this.root.opts.open.current){if(Fe.includes(e.key)||e.key===He||e.key===Dt&&this.root.opts.inputValue.current===""||(this.root.handleOpen(),this.root.hasValue))return;const t=this.root.getCandidateNodes();if(!t.length)return;if(e.key===de){const o=t[0];this.root.setHighlightedNode(o)}else if(e.key===ie){const o=t[t.length-1];this.root.setHighlightedNode(o)}return}if(e.key===He){this.root.handleClose();return}if(e.key===Be&&!e.isComposing){e.preventDefault();const t=this.root.highlightedValue===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&t&&!this.root.isMulti){this.root.handleClose();return}this.root.highlightedValue&&this.root.highlightedNode&&this.root.highlightedNode.isConnected&&this.root.toggleItem(this.root.highlightedValue,this.root.highlightedLabel??void 0),!this.root.isMulti&&!t&&this.root.handleClose()}if(e.key===ie&&e.altKey&&this.root.handleClose(),lo.includes(e.key)){e.preventDefault();const t=this.root.getCandidateNodes(),o=this.root.highlightedNode,i=o?t.indexOf(o):-1,u=this.root.opts.loop.current;let h;if(e.key===de?h=Jt(t,i,u):e.key===ie?h=$t(t,i,u):e.key===qe?h=eo(t,i,10,u):e.key===ze?h=to(t,i,10,u):e.key===We?h=t[0]:e.key===Ye&&(h=t[t.length-1]),!h)return;this.root.setHighlightedNode(h);return}Fe.includes(e.key)||this.root.highlightedNode||this.root.setHighlightedToFirstCandidate()}}oninput(e){this.root.opts.inputValue.current=e.currentTarget.value,this.root.setHighlightedToFirstCandidate()}#e=m(()=>({id:this.opts.id.current,role:"combobox",disabled:this.root.opts.disabled.current?!0:void 0,"aria-activedescendant":this.root.highlightedId,"aria-autocomplete":"list","aria-expanded":Ut(this.root.opts.open.current),"data-state":Ke(this.root.opts.open.current),"data-disabled":Ge(this.root.opts.disabled.current),onkeydown:this.onkeydown,oninput:this.oninput,[this.root.getBitsAttr("input")]:"",...this.attachment}));get props(){return r(this.#e)}set props(e){n(this.#e,e)}}class Se{static create(e){return uo.set(new Se(e,ae.get()))}opts;root;attachment;#e=V(!1);get isPositioned(){return r(this.#e)}set isPositioned(e){n(this.#e,e,!0)}domContext;constructor(e,t){this.opts=e,this.root=t,this.attachment=Ne(e.ref,o=>this.root.contentNode=o),this.domContext=new we(this.opts.ref),this.root.domContext===null&&(this.root.domContext=this.domContext),vt(()=>{this.root.contentNode=null,this.isPositioned=!1}),oe(()=>this.root.opts.open.current,()=>{this.root.opts.open.current||(this.isPositioned=!1)}),this.onpointermove=this.onpointermove.bind(this)}onpointermove(e){this.root.isUsingKeyboard=!1}#t=m(()=>Bt(this.root.isCombobox?"combobox":"select"));onInteractOutside=e=>{if(e.target===this.root.triggerNode||e.target===this.root.inputNode){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};get shouldRender(){return this.root.contentPresence.shouldRender}#o=m(()=>({open:this.root.opts.open.current}));get snippetProps(){return r(this.#o)}set snippetProps(e){n(this.#o,e)}#r=m(()=>({id:this.opts.id.current,role:"listbox","aria-multiselectable":this.root.isMulti?"true":void 0,"data-state":Ke(this.root.opts.open.current),[this.root.getBitsAttr("content")]:"",style:{display:"flex",flexDirection:"column",outline:"none",boxSizing:"border-box",pointerEvents:"auto",...r(this.#t)},onpointermove:this.onpointermove,...this.attachment}));get props(){return r(this.#r)}set props(e){n(this.#r,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus,trapFocus:!1,loop:!1,onPlaced:()=>{this.root.opts.open.current&&(this.isPositioned=!0)}}}class Pe{static create(e){return new Pe(e,ae.get())}opts;root;attachment;#e=m(()=>this.root.includesItem(this.opts.value.current));get isSelected(){return r(this.#e)}set isSelected(e){n(this.#e,e)}#t=m(()=>this.root.highlightedValue===this.opts.value.current);get isHighlighted(){return r(this.#t)}set isHighlighted(e){n(this.#t,e)}prevHighlighted=new jt(()=>this.isHighlighted);#o=V(!1);get mounted(){return r(this.#o)}set mounted(e){n(this.#o,e,!0)}constructor(e,t){this.opts=e,this.root=t,this.attachment=Ne(e.ref),oe([()=>this.isHighlighted,()=>this.prevHighlighted.current],()=>{this.isHighlighted?this.opts.onHighlight.current():this.prevHighlighted.current&&this.opts.onUnhighlight.current()}),oe(()=>this.mounted,()=>{this.mounted&&this.root.setInitialHighlightedNode()}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onpointermove=this.onpointermove.bind(this)}handleSelect(){if(this.opts.disabled.current)return;const e=this.opts.value.current===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti){this.root.handleClose();return}this.root.toggleItem(this.opts.value.current,this.opts.label.current),!this.root.isMulti&&!e&&this.root.handleClose()}#r=m(()=>({selected:this.isSelected,highlighted:this.isHighlighted}));get snippetProps(){return r(this.#r)}set snippetProps(e){n(this.#r,e)}onpointerdown(e){e.preventDefault()}onpointerup(e){if(!(e.defaultPrevented||!this.opts.ref.current)){if(e.pointerType==="touch"&&!Kt){lt(this.opts.ref.current,"click",()=>{this.handleSelect(),this.root.setHighlightedNode(this.opts.ref.current)},{once:!0});return}e.preventDefault(),this.handleSelect(),e.pointerType==="touch"&&this.root.setHighlightedNode(this.opts.ref.current)}}onpointermove(e){e.pointerType!=="touch"&&this.root.highlightedNode!==this.opts.ref.current&&this.root.setHighlightedNode(this.opts.ref.current)}#s=m(()=>({id:this.opts.id.current,role:"option","aria-selected":this.root.includesItem(this.opts.value.current)?"true":void 0,"data-value":this.opts.value.current,"data-disabled":Ge(this.opts.disabled.current),"data-highlighted":this.root.highlightedValue===this.opts.value.current&&!this.opts.disabled.current?"":void 0,"data-selected":this.root.includesItem(this.opts.value.current)?"":void 0,"data-label":this.opts.label.current,[this.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,...this.attachment}));get props(){return r(this.#s)}set props(e){n(this.#s,e)}}class xe{static create(e){return new xe(e,ae.get())}opts;root;#e=m(()=>this.root.opts.name.current!=="");get shouldRender(){return r(this.#e)}set shouldRender(e){n(this.#e,e)}constructor(e,t){this.opts=e,this.root=t,this.onfocus=this.onfocus.bind(this)}onfocus(e){e.preventDefault(),this.root.isCombobox?this.root.inputNode?.focus():this.root.triggerNode?.focus()}#t=m(()=>({disabled:Re(this.root.opts.disabled.current),required:Re(this.root.opts.required.current),name:this.root.opts.name.current,value:this.opts.value.current,onfocus:this.onfocus}));get props(){return r(this.#t)}set props(e){n(this.#t,e)}}function Te(s,e){$(e,!0);let t=p(e,"value",15);const o=xe.create({value:y(()=>t())});var i=P(),u=_(i);{var h=b=>{so(b,_e(()=>o.props,{get autocomplete(){return e.autocomplete},get value(){return t()},set value(x){t(x)}}))};M(u,b=>{o.shouldRender&&b(h)})}g(s,i),ee()}var go=D("<!> <!>",1);function fo(s,e){$(e,!0);let t=p(e,"value",15),o=p(e,"onValueChange",3,J),i=p(e,"name",3,""),u=p(e,"disabled",3,!1),h=p(e,"open",15,!1),b=p(e,"onOpenChange",3,J),x=p(e,"onOpenChangeComplete",3,J),I=p(e,"loop",3,!1),N=p(e,"scrollAlignment",3,"nearest"),w=p(e,"required",3,!1),O=p(e,"items",19,()=>[]),U=p(e,"allowDeselect",3,!0),C=p(e,"inputValue",7,"");if(t()===void 0){const c=e.type==="single"?"":[];t(c)}oe.pre(()=>t(),()=>{t()===void 0&&t(e.type==="single"?"":[])});const d=po.create({type:e.type,value:y(()=>t(),c=>{t(c),o()(c)}),disabled:y(()=>u()),required:y(()=>w()),open:y(()=>h(),c=>{h(c),b()(c)}),loop:y(()=>I()),scrollAlignment:y(()=>N()),name:y(()=>i()),isCombobox:!0,items:y(()=>O()),allowDeselect:y(()=>U()),inputValue:y(()=>C(),c=>C(c)),onOpenChangeComplete:y(()=>x())});var l=go(),a=_(l);zt(a,{children:(c,E)=>{var H=P(),R=_(H);Q(R,()=>e.children??ce),g(c,H)},$$slots:{default:!0}});var f=le(a,2);{var v=c=>{var E=P(),H=_(E);{var R=K=>{var k=P(),F=_(k);Me(F,16,()=>d.opts.value.current,A=>A,(A,T)=>{Te(A,{get value(){return T}})}),g(K,k)};M(H,K=>{d.opts.value.current.length&&K(R)})}g(c,E)},S=c=>{Te(c,{get value(){return d.opts.value.current},set value(E){d.opts.value.current=E}})};M(f,c=>{Array.isArray(d.opts.value.current)?c(v):c(S,!1)})}g(s,l),ee()}var vo=D("<input/>");function mo(s,e){$(e,!0);let t=p(e,"id",19,Lt),o=p(e,"ref",15,null),i=p(e,"clearOnDeselect",3,!1),u=ge(e,["$$slots","$$events","$$legacy","id","ref","child","defaultValue","clearOnDeselect"]);const h=Ce.create({id:y(()=>t()),ref:y(()=>o(),N=>o(N)),clearOnDeselect:y(()=>i())});e.defaultValue&&(h.root.opts.inputValue.current=e.defaultValue);const b=m(()=>re(u,h.props,{value:h.root.opts.inputValue.current}));var x=P(),I=_(x);X(I,()=>Wt,(N,w)=>{w(N,{get id(){return t()},get ref(){return h.opts.ref},children:(O,U)=>{var C=P(),d=_(C);{var l=f=>{var v=P(),S=_(v);Q(S,()=>e.child,()=>({props:r(b)})),g(f,v)},a=f=>{var v=vo();j(v,()=>({...r(b)}),void 0,void 0,void 0,void 0,!0),g(f,v)};M(d,f=>{e.child?f(l):f(a,!1)})}g(O,C)},$$slots:{default:!0}})}),g(s,x),ee()}var bo=D("<div><div><!></div></div>"),yo=D("<div><div><!></div></div>");function _o(s,e){const t=Ve();$(e,!0);let o=p(e,"id",19,()=>Ze(t)),i=p(e,"ref",15,null),u=p(e,"forceMount",3,!1),h=p(e,"side",3,"bottom"),b=p(e,"onInteractOutside",3,J),x=p(e,"onEscapeKeydown",3,J),I=p(e,"preventScroll",3,!1),N=ge(e,["$$slots","$$events","$$legacy","id","ref","forceMount","side","onInteractOutside","onEscapeKeydown","children","child","preventScroll"]);const w=Se.create({id:y(()=>o()),ref:y(()=>i(),a=>i(a)),onInteractOutside:y(()=>b()),onEscapeKeydown:y(()=>x())}),O=m(()=>re(N,w.props));var U=P(),C=_(U);{var d=a=>{qt(a,_e(()=>r(O),()=>w.popperProps,{get ref(){return w.opts.ref},get side(){return h()},get enabled(){return w.root.opts.open.current},get id(){return o()},get preventScroll(){return I()},forceMount:!0,get shouldRender(){return w.shouldRender},popper:(v,S)=>{let c=()=>S?.().props,E=()=>S?.().wrapperProps;const H=m(()=>re(c(),{style:w.props.style}));var R=P(),K=_(R);{var k=A=>{var T=P(),L=_(T);{let B=m(()=>({props:r(H),wrapperProps:E(),...w.snippetProps}));Q(L,()=>e.child,()=>r(B))}g(A,T)},F=A=>{var T=bo();j(T,()=>({...E()}));var L=G(T);j(L,()=>({...r(H)}));var B=G(L);Q(B,()=>e.children??ce),Z(L),Z(T),g(A,T)};M(K,A=>{e.child?A(k):A(F,!1)})}g(v,R)},$$slots:{popper:!0}}))},l=a=>{var f=P(),v=_(f);{var S=c=>{Yt(c,_e(()=>r(O),()=>w.popperProps,{get ref(){return w.opts.ref},get side(){return h()},get open(){return w.root.opts.open.current},get id(){return o()},get preventScroll(){return I()},forceMount:!1,get shouldRender(){return w.shouldRender},popper:(H,R)=>{let K=()=>R?.().props,k=()=>R?.().wrapperProps;const F=m(()=>re(K(),{style:w.props.style}));var A=P(),T=_(A);{var L=z=>{var q=P(),te=_(q);{let W=m(()=>({props:r(F),wrapperProps:k(),...w.snippetProps}));Q(te,()=>e.child,()=>r(W))}g(z,q)},B=z=>{var q=yo();j(q,()=>({...k()}));var te=G(q);j(te,()=>({...r(F)}));var W=G(te);Q(W,()=>e.children??ce),Z(te),Z(q),g(z,q)};M(T,z=>{e.child?z(L):z(B,!1)})}g(H,A)},$$slots:{popper:!0}}))};M(v,c=>{u()||c(S)},!0)}g(a,f)};M(C,a=>{u()?a(d):a(l,!1)})}g(s,U),ee()}function No(s,e){$(e,!0);let t=p(e,"mounted",15,!1),o=p(e,"onMountedChange",3,J);Xt(()=>(t(!0),o()(!0),()=>{t(!1),o()(!1)})),ee()}var wo=D("<div><!></div>"),Co=D("<!> <!>",1);function So(s,e){const t=Ve();$(e,!0);let o=p(e,"id",19,()=>Ze(t)),i=p(e,"ref",15,null),u=p(e,"label",19,()=>e.value),h=p(e,"disabled",3,!1),b=p(e,"onHighlight",3,J),x=p(e,"onUnhighlight",3,J),I=ge(e,["$$slots","$$events","$$legacy","id","ref","value","label","disabled","children","child","onHighlight","onUnhighlight"]);const N=Pe.create({id:y(()=>o()),ref:y(()=>i(),a=>i(a)),value:y(()=>e.value),disabled:y(()=>h()),label:y(()=>u()),onHighlight:y(()=>b()),onUnhighlight:y(()=>x())}),w=m(()=>re(I,N.props));var O=Co(),U=_(O);{var C=a=>{var f=P(),v=_(f);{let S=m(()=>({props:r(w),...N.snippetProps}));Q(v,()=>e.child,()=>r(S))}g(a,f)},d=a=>{var f=wo();j(f,()=>({...r(w)}));var v=G(f);Q(v,()=>e.children??ce,()=>N.snippetProps),Z(f),g(a,f)};M(U,a=>{e.child?a(C):a(d,!1)})}var l=le(U,2);No(l,{get mounted(){return N.mounted},set mounted(a){N.mounted=a}}),g(s,O),ee()}const Po=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,xo=/^(npub1|nprofile1)[a-z0-9]{20,}/i;function Io(s,e){const t=gt(e);let o=V(Ee([])),i=V(null),u=V(!1),h=null,b=null;async function x(d){if(!d.trim())return[];const l=t.cacheAdapter;if(!l?.getProfiles){const v=l?.getAllProfilesSync?.()||new Map,S=[],c=d.toLowerCase();for(const[E,H]of v){const R="profile"in H?H.profile:H;if(R.name?.toLowerCase().includes(c)||R.displayName?.toLowerCase().includes(c)||R.nip05?.toLowerCase().includes(c)||R.about?.toLowerCase().includes(c)){const K=t.getUser({pubkey:E});S.push({user:K})}}return S}const a=await l.getProfiles({fields:["name","displayName","nip05","about"],contains:d});return a?Array.from(a.keys()).map(v=>({user:t.getUser({pubkey:v})})):[]}async function I(d){try{const l=await t.fetchUser(d);return l?{user:l}:null}catch{return null}}async function N(d){if(!d.trim()){n(o,[],!0);return}const l=await x(d);l.sort((a,f)=>{const v=t.$follows.has(a.user.pubkey),S=t.$follows.has(f.user.pubkey);return v&&!S?-1:!v&&S?1:0}),n(o,l,!0)}async function w(d){n(u,!0);const l=await I(d);if(l){const a=r(o).findIndex(f=>f.user.pubkey===l.user.pubkey);a===-1?t.$follows.has(l.user.pubkey)?n(o,[l,...r(o)],!0):n(o,[...r(o),l],!0):r(o)[a]=l}n(u,!1)}function O(d,l){if(b&&(b.stop(),b=null),!d.trim()||l.length===0)return;n(u,!0);const a=l.map(S=>t.pool.getRelay(S,!0,!0)),f=new pt(new Set(a),t),v=t.subscribe({kinds:[0],search:d},{closeOnEose:!0,groupable:!1,subId:"user-search"},f,!1);b=v,v.on("event",S=>{const c=t.getUser({pubkey:S.pubkey});r(o).findIndex(H=>H.user.pubkey===c.pubkey)===-1&&(t.$follows.has(c.pubkey)?n(o,[{user:c},...r(o)],!0):n(o,[...r(o),{user:c}],!0))}),v.on("eose",()=>{n(u,!1)}),v.start()}pe(()=>{const{query:d,debounceMs:l=300,relaySearch:a}=s();h&&(clearTimeout(h),h=null),b&&(b.stop(),b=null),N(d);const f=Po.test(d),v=xo.test(d);return(f||v||a)&&(h=setTimeout(()=>{(f||v)&&w(d),a&&a.length>0&&O(d,a)},l)),()=>{h&&(clearTimeout(h),h=null),b&&(b.stop(),b=null)}});function U(d){n(i,d,!0);const{onSelect:l}=s();l&&l(d)}function C(){n(i,null),n(o,[],!0)}return{get results(){return r(o)},get selectedUser(){return r(i)},get loading(){return r(u)},selectUser:U,clear:C}}var ko=D('<div class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"><svg class="animate-spin h-4 w-4 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),Ao=D('<div class="flex items-center gap-3 w-full"><!> <div class="flex-1 min-w-0"><!></div></div>'),Oo=D('<div class="py-6 text-center text-sm text-muted-foreground">No users found</div>'),Ho=D('<div class="relative"><!> <!></div> <!>',1),Ro=D('<div data-user-search-combobox=""><!></div>');function Zo(s,e){$(e,!0);let t=p(e,"placeholder",3,"Search users by name, NIP-05, npub..."),o=p(e,"debounceMs",3,300),i=p(e,"class",3,""),u=V(""),h=V(Ee([])),b=V(!1);const x=Io(()=>({query:r(u),onSelect:C=>{e.onSelect&&e.onSelect(C),n(b,!1),n(u,""),n(h,[],!0)},debounceMs:o()}),e.ndk),I=m(()=>x.results.slice(0,8));function N(C){if(n(h,C,!0),C.length>0){const d=C[0],l=r(I).find(a=>a.user.pubkey===d);l&&x.selectUser(l.user)}}function w(C){n(u,C.target.value,!0)}var O=Ro(),U=G(O);X(U,()=>fo,(C,d)=>{d(C,{type:"multiple",onValueChange:N,get open(){return r(b)},set open(l){n(b,l,!0)},get value(){return r(h)},set value(l){n(h,l,!0)},children:(l,a)=>{var f=Ho(),v=_(f),S=G(v);{var c=k=>{var F=P(),A=_(F);Q(A,()=>e.input,()=>({value:r(u),oninput:w,loading:x.loading})),g(k,F)},E=k=>{var F=P(),A=_(F);{let T=m(()=>he("flex h-10 w-full rounded-md border border-border bg-background px-3 py-2 text-sm","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50"));X(A,()=>mo,(L,B)=>{B(L,{oninput:z=>n(u,z.currentTarget.value,!0),get placeholder(){return t()},"aria-label":"Search users",get class(){return r(T)}})})}g(k,F)};M(S,k=>{e.input?k(c):k(E,!1)})}var H=le(S,2);{var R=k=>{var F=ko();g(k,F)};M(H,k=>{x.loading&&k(R)})}Z(v);var K=le(v,2);{let k=m(()=>he("z-50 max-h-96 min-w-full overflow-y-auto rounded-md border border-border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95"));X(K,()=>_o,(F,A)=>{A(F,{get class(){return r(k)},sideOffset:4,children:(T,L)=>{var B=P(),z=_(B);{var q=W=>{var se=P(),fe=_(se);Me(fe,17,()=>r(I),ne=>ne.user.pubkey,(ne,Y)=>{var ue=P(),Xe=_(ue);{let je=m(()=>r(Y).user.profile?.displayName||r(Y).user.profile?.name||r(Y).user.npub),Je=m(()=>he("relative flex cursor-pointer select-none items-center gap-3 px-4 py-3 border-b border-border last:border-b-0","data-[highlighted]:bg-muted/50 transition-colors outline-none"));X(Xe,()=>So,($e,et)=>{et($e,{get value(){return r(Y).user.pubkey},get label(){return r(je)},get class(){return r(Je)},children:(tt,Fo)=>{var Ie=P(),ot=_(Ie);X(ot,()=>ye.Root,(rt,st)=>{st(rt,{get ndk(){return e.ndk},get pubkey(){return r(Y).user.pubkey},children:(nt,To)=>{var ve=Ao(),ke=G(ve);X(ke,()=>ye.Avatar,(me,be)=>{be(me,{class:"w-10 h-10"})});var Ae=le(ke,2),it=G(Ae);X(it,()=>ye.Name,(me,be)=>{be(me,{field:"displayName",class:"text-sm truncate"})}),Z(Ae),Z(ve),g(nt,ve)},$$slots:{default:!0}})}),g(tt,Ie)},$$slots:{default:!0}})})}g(ne,ue)}),g(W,se)},te=W=>{var se=P(),fe=_(se);{var ne=Y=>{var ue=Oo();g(Y,ue)};M(fe,Y=>{r(u).trim().length>0&&!x.loading&&Y(ne)},!0)}g(W,se)};M(z,W=>{r(I).length>0?W(q):W(te,!1)})}g(T,B)},$$slots:{default:!0}})})}g(l,f)},$$slots:{default:!0}})}),Z(O),ht(C=>{Oe(O,"data-loading",x.loading?"":void 0),Oe(O,"data-open",r(b)?"":void 0),ct(O,1,C)},[()=>dt(he("relative w-full",i()))]),g(s,O),ee()}export{Zo as U};
