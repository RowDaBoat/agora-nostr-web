import{p as _e,c as y,a as p,f as re,s as ue}from"./CvdcXPsy.js";import{f as _,g as o,a as G,s as ae,p as oe,h as P,e as se,c,A as te,r as d,d as W,n as he,t as xe}from"./-h67YDCL.js";import{i as Y}from"./DG6c9x1x.js";import{s as M}from"./0JHOh1sT.js";import{e as Z,f as Ce,s as ke}from"./vjiKTA8K.js";import{p as s,s as fe,r as be}from"./6dG0wjw8.js";import{C as Ae,a as ye,E as Ne,S as Oe,g as Pe,d as Se,e as Ee,i as ve,f as ge,b as f,c as we,n as $,m as ee}from"./Ce4Vc0Tb.js";import{P as Fe,a as Re,g as me,F as Ie,b as Ke}from"./csaG7mQg.js";import{c as j}from"./C52XBfTo.js";import{U as z,c as Me}from"./Dk4THxss.js";const ie=Ee({component:"popover",parts:["root","trigger","content","close","overlay"]}),ce=new Ae("Popover.Root");class de{static create(e){return ce.set(new de(e))}opts;#t=ae(null);get contentNode(){return o(this.#t)}set contentNode(e){G(this.#t,e,!0)}contentPresence;#e=ae(null);get triggerNode(){return o(this.#e)}set triggerNode(e){G(this.#e,e,!0)}#r=ae(null);get overlayNode(){return o(this.#r)}set overlayNode(e){G(this.#r,e,!0)}overlayPresence;constructor(e){this.opts=e,this.contentPresence=new ge({ref:f(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),this.overlayPresence=new ge({ref:f(()=>this.overlayNode),open:this.opts.open})}toggleOpen(){this.opts.open.current=!this.opts.open.current}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}}class pe{static create(e){return new pe(e,ce.get())}opts;root;attachment;constructor(e,i){this.opts=e,this.root=i,this.attachment=ye(this.opts.ref,n=>this.root.triggerNode=n),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button===0&&this.root.toggleOpen()}onkeydown(e){this.opts.disabled.current||(e.key===Ne||e.key===Oe)&&(e.preventDefault(),this.root.toggleOpen())}#t(){if(this.root.opts.open.current&&this.root.contentNode?.id)return this.root.contentNode?.id}#e=_(()=>({id:this.opts.id.current,"aria-haspopup":"dialog","aria-expanded":Se(this.root.opts.open.current),"data-state":Pe(this.root.opts.open.current),"aria-controls":this.#t(),[ie.trigger]:"",disabled:this.opts.disabled.current,onkeydown:this.onkeydown,onclick:this.onclick,...this.attachment}));get props(){return o(this.#e)}set props(e){G(this.#e,e)}}class le{static create(e){return new le(e,ce.get())}opts;root;attachment;constructor(e,i){this.opts=e,this.root=i,this.attachment=ye(this.opts.ref,n=>this.root.contentNode=n)}onInteractOutside=e=>{if(this.opts.onInteractOutside.current(e),e.defaultPrevented||!ve(e.target))return;const i=e.target.closest(ie.selector("trigger"));if(!(i&&i===this.root.triggerNode)){if(this.opts.customAnchor.current){if(ve(this.opts.customAnchor.current)){if(this.opts.customAnchor.current.contains(e.target))return}else if(typeof this.opts.customAnchor.current=="string"){const n=document.querySelector(this.opts.customAnchor.current);if(n&&n.contains(e.target))return}}this.root.handleClose()}};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current(e),!e.defaultPrevented&&this.root.handleClose()};get shouldRender(){return this.root.contentPresence.shouldRender}#t=_(()=>({open:this.root.opts.open.current}));get snippetProps(){return o(this.#t)}set snippetProps(e){G(this.#t,e)}#e=_(()=>({id:this.opts.id.current,tabindex:-1,"data-state":Pe(this.root.opts.open.current),[ie.content]:"",style:{pointerEvents:"auto"},...this.attachment}));get props(){return o(this.#e)}set props(e){G(this.#e,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown}}var Be=re("<div><div><!></div></div>"),Ue=re("<div><div><!></div></div>");function Xe(O,e){const i=_e();oe(e,!0);let n=s(e,"ref",15,null),b=s(e,"id",19,()=>we(i)),v=s(e,"forceMount",3,!1),S=s(e,"onCloseAutoFocus",3,$),w=s(e,"onEscapeKeydown",3,$),A=s(e,"onInteractOutside",3,$),l=s(e,"trapFocus",3,!0),u=s(e,"preventScroll",3,!1),B=s(e,"customAnchor",3,null),H=be(e,["$$slots","$$events","$$legacy","child","children","ref","id","forceMount","onCloseAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","customAnchor"]);const r=le.create({id:f(()=>b()),ref:f(()=>n(),m=>n(m)),onInteractOutside:f(()=>A()),onEscapeKeydown:f(()=>w()),customAnchor:f(()=>B())}),E=_(()=>ee(H,r.props));var F=y(),h=P(F);{var g=m=>{Fe(m,fe(()=>o(E),()=>r.popperProps,{get ref(){return r.opts.ref},get enabled(){return r.root.opts.open.current},get id(){return b()},get trapFocus(){return l()},get preventScroll(){return u()},loop:!0,forceMount:!0,get customAnchor(){return B()},get onCloseAutoFocus(){return S()},get shouldRender(){return r.shouldRender},popper:(U,R)=>{let C=()=>R?.().props,T=()=>R?.().wrapperProps;const D=_(()=>ee(C(),{style:me("popover")}));var N=y(),L=P(N);{var q=t=>{var k=y(),I=P(k);{let Q=_(()=>({props:o(D),wrapperProps:T(),...r.snippetProps}));M(I,()=>e.child,()=>o(Q))}p(t,k)},a=t=>{var k=Be();Z(k,()=>({...T()}));var I=c(k);Z(I,()=>({...o(D)}));var Q=c(I);M(Q,()=>e.children??te),d(I),d(k),p(t,k)};Y(L,t=>{e.child?t(q):t(a,!1)})}p(U,N)},$$slots:{popper:!0}}))},x=m=>{var J=y(),U=P(J);{var R=C=>{Re(C,fe(()=>o(E),()=>r.popperProps,{get ref(){return r.opts.ref},get open(){return r.root.opts.open.current},get id(){return b()},get trapFocus(){return l()},get preventScroll(){return u()},loop:!0,forceMount:!1,get customAnchor(){return B()},get onCloseAutoFocus(){return S()},get shouldRender(){return r.shouldRender},popper:(D,N)=>{let L=()=>N?.().props,q=()=>N?.().wrapperProps;const a=_(()=>ee(L(),{style:me("popover")}));var t=y(),k=P(t);{var I=V=>{var K=y(),X=P(K);{let ne=_(()=>({props:o(a),wrapperProps:q(),...r.snippetProps}));M(X,()=>e.child,()=>o(ne))}p(V,K)},Q=V=>{var K=Ue();Z(K,()=>({...q()}));var X=c(K);Z(X,()=>({...o(a)}));var ne=c(X);M(ne,()=>e.children??te),d(X),d(K),p(V,K)};Y(k,V=>{e.child?V(I):V(Q,!1)})}p(D,t)},$$slots:{popper:!0}}))};Y(U,C=>{v()||C(R)},!0)}p(m,J)};Y(h,m=>{v()?m(g):m(x,!1)})}p(O,F),se()}var Te=re("<button><!></button>");function Ye(O,e){const i=_e();oe(e,!0);let n=s(e,"id",19,()=>we(i)),b=s(e,"ref",15,null),v=s(e,"type",3,"button"),S=s(e,"disabled",3,!1),w=be(e,["$$slots","$$events","$$legacy","children","child","id","ref","type","disabled"]);const A=pe.create({id:f(()=>n()),ref:f(()=>b(),u=>b(u)),disabled:f(()=>!!S())}),l=_(()=>ee(w,A.props,{type:v()}));Ie(O,{get id(){return n()},get ref(){return A.opts.ref},children:(u,B)=>{var H=y(),r=P(H);{var E=h=>{var g=y(),x=P(g);M(x,()=>e.child,()=>({props:o(l)})),p(h,g)},F=h=>{var g=Te();Z(g,()=>({...o(l)}));var x=c(g);M(x,()=>e.children??te),d(g),p(h,g)};Y(r,h=>{e.child?h(E):h(F,!1)})}p(u,H)},$$slots:{default:!0}}),se()}function Ze(O,e){oe(e,!0);let i=s(e,"open",15,!1),n=s(e,"onOpenChange",3,$),b=s(e,"onOpenChangeComplete",3,$);de.create({open:f(()=>i(),v=>{i(v),n()(v)}),onOpenChangeComplete:f(()=>b())}),Ke(O,{children:(v,S)=>{var w=y(),A=P(w);M(A,()=>e.children??te),p(v,w)},$$slots:{default:!0}}),se()}var De=re('<div data-user-card-classic=""><!> <div class="relative px-5 pb-5 -mt-10"><div class="relative inline-block mb-3"><!></div> <div class="mb-3 flex flex-col gap-0.5"><!> <!></div> <!> <div class="flex items-center gap-4 pt-3 border-t border-border text-sm"><div class="flex items-center gap-1.5"><span class="font-medium text-foreground"> </span> <span class="text-muted-foreground">notes</span></div> <div class="flex items-center gap-1.5"><span class="font-medium text-foreground"> </span> <span class="text-muted-foreground">following</span></div></div></div></div>');function $e(O,e){oe(e,!0);let i=s(e,"class",3,"");const n=e.ndk.$subscribe(()=>e.pubkey?{filters:[{kinds:[1],authors:[e.pubkey]}],bufferMs:100}:void 0),b=e.ndk.$subscribe(()=>e.pubkey?{filters:[{kinds:[3],authors:[e.pubkey]}],bufferMs:100}:void 0),v=_(()=>n.events.filter(l=>!l.tags.some(u=>u[0]==="e")).length),S=_(()=>{const l=b.events[0];return l?l.tags.filter(u=>u[0]==="p").length:0});var w=y(),A=P(w);j(A,()=>z.Root,(l,u)=>{u(l,{get ndk(){return e.ndk},get pubkey(){return e.pubkey},children:(B,H)=>{var r=De(),E=c(r);j(E,()=>z.Banner,(a,t)=>{t(a,{class:"h-20"})});var F=W(E,2),h=c(F),g=c(h);j(g,()=>z.Avatar,(a,t)=>{t(a,{class:"border-4 border-card shadow-lg w-[80px] h-[80px]"})}),d(h);var x=W(h,2),m=c(x);j(m,()=>z.Name,(a,t)=>{t(a,{class:"text-base font-semibold"})});var J=W(m,2);j(J,()=>z.Nip05,(a,t)=>{t(a,{class:"text-sm text-muted-foreground"})}),d(x);var U=W(x,2);j(U,()=>z.Bio,(a,t)=>{t(a,{class:"mb-4 text-sm text-muted-foreground line-clamp-3"})});var R=W(U,2),C=c(R),T=c(C),D=c(T,!0);d(T),he(2),d(C);var N=W(C,2),L=c(N),q=c(L,!0);d(L),he(2),d(N),d(R),d(F),d(r),xe(a=>{ke(r,1,a),ue(D,o(v)),ue(q,o(S))},[()=>Ce(Me("w-80 shrink-0 bg-card border border-border rounded-xl shadow-2xl overflow-hidden",i()))]),p(B,r)},$$slots:{default:!0}})}),p(O,w),se()}export{Ye as P,$e as U,Xe as a,Ze as b};
