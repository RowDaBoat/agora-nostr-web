import{d as ke,f as j,s,j as Me,r as He,a as _,c as Be,b as Ge,t as rt}from"../chunks/CvdcXPsy.js";import{p as ye,c as t,g as r,s as ve,d as o,r as e,t as Q,f as U,e as we,a as D,h as Ce,n as Ee,b as at,z as ot,u as We}from"../chunks/-h67YDCL.js";import{i as X}from"../chunks/DG6c9x1x.js";import{s as me,a as Ne,r as Ve,b as Ze,c as qe,f as nt}from"../chunks/vjiKTA8K.js";import{a as Qe,d as Xe,N as it,A as Ye,E as st,n as ce,i as lt,f as dt,h as ct}from"../chunks/CAJmB2zv.js";import{g as vt}from"../chunks/D1jhUNbu.js";import{o as le}from"../chunks/DmYduYj6.js";import{e as Ke}from"../chunks/DBJvd_ZN.js";import{a as Se,s as Ie}from"../chunks/CptlhHpT.js";import{$ as De,a as ut}from"../chunks/CIoNh8li.js";import{c as Oe}from"../chunks/C52XBfTo.js";import{p as gt}from"../chunks/6dG0wjw8.js";import{F as Ae}from"../chunks/C6TKWL_4.js";import{A as ft,a as $e,c as et,b as pt,N as bt}from"../chunks/Cq1keEic.js";import"../chunks/Dk4THxss.js";import{g as mt}from"../chunks/sNEEs8rM.js";import{b as tt}from"../chunks/ByH5JKyU.js";async function xt(k,a){const n=new Set;try{const c=await k.signer?.user();if(!c)throw new Error("No user logged in");const F=await k.fetchEvent({kinds:[3],authors:[c.pubkey]}),m=new Set;F&&F.tags.filter(l=>l[0]==="p").forEach(l=>m.add(l[1]));for(const l of a)try{const g=await k.fetchEvent(l);g&&Qe.from(g).pubkeys?.forEach(w=>{m.has(w)||n.add(w)})}catch(g){console.error(`Error processing pack ${l}:`,g)}if(n.size>0){const l=new Xe(k);l.kind=3,l.content=F?.content||"",F?l.tags=[...F.tags]:l.tags=[];for(const g of n)l.tags.push(["p",g]);await l.publish()}return Array.from(n)}catch(c){throw console.error("Error following pack users:",c),c}}var ht=j('<img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community gathering" class="absolute inset-0 w-full h-full object-cover"/>'),_t=j('<div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-700"></div>'),kt=j('<button><div class="relative h-32"><img class="absolute inset-0 w-full h-full object-cover"/> <div style="display: none;"></div> <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div> <div class="absolute bottom-3 left-3 right-3"><div class="flex items-center gap-2 text-foreground"><span class="text-2xl"> </span> <span class="font-semibold"> </span></div> <div class="text-xs text-foreground/80 mt-1"> </div></div></div></button>'),yt=j('<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><!> <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div> <div class="absolute bottom-12 left-12 right-12 text-foreground"><h1 class="text-5xl font-bold mb-4"> </h1> <p class="text-xl opacity-90"> </p></div></div> <div class="flex-1 flex items-center justify-center p-8 lg:p-12"><div class="max-w-xl w-full"><div class="mb-12 lg:hidden"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-muted-foreground"> </p></div> <div class="lg:mb-8"><h2 class="text-2xl font-semibold mb-3"> </h2> <p class="text-muted-foreground text-sm"> </p></div> <div class="grid grid-cols-2 gap-3 mb-8"></div> <button> </button></div></div></div>');function wt(k,a){ye(a,!0);const n=()=>Se(De,"$t",c),[c,F]=Ie(),m=[{id:"venezuela",name:"Venezuela",flag:"üáªüá™",description:"Connect with the resilient Venezuelan community",image:"https://images.unsplash.com/photo-1520525003249-2b9cdda513bc?w=800&q=80",fallbackColor:"from-yellow-500 to-blue-600",leaders:["Mar√≠a Rodr√≠guez","Carlos Mendoza","Ana Lucia"]},{id:"cambodia",name:"Cambodia",flag:"üá∞üá≠",description:"Join voices from the Kingdom of Wonder",image:"https://images.unsplash.com/photo-1569154941061-e231b4725ef1?w=800&q=80",fallbackColor:"from-red-500 to-blue-700",leaders:["Sokha Chen","Dara Vong","Srey Mom"]},{id:"nicaragua",name:"Nicaragua",flag:"üá≥üáÆ",description:"Unite with Nicaraguan changemakers",image:"https://images.unsplash.com/photo-1503542724004-53f16c988e63?w=800&q=80",fallbackColor:"from-blue-500 to-sky-600",leaders:["Roberto Silva","Elena Martinez","Juan Carlos"]},{id:"zimbabwe",name:"Zimbabwe",flag:"üáøüáº",description:"Connect with Zimbabwe's innovators",image:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?w=800&q=80",fallbackColor:"from-green-600 to-yellow-500",leaders:["Tendai Moyo","Grace Ndlovu","David Chuma"]},{id:"afghanistan",name:"Afghanistan",flag:"üá¶üá´",description:"Support Afghan voices of hope",image:"https://images.unsplash.com/photo-1574482620811-1aa16ffe3c82?w=800&q=80",fallbackColor:"from-black to-red-700",leaders:["Ahmad Shah","Fatima Rashidi","Nasir Khan"]},{id:"iran",name:"Iran",flag:"üáÆüá∑",description:"Join the Persian community",image:"https://images.unsplash.com/photo-1608592077365-c6399182e63c?w=800&q=80",fallbackColor:"from-green-600 to-red-600",leaders:["Reza Hosseini","Maryam Azadi","Ali Karimi"]}];let l=ve(!1);var g=yt(),p=t(g),w=t(p);{var O=h=>{var f=ht();Me("error",f,()=>D(l,!0)),He(f),_(h,f)},K=h=>{var f=_t();_(h,f)};X(w,h=>{r(l)?h(K,!1):h(O)})}var Y=o(w,4),N=t(Y),J=t(N,!0);e(N);var M=o(N,2),q=t(M,!0);e(M),e(Y),e(p);var A=o(p,2),P=t(A),C=t(P),E=t(C),oe=t(E,!0);e(E);var ie=o(E,2),$=t(ie,!0);e(ie),e(C);var v=o(C,2),b=t(v),R=t(b,!0);e(b);var H=o(b,2),ne=t(H,!0);e(H),e(v);var W=o(v,2);Ke(W,21,()=>m,h=>h.id,(h,f)=>{const T=U(()=>a.selectedCommunity===r(f).id);var z=kt();z.__click=()=>a.onSelectCommunity(r(f).id);var ee=t(z),i=t(ee),d=o(i,2),S=o(d,4),G=t(S),L=t(G),B=t(L,!0);e(L);var Z=o(L,2),ae=t(Z,!0);e(Z),e(G);var se=o(G,2),be=t(se);e(se),e(S),e(ee),e(z),Q(ue=>{me(z,1,`
              relative overflow-hidden rounded-lg border-2 transition-all
              ${r(T)?"border-black dark:border-white shadow-lg scale-[1.02]":"border hover:border dark:hover:border"}
            `),Ne(i,"src",r(f).image),Ne(i,"alt",r(f).name),me(d,1,`absolute inset-0 bg-gradient-to-br ${r(f).fallbackColor}`),s(B,r(f).flag),s(ae,r(f).name),s(be,`${r(f).leaders.length??""} ${ue??""}`)},[()=>n()("onboarding.step1Community.communityLeaders")]),Me("error",i,ue=>{const de=ue.currentTarget;de.style.display="none";const fe=de.nextElementSibling;fe&&(fe.style.display="block")}),He(i),_(h,z)}),e(W);var I=o(W,2);I.__click=function(...h){a.onNext?.apply(this,h)};var re=t(I);e(I),e(P),e(A),e(g),Q((h,f,T,z,ee,i,d)=>{s(J,h),s(q,f),s(oe,T),s($,z),s(R,ee),s(ne,i),I.disabled=!a.selectedCommunity,me(I,1,`
          w-full py-4 px-6 rounded-lg font-medium transition-all
          ${a.selectedCommunity?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),s(re,`${d??""} ‚Üí`)},[()=>n()("onboarding.step1Community.title"),()=>n()("onboarding.step1Community.subtitle"),()=>n()("onboarding.step1Community.titleMobile"),()=>n()("onboarding.step1Community.subtitleMobile"),()=>n()("onboarding.step1Community.chooseCommunity"),()=>n()("onboarding.step1Community.selectDescription"),()=>n()("onboarding.step1Community.continue")]),_(k,g),we(),F()}ke(["click"]);const Pt={venezuela:[Ye[1]],nicaragua:[Ye[2]]},Ct={venezuela:["naddr1qvzqqqyckypzp75v7yjjc7h7lzaf3gfvpck39mvcjmylz7aleup9mtutd5yrlxv7qythwumn8ghj7un9d3shjtnswf5k6ctv9ehx2ap0qythwumn8ghj7un9d3shjtnwdaehgu3wvfskuep0qqv4qmmv946xjcmp94tx2mn90f6k2mrp945kwart09hsc909n2"]},St=it.FollowPack,Je={venezuela:{name:"Venezuela",description:"Connect with the Venezuelan community"},cambodia:{name:"Cambodia",description:"Join voices from the Kingdom of Wonder"},nicaragua:{name:"Nicaragua",description:"Unite with Nicaraguan changemakers"},zimbabwe:{name:"Zimbabwe",description:"Connect with Zimbabwe's innovators"},afghanistan:{name:"Afghanistan",description:"Support Afghan voices of hope"},iran:{name:"Iran",description:"Join the Persian community"}};var Nt=j('<button data-follow-pack-compact="" type="button"><!> <div class="flex-1 min-w-0 text-left"><!> <!> <div class="flex items-center gap-3"><!> <div class="flex items-center gap-1.5 text-xs text-muted-foreground"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <!></div></div></div></button>');function It(k,a){ye(a,!0);let n=gt(a,"class",3,"");const c=mt(a.ndk);var F=Be(),m=Ce(F);Oe(m,()=>Ae.Root,(l,g)=>{g(l,{get ndk(){return c},get followPack(){return a.followPack},get onclick(){return a.onclick},children:(p,w)=>{var O=Nt();O.__click=function(...C){a.onclick?.apply(this,C)};var K=t(O);Oe(K,()=>Ae.Image,(C,E)=>{E(C,{class:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden"})});var Y=o(K,2),N=t(Y);Oe(N,()=>Ae.Title,(C,E)=>{E(C,{class:"text-sm font-semibold mb-1",lines:1})});var J=o(N,2);Oe(J,()=>Ae.Description,(C,E)=>{E(C,{class:"text-xs text-muted-foreground mb-3",maxLength:80,lines:2})});var M=o(J,2),q=t(M);ft(q,{get ndk(){return c},get pubkeys(){return a.followPack.pubkeys},max:3,size:20});var A=o(q,2),P=o(t(A),2);Oe(P,()=>Ae.MemberCount,(C,E)=>{E(C,{format:"long"})}),e(A),e(M),e(Y),e(O),Q(()=>me(O,1,`group flex items-center gap-4 w-full p-4 rounded-xl bg-card hover:bg-muted transition-colors ${n()??""}`)),_(p,O)},$$slots:{default:!0}})}),_(k,F),we()}ke(["click"]);var Dt=j('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div> <p class="mt-4 text-sm text-muted-foreground"> </p></div>'),Ut=j('<div class="text-center py-8 text-muted-foreground"> </div>'),zt=j('<div class="absolute top-1/2 right-4 -translate-y-1/2 bg-primary text-foreground rounded-full p-1.5 z-10 pointer-events-none"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),jt=j('<div class="relative"><!> <!></div>'),Ft=j('<div class="space-y-2 mb-6 lg:mb-8 max-h-[50vh] lg:max-h-[60vh] overflow-y-auto p-2 -m-2"></div>'),Ot=j('<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community leaders" class="absolute inset-0 w-full h-full object-cover"/> <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"></div> <div class="absolute bottom-0 left-0 right-0 p-12"><div class="mb-8"><p class="text-3xl text-foreground/90 italic leading-relaxed"> </p></div> <div class="flex items-center gap-4"><div class="w-12 h-12 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-foreground font-semibold">MR</div> <div class="text-foreground"><div class="font-semibold"> </div> <div class="text-sm opacity-75"> </div></div></div></div></div> <div class="w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-12"><div class="max-w-xl w-full"><div class="mb-6 lg:mb-8"><h1 class="text-2xl lg:text-3xl font-bold mb-2 lg:mb-3"> </h1> <p class="text-sm lg:text-base text-muted-foreground"> </p></div> <!> <button> </button></div></div></div>');function At(k,a){ye(a,!0);const n=()=>Se(De,"$t",c),[c,F]=Ie(),m=U(()=>a.selectedCommunity||"venezuela"),l=U(()=>Ct[r(m)]),g=U(()=>{if(r(l)&&r(l).length>0){const i=r(l).map(d=>st(d));return ce.$subscribe(()=>({filters:i,subId:"followpacks",closeOnEose:!0}))}else{const i=Pt[r(m)];return!i||i.length===0?(console.warn(`No relay configured for community: ${r(m)}`),null):ce.$subscribe(()=>({filters:[{kinds:[St]}],subId:"followpacks",closeOnEose:!0,relayUrls:i,exclusiveRelay:!0}))}}),p=U(()=>r(g)?Array.from(r(g).events??[]).map(d=>Qe.from(d)):[]),w=U(()=>r(g)?.eoseReceived===!1),O=U(()=>Je[r(m)]||Je.venezuela);function K(i){const d=i.encode();console.log("[Step2] Pack clicked:",i.title,"packId:",d),a.selectedPacks.includes(d)?(console.log("[Step2] Deselecting pack"),a.onSelectPacks(a.selectedPacks.filter(S=>S!==d))):(console.log("[Step2] Selecting pack"),a.onSelectPacks([...a.selectedPacks,d])),console.log("[Step2] Selected packs count:",a.selectedPacks.length)}function Y(){console.log("[Step2] Calling onNext"),a.onNext()}var N=Ot(),J=t(N),M=o(t(J),4),q=t(M),A=t(q),P=t(A);e(A),e(q);var C=o(q,2),E=o(t(C),2),oe=t(E),ie=t(oe,!0);e(oe);var $=o(oe,2),v=t($,!0);e($),e(E),e(C),e(M),e(J);var b=o(J,2),R=t(b),H=t(R),ne=t(H),W=t(ne,!0);e(ne);var I=o(ne,2),re=t(I,!0);e(I),e(H);var h=o(H,2);{var f=i=>{var d=Dt(),S=o(t(d),2),G=t(S,!0);e(S),e(d),Q(L=>s(G,L),[()=>n()("onboarding.step2FollowPacks.loading")]),_(i,d)},T=i=>{var d=Be(),S=Ce(d);{var G=B=>{var Z=Ut(),ae=t(Z,!0);e(Z),Q(se=>s(ae,se),[()=>n()("onboarding.step2FollowPacks.noPacksAvailable")]),_(B,Z)},L=B=>{var Z=Ft();Ke(Z,21,()=>r(p).slice(0,6),ae=>ae.id,(ae,se)=>{const be=U(()=>a.selectedPacks.includes(r(se).encode()));var ue=jt(),de=t(ue);{let y=U(()=>r(be)?"ring-2 ring-orange-500 bg-primary-50 dark:bg-primary-950/20":"");It(de,{get ndk(){return ce},get followPack(){return r(se)},onclick:()=>K(r(se)),get class(){return r(y)}})}var fe=o(de,2);{var u=y=>{var te=zt();_(y,te)};X(fe,y=>{r(be)&&y(u)})}e(ue),_(ae,ue)}),e(Z),_(B,Z)};X(S,B=>{r(p).length===0?B(G):B(L,!1)},!0)}_(i,d)};X(h,i=>{r(w)?i(f):i(T,!1)})}var z=o(h,2);z.__click=Y,me(z,1,`
          w-full py-3 lg:py-4 px-6 rounded-lg font-medium transition-all text-sm lg:text-base
          bg-primary/80 text-primary-foreground dark:text-foreground hover:bg-primary
          }
        `);var ee=t(z);e(z),e(R),e(b),e(N),Q((i,d,S,G,L,B)=>{s(P,`"${i??""}"`),s(ie,d),s(v,S),s(W,G),s(re,L),s(ee,`${B??""} ‚Üí`)},[()=>n()("onboarding.step2FollowPacks.quote"),()=>n()("onboarding.step2FollowPacks.quoteName"),()=>n()("onboarding.step2FollowPacks.quoteTitle"),()=>n()("onboarding.step2FollowPacks.title"),()=>n()("onboarding.step2FollowPacks.subtitle",{values:{community:r(O).name}}),()=>a.selectedPacks.length>0?n()("onboarding.step2FollowPacks.continue"):n()("onboarding.step2FollowPacks.skip")]),_(k,N),we(),F()}ke(["click"]);var Mt=j(`<div class="min-h-screen flex items-center justify-center p-8 py-16"><div class="max-w-5xl w-full"><div class="text-center mb-12"><h2 class="text-3xl font-bold mb-3"> </h2> <p class="text-lg text-muted-foreground"> </p></div> <div class="grid md:grid-cols-3 gap-6 mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üõçÔ∏è</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">MR</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Mar√≠a's Bakery</div> <div class="text-xs text-muted-foreground">2km away</div></div></div> <div class="text-sm font-medium mb-1">Fresh Bread & Pastries</div> <div class="text-xs text-muted-foreground mb-2">Daily baked goods, accepting sats</div> <div class="text-sm font-semibold">2,500 sats / dozen</div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">ü§ù</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 border border"><div class="space-y-2"><div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-green-600 dark:text-green-400 font-semibold">BUY</span> <span class="font-medium">100 USD</span></div> <div class="text-right"><div class="font-semibold">485k sats</div></div></div> <div class="flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-red-600 dark:text-red-400 font-semibold">SELL</span> <span class="font-medium">50 USD</span></div> <div class="text-right"><div class="font-semibold">240k sats</div></div></div></div> <div class="flex items-center justify-center gap-1 text-xs text-muted-foreground mt-3"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span> </span></div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üì∞</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">CM</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Carlos Mendoza</div> <div class="text-xs text-muted-foreground">2 hours ago</div></div></div> <div class="text-sm font-medium mb-1">Alternative Supply Chain</div> <div class="text-xs text-muted-foreground mb-2">Direct farmer-to-community network reduces costs by 40%...</div> <div class="flex items-center gap-3 text-xs text-muted-foreground"><span>‚ö° 23.5k</span> <span>üí¨ 156</span> <span>üîÅ 89</span></div></div></div></div> <div class="text-center"><button class="bg-background dark:bg-white text-foreground dark:text-black px-8 py-3 rounded-lg font-medium hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div></div>`);function Et(k,a){ye(a,!0);const n=()=>Se(De,"$t",c),[c,F]=Ie();var m=Mt(),l=t(m),g=t(l),p=t(g),w=t(p,!0);e(p);var O=o(p,2),K=t(O,!0);e(O),e(g);var Y=o(g,2),N=t(Y),J=o(t(N),2),M=t(J,!0);e(J);var q=o(J,2),A=t(q,!0);e(q),Ee(2),e(N);var P=o(N,2),C=o(t(P),2),E=t(C,!0);e(C);var oe=o(C,2),ie=t(oe,!0);e(oe);var $=o(oe,2),v=o(t($),2),b=o(t(v),2),R=t(b,!0);e(b),e(v),e($),e(P);var H=o(P,2),ne=o(t(H),2),W=t(ne,!0);e(ne);var I=o(ne,2),re=t(I,!0);e(I),Ee(2),e(H),e(Y);var h=o(Y,2),f=t(h);f.__click=function(...z){a.onNext?.apply(this,z)};var T=t(f);e(f),e(h),e(l),e(m),Q((z,ee,i,d,S,G,L,B,Z,ae)=>{s(w,z),s(K,ee),s(M,i),s(A,d),s(E,S),s(ie,G),s(R,L),s(W,B),s(re,Z),s(T,`${ae??""} ‚Üí`)},[()=>n()("onboarding.step3Features.title"),()=>n()("onboarding.step3Features.subtitle"),()=>n()("onboarding.step3Features.marketplace.title"),()=>n()("onboarding.step3Features.marketplace.description"),()=>n()("onboarding.step3Features.p2p.title"),()=>n()("onboarding.step3Features.p2p.description"),()=>n()("onboarding.step3Features.p2p.reputationBased"),()=>n()("onboarding.step3Features.news.title"),()=>n()("onboarding.step3Features.news.description"),()=>n()("onboarding.step3Features.continue")]),_(k,m),we(),F()}ke(["click"]);var Rt=j('<img alt="Profile" class="w-full h-full object-cover"/> <div class="absolute inset-0 bg-background/0 hover:bg-background/40 transition-all flex items-center justify-center opacity-0 hover:opacity-100"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Tt=j('<p class="text-xs mt-2 text-muted-foreground"> </p>'),Lt=j('<div class="w-full h-full bg-neutral-100 dark:bg-muted flex flex-col items-center justify-center"><div class="w-12 h-12 border-4 border border-t-neutral-900 dark:border-t-white rounded-full animate-spin"></div> <!></div>'),qt=j('<span class="text-3xl font-bold group-hover:opacity-50 transition-opacity"> </span> <div class="opacity-0 group-hover:opacity-100 transition-opacity absolute inset-0 flex items-center justify-center bg-background/40"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Wt=Ge('<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-muted-foreground"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>'),Bt=j('<div class="w-full h-full bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100 transition-colors flex flex-col items-center justify-center gap-2 group"><!></div>'),Kt=j('<p class="text-xs text-red-600 dark:text-red-400 mt-2 text-center"> </p>'),Ht=j('<div class="w-full"><input type="file" accept="image/*" class="hidden"/> <div role="button" tabindex="0"><!></div> <!></div>');function Vt(k,a){ye(a,!0);const n=()=>Se(De,"$t",c),[c,F]=Ie(),m=new $e(a.ndk,a.signer),l=et(m);let g,p=ve(at(a.currentImageUrl||null)),w=ve(!1);async function O(v){if(!v.type.startsWith("image/")){alert(n()("onboarding.pictureUpload.invalidFile"));return}const b=new FileReader;b.onload=R=>{D(p,R.target?.result,!0)},b.readAsDataURL(v);try{await l.upload(v,{fallbackServer:"https://blossom.primal.net"}),l.result?.url&&a.onUploadComplete(l.result.url)}catch(R){console.error("Upload failed:",R),D(p,null)}}function K(v){const R=v.target.files?.[0];R&&O(R)}function Y(v){v.preventDefault(),D(w,!0)}function N(){D(w,!1)}async function J(v){v.preventDefault(),D(w,!1);const b=v.dataTransfer?.files[0];b&&await O(b)}function M(){g?.click()}var q=Ht(),A=t(q);A.__change=K,tt(A,v=>g=v,()=>g);var P=o(A,2);P.__click=M,P.__keydown=v=>v.key==="Enter"&&M();var C=t(P);{var E=v=>{var b=Rt(),R=Ce(b);Ee(2),Q(()=>Ne(R,"src",r(p))),_(v,b)},oe=v=>{var b=Be(),R=Ce(b);{var H=W=>{var I=Lt(),re=o(t(I),2);{var h=f=>{var T=Tt(),z=t(T);e(T),Q(()=>s(z,`${l.progress.percentage??""}%`)),_(f,T)};X(re,f=>{l.progress&&f(h)})}e(I),_(W,I)},ne=W=>{var I=Bt(),re=t(I);{var h=T=>{var z=qt(),ee=Ce(z),i=t(ee,!0);e(ee),Ee(2),Q(()=>s(i,a.fallbackInitials)),_(T,z)},f=T=>{var z=Wt();_(T,z)};X(re,T=>{a.fallbackInitials?T(h):T(f,!1)})}e(I),_(W,I)};X(R,W=>{l.status==="uploading"?W(H):W(ne,!1)},!0)}_(v,b)};X(C,v=>{r(p)&&l.status!=="uploading"?v(E):v(oe,!1)})}e(P);var ie=o(P,2);{var $=v=>{var b=Kt(),R=t(b,!0);e(b),Q(H=>s(R,H),[()=>l.error?.message||n()("onboarding.pictureUpload.uploadFailed")]),_(v,b)};X(ie,v=>{l.status==="error"&&v($)})}e(q),Q(()=>me(P,1,`
      relative w-32 h-32 rounded-full overflow-hidden cursor-pointer
      border-4 border-background
      transition-all duration-200
      ${r(w)?"scale-105 border-foreground":""}
      ${l.status==="uploading"?"pointer-events-none":""}
    `)),Me("dragover",P,Y),Me("dragleave",P,N),Me("drop",P,J),_(k,q),we(),F()}ke(["change","click","keydown"]);function Yt(k){try{return new URL(k).hostname}catch{return""}}async function Jt(k,a){if(!k||!a)return{available:!1,error:"Username and domain are required"};if(!/^[a-z0-9_-]+$/i.test(k))return{available:!1,error:"Username can only contain letters, numbers, underscore, and hyphen"};try{const c=`${a.includes("localhost")||a.includes("test")?"http":"https"}://${a}/.well-known/nostr.json?name=${encodeURIComponent(k)}`,F=await fetch(c);if(F.status===404)return{available:!0};if(F.ok){const m=await F.json();return m.names&&m.names[k]?{available:!1,error:"Username is already taken"}:{available:!0}}return{available:!1,error:"Unable to check availability. Please try again."}}catch(n){return console.error("Error checking NIP-05 availability:",n),{available:!0}}}function Gt(k,a){return`${k}@${a}`}var Zt=j('<div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),Qt=Ge('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>'),Xt=j('<div class="px-2 py-1 bg-red-500/10 border-t border-red-500/20"><p class="text-xs text-red-600 dark:text-red-400"> </p></div>'),$t=j("<div> </div>"),er=j('<div class="space-y-1"><div class="text-xs text-muted-foreground font-medium"> </div> <div class="flex items-center gap-1"><input type="text" class="text-sm text-foreground bg-transparent border-b-2 border hover:border focus:border-primary dark:focus:border-primary outline-none transition-colors flex-1 min-w-0"/> <span class="text-sm text-muted-foreground"> </span></div> <!></div>'),tr=j('<div class="min-h-screen flex flex-col items-center justify-center p-8"><div class="text-center mb-8 max-w-2xl"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-lg text-muted-foreground"> </p></div> <div class="relative flex items-center justify-center gap-6 mb-12"><div class="w-80 bg-card border border rounded-xl overflow-hidden transform -rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OQwX.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OQwW.jpg" alt="Leopoldo L√≥pez" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Leopoldo L√≥pez</h3> <p class="text-sm text-muted-foreground mb-2">‚úì leo@primal.net</p> <p class="text-sm text-muted-foreground">Former Mayor of Caracas (2000-08). Political prisoner 2014-21. Co-founder of World Liberty Congress.</p></div></div></div> <div class="w-96 bg-card border-2 border-foreground rounded-xl overflow-hidden shadow-2xl transform scale-105 z-10"><input type="file" accept="image/*" class="hidden"/> <button type="button" class="h-36 relative w-full group bg-gradient-to-br from-primary-500 to-primary-600"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button> <!> <div class="relative -mt-14 px-6 pb-6"><!> <div class="space-y-3"><div><input type="text" class="text-2xl font-bold bg-transparent border-b-2 border-transparent hover:border !ring-0 outline-none transition-colors w-full text-foreground"/></div> <div><textarea class="text-sm text-muted-foreground bg-transparent border border-transparent hover:border !ring-0 outline-none transition-colors w-full resize-none rounded p-2"></textarea></div> <!></div></div></div> <div class="w-80 bg-card border border rounded-xl overflow-hidden transform rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OTue.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OTkq.jpg" alt="Enderson Sequera" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Enderson Sequera</h3> <p class="text-sm text-muted-foreground mb-2">üáªüá™ Political Scientist</p> <p class="text-sm text-muted-foreground">Political advisor & freedom fighter. Bitcoin is freedom - in the fight against dictatorship it saves lives.</p></div></div></div></div> <button> </button></div>');function rr(k,a){ye(a,!0);const n=()=>Se(De,"$t",c),[c,F]=Ie(),m=U(()=>a.inviteRelay&&lt(a.inviteRelay)),l=U(()=>a.inviteRelay?Yt(a.inviteRelay):"");let g=ve(""),p=ve(!1),w=ve(null),O=ve(!1),K=null;function Y(u){if(D(g,u,!0),!u||!r(l)){D(w,null),D(O,!1);return}K&&clearTimeout(K),D(p,!0),D(w,{type:"info",text:n()("onboarding.step4Profile.availability.checking")},!0),K=setTimeout(async()=>{const y=await Jt(u,r(l));y.available?(D(w,{type:"success",text:n()("onboarding.step4Profile.availability.available")},!0),D(O,!0)):(D(w,{type:"error",text:y.error||n()("onboarding.step4Profile.availability.notAvailable")},!0),D(O,!1)),D(p,!1)},500)}const N=U(()=>ce.$currentUser),J=U(()=>r(N)?new $e(ce,a.signer):null),M=U(()=>r(J)?et(r(J)):null);let q,A=ve(null);async function P(u){const te=u.target.files?.[0];if(te){if(!r(M)){D(A,n()("onboarding.step4Profile.upload.notAvailable"),!0);return}if(!te.type.startsWith("image/")){D(A,n()("onboarding.step4Profile.upload.invalidFile"),!0);return}if(te.size>5*1024*1024){D(A,n()("onboarding.step4Profile.upload.sizeTooLarge"),!0);return}D(A,null);try{await r(M).upload(te,{fallbackServer:"https://blossom.primal.net"}),r(M).result?.url&&a.onUpdateProfile({...a.profileData,banner:r(M).result.url})}catch(x){console.error("Upload failed:",x),D(A,n()("onboarding.step4Profile.upload.failed"),!0)}}}function C(u){return u?u.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):"?"}function E(u,y){a.onUpdateProfile({...a.profileData,[u]:y})}async function oe(){if(r(O)&&r(g)&&r(l)){const u=Gt(r(g),r(l));a.onUpdateProfile({...a.profileData,nip05:u})}a.onNext()}function ie(u){a.onUpdateProfile({...a.profileData,picture:u})}var $=tr(),v=t($),b=t(v),R=t(b,!0);e(b);var H=o(b,2),ne=t(H,!0);e(H),e(v);var W=o(v,2),I=o(t(W),2),re=t(I);re.__change=P,tt(re,u=>q=u,()=>q);var h=o(re,2);h.__click=()=>q?.click();var f=t(h),T=t(f);{var z=u=>{var y=Zt(),te=o(Ce(y),2),x=t(te);e(te),Q(()=>s(x,`${r(M).progress?.percentage??""}%`)),_(u,y)},ee=u=>{var y=Qt();_(u,y)};X(T,u=>{r(M)?.status==="uploading"?u(z):u(ee,!1)})}e(f),e(h);var i=o(h,2);{var d=u=>{var y=Xt(),te=t(y),x=t(te,!0);e(te),e(y),Q(()=>s(x,r(A))),_(u,y)};X(i,u=>{r(A)&&u(d)})}var S=o(i,2),G=t(S);{let u=U(()=>C(a.profileData.name));Vt(G,{get ndk(){return ce},get signer(){return a.signer},onUploadComplete:ie,get currentImageUrl(){return a.profileData.picture},get fallbackInitials(){return r(u)}})}var L=o(G,2),B=t(L),Z=t(B);Ve(Z),Z.__input=u=>E("name",u.currentTarget.value),e(B);var ae=o(B,2),se=t(ae);ot(se),se.__input=u=>E("bio",u.currentTarget.value),Ne(se,"rows",3),e(ae);var be=o(ae,2);{var ue=u=>{var y=er(),te=t(y),x=t(te,!0);e(te);var V=o(te,2),ge=t(V);Ve(ge),ge.__input=pe=>Y(pe.currentTarget.value);var xe=o(ge,2),Pe=t(xe);e(xe),e(V);var Ue=o(V,2);{var ze=pe=>{var he=$t(),_e=t(he,!0);e(he),Q(()=>{me(he,1,`text-xs ${r(w).type==="success"?"text-green-600 dark:text-green-400":r(w).type==="error"?"text-red-600 dark:text-red-400":"text-muted-foreground"}`),s(_e,r(w).text)}),_(pe,he)};X(Ue,pe=>{r(w)&&pe(ze)})}e(y),Q((pe,he)=>{s(x,pe),qe(ge,r(g)),Ne(ge,"placeholder",he),s(Pe,`@${r(l)??""}`)},[()=>n()("onboarding.step4Profile.usernameLabel"),()=>n()("onboarding.step4Profile.usernamePlaceholder")]),_(u,y)};X(be,u=>{r(m)&&u(ue)})}e(L),e(S),e(I),Ee(2),e(W);var de=o(W,2);de.__click=oe;var fe=t(de);e(de),e($),Q((u,y,te,x,V)=>{s(R,u),s(ne,y),h.disabled=r(M)?.status==="uploading",Ze(h,a.profileData.banner?`background-image: url(${a.profileData.banner}); background-size: cover; background-position: center;`:""),qe(Z,a.profileData.name),Ne(Z,"placeholder",te),qe(se,a.profileData.bio),Ne(se,"placeholder",x),de.disabled=!a.profileData.name,me(de,1,`
      px-8 py-3 rounded-lg font-medium transition-all
      ${a.profileData.name?"bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100":"bg-neutral-100 dark:bg-muted text-muted-foreground cursor-not-allowed"}
    `),s(fe,`${V??""} ‚Üí`)},[()=>n()("onboarding.step4Profile.title"),()=>n()("onboarding.step4Profile.subtitle"),()=>n()("onboarding.step4Profile.namePlaceholder"),()=>n()("onboarding.step4Profile.bioPlaceholder"),()=>n()("onboarding.step4Profile.continue")]),_(k,$),we(),F()}ke(["change","click","input"]);const Re={en:"introduction",es:"bienvenidas",fa:"ŸÖÿπÿ±ŸÅ€å",km:"·ûÄ·û∂·ûö·ûé·üÇ·ûì·û∂·üÜ",sn:"kuzivisa"};function ar(k){if(!k)return Re.en;const a=k.split("-")[0];return Re[a]||Re.en}function or(k){const a=ar(k);return a===Re.en?["introduction"]:["introduction",a]}var nr=j('<svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg> <span class="text-muted-foreground"> </span>',1),ir=j('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg> <span class="text-muted-foreground"> </span>',1),sr=j('<div class="mt-4 p-3 bg-primary-50 dark:bg-primary-900/10 border border-primary-200 dark:border-primary-800 rounded-lg"><div class="flex items-center justify-between"><div class="flex items-center gap-2 text-sm"><!></div> <button class="text-xs px-2 py-1 rounded hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-colors text-primary dark:text-primary font-medium"> </button></div></div>'),lr=j('<div class="min-h-screen flex flex-col"><div class="flex-1 px-4 lg:px-8 py-6 max-w-[1400px] mx-auto w-full pb-32 lg:pb-6"><div class="text-center mb-6"><h1 class="text-2xl lg:text-3xl font-bold mb-2"> </h1> <p class="text-muted-foreground"> </p></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:h-[calc(100vh-200px)]"><div class="flex flex-col order-1 lg:order-2"><div class="lg:p-6"><label class="block font-semibold mb-3"> </label> <div class="p-4 bg-card border border rounded-lg"><!></div> <div class="flex items-center justify-between mt-3"><div class="text-xs text-muted-foreground"><!></div> <div class="text-xs"><span> </span></div></div> <!> <div class="hidden lg:flex gap-3 mt-6"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div> <div class="flex flex-col order-2 lg:order-1"><h3 class="font-semibold text-sm text-muted-foreground uppercase tracking-wide mb-4"> </h3> <div class="space-y-3 overflow-y-auto flex-1 pr-2 max-h-[400px] lg:max-h-none"></div></div></div></div> <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-card border-t border p-4 z-50"><div class="flex gap-3 max-w-[1400px] mx-auto"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div>');function dr(k,a){ye(a,!0);const n=()=>Se(ut,"$locale",F),c=()=>Se(De,"$t",F),[F,m]=Ie();let l=ve(""),g=ve(!1),p=ve(!!a.inviterPubkey);const w=U(()=>r(l).length>10),O=U(()=>r(l).length);let K=ve(null);We(()=>{if(!a.inviterPubkey){D(K,null);return}ce.fetchUser(a.inviterPubkey).then(x=>{x?.fetchProfile().then(V=>{D(K,V,!0)})})});const Y=U(()=>r(K)?.displayName||r(K)?.name||"your inviter"),N=ce.$subscribe(()=>({filters:[{kinds:[1],"#t":["introductions"]}],relays:["wss://pyramid.fiatjaf.com"],cacheUsage:dt.ONLY_RELAY,exclusiveRelay:!0,limit:10}),ce);async function J(){if(r(w)){D(g,!0);try{const x=or(n());let V=r(l).trim();for(const xe of x){const Pe=`#${xe}`;V.includes(Pe)||(V=`${V} ${Pe}`)}const ge={content:V,hashtags:x,mentionInviter:r(p)&&a.inviterPubkey?a.inviterPubkey:void 0};le.setIntroductionText(JSON.stringify(ge)),a.onNext()}catch(x){console.error("Error saving introduction:",x),D(g,!1)}}}var M=lr(),q=t(M),A=t(q),P=t(A),C=t(P,!0);e(P);var E=o(P,2),oe=t(E,!0);e(E),e(A);var ie=o(A,2),$=t(ie),v=t($),b=t(v),R=t(b,!0);e(b);var H=o(b,2),ne=t(H);{let x=U(()=>c()("onboarding.step5Introduction.placeholder"));pt(ne,{get placeholder(){return r(x)},get disabled(){return r(g)},get value(){return r(l)},set value(V){D(l,V,!0)}})}e(H);var W=o(H,2),I=t(W),re=t(I);{var h=x=>{var V=rt();Q(ge=>s(V,ge),[()=>c()("onboarding.step5Introduction.tipLocation",{values:{location:a.profileData.location}})]),_(x,V)};X(re,x=>{a.profileData.location&&x(h)})}e(I);var f=o(I,2),T=t(f),z=t(T);e(T),e(f),e(W);var ee=o(W,2);{var i=x=>{var V=sr(),ge=t(V),xe=t(ge),Pe=t(xe);{var Ue=_e=>{var je=nr(),Fe=o(Ce(je),2),Te=t(Fe,!0);e(Fe),Q(Le=>s(Te,Le),[()=>c()("onboarding.step5Introduction.inviterNotify",{values:{name:r(Y)}})]),_(_e,je)},ze=_e=>{var je=ir(),Fe=o(Ce(je),2),Te=t(Fe,!0);e(Fe),Q(Le=>s(Te,Le),[()=>c()("onboarding.step5Introduction.inviterNoNotify",{values:{name:r(Y)}})]),_(_e,je)};X(Pe,_e=>{r(p)?_e(Ue):_e(ze,!1)})}e(xe);var pe=o(xe,2);pe.__click=()=>D(p,!r(p));var he=t(pe,!0);e(pe),e(ge),e(V),Q(_e=>s(he,_e),[()=>r(p)?c()("onboarding.step5Introduction.inviterRemove"):c()("onboarding.step5Introduction.inviterAddBack")]),_(x,V)};X(ee,x=>{a.inviterPubkey&&x(i)})}var d=o(ee,2),S=t(d);S.__click=function(...x){a.onSkip?.apply(this,x)};var G=t(S,!0);e(S);var L=o(S,2);L.__click=J;var B=t(L,!0);e(L),e(d),e(v),e($);var Z=o($,2),ae=t(Z),se=t(ae,!0);e(ae);var be=o(ae,2);Ke(be,21,()=>N.events.slice(0,10),x=>x.id,(x,V)=>{bt(x,{get event(){return r(V)}})}),e(be),e(Z),e(ie),e(q);var ue=o(q,2),de=t(ue),fe=t(de);fe.__click=function(...x){a.onSkip?.apply(this,x)};var u=t(fe,!0);e(fe);var y=o(fe,2);y.__click=J;var te=t(y,!0);e(y),e(de),e(ue),e(M),Q((x,V,ge,xe,Pe,Ue,ze,pe,he)=>{s(C,x),s(oe,V),s(R,ge),me(T,1,nt(r(O)>500?"text-red-500":"text-muted-foreground")),s(z,`${r(O)??""}
                ${xe??""}`),s(G,Pe),L.disabled=!r(w)||r(g),me(L,1,`
                flex-1 py-3 px-6 rounded-lg font-medium transition-all
                ${r(w)&&!r(g)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
              `),s(B,Ue),s(se,ze),s(u,pe),y.disabled=!r(w)||r(g),me(y,1,`
          flex-1 py-3 px-6 rounded-lg font-medium transition-all
          ${r(w)&&!r(g)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),s(te,he)},[()=>c()("onboarding.step5Introduction.title"),()=>c()("onboarding.step5Introduction.subtitle"),()=>c()("onboarding.step5Introduction.writeLabel"),()=>c()("onboarding.step5Introduction.characters"),()=>c()("onboarding.step5Introduction.skipForNow"),()=>r(g)?c()("onboarding.step5Introduction.publishing"):c()("onboarding.step5Introduction.postIntroduction"),()=>c()("onboarding.step5Introduction.recentIntroductions"),()=>c()("onboarding.step5Introduction.skipForNow"),()=>r(g)?c()("onboarding.step5Introduction.publishing"):c()("onboarding.step5Introduction.postIntroduction")]),_(k,M),we(),m()}ke(["click"]);var cr=j('<div class="min-h-screen flex items-center justify-center p-8"><div class="max-w-2xl w-full text-center"><div class="text-7xl mb-6">üéâ</div> <h1 class="text-4xl font-bold mb-4"> </h1> <p class="text-xl text-muted-foreground mb-12"> </p> <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground"> </div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground"> </div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1">1</div> <div class="text-sm text-muted-foreground"> </div></div></div> <div class="bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-900 dark:to-neutral-800 rounded-xl p-8 mb-8 text-left max-w-lg mx-auto"><h3 class="font-semibold mb-4"> </h3> <ul class="space-y-3 text-sm"><li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li></ul></div> <button class="bg-background dark:bg-white text-foreground dark:text-black px-12 py-4 rounded-lg font-medium text-lg hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div>');function vr(k,a){ye(a,!0);const n=()=>Se(De,"$t",c),[c,F]=Ie(),m=U(()=>a.selectedPacks.length*25);var l=cr(),g=t(l),p=o(t(g),2),w=t(p,!0);e(p);var O=o(p,2),K=t(O,!0);e(O);var Y=o(O,2),N=t(Y),J=t(N),M=t(J,!0);e(J);var q=o(J,2),A=t(q,!0);e(q),e(N);var P=o(N,2),C=t(P),E=t(C,!0);e(C);var oe=o(C,2),ie=t(oe,!0);e(oe),e(P);var $=o(P,2),v=o(t($),2),b=t(v,!0);e(v),e($),e(Y);var R=o(Y,2),H=t(R),ne=t(H,!0);e(H);var W=o(H,2),I=t(W),re=o(t(I),2),h=t(re,!0);e(re),e(I);var f=o(I,2),T=o(t(f),2),z=t(T,!0);e(T),e(f);var ee=o(f,2),i=o(t(ee),2),d=t(i,!0);e(i),e(ee);var S=o(ee,2),G=o(t(S),2),L=t(G,!0);e(G),e(S),e(W),e(R);var B=o(R,2);B.__click=function(...ae){a.onComplete?.apply(this,ae)};var Z=t(B);e(B),e(g),e(l),Q((ae,se,be,ue,de,fe,u,y,te,x,V)=>{s(w,ae),s(K,se),s(M,r(m)),s(A,be),s(E,a.selectedPacks.length),s(ie,ue),s(b,de),s(ne,fe),s(h,u),s(z,y),s(d,te),s(L,x),s(Z,`${V??""} ‚Üí`)},[()=>n()("onboarding.step8Welcome.title",{values:{name:a.profileData.name||n()("onboarding.step8Welcome.friend")}}),()=>n()("onboarding.step8Welcome.subtitle"),()=>n()("onboarding.step8Welcome.stats.peopleFollowing"),()=>n()("onboarding.step8Welcome.stats.followPacks"),()=>n()("onboarding.step8Welcome.stats.postPublished"),()=>n()("onboarding.step8Welcome.whatsNext.title"),()=>n()("onboarding.step8Welcome.whatsNext.feedReady",{values:{count:r(m)}}),()=>n()("onboarding.step8Welcome.whatsNext.marketplace"),()=>n()("onboarding.step8Welcome.whatsNext.p2pTrades"),()=>n()("onboarding.step8Welcome.whatsNext.earnSats"),()=>n()("onboarding.step8Welcome.enterAgora")]),_(k,l),we(),F()}ke(["click"]);var ur=j('<button class="fixed top-6 left-6 z-50 w-9 h-9 bg-card border border rounded-full flex items-center justify-center hover:bg-accent transition-colors" aria-label="Go back"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button>'),gr=j('<div class="min-h-screen bg-card"><div class="fixed top-0 left-0 right-0 z-40 bg-card"><div class="h-1 bg-neutral-200 dark:bg-muted"><div class="h-full bg-background dark:bg-white transition-all duration-300 ease-out"></div></div></div> <!> <div class="relative pt-8"><!> <!> <!> <!> <!> <!></div></div>');function zr(k,a){ye(a,!0);let n=ve(null),c=ve(!1),F=ve(!1);const m=U(()=>le.currentStep),l=U(()=>le.totalSteps),g=U(()=>r(m)/r(l)*100),p=U(()=>le.invite),w=U(()=>le.hasCompletedInviteSetup),O=U(()=>le.selectedCommunity),K=U(()=>le.selectedPacks),Y=U(()=>le.profileData);We(()=>{const i=ce.$activeUser;!i||r(F)||(async()=>{try{console.log("[Onboarding] Checking for existing profile...");const d=await i.fetchProfile();d&&(d.name||d.displayName||d.about)?(console.log("[Onboarding] ‚úì Found existing profile, will skip profile step"),D(c,!0)):(console.log("[Onboarding] No existing profile found"),D(c,!1))}catch(d){console.log("[Onboarding] Error checking for profile:",d),D(c,!1)}finally{D(F,!0)}})()}),We(()=>{r(n)||ce.$activeUser||(D(n,ct.generate(),!0),console.log("[Onboarding] ‚úì Generated new keypair, pubkey:",r(n).pubkey))});function N(i){i===4&&r(c)&&(console.log("[Onboarding] Skipping profile step - user has existing profile"),i=5),le.setStep(i),typeof window<"u"&&window.scrollTo(0,0)}function J(){if(r(m)>le.minStep){let i=r(m)-1;i===4&&r(c)&&(i=3),N(i)}}async function M(){N(3)}async function q(){N(5)}async function A(){const i=ce.$activeUser,d=r(c)&&i;if(!d&&!r(n)){console.error("[Onboarding] ‚úó No signer available for new user");return}try{console.log("[Onboarding] Starting onboarding completion..."),!d&&r(n)?(console.log("[Onboarding] Logging in new user..."),await ce.$sessions?.login(r(n)),console.log("[Onboarding] ‚úì Logged in with pubkey:",r(n).pubkey)):console.log("[Onboarding] Existing user already logged in");const S=r(n)||ce.signer;if(!S){alert("[Onboarding] ‚úó No signer available");return}r(p)&&!r(w)?(console.log("[Onboarding] Invite flow: completing invite setup"),await le.completeInviteSetup(S)):d?console.log("[Onboarding] Existing user: skipping profile publishing"):(console.log("[Onboarding] Regular flow: publishing profile and setup"),await le.publishProfileAndSetup(S)),r(K).length>0&&(console.log("[Onboarding] Publishing kind:3 from",r(K).length,"packs"),await xt(ce,r(K)));const G=le.introductionText;if(G){console.log("[Onboarding] Publishing introduction post");try{const L=JSON.parse(G),B=new Xe(ce);B.kind=1,B.content=L.content,B.tags=L.hashtags.map(Z=>["t",Z]),L.mentionInviter&&B.tags.push(["p",L.mentionInviter]),await B.publish(),console.log("[Onboarding] ‚úì Published introduction")}catch(L){console.error("[Onboarding] ‚úó Error publishing introduction:",L)}}console.log("[Onboarding] ‚úì Onboarding complete"),le.clear(),vt("/")}catch(S){console.error("[Onboarding] ‚úó Error during onboarding completion:",S)}}var P=gr(),C=t(P),E=t(C),oe=t(E);e(E),e(C);var ie=o(C,2);{var $=i=>{var d=ur();d.__click=J,_(i,d)};X(ie,i=>{r(m)>(r(p)?3:1)&&i($)})}var v=o(ie,2),b=t(v);{var R=i=>{wt(i,{get selectedCommunity(){return r(O)},onSelectCommunity:d=>le.setSelectedCommunity(d),onNext:()=>N(2)})};X(b,i=>{r(m)===1&&!r(p)&&i(R)})}var H=o(b,2);{var ne=i=>{At(i,{get selectedCommunity(){return r(O)},get selectedPacks(){return r(K)},onSelectPacks:d=>le.setSelectedPacks(d),onNext:M})};X(H,i=>{r(m)===2&&!r(p)&&i(ne)})}var W=o(H,2);{var I=i=>{Et(i,{onNext:()=>N(4)})};X(W,i=>{r(m)===3&&i(I)})}var re=o(W,2);{var h=i=>{{let d=U(()=>r(p)?.inviteRelay),S=U(()=>r(n)??void 0);rr(i,{get profileData(){return r(Y)},onUpdateProfile:G=>le.setProfileData(G),onNext:q,get inviteRelay(){return r(d)},get signer(){return r(S)}})}};X(re,i=>{r(m)===4&&i(h)})}var f=o(re,2);{var T=i=>{{let d=U(()=>r(p)?.inviter),S=U(()=>r(p)?.inviteRelay);dr(i,{get profileData(){return r(Y)},get inviterPubkey(){return r(d)},get inviteRelay(){return r(S)},onNext:()=>N(6),onSkip:()=>N(6)})}};X(f,i=>{r(m)===5&&i(T)})}var z=o(f,2);{var ee=i=>{vr(i,{get selectedPacks(){return r(K)},get profileData(){return r(Y)},onComplete:A})};X(z,i=>{r(m)===6&&i(ee)})}e(v),e(P),Q(()=>Ze(oe,`width: ${r(g)}%`)),_(k,P),we()}ke(["click"]);export{zr as component};
