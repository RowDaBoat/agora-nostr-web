import{f as d,s as me,a as s,d as je,c as q,b as Ge}from"../chunks/CvdcXPsy.js";import{s as ce,b as tt,g as e,a as re,p as Ie,u as xe,c as o,f as u,r as a,d as _,n as Ee,t as pe,e as Te,h as L,az as rt}from"../chunks/-h67YDCL.js";import{i as h}from"../chunks/DG6c9x1x.js";import{e as be,i as at}from"../chunks/DBJvd_ZN.js";import{c as ze}from"../chunks/C52XBfTo.js";import{s as st,a as ot}from"../chunks/CptlhHpT.js";import{o as it,n as te,y as Ae,s as y,N as ee,z as lt,b as nt}from"../chunks/CAJmB2zv.js";import{l as Ve}from"../chunks/BHCKFZxr.js";import{h as Oe}from"../chunks/Cu6qrFqU.js";import{E as dt,N as ct}from"../chunks/Cq1keEic.js";import{M as vt,A as ut}from"../chunks/D-o2YOxw.js";import{a as Fe,s as Be}from"../chunks/vjiKTA8K.js";import{T as ft}from"../chunks/CSxV4X3F.js";import{g as gt}from"../chunks/Dtp51Kds.js";import{H as We}from"../chunks/BMQIdyp3.js";import{M as ht}from"../chunks/Z3Y7MGzv.js";import{a as mt}from"../chunks/DoDeW8UU.js";import{b as Je}from"../chunks/ByH5JKyU.js";import{U as Pe}from"../chunks/Dk4THxss.js";import{c as Ce,L as Ke}from"../chunks/B1qVqaSy.js";import{R as pt}from"../chunks/Cst4b681.js";import{u as De}from"../chunks/Xqq2-EA3.js";import{p as _t}from"../chunks/aVfrvTxa.js";class xt{#e=ce(tt(new Set));get _selectedHashtags(){return e(this.#e)}set _selectedHashtags(n){re(this.#e,n,!0)}get selectedHashtags(){return Array.from(this._selectedHashtags)}get hasFilters(){return this._selectedHashtags.size>0}toggleHashtag(n){const k=n.toLowerCase();this._selectedHashtags.has(k)?this._selectedHashtags.delete(k):this._selectedHashtags.add(k),this._selectedHashtags=new Set(this._selectedHashtags)}addHashtag(n){const k=n.toLowerCase();this._selectedHashtags.has(k)||(this._selectedHashtags.add(k),this._selectedHashtags=new Set(this._selectedHashtags))}removeHashtag(n){const k=n.toLowerCase();this._selectedHashtags.has(k)&&(this._selectedHashtags.delete(k),this._selectedHashtags=new Set(this._selectedHashtags))}clearAll(){this._selectedHashtags.clear(),this._selectedHashtags=new Set}isSelected(n){return this._selectedHashtags.has(n.toLowerCase())}}const Y=new xt;var bt=d('<img class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110" loading="lazy"/> <div class="absolute inset-0 bg-gradient-to-t from-neutral-900 via-transparent to-transparent opacity-60"></div>',1),yt=d('<div class="w-full h-full flex items-center justify-center"><svg class="w-16 h-16 text-primary/30" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div>'),kt=d('<p class="text-xs text-muted-foreground"><!></p>'),wt=d('<a class="group block flex-shrink-0 w-[280px] h-[360px] rounded-2xl overflow-hidden bg-card hover:bg-muted transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl hover:shadow-primary/10"><div class="relative w-full h-48 overflow-hidden bg-gradient-to-br bg-primary/20"><!></div> <div class="p-4 flex flex-col h-[calc(100%-12rem)]"><h3 class="font-bold text-base text-foreground mb-2 line-clamp-2 leading-snug font-serif"> </h3> <p class="text-muted-foreground text-xs mb-3 line-clamp-3 leading-relaxed flex-1"> </p> <div class="flex items-center gap-2 mt-auto pt-2 border-t border-border"><div class="flex-1 min-w-0"><p class="text-xs font-medium text-muted-foreground truncate"> </p> <!></div> <svg class="w-5 h-5 text-primary opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></div></a>');function Mt(ae,n){Ie(n,!0);let k=ce(void 0),z=ce(null);xe(()=>{re(k,n.article.author,!0),n.article.author.fetchProfile().then(M=>{re(z,M,!0)})});const G=u(()=>n.article.title||"Untitled"),le=u(()=>n.article.summary),m=u(()=>n.article.image),x=u(()=>n.article.published_at||n.article.created_at),H=u(()=>gt(n.article,e(k))),ve=u(()=>e(z)?.name||e(z)?.displayName||"Anonymous"),ue=u(()=>{const M=e(le)||n.article.content;return M.slice(0,100)+(M.length>100?"...":"")});var C=wt(),P=o(C),N=o(P);{var r=M=>{var O=bt(),fe=L(O);Ee(2),pe(()=>{Fe(fe,"src",e(m)),Fe(fe,"alt",e(G))}),s(M,O)},l=M=>{var O=yt();s(M,O)};h(N,M=>{e(m)?M(r):M(l,!1)})}a(P);var v=_(P,2),w=o(v),E=o(w,!0);a(w);var i=_(w,2),F=o(i,!0);a(i);var I=_(i,2),K=o(I),Z=o(K),V=o(Z,!0);a(Z);var _e=_(Z,2);{var ye=M=>{var O=kt(),fe=o(O);ft(fe,{get timestamp(){return e(x)}}),a(O),s(M,O)};h(_e,M=>{e(x)&&M(ye)})}a(K),Ee(2),a(I),a(v),a(C),pe(()=>{Fe(C,"href",e(H)),me(E,e(G)),me(F,e(ue)),me(V,e(ve))}),s(ae,C),Te()}var Ht=d('<div class="flex items-center justify-center h-[calc(100vh-12rem)] text-muted-foreground">No videos found</div>'),Ft=Ge('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>'),Rt=Ge('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>'),Lt=d('<p class="text-white text-sm mb-3 line-clamp-3"> </p>'),Ct=d('<div class="relative w-screen snap-start snap-always flex items-center justify-center bg-black h-screen lg:h-screen"><video class="w-full h-full object-contain" loop playsinline="" preload="auto"><track kind="captions"/></video> <div class="absolute inset-0 pointer-events-none"><div class="absolute top-0 left-0 right-0 bg-gradient-to-b from-black/70 via-black/20 to-transparent p-4 pointer-events-auto"><div class="flex items-center gap-3"><!> <div class="flex-1 min-w-0"><div class="text-white font-semibold text-sm truncate"> </div></div></div></div> <div class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-auto"><button class="w-12 h-12 rounded-full bg-black/50 hover:bg-black/70 backdrop-blur-sm flex items-center justify-center transition-colors" type="button"><!></button></div> <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent p-4 pointer-events-auto"><div class="flex items-end gap-4"><div class="flex-1 min-w-0 mb-2"><!></div> <div class="flex flex-col items-center gap-4 pb-2"><!></div></div></div></div></div>',2),At=d('<div class="fixed inset-0 overflow-y-scroll snap-y snap-mandatory scrollbar-hide bg-black lg:bottom-0 bottom-[72px] svelte-znq7e9"></div>');function zt(ae,n){Ie(n,!0);let k=ce(null),z=ce(!0);function G(r){const l=/(https?:\/\/[^\s]+\.(mp4|webm|mov|avi|mkv))/gi;return r.match(l)||[]}function le(r){const l=r.m,v=r.url;if(l&&l.startsWith("video/"))return"video";if(v){const w=v.split(".").pop()?.toLowerCase();if(["mp4","webm","mov","avi","mkv"].includes(w||""))return"video"}return"other"}const m=u(()=>n.events.flatMap(r=>{const w=r.tags.filter(i=>i[0]==="imeta").map(i=>it(i)).filter(i=>i.url&&le(i)==="video").map(i=>({event:r,imeta:i}));return w.length>0?w:G(r.content).map(i=>{const F=i.split(".").pop()?.toLowerCase();return{event:r,imeta:{url:i,m:"video/"+F}}})}));let x=null,H=new Map;rt(()=>(x=new IntersectionObserver(r=>{r.forEach(l=>{const v=l.target;l.isIntersecting&&l.intersectionRatio>.5?v.play().catch(w=>{console.log("Auto-play prevented:",w)}):v.pause()})},{root:null,threshold:[.5]}),setTimeout(()=>{const r=H.get(0);r&&r.play().catch(l=>{console.log("Auto-play prevented:",l)})},100),()=>{x?.disconnect()}));function ve(r,l){return H.set(l,r),x&&x.observe(r),{destroy(){H.delete(l),x&&x.unobserve(r)}}}var ue=q(),C=L(ue);{var P=r=>{var l=Ht();s(r,l)},N=r=>{var l=At();be(l,23,()=>e(m),({event:v,imeta:w},E)=>`${v.id}-${E}`,(v,w,E)=>{let i=()=>e(w).event,F=()=>e(w).imeta;var I=Ct(),K=o(I);mt(K,(f,p)=>ve?.(f,p),()=>e(E));var Z=_(K,2),V=o(Z),_e=o(V),ye=o(_e);ze(ye,()=>Pe.Root,(f,p)=>{p(f,{get ndk(){return te},get pubkey(){return i().pubkey},children:(J,he)=>{var R=q(),T=L(R);ze(T,()=>Pe.Avatar,(S,Q)=>{Q(S,{class:"w-10 h-10 rounded-full border-2 border-white"})}),s(J,R)},$$slots:{default:!0}})});var M=_(ye,2),O=o(M),fe=o(O,!0);a(O),a(M),a(_e),a(V);var we=_(V,2),ge=o(we);ge.__click=()=>re(z,!e(z));var Re=o(ge);{var Se=f=>{var p=Ft();s(f,p)},Ue=f=>{var p=Rt();s(f,p)};h(Re,f=>{e(z)?f(Se):f(Ue,!1)})}a(ge),a(we);var Le=_(we,2),t=o(Le),c=o(t),B=o(c);{var Me=f=>{var p=Lt(),J=o(p,!0);a(p),pe(he=>me(J,he),[()=>i().content.replace(F().url||"","").trim()]),s(f,p)};h(B,f=>{i().content&&f(Me)})}a(c);var ke=_(c,2),se=o(ke);dt(se,{get event(){return i()},variant:"tiktok"}),a(ke),a(t),a(Le),a(Z),a(I),pe(f=>{Fe(K,"src",F().url),K.muted=e(z),me(fe,f),Fe(ge,"aria-label",e(z)?"Unmute":"Mute")},[()=>i().author?.profile?.name||i().author?.npub?.substring(0,8)]),s(v,I)}),a(l),Je(l,v=>re(k,v),()=>e(k)),s(r,l)};h(C,r=>{e(m).length===0?r(P):r(N,!1)})}s(ae,ue),Te()}je(["click"]);var Pt=d('<button><span class="text-xs">#</span> <span> </span></button>'),It=d('<button class="flex-shrink-0 inline-flex items-center gap-1 px-2 py-1.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all" title="Clear all filters"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),Tt=d("<!> <!>",1),St=d('<h1 class="text-xl font-bold text-foreground"> </h1>'),Ut=d('<div><div class="py-2 pl-2 sm:p-4 w-full"><div class="flex items-center gap-2 min-w-0"><div class="flex-shrink-0 relative z-20"><!></div> <div class="flex items-center gap-2 overflow-x-auto scrollbar-hide flex-1 min-w-0 max-w-full"><!></div></div></div> <!></div>');function jt(ae,n){Ie(n,!0);const k=u(()=>n.selectedFilter==="videos");let z=ce(null);xe(()=>{if(!e(z))return;const r=()=>{const l=e(k)?0:e(z).offsetHeight;document.documentElement.style.setProperty("--header-height",`${l}px`)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}});var G=Ut(),le=o(G),m=o(le),x=o(m),H=o(x);pt(H,{iconOnly:!0}),a(x);var ve=_(x,2),ue=o(ve);{var C=r=>{var l=Tt(),v=L(l);be(v,17,()=>Ae.interests,at,(i,F)=>{var I=Pt();I.__click=()=>Y.toggleHashtag(e(F));var K=_(o(I),2),Z=o(K,!0);a(K),a(I),pe(V=>{Be(I,1,`flex-shrink-0 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${V??""}`),me(Z,e(F))},[()=>Y.isSelected(e(F))?"bg-primary text-foreground border-2 border-primary-400":"bg-muted text-muted-foreground border-2 border-border hover:border"]),s(i,I)});var w=_(v,2);{var E=i=>{var F=It();F.__click=()=>Y.clearAll(),s(i,F)};h(w,i=>{Y.hasFilters&&i(E)})}s(r,l)},P=r=>{var l=q(),v=L(l);{var w=E=>{var i=St(),F=o(i,!0);a(i),pe(()=>me(F,n.headerTitle.text)),s(E,i)};h(v,E=>{n.headerTitle&&E(w)},!0)}s(r,l)};h(ue,r=>{Ae&&Ae.interests.length>0?r(C):r(P,!1)})}a(ve),a(m),a(le);var N=_(le,2);vt(N,{get selectedFilter(){return n.selectedFilter},get onFilterChange(){return n.onFilterChange}}),a(G),Je(G,r=>re(z,r),()=>e(z)),pe(()=>Be(G,1,`sticky top-0 z-10 bg-background/90 backdrop-blur-xl border-b border-border ${e(k)?"hidden":""}`)),s(ae,G),Te()}je(["click"]);let qe=ce("conversations");const Nt={get selected(){return e(qe)},set(ae){re(qe,ae,!0)}};var Et=d('<div class="p-8 text-center text-muted-foreground">No articles found</div>'),Vt=d('<div class="p-8 text-center text-muted-foreground">Loading articles...</div>'),Ot=d('<div class="snap-start snap-always"><!></div>'),Bt=d('<div class="py-6 border-b border-border max-w-screen"><h2 class="text-lg font-bold text-foreground mb-4 flex items-center gap-2 px-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg> Featured</h2> <div class="overflow-x-auto overflow-y-hidden scrollbar-hide snap-x snap-mandatory touch-pan-x"><div class="flex gap-4 px-4 pb-2"></div></div></div>'),Wt=d('<div class="min-w-0"><!></div>'),Kt=d('<div class="px-4 py-6 border-b border-border"><h2 class="text-lg font-bold text-foreground mb-4 flex items-center gap-2"><svg class="w-5 h-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> Recent Highlights</h2> <div class="grid grid-cols-2 gap-4 w-full"></div></div>'),Dt=d('<div class="px-4 py-6"><h2 class="text-lg font-bold text-foreground mb-4 flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> Latest Articles</h2> <div class="divide-y divide-neutral-800/50 -mx-4"></div></div>'),qt=d("<!> <!> <!>",1),Gt=d('<div class="pb-6"><!></div> <!>',1),Jt=d('<div class="p-8 text-center text-muted-foreground">No videos found</div>'),Qt=d('<div class="p-8 text-center text-muted-foreground">Loading videos...</div>'),Xt=d('<div class="p-8 text-center text-muted-foreground">No images found</div>'),Yt=d('<div class="p-8 text-center text-muted-foreground">Loading images...</div>'),Zt=d('<div class="sm:p-4"><!></div>'),$t=d('<div class="flex justify-center py-2 lg:relative lg:static fixed bottom-20 left-0 right-0 z-[500] lg:z-auto pointer-events-none"><button class="flex items-center gap-2 px-4 py-2 bg-neutral-900/95 hover:bg-muted border border-primary/50 lg:border-border rounded-full transition-all shadow-lg backdrop-blur-sm pointer-events-auto"><div class="flex -space-x-2"></div> <span class="text-sm text-primary lg:text-foreground font-medium"> </span></button></div>'),er=d('<div class="p-8 text-center text-muted-foreground">No notes found</div>'),tr=d("<!> <!> <!>",1),rr=d('<div class="max-w-full mx-auto"><div class="flex flex-col"><!></div></div>');function Rr(ae,n){Ie(n,!0);const k=()=>ot(_t,"$page",z),[z,G]=st(),le=t=>{jt(t,{get headerTitle(){return e(we)},get selectedFilter(){return e(m)},onFilterChange:c=>re(m,c,!0)})};let m=ce("conversations");const x=u(()=>k().url.searchParams.get("relay"));xe(()=>{e(x)&&e(x)!==y.selectedRelay&&y.setSelectedRelay(e(x))}),xe(()=>{Nt.set(e(m))});const H=u(()=>lt(e(x)||y.selectedRelay,y.relays.filter(t=>t.enabled&&t.read).map(t=>t.url))),ve=u(()=>te.$sessions?.follows||[]),ue=u(()=>Array.from(e(ve)));function C(t){return t?.startsWith("followpack:")??!1}let P=ce(null);xe(()=>{if(!y.selectedRelay||!C(y.selectedRelay)){re(P,null);return}const t=y.selectedRelay.replace("followpack:","");te.fetchEvent(t).then(c=>{re(P,c,!0)}).catch(c=>{console.error("Failed to fetch selected pack:",c),re(P,null)})});const N=u(()=>e(P)?e(P).tags.filter(t=>t[0]==="p").map(t=>t[1]):y.selectedRelay?[]:e(ue)),r=Ce(te,()=>{const t=[{kinds:[ee.Text,9802],limit:200}];return Y.hasFilters&&(t[0]["#t"]=Y.selectedHashtags),(!y.selectedRelay||C(y.selectedRelay))&&e(N).length>0&&(t[0].authors=e(N)),!C(y.selectedRelay)&&te.$currentPubkey?(console.log("adding a filter for self"),t.push({...t[0],authors:[te.$currentPubkey]})):console.log("not adding filter for self",C,!!te.$currentPubkey),{filters:t,relayUrls:e(H).length>0?e(H):void 0,subId:"notes",cacheUnconstrainFilter:[],exclusiveRelay:!0}},{initialLimit:20,pageSize:20});console.log("[HomePage] Notes subscription created");const l=Ce(te,()=>{const t={kinds:[ee.Text,ee.Image,ee.Video,ee.ShortVideo],limit:300};return Y.hasFilters&&(t["#t"]=Y.selectedHashtags),(!y.selectedRelay||C(y.selectedRelay))&&e(N).length>0&&(t.authors=e(N)),{filters:[t],relayUrls:e(H).length>0?e(H):void 0,cacheUnconstrainFilter:[],subId:"home-media",exclusiveRelay:e(H).length>0}},{initialLimit:30,pageSize:30}),v=Ce(te,()=>{const t={kinds:[ee.Article],limit:100};return Y.hasFilters&&(t["#t"]=Y.selectedHashtags),(!y.selectedRelay||C(y.selectedRelay))&&e(N).length>0&&(t.authors=e(N)),{filters:[t],subId:"articles",exclusiveRelay:e(H).length>0,relayUrls:e(H).length>0?e(H):void 0}},{initialLimit:10,pageSize:10}),w=Ce(te,()=>{const t={kinds:[9802],limit:100};return Y.hasFilters&&(t["#t"]=Y.selectedHashtags),(!y.selectedRelay||C(y.selectedRelay))&&e(N).length>0&&(t.authors=e(N)),{filters:[t],subId:"highlights",exclusiveRelay:e(H).length>0,relayUrls:e(H).length>0?e(H):void 0}},{initialLimit:10,pageSize:10}),E=u(()=>v.events.map(t=>nt.from(t))),i=u(()=>e(E).filter(t=>t.title&&t.content).sort((t,c)=>(c.published_at??c.created_at??0)-(t.published_at??t.created_at??0))),F=u(()=>{const t=e(i).filter(B=>B.image),c=e(i).filter(B=>!B.image);return[...t,...c].slice(0,10)}),I=u(()=>w.events.slice(0,10)),K=u(()=>e(i).slice(10));function Z(t,c){return(c==="image"?/(https?:\/\/[^\s]+\.(jpg|jpeg|png|gif|webp|svg|avif))/gi:/(https?:\/\/[^\s]+\.(mp4|webm|mov|avi|mkv))/gi).test(t)}const V=u(()=>e(m)==="images"?l.events.filter(t=>t.kind===ee.Image||t.kind===ee.Text&&Z(t.content,"image")):e(m)==="videos"?l.events.filter(t=>t.kind===ee.Video||t.kind===ee.ShortVideo||t.kind===22||t.kind===ee.Text&&Z(t.content,"video")):[]),_e=u(()=>e(m)==="articles"?[]:r.events),ye=u(()=>e(m)==="articles"?v.hasMore:r.hasMore),M=u(()=>e(m)==="articles"?v.isLoading:r.isLoading);function O(){e(m)==="articles"?v.loadMore():r.loadMore()}const fe=u(()=>{const t=new Set,c=r.pendingEvents;for(const B of c){if(t.size>=3)break;t.add(B.pubkey)}return Array.from(t)}),we=u(()=>Ae?.interests.length>0?null:e(x)?{type:"text",text:De(e(x)).info?.name||e(x).replace("wss://","").replace("ws://","")}:y.selectedRelay?C(y.selectedRelay)&&e(P)?{type:"text",text:e(P).tagValue("title")||"Untitled Pack"}:{type:"text",text:De(y.selectedRelay).info?.name||y.selectedRelay.replace("wss://","").replace("ws://","")}:{type:"logo"});xe(()=>{e(m)==="articles"?Ve.setReadsMode():Ve.reset()}),xe(()=>(Oe.header=le,()=>{Oe.clear()}));var ge=rr(),Re=o(ge),Se=o(Re);{var Ue=t=>{var c=Gt(),B=L(c),Me=o(B);{var ke=p=>{var J=Et();s(p,J)},se=p=>{var J=q(),he=L(J);{var R=S=>{var Q=Vt();s(S,Q)},T=S=>{var Q=qt(),ne=L(Q);{var A=g=>{var b=Bt(),U=_(o(b),2),j=o(U);be(j,21,()=>e(F),D=>D.id,(D,de)=>{var oe=Ot(),ie=o(oe);Mt(ie,{get article(){return e(de)}}),a(oe),s(D,oe)}),a(j),a(U),a(b),s(g,b)};h(ne,g=>{e(F).length>0&&g(A)})}var $=_(ne,2);{var He=g=>{var b=Kt(),U=_(o(b),2);be(U,21,()=>e(I),j=>j.id,(j,D)=>{var de=Wt(),oe=o(de);We(oe,{get event(){return e(D)},variant:"grid"}),a(de),s(j,de)}),a(U),a(b),s(g,b)};h($,g=>{e(I).length>0&&g(He)})}var W=_($,2);{var X=g=>{var b=Dt(),U=_(o(b),2);be(U,21,()=>e(K),j=>j.id,(j,D)=>{ut(j,{get article(){return e(D)}})}),a(U),a(b),s(g,b)};h(W,g=>{e(K).length>0&&g(X)})}s(S,Q)};h(he,S=>{e(i).length===0?S(R):S(T,!1)},!0)}s(p,J)};h(Me,p=>{e(i).length===0&&v.eosed?p(ke):p(se,!1)})}a(B);var f=_(B,2);Ke(f,{onIntersect:O,get hasMore(){return v.hasMore},get isLoading(){return v.isLoading}}),s(t,c)},Le=t=>{var c=q(),B=L(c);{var Me=se=>{var f=q(),p=L(f);{var J=R=>{var T=Jt();s(R,T)},he=R=>{var T=q(),S=L(T);{var Q=A=>{var $=Qt();s(A,$)},ne=A=>{zt(A,{get events(){return e(V)}})};h(S,A=>{e(V).length===0?A(Q):A(ne,!1)},!0)}s(R,T)};h(p,R=>{e(V).length===0&&l.eosed?R(J):R(he,!1)})}s(se,f)},ke=se=>{var f=q(),p=L(f);{var J=R=>{var T=Zt(),S=o(T);{var Q=A=>{var $=Xt();s(A,$)},ne=A=>{var $=q(),He=L($);{var W=g=>{var b=Yt();s(g,b)},X=g=>{ht(g,{get events(){return e(V)}})};h(He,g=>{e(V).length===0?g(W):g(X,!1)},!0)}s(A,$)};h(S,A=>{e(V).length===0&&l.eosed?A(Q):A(ne,!1)})}a(T),s(R,T)},he=R=>{var T=tr(),S=L(T);{var Q=W=>{var X=$t(),g=o(X);g.__click=()=>r.loadPendingEvents();var b=o(g);be(b,20,()=>e(fe).slice(0,3),D=>D,(D,de)=>{var oe=q(),ie=L(oe);ze(ie,()=>Pe.Root,(Qe,Xe)=>{Xe(Qe,{get ndk(){return te},get pubkey(){return de},children:(Ye,ar)=>{var Ne=q(),Ze=L(Ne);ze(Ze,()=>Pe.Avatar,($e,et)=>{et($e,{class:"w-6 h-6 rounded-full border-2 border-foreground"})}),s(Ye,Ne)},$$slots:{default:!0}})}),s(D,oe)}),a(b);var U=_(b,2),j=o(U);a(U),a(g),a(X),pe(()=>me(j,`${r.pendingCount??""} new ${r.pendingCount===1?"note":"notes"}`)),s(W,X)};h(S,W=>{r.pendingCount>0&&W(Q)})}var ne=_(S,2);{var A=W=>{var X=er();s(W,X)},$=W=>{var X=q(),g=L(X);be(g,17,()=>e(_e),b=>b.id,(b,U)=>{var j=q(),D=L(j);{var de=ie=>{We(ie,{get event(){return e(U)},variant:"feed"})},oe=ie=>{ct(ie,{get event(){return e(U)}})};h(D,ie=>{e(U).kind===9802?ie(de):ie(oe,!1)})}s(b,j)}),s(W,X)};h(ne,W=>{e(_e).length===0?W(A):W($,!1)})}var He=_(ne,2);Ke(He,{onIntersect:O,get hasMore(){return e(ye)},get isLoading(){return e(M)}}),s(R,T)};h(p,R=>{e(m)==="images"?R(J):R(he,!1)},!0)}s(se,f)};h(B,se=>{e(m)==="videos"?se(Me):se(ke,!1)},!0)}s(t,c)};h(Se,t=>{e(m)==="articles"?t(Ue):t(Le,!1)})}a(Re),a(ge),s(ae,ge),Te(),G()}je(["click"]);export{Rr as component};
