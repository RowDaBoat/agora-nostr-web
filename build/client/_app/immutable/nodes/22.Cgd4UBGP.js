import{c as Re,f as h,a as u,t as Le,s as p,d as Fe}from"../chunks/CvdcXPsy.js";import{p as Me,u as Ve,a as F,s as se,h as G,g as n,d as r,n as Ae,c as t,r as a,f as N,t as R,e as Ce}from"../chunks/-h67YDCL.js";import{i as L}from"../chunks/DG6c9x1x.js";import{s as $e,a as ea}from"../chunks/CptlhHpT.js";import{p as aa}from"../chunks/aVfrvTxa.js";import{g as ta}from"../chunks/D1jhUNbu.js";import{d as Ye,n as le,s as Ge}from"../chunks/CAJmB2zv.js";import{s as Oe}from"../chunks/CZG2XR4U.js";import{h as Ze}from"../chunks/Cu6qrFqU.js";import{e as He,i as Je}from"../chunks/DBJvd_ZN.js";import{r as Ie,s as We,a as Te,f as ra,i as Ee,h as je,c as Xe}from"../chunks/vjiKTA8K.js";import{c as we}from"../chunks/C52XBfTo.js";import{d as na}from"../chunks/Bif2btQW.js";import{p as oa}from"../chunks/6dG0wjw8.js";import{D as sa,a as la,R as ia}from"../chunks/y2uKFtaO.js";import{B as Qe}from"../chunks/B3t7n0XN.js";import{D as da}from"../chunks/BFIKOW_n.js";import{D as ma}from"../chunks/BeHDsRkZ.js";import{T as ca}from"../chunks/CSxV4X3F.js";import{E as ua}from"../chunks/D_ZM-R7U.js";import{C as ga}from"../chunks/BTi5ba5s.js";var fa=h('<span class="text-yellow-500 text-sm"> </span>'),va=h("<!> <!>",1),pa=h('<!> <div class="space-y-4"><div class="bg-neutral-50 dark:bg-background rounded-lg p-4 space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-muted-foreground"> </span> <div class="flex items-center gap-1"><svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold"> </span></div></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">For</span> <span class="font-semibold"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Via</span> <span class="font-medium"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Trading with</span> <div class="flex items-center gap-2"><span class="font-medium"> </span> <!></div></div></div> <div class="flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm text-yellow-800 dark:text-yellow-300"><p class="font-medium mb-1">Trade Safely</p> <ul class="space-y-1 text-xs"><li>â€¢ Never release funds before confirming payment</li> <li>â€¢ Trade with people you trust or are well-connected to</li> <li>â€¢ Communicate only through secure channels</li> <li>â€¢ Report suspicious behavior immediately</li></ul></div></div> <label class="flex items-start gap-3 cursor-pointer"><input type="checkbox" class="mt-1 w-4 h-4 text-primary border rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">I understand the risks and agree to proceed with this P2P trade</span></label></div> <!>',1),xa=h('<div class="py-12 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div> <p class="text-foreground font-medium">Processing Trade...</p> <p class="text-sm text-muted-foreground mt-2">Connecting with trader</p></div>'),ha=h('<div class="py-12 text-center"><div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <p class="text-foreground font-medium">Trade Initiated!</p> <p class="text-sm text-muted-foreground mt-2">Check your messages for next steps</p></div>'),ya=h("<!> <!> <!>",1);function _a(T,e){Me(e,!0);let x=oa(e,"open",15,!1),v=se(null);Ve(()=>{e.order.event.author.fetchProfile().then(c=>{F(v,c,!0)})});let w=se("confirm"),g=se(!1);async function d(){F(w,"processing");try{const c=new Ye(le);c.kind=38383,c.tags=[["d",`take-${e.order.id}-${Date.now()}`],["e",e.order.event.id],["p",e.order.pubkey],["k",e.order.type==="buy"?"sell":"buy"],["f",e.order.currency],["s","in-progress"],["amt",e.order.satsAmount.toString()],["fa",e.order.fiatAmount.toString()],["pm",e.order.paymentMethod],["y","Agora"],["z","take-order"]],c.content=`Taking order ${e.order.id}`,await c.publish();const M=new Ye(le);M.kind=38383,M.tags=[...e.order.event.tags.filter(s=>s[0]!=="s"),["s","in-progress"]],M.content="",await M.publish(),F(w,"complete"),setTimeout(()=>{x(!1),e.onClose()},2e3)}catch(c){console.error("Failed to take order:",c),F(w,"confirm")}}const y=N(()=>({USD:"$",EUR:"â‚¬",GBP:"Â£",BRL:"R$"})[e.order.currency]||e.order.currency);var b=Re(),A=G(b);we(A,()=>ia,(c,M)=>{M(c,{get open(){return x()},onOpenChange:s=>{x(s),s||e.onClose()},children:(s,k)=>{var o=Re(),f=G(o);we(f,()=>sa,(C,U)=>{U(C,{class:"max-w-md",children:(O,j)=>{var K=ya(),_=G(K);{var P=D=>{var m=pa(),ee=G(m);we(ee,()=>da,(z,E)=>{E(z,{children:(W,ye)=>{var X=Re(),Q=G(X);we(Q,()=>la,(_e,q)=>{q(_e,{children:(oe,be)=>{Ae();var ke=Le("Confirm Trade");u(oe,ke)},$$slots:{default:!0}})}),u(W,X)},$$slots:{default:!0}})});var de=r(ee,2),Y=t(de),me=t(Y),ce=t(me),ue=t(ce);a(ce);var ae=r(ce,2),te=r(t(ae),2),Pe=t(te);a(te),a(ae),a(me);var ge=r(me,2),fe=r(t(ge),2),Ue=t(fe);a(fe),a(ge);var J=r(ge,2),re=r(t(J),2),ve=t(re,!0);a(re),a(J);var Se=r(J,2),pe=r(t(Se),2),xe=t(pe),Ke=t(xe,!0);a(xe);var ze=r(xe,2);{var Be=z=>{var E=fa(),W=t(E);a(E),R(ye=>p(W,`â˜… ${ye??""}`),[()=>e.order.rating.toFixed(1)]),u(z,E)};L(ze,z=>{e.order.rating&&z(Be)})}a(pe),a(Se),a(Y);var he=r(Y,4),ne=t(he);Ie(ne),Ae(2),a(he),a(de);var Ne=r(de,2);we(Ne,()=>ma,(z,E)=>{E(z,{children:(W,ye)=>{var X=va(),Q=G(X);Qe(Q,{variant:"outline",onclick:()=>{x(!1),e.onClose()},children:(q,oe)=>{Ae();var be=Le("Cancel");u(q,be)},$$slots:{default:!0}});var _e=r(Q,2);{let q=N(()=>!n(g));Qe(_e,{onclick:d,get disabled(){return n(q)},children:(oe,be)=>{Ae();var ke=Le("Take Order");u(oe,ke)},$$slots:{default:!0}})}u(W,X)},$$slots:{default:!0}})}),R((z,E)=>{p(ue,`You will ${e.order.type==="buy"?"sell":"buy"}`),p(Pe,`${z??""} BTC`),p(Ue,`${n(y)??""}${E??""}`),p(ve,e.order.paymentMethod),p(Ke,n(v)?.name||"Anonymous")},[()=>(e.order.satsAmount/1e8).toFixed(8),()=>e.order.fiatAmount.toFixed(2)]),na(ne,()=>n(g),z=>F(g,z)),u(D,m)};L(_,D=>{n(w)==="confirm"&&D(P)})}var S=r(_,2);{var V=D=>{var m=xa();u(D,m)};L(S,D=>{n(w)==="processing"&&D(V)})}var H=r(S,2);{var ie=D=>{var m=ha();u(D,m)};L(H,D=>{n(w)==="complete"&&D(ie)})}u(O,K)},$$slots:{default:!0}})}),u(s,o)},$$slots:{default:!0}})}),u(T,b),Ce()}var ba=h('<img class="w-10 h-10 md:w-12 md:h-12 rounded-full object-cover"/>'),ka=h('<div class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br bg-primary rounded-full"></div>'),wa=h('<div class="flex items-center gap-1 text-yellow-500"><svg class="w-4 h-4 fill-current" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg> <span class="text-sm"> </span></div>'),Aa=h('<span class="inline-flex items-center gap-1 ml-2"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></span>'),Ma=h("<span> </span>"),Ca=h('<p class="text-xs text-muted-foreground mt-1"> <!></p>'),Pa=h('<span class="text-xs text-muted-foreground hidden md:inline"> </span>'),Sa=h('<a target="_blank" rel="noopener noreferrer" class="flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm md:text-base"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <span class="hidden md:inline"> </span> <span class="md:hidden">View</span></a>'),Ba=h('<button class="flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm md:text-base"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg> <span class="hidden md:inline"> </span> <span class="md:hidden"> </span></button>'),Da=h('<div class="bg-card rounded-lg md:rounded-xl border border p-3 md:p-4 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between mb-2 md:mb-3"><div class="flex items-center gap-3"><!> <div><div class="flex items-center gap-2"><h3 class="font-semibold text-sm md:text-base text-foreground"> </h3> <!></div> <p class="text-xs text-muted-foreground"><!> <!> <!></p></div></div> <div class="flex items-center gap-1 md:gap-2"><span class="text-lg md:text-2xl"> </span> <div> </div> <!></div></div> <div class="grid grid-cols-3 gap-2 md:gap-4 mb-3 md:mb-4"><div><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Amount</p> <div class="flex items-center gap-1 md:gap-2"><svg class="w-3 h-3 md:w-4 md:h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold text-xs md:text-base text-foreground"> </span></div> <p class="text-xs text-muted-foreground mt-0.5 md:mt-1 hidden md:block"> </p></div> <div><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Price</p> <div class="flex items-center gap-1"><span class="text-sm md:text-base hidden md:inline"> </span> <p class="text-sm md:text-lg font-semibold text-foreground"> </p></div> <!></div> <div class="min-w-0"><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Payment</p> <div class="flex items-center gap-1 md:gap-2"><span class="text-sm md:text-lg flex-shrink-0"> </span> <div class="flex flex-col min-w-0"><span class="font-medium text-xs md:text-base text-foreground truncate max-w-[80px] md:max-w-none"> </span> <!></div></div></div></div> <div class="flex justify-end items-center gap-2"><!></div></div> <!>',1);function Ta(T,e){Me(e,!0);let x=se(null);Ve(()=>{e.order.event.author.fetchProfile().then(l=>{F(x,l,!0)})});let v=se(!1);const w={USD:{symbol:"$",flag:"ðŸ‡ºðŸ‡¸"},EUR:{symbol:"â‚¬",flag:"ðŸ‡ªðŸ‡º"},GBP:{symbol:"Â£",flag:"ðŸ‡¬ðŸ‡§"},BRL:{symbol:"R$",flag:"ðŸ‡§ðŸ‡·"},ARS:{symbol:"$",flag:"ðŸ‡¦ðŸ‡·"},PLN:{symbol:"zÅ‚",flag:"ðŸ‡µðŸ‡±"},JPY:{symbol:"Â¥",flag:"ðŸ‡¯ðŸ‡µ"},CHF:{symbol:"Fr",flag:"ðŸ‡¨ðŸ‡­"},PEN:{symbol:"S/",flag:"ðŸ‡µðŸ‡ª"},UYU:{symbol:"$",flag:"ðŸ‡ºðŸ‡¾"},VES:{symbol:"Bs",flag:"ðŸ‡»ðŸ‡ª"},RUB:{symbol:"â‚½",flag:"ðŸ‡·ðŸ‡º"},SEK:{symbol:"kr",flag:"ðŸ‡¸ðŸ‡ª"},NOK:{symbol:"kr",flag:"ðŸ‡³ðŸ‡´"},AUD:{symbol:"$",flag:"ðŸ‡¦ðŸ‡º"},CUP:{symbol:"$",flag:"ðŸ‡¨ðŸ‡º"}},g={Cash:{icon:"ðŸ’µ",region:"Universal"},"Cash (F2F)":{icon:"ðŸ’µ",region:"Local"},PIX:{icon:"ðŸ”„",region:"Brazil"},BLIK:{icon:"ðŸ“±",region:"Poland"},Revolut:{icon:"ðŸ’³",region:"Europe"},Zelle:{icon:"ðŸ¦",region:"USA"},CashApp:{icon:"ðŸ“²",region:"USA"},CVU:{icon:"ðŸ§",region:"Argentina"},MP:{icon:"ðŸ“²",region:"Argentina"},f2f:{icon:"ðŸ¤",region:"Local"},Ð¡Ð‘ÐŸ:{icon:"ðŸ¦",region:"Russia"}},d=N(()=>w[e.order.currency]||{symbol:e.order.currency,flag:"ðŸŒ"}),y=N(()=>g[e.order.paymentMethod]||{icon:"ðŸ’°",region:""}),b=N(()=>e.order.fiatAmount>0&&e.order.satsAmount>0?e.order.fiatAmount/e.order.satsAmount*1e8:0);var A=Da(),c=G(A),M=t(c),s=t(M),k=t(s);{var o=l=>{var i=ba();R(()=>{Te(i,"src",n(x).picture),Te(i,"alt",n(x).name||"User")}),u(l,i)},f=l=>{var i=ka();u(l,i)};L(k,l=>{n(x)?.picture?l(o):l(f,!1)})}var C=r(k,2),U=t(C),O=t(U),j=t(O,!0);a(O);var K=r(O,2);{var _=l=>{var i=wa(),B=r(t(i),2),I=t(B,!0);a(B),a(i),R(Z=>p(I,Z),[()=>e.order.rating.toFixed(1)]),u(l,i)};L(K,l=>{e.order.rating&&e.order.rating>0&&l(_)})}a(U);var P=r(U,2),S=t(P);ca(S,{get timestamp(){return e.order.createdAt}});var V=r(S,2);{var H=l=>{var i=Le();R(()=>p(i,`â€¢ ${e.order.platform??""}`)),u(l,i)};L(V,l=>{e.order.platform&&l(H)})}var ie=r(V,2);{var D=l=>{var i=Aa(),B=r(t(i),2),I=t(B);a(B),a(i),R(Z=>p(I,`Near ${Z??""}`),[()=>e.order.geohash.substring(0,4)]),u(l,i)};L(ie,l=>{e.order.geohash&&e.order.paymentMethod.includes("F2F")&&l(D)})}a(P),a(C),a(s);var m=r(s,2),ee=t(m),de=t(ee,!0);a(ee);var Y=r(ee,2),me=t(Y,!0);a(Y);var ce=r(Y,2);ua(ce,{get event(){return e.order.event}}),a(m),a(M);var ue=r(M,2),ae=t(ue),te=r(t(ae),2),Pe=r(t(te),2),ge=t(Pe,!0);a(Pe),a(te);var fe=r(te,2),Ue=t(fe);a(fe),a(ae);var J=r(ae,2),re=r(t(J),2),ve=t(re),Se=t(ve,!0);a(ve);var pe=r(ve,2),xe=t(pe);a(pe),a(re);var Ke=r(re,2);{var ze=l=>{var i=Ca(),B=t(i),I=r(B);{var Z=$=>{var De=Ma(),qe=t(De);a(De),R(()=>{We(De,1,ra(e.order.premium>0?"text-red-500":"text-green-500")),p(qe,`(${e.order.premium>0?"+":""}${e.order.premium??""}%)`)}),u($,De)};L(I,$=>{e.order.premium&&e.order.premium!==0&&$(Z)})}a(i),R($=>p(B,`${n(d).symbol??""}${$??""}/BTC `),[()=>n(b).toFixed(2)]),u(l,i)};L(Ke,l=>{n(b)>0&&l(ze)})}a(J);var Be=r(J,2),he=r(t(Be),2),ne=t(he),Ne=t(ne,!0);a(ne);var z=r(ne,2),E=t(z),W=t(E,!0);a(E);var ye=r(E,2);{var X=l=>{var i=Pa(),B=t(i,!0);a(i),R(()=>p(B,n(y).region)),u(l,i)};L(ye,l=>{n(y).region&&l(X)})}a(z),a(he),a(Be),a(ue);var Q=r(ue,2),_e=t(Q);{var q=l=>{var i=Sa(),B=r(t(i),2),I=t(B);a(B),Ae(2),a(i),R(()=>{Te(i,"href",e.order.source),Te(i,"title",`View on ${(e.order.platform||"external site")??""}`),p(I,`View on ${(e.order.platform||"Site")??""}`)}),u(l,i)},oe=l=>{var i=Ba();i.__click=()=>F(v,!0);var B=r(t(i),2),I=t(B,!0);a(B);var Z=r(B,2),$=t(Z,!0);a(Z),a(i),R(()=>{p(I,e.order.type==="buy"?"Sell to User":"Buy from User"),p($,e.order.type==="buy"?"Sell":"Buy")}),u(l,i)};L(_e,l=>{e.order.source?l(q):l(oe,!1)})}a(Q),a(c);var be=r(c,2);{var ke=l=>{_a(l,{open:!0,get order(){return e.order},onClose:()=>F(v,!1)})};L(be,l=>{n(v)&&l(ke)})}R((l,i,B,I)=>{p(j,l),p(de,n(d).flag),We(Y,1,`px-2 md:px-3 py-0.5 md:py-1 rounded-full text-xs md:text-sm font-medium ${e.order.type==="buy"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`),p(me,e.order.type==="buy"?"Buying":"Selling"),p(ge,i),p(Ue,`${B??""} sats`),p(Se,n(d).flag),p(xe,`${n(d).symbol??""}${I??""}`),p(Ne,n(y).icon),p(W,e.order.paymentMethod)},[()=>n(x)?.name||`@${e.order.pubkey.slice(0,6)}...`,()=>(e.order.satsAmount/1e8).toFixed(4),()=>e.order.satsAmount.toLocaleString(),()=>e.order.fiatAmount.toFixed(0)]),u(T,A),Ce()}Fe(["click"]);var Ra=h('<div class="text-center py-12 text-muted-foreground">No orders available matching your filters</div>'),La=h('<div class="w-full"><div class="grid gap-3 md:gap-4"><!></div></div>');function Ua(T,e){Me(e,!0);const x=N(()=>Ge.selectedRelay),v=le.$subscribe(()=>{const s={filters:[{kinds:[38383],limit:100}],closeOnEose:!1,subId:"p2p"};return n(x)&&(s.relayUrls=[n(x)],s.exclusiveRelay=!0),s}),w=N(()=>v.events),g=N(()=>{const s=[];return n(w).forEach(k=>{const o=k.tags,f=o.find(m=>m[0]==="z");if(f&&f[1]==="info")return;const C=o.find(m=>m[0]==="k")?.[1],U=o.find(m=>m[0]==="f")?.[1],O=o.find(m=>m[0]==="s")?.[1],j=o.find(m=>m[0]==="pm")?.[1],K=parseInt(o.find(m=>m[0]==="amt")?.[1]||"0"),_=parseFloat(o.find(m=>m[0]==="fa")?.[1]||"0"),P=parseFloat(o.find(m=>m[0]==="premium")?.[1]||"0"),S=parseFloat(o.find(m=>m[0]==="rating")?.[1]||"0"),V=o.find(m=>m[0]==="y")?.[1],H=o.find(m=>m[0]==="g")?.[1],ie=o.find(m=>m[0]==="source")?.[1],D=o.find(m=>m[0]==="d")?.[1];O==="pending"&&C&&U&&D&&s.push({id:D,pubkey:k.pubkey,type:C,currency:U,status:O,paymentMethod:j||"Unknown",satsAmount:K,fiatAmount:_,premium:P,rating:S,platform:V,geohash:H,source:ie,createdAt:k.created_at||Date.now()/1e3,event:k})}),s.sort((k,o)=>o.createdAt-k.createdAt),s}),d=N(()=>n(g).filter(s=>!(e.filters.currency!=="all"&&s.currency!==e.filters.currency||e.filters.paymentMethod!=="all"&&s.paymentMethod!==e.filters.paymentMethod||e.filters.orderType!=="all"&&s.type!==e.filters.orderType||s.satsAmount<e.filters.minAmount||s.satsAmount>e.filters.maxAmount)));var y=La(),b=t(y),A=t(b);{var c=s=>{var k=Ra();u(s,k)},M=s=>{var k=Re(),o=G(k);He(o,17,()=>n(d),f=>f.id,(f,C)=>{Ta(f,{get order(){return n(C)}})}),u(s,k)};L(A,s=>{n(d).length===0?s(c):s(M,!1)})}a(b),a(y),u(T,y),Ce()}const Ka={USD:{name:"US Dollar",flag:"ðŸ‡ºðŸ‡¸"},EUR:{name:"Euro",flag:"ðŸ‡ªðŸ‡º"},BRL:{name:"Brazilian Real",flag:"ðŸ‡§ðŸ‡·"},ARS:{name:"Argentine Peso",flag:"ðŸ‡¦ðŸ‡·"},GBP:{name:"British Pound",flag:"ðŸ‡¬ðŸ‡§"},PLN:{name:"Polish ZÅ‚oty",flag:"ðŸ‡µðŸ‡±"},JPY:{name:"Japanese Yen",flag:"ðŸ‡¯ðŸ‡µ"},CAD:{name:"Canadian Dollar",flag:"ðŸ‡¨ðŸ‡¦"},AUD:{name:"Australian Dollar",flag:"ðŸ‡¦ðŸ‡º"},CHF:{name:"Swiss Franc",flag:"ðŸ‡¨ðŸ‡­"},CNY:{name:"Chinese Yuan",flag:"ðŸ‡¨ðŸ‡³"},INR:{name:"Indian Rupee",flag:"ðŸ‡®ðŸ‡³"},MXN:{name:"Mexican Peso",flag:"ðŸ‡²ðŸ‡½"},ZAR:{name:"South African Rand",flag:"ðŸ‡¿ðŸ‡¦"},SEK:{name:"Swedish Krona",flag:"ðŸ‡¸ðŸ‡ª"},NOK:{name:"Norwegian Krone",flag:"ðŸ‡³ðŸ‡´"},DKK:{name:"Danish Krone",flag:"ðŸ‡©ðŸ‡°"},NZD:{name:"New Zealand Dollar",flag:"ðŸ‡³ðŸ‡¿"},SGD:{name:"Singapore Dollar",flag:"ðŸ‡¸ðŸ‡¬"},HKD:{name:"Hong Kong Dollar",flag:"ðŸ‡­ðŸ‡°"},KRW:{name:"South Korean Won",flag:"ðŸ‡°ðŸ‡·"},TRY:{name:"Turkish Lira",flag:"ðŸ‡¹ðŸ‡·"},RUB:{name:"Russian Ruble",flag:"ðŸ‡·ðŸ‡º"},THB:{name:"Thai Baht",flag:"ðŸ‡¹ðŸ‡­"},MYR:{name:"Malaysian Ringgit",flag:"ðŸ‡²ðŸ‡¾"},PHP:{name:"Philippine Peso",flag:"ðŸ‡µðŸ‡­"},IDR:{name:"Indonesian Rupiah",flag:"ðŸ‡®ðŸ‡©"},VND:{name:"Vietnamese Dong",flag:"ðŸ‡»ðŸ‡³"},COP:{name:"Colombian Peso",flag:"ðŸ‡¨ðŸ‡´"},CLP:{name:"Chilean Peso",flag:"ðŸ‡¨ðŸ‡±"},PEN:{name:"Peruvian Sol",flag:"ðŸ‡µðŸ‡ª"},UAH:{name:"Ukrainian Hryvnia",flag:"ðŸ‡ºðŸ‡¦"},AED:{name:"UAE Dirham",flag:"ðŸ‡¦ðŸ‡ª"},SAR:{name:"Saudi Riyal",flag:"ðŸ‡¸ðŸ‡¦"},QAR:{name:"Qatari Riyal",flag:"ðŸ‡¶ðŸ‡¦"},KWD:{name:"Kuwaiti Dinar",flag:"ðŸ‡°ðŸ‡¼"},NGN:{name:"Nigerian Naira",flag:"ðŸ‡³ðŸ‡¬"},KES:{name:"Kenyan Shilling",flag:"ðŸ‡°ðŸ‡ª"},GHS:{name:"Ghanaian Cedi",flag:"ðŸ‡¬ðŸ‡­"},UGX:{name:"Ugandan Shilling",flag:"ðŸ‡ºðŸ‡¬"},VES:{name:"Venezuelan BolÃ­var",flag:"ðŸ‡»ðŸ‡ª"},UYU:{name:"Uruguayan Peso",flag:"ðŸ‡ºðŸ‡¾"},BOB:{name:"Bolivian Boliviano",flag:"ðŸ‡§ðŸ‡´"},CRC:{name:"Costa Rican ColÃ³n",flag:"ðŸ‡¨ðŸ‡·"},GTQ:{name:"Guatemalan Quetzal",flag:"ðŸ‡¬ðŸ‡¹"},HNL:{name:"Honduran Lempira",flag:"ðŸ‡­ðŸ‡³"},NIO:{name:"Nicaraguan CÃ³rdoba",flag:"ðŸ‡³ðŸ‡®"},PAB:{name:"Panamanian Balboa",flag:"ðŸ‡µðŸ‡¦"},PYG:{name:"Paraguayan Guarani",flag:"ðŸ‡µðŸ‡¾"},DOP:{name:"Dominican Peso",flag:"ðŸ‡©ðŸ‡´"},JMD:{name:"Jamaican Dollar",flag:"ðŸ‡¯ðŸ‡²"},TTD:{name:"Trinidad Dollar",flag:"ðŸ‡¹ðŸ‡¹"},BSD:{name:"Bahamian Dollar",flag:"ðŸ‡§ðŸ‡¸"},BBD:{name:"Barbadian Dollar",flag:"ðŸ‡§ðŸ‡§"},BZD:{name:"Belize Dollar",flag:"ðŸ‡§ðŸ‡¿"},XOF:{name:"West African CFA",flag:"ðŸŒ"},XAF:{name:"Central African CFA",flag:"ðŸŒ"},MAD:{name:"Moroccan Dirham",flag:"ðŸ‡²ðŸ‡¦"},TND:{name:"Tunisian Dinar",flag:"ðŸ‡¹ðŸ‡³"},EGP:{name:"Egyptian Pound",flag:"ðŸ‡ªðŸ‡¬"},ILS:{name:"Israeli Shekel",flag:"ðŸ‡®ðŸ‡±"},JOD:{name:"Jordanian Dinar",flag:"ðŸ‡¯ðŸ‡´"},LBP:{name:"Lebanese Pound",flag:"ðŸ‡±ðŸ‡§"},PKR:{name:"Pakistani Rupee",flag:"ðŸ‡µðŸ‡°"},BDT:{name:"Bangladeshi Taka",flag:"ðŸ‡§ðŸ‡©"},LKR:{name:"Sri Lankan Rupee",flag:"ðŸ‡±ðŸ‡°"},NPR:{name:"Nepalese Rupee",flag:"ðŸ‡³ðŸ‡µ"},MMK:{name:"Myanmar Kyat",flag:"ðŸ‡²ðŸ‡²"},KHR:{name:"Cambodian Riel",flag:"ðŸ‡°ðŸ‡­"},LAK:{name:"Lao Kip",flag:"ðŸ‡±ðŸ‡¦"},BND:{name:"Brunei Dollar",flag:"ðŸ‡§ðŸ‡³"},TWD:{name:"Taiwan Dollar",flag:"ðŸ‡¹ðŸ‡¼"},HRK:{name:"Croatian Kuna",flag:"ðŸ‡­ðŸ‡·"},BGN:{name:"Bulgarian Lev",flag:"ðŸ‡§ðŸ‡¬"},RON:{name:"Romanian Leu",flag:"ðŸ‡·ðŸ‡´"},CZK:{name:"Czech Koruna",flag:"ðŸ‡¨ðŸ‡¿"},HUF:{name:"Hungarian Forint",flag:"ðŸ‡­ðŸ‡º"},ISK:{name:"Icelandic KrÃ³na",flag:"ðŸ‡®ðŸ‡¸"},BAM:{name:"Bosnian Mark",flag:"ðŸ‡§ðŸ‡¦"},MKD:{name:"Macedonian Denar",flag:"ðŸ‡²ðŸ‡°"},ALL:{name:"Albanian Lek",flag:"ðŸ‡¦ðŸ‡±"},RSD:{name:"Serbian Dinar",flag:"ðŸ‡·ðŸ‡¸"},GEL:{name:"Georgian Lari",flag:"ðŸ‡¬ðŸ‡ª"},AZN:{name:"Azerbaijani Manat",flag:"ðŸ‡¦ðŸ‡¿"},AMD:{name:"Armenian Dram",flag:"ðŸ‡¦ðŸ‡²"},BYN:{name:"Belarusian Ruble",flag:"ðŸ‡§ðŸ‡¾"},MDL:{name:"Moldovan Leu",flag:"ðŸ‡²ðŸ‡©"},KZT:{name:"Kazakhstani Tenge",flag:"ðŸ‡°ðŸ‡¿"},UZS:{name:"Uzbekistani Som",flag:"ðŸ‡ºðŸ‡¿"},TJS:{name:"Tajikistani Somoni",flag:"ðŸ‡¹ðŸ‡¯"},KGS:{name:"Kyrgyzstani Som",flag:"ðŸ‡°ðŸ‡¬"},TMT:{name:"Turkmenistani Manat",flag:"ðŸ‡¹ðŸ‡²"}};function za(){const T=N(()=>Ge.selectedRelay),e=le.$subscribe(()=>{const v={filters:[{kinds:[38383],limit:100}],closeOnEose:!1};return n(T)&&(v.relayUrls=[n(T)],v.exclusiveRelay=!0),v}),x=N(()=>{const v=new Set;e.events.forEach(g=>{const d=g.tags,y=d.find(c=>c[0]==="z");if(y&&y[1]==="info")return;const b=d.find(c=>c[0]==="f")?.[1],A=d.find(c=>c[0]==="s")?.[1];b&&A==="pending"&&v.add(b.toUpperCase())});const w=Array.from(v).map(g=>{const d=Ka[g];return{code:g,name:d?.name||g,flag:d?.flag||"ðŸ’±"}}).sort((g,d)=>g.code.localeCompare(d.code));return[{code:"all",name:"All",flag:"ðŸŒ"},...w]});return{get currencies(){return n(x)}}}const Na={Cash:{icon:"ðŸ’µ"},PIX:{icon:"ðŸ”„"},BLIK:{icon:"ðŸ“±"},Revolut:{icon:"ðŸ’³"},revolut:{icon:"ðŸ’³"},Zelle:{icon:"ðŸ¦"},CashApp:{icon:"ðŸ“²"},CVU:{icon:"ðŸ§"},MercadoPago:{icon:"ðŸ§"},f2f:{icon:"ðŸ¤"},"Bank Transfer":{icon:"ðŸ¦"},Wire:{icon:"ðŸ¦"},SEPA:{icon:"ðŸ‡ªðŸ‡º"},PayPal:{icon:"ðŸ’°"},Venmo:{icon:"ðŸ’¸"},Strike:{icon:"âš¡"},Wise:{icon:"ðŸŒ"},N26:{icon:"ðŸ’³"},Monzo:{icon:"ðŸ’³"},Starling:{icon:"ðŸ’³"},TransferWise:{icon:"ðŸŒ"},Instant:{icon:"âš¡"}};function Oa(){const T=N(()=>Ge.selectedRelay),e=le.$subscribe(()=>{const v={filters:[{kinds:[38383],limit:100}],closeOnEose:!1};return n(T)&&(v.relayUrls=[n(T)],v.exclusiveRelay=!0),v}),x=N(()=>{const v=new Set;e.events.forEach(g=>{const d=g.tags,y=d.find(c=>c[0]==="z");if(y&&y[1]==="info")return;const b=d.find(c=>c[0]==="pm")?.[1],A=d.find(c=>c[0]==="s")?.[1];b&&A==="pending"&&v.add(b)});const w=Array.from(v).map(g=>{const d=Na[g];return{id:g,name:g,icon:d?.icon||"ðŸ’³"}}).sort((g,d)=>g.name.localeCompare(d.name));return[{id:"all",name:"All Methods",icon:"ðŸ’°"},...w]});return{get paymentMethods(){return n(x)}}}var Ea=h("<option> </option>"),ja=h("<option> </option>"),Ha=h('<div class="grid grid-cols-2 lg:grid-cols-1 gap-3 lg:gap-4"><div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Currency</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"></select></div> <div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> Payment Method</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"></select></div> <div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg> Order Type</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"><option>All Orders</option><option>Buy Orders</option><option>Sell Orders</option></select></div> <div><label class="text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2 block">Amount Range (sats)</label> <div class="flex items-center gap-2"><input type="number" class="w-full px-2 py-1.5 lg:py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Min"/> <span class="text-neutral-500 text-sm">-</span> <input type="number" class="w-full px-2 py-1.5 lg:py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Max"/></div></div></div>');function Ia(T,e){Me(e,!0);const{currencies:x}=za(),{paymentMethods:v}=Oa();var w=Ha(),g=t(w),d=r(t(g),2);d.__change=_=>e.onChange({...e.filters,currency:_.currentTarget.value}),He(d,21,()=>x,Je,(_,P)=>{var S=Ea(),V=t(S,!0);a(S);var H={};R(()=>{p(V,n(P).code==="all"?n(P).name:`${n(P).flag} ${n(P).code} - ${n(P).name}`),H!==(H=n(P).code)&&(S.value=(S.__value=n(P).code)??"")}),u(_,S)}),a(d);var y;Ee(d),a(g);var b=r(g,2),A=r(t(b),2);A.__change=_=>e.onChange({...e.filters,paymentMethod:_.currentTarget.value}),He(A,21,()=>v,Je,(_,P)=>{var S=ja(),V=t(S);a(S);var H={};R(()=>{p(V,`${n(P).icon??""} ${n(P).name??""}`),H!==(H=n(P).id)&&(S.value=(S.__value=n(P).id)??"")}),u(_,S)}),a(A);var c;Ee(A),a(b);var M=r(b,2),s=r(t(M),2);s.__change=_=>e.onChange({...e.filters,orderType:_.currentTarget.value});var k=t(s);k.value=k.__value="all";var o=r(k);o.value=o.__value="buy";var f=r(o);f.value=f.__value="sell",a(s);var C;Ee(s),a(M);var U=r(M,2),O=r(t(U),2),j=t(O);Ie(j),j.__input=_=>e.onChange({...e.filters,minAmount:parseInt(_.currentTarget.value)||0});var K=r(j,4);Ie(K),K.__input=_=>e.onChange({...e.filters,maxAmount:parseInt(_.currentTarget.value)||1e6}),a(O),a(U),a(w),R(()=>{y!==(y=e.filters.currency)&&(d.value=(d.__value=e.filters.currency)??"",je(d,e.filters.currency)),c!==(c=e.filters.paymentMethod)&&(A.value=(A.__value=e.filters.paymentMethod)??"",je(A,e.filters.paymentMethod)),C!==(C=e.filters.orderType)&&(s.value=(s.__value=e.filters.orderType)??"",je(s,e.filters.orderType)),Xe(j,e.filters.minAmount),Xe(K,e.filters.maxAmount)}),u(T,w),Ce()}Fe(["change","input"]);var Fa=h('<button class="flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> <span>Create Order</span></button>'),Va=h('<div class="border-b border-border sticky top-0 z-20 bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-foreground">P2P Trading</h1> <p class="text-sm text-neutral-400 mt-1">Buy and sell Bitcoin directly</p></div> <!></div></div></div>'),Ga=h('<div class="p-3 lg:p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-3 lg:mb-4"><svg class="w-4 h-4 lg:w-5 lg:h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <h2 class="text-base lg:text-lg font-semibold text-foreground">Filters</h2></div> <!></div>'),Ya=h('<div class="px-4 sm:px-6 lg:px-8 py-6"><!></div> <!>',1);function ft(T,e){Me(e,!0);const x=()=>ea(aa,"$page",v),[v,w]=$e(),g=o=>{var f=Va(),C=t(f),U=t(C),O=r(t(U),2);{var j=K=>{var _=Fa();_.__click=()=>F(y,!0),u(K,_)};L(O,K=>{le.$currentUser&&K(j)})}a(U),a(C),a(f),u(o,f)},d=o=>{var f=Ga(),C=r(t(f),2);Ia(C,{get filters(){return n(b)},onChange:A}),a(f),u(o,f)};let y=se(!1);const b=N(()=>({currency:x().url.searchParams.get("currency")||"all",paymentMethod:x().url.searchParams.get("paymentMethod")||"all",orderType:x().url.searchParams.get("orderType")||"all",minAmount:parseInt(x().url.searchParams.get("minAmount")||"0"),maxAmount:parseInt(x().url.searchParams.get("maxAmount")||"1000000")}));function A(o){const f=new URLSearchParams;o.currency!=="all"&&f.set("currency",o.currency),o.paymentMethod!=="all"&&f.set("paymentMethod",o.paymentMethod),o.orderType!=="all"&&f.set("orderType",o.orderType),o.minAmount>0&&f.set("minAmount",o.minAmount.toString()),o.maxAmount<1e6&&f.set("maxAmount",o.maxAmount.toString());const C=f.toString();ta(`/trades${C?`?${C}`:""}`,{replaceState:!0})}Ve(()=>(Ze.header=g,Oe.rightSidebar=d,Oe.showOnMobile=!0,()=>{Ze.clear(),Oe.clear()}));var c=Ya(),M=G(c),s=t(M);Ua(s,{get filters(){return n(b)}}),a(M);var k=r(M,2);ga(k,{onClose:()=>F(y,!1),get open(){return n(y)},set open(o){F(y,o,!0)}}),u(T,c),Ce(),w()}Fe(["click"]);export{ft as component};
