import{d as _e,f as i,a as l,s as C}from"../chunks/CvdcXPsy.js";import{p as be,g as e,s as oe,u as xe,e as he,d as u,c as t,a as re,r,t as _,n as ke,f as O,h as ye}from"../chunks/-h67YDCL.js";import{i as L}from"../chunks/DG6c9x1x.js";import{e as P,i as se}from"../chunks/DBJvd_ZN.js";import{d as we,r as Ve,a as T}from"../chunks/vjiKTA8K.js";import{b as Ce}from"../chunks/Bif2btQW.js";import{n as Le}from"../chunks/CAJmB2zv.js";import{g as te}from"../chunks/D1jhUNbu.js";import{h as le}from"../chunks/Cu6qrFqU.js";var je=i("<option> </option>"),$e=i('<div class="container mx-auto px-4 py-3 max-w-7xl"><div class="mb-6"><div class="flex items-center justify-between mb-4"><h1 class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent">Marketplace</h1></div> <div class="flex gap-2 sm:gap-3"><div class="flex-1"><div class="relative"><svg class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="text" placeholder="Search listings..." class="w-full pl-10 h-12 bg-white/80 dark:bg-background/80 backdrop-blur border border rounded-xl text-base focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"/></div></div> <div class="relative"><select class="h-12 px-4 bg-white/80 dark:bg-background/80 backdrop-blur border border rounded-xl text-base focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all appearance-none pr-10"></select> <svg class="absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div></div></div>'),Ee=i('<div class="mb-6"><h2 class="text-xl font-semibold text-foreground"> </h2> <p class="text-sm text-muted-foreground mt-1"> </p></div>'),ze=i('<div class="aspect-video bg-neutral-100 dark:bg-muted overflow-hidden"><img class="w-full h-full object-cover"/></div>'),Be=i('<p class="text-sm text-muted-foreground mt-1 line-clamp-2"> </p>'),Me=i('<p class="text-sm font-medium text-primary-600 dark:text-primary-400 mt-2"> </p>'),Se=i('<button class="bg-white dark:bg-card/50 rounded-xl border border overflow-hidden transition-all hover:border-primary-500 dark:hover:border-primary-500 hover:shadow-lg text-left"><!> <div class="p-4"><h3 class="font-semibold text-foreground truncate"> </h3> <!> <!></div></button>'),Ae=i('<div class="col-span-full text-center py-12 text-muted-foreground">No listings found</div>'),Fe=i('<div><!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div></div>'),Re=i('<div class="text-center py-12 text-muted-foreground">No marketplace items yet</div>'),Ue=i('<div class="aspect-video bg-neutral-100 dark:bg-muted overflow-hidden"><img class="w-full h-full object-cover"/></div>'),Ie=i('<p class="text-sm text-muted-foreground mt-1 line-clamp-2"> </p>'),Ne=i('<p class="text-sm font-medium text-primary-600 dark:text-primary-400 mt-2"> </p>'),Oe=i('<button class="bg-white dark:bg-card/50 rounded-xl border border overflow-hidden transition-all hover:border-primary-500 dark:hover:border-primary-500 hover:shadow-lg text-left"><!> <div class="p-4"><h3 class="font-semibold text-foreground truncate"> </h3> <!> <!></div></button>'),Te=i('<div class="mb-8"><h2 class="text-xl font-semibold text-foreground mb-4">Recent Listings</h2> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div></div>'),qe=i('<div class="aspect-video bg-neutral-100 dark:bg-muted overflow-hidden"><img class="w-full h-full object-cover"/></div>'),Ge=i('<p class="text-sm text-muted-foreground mt-1 line-clamp-2"> </p>'),He=i('<p class="text-sm font-medium text-primary-600 dark:text-primary-400 mt-2"> </p>'),Je=i('<button class="bg-white dark:bg-card/50 rounded-xl border border overflow-hidden transition-all hover:border-primary-500 dark:hover:border-primary-500 hover:shadow-lg text-left"><!> <div class="p-4"><h3 class="font-semibold text-foreground truncate"> </h3> <!> <!></div></button>'),Pe=i('<div class="mb-8"><div class="flex items-center justify-between mb-4"><h2 class="text-xl font-semibold text-foreground"> </h2> <button class="text-sm text-primary-600 dark:text-primary-400 hover:underline">View All</button></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div></div>'),Qe=i("<!> <!>",1),We=i("<div><!></div>"),De=i('<div class="min-h-screen bg-neutral-50 dark:bg-background"><div class="container mx-auto px-4 py-4 max-w-7xl"><!></div></div>');function sr(ie,de){be(de,!0);const ve=a=>{var d=$e(),m=t(d),b=u(t(m),2),x=t(b),v=t(x),o=u(t(v),2);Ve(o),r(v),r(x);var y=u(x,2),j=t(y);P(j,21,()=>W,se,(w,p)=>{var n=je(),$=t(n,!0);r(n);var E={};_(()=>{C($,e(p).label),E!==(E=e(p).value)&&(n.value=(n.__value=e(p).value)??"")}),l(w,n)}),r(j),ke(2),r(y),r(b),r(m),r(d),Ce(o,()=>e(q),w=>re(q,w)),we(j,()=>e(M),w=>re(M,w)),l(a,d)},W=[{value:"",label:"All Categories"},{value:"electronics",label:"Electronics"},{value:"furniture",label:"Furniture"},{value:"clothing",label:"Clothing"},{value:"books",label:"Books"},{value:"services",label:"Services"},{value:"vehicles",label:"Vehicles"},{value:"real-estate",label:"Real Estate"},{value:"jobs",label:"Jobs"},{value:"free",label:"Free"},{value:"wanted",label:"Wanted"}];let M=oe(""),q=oe("");const ne=Le.$subscribe(()=>{const a={kinds:[30402],limit:50};return e(M)&&(a["#t"]=[e(M).toLowerCase()]),{filters:[a],bufferMs:100}}),G=O(()=>ne.events.filter(a=>{if((a.tagValue("status")||"active")!=="active")return!1;if(!e(q))return!0;const m=e(q).toLowerCase(),b=a.tagValue("title")?.toLowerCase()||"",x=a.tagValue("summary")?.toLowerCase()||"",v=a.content?.toLowerCase()||"",o=a.tagValue("location")?.toLowerCase()||"";return b.includes(m)||x.includes(m)||v.includes(m)||o.includes(m)})),D=O(()=>{const a={};return e(G).forEach(d=>{const m=d.tags.filter(b=>b[0]==="t").map(b=>b[1]);m.length>0?m.forEach(b=>{const x=b.toLowerCase();a[x]||(a[x]=[]),a[x].push(d)}):(a.uncategorized||(a.uncategorized=[]),a.uncategorized.push(d))}),a}),ce=O(()=>e(M)||e(q));function ue(a){re(M,a,!0)}function I(a){return a.tagValue("image")}function K(a){const d=a.tags.find(m=>m[0]==="price");return!d||!d[1]||!d[2]?null:{amount:d[1],currency:d[2]}}xe(()=>(le.header=ve,()=>{le.clear()}));var X=De(),ae=t(X),me=t(ae);{var pe=a=>{var d=Fe(),m=t(d);{var b=v=>{var o=Ee(),y=t(o),j=t(y,!0);r(y);var w=u(y,2),p=t(w);r(w),r(o),_(n=>{C(j,n),C(p,`${e(G).length??""} listings found`)},[()=>W.find(n=>n.value===e(M))?.label||e(M)]),l(v,o)};L(m,v=>{e(M)&&v(b)})}var x=u(m,2);P(x,21,()=>e(G),v=>v.id,(v,o)=>{const y=O(()=>K(e(o)));var j=Se();j.__click=()=>te(`/marketplace/${e(o).encode()}`);var w=t(j);{var p=c=>{var s=ze(),h=t(s);r(s),_((B,U)=>{T(h,"src",B),T(h,"alt",U)},[()=>I(e(o)),()=>e(o).tagValue("title")||"Listing"]),l(c,s)};L(w,c=>{I(e(o))&&c(p)})}var n=u(w,2),$=t(n),E=t($,!0);r($);var f=u($,2);{var F=c=>{var s=Be(),h=t(s,!0);r(s),_(B=>C(h,B),[()=>e(o).tagValue("summary")]),l(c,s)};L(f,c=>{e(o).tagValue("summary")&&c(F)})}var S=u(f,2);{var R=c=>{var s=Me(),h=t(s);r(s),_(()=>C(h,`${e(y).amount??""} ${e(y).currency??""}`)),l(c,s)};L(S,c=>{e(y)&&c(R)})}r(n),r(j),_(c=>C(E,c),[()=>e(o).tagValue("title")||"Untitled"]),l(v,j)},v=>{var o=Ae();l(v,o)}),r(x),r(d),l(a,d)},fe=a=>{var d=We(),m=t(d);{var b=v=>{var o=Re();l(v,o)},x=v=>{var o=Qe(),y=ye(o);{var j=p=>{var n=Te(),$=u(t(n),2);P($,21,()=>e(G).slice(0,8),E=>E.id,(E,f)=>{const F=O(()=>K(e(f)));var S=Oe();S.__click=()=>te(`/marketplace/${e(f).encode()}`);var R=t(S);{var c=g=>{var k=Ue(),A=t(k);r(k),_((J,Z)=>{T(A,"src",J),T(A,"alt",Z)},[()=>I(e(f)),()=>e(f).tagValue("title")||"Listing"]),l(g,k)};L(R,g=>{I(e(f))&&g(c)})}var s=u(R,2),h=t(s),B=t(h,!0);r(h);var U=u(h,2);{var Y=g=>{var k=Ie(),A=t(k,!0);r(k),_(J=>C(A,J),[()=>e(f).tagValue("summary")]),l(g,k)};L(U,g=>{e(f).tagValue("summary")&&g(Y)})}var Q=u(U,2);{var H=g=>{var k=Ne(),A=t(k);r(k),_(()=>C(A,`${e(F).amount??""} ${e(F).currency??""}`)),l(g,k)};L(Q,g=>{e(F)&&g(H)})}r(s),r(S),_(g=>C(B,g),[()=>e(f).tagValue("title")||"Untitled"]),l(E,S)}),r($),r(n),l(p,n)};L(y,p=>{e(G).length>0&&p(j)})}var w=u(y,2);P(w,17,()=>W.filter(p=>p.value&&e(D)[p.value]?.length>0),se,(p,n)=>{var $=Pe(),E=t($),f=t(E),F=t(f,!0);r(f);var S=u(f,2);S.__click=()=>ue(e(n).value),r(E);var R=u(E,2);P(R,21,()=>e(D)[e(n).value].slice(0,4),c=>c.id,(c,s)=>{const h=O(()=>K(e(s)));var B=Je();B.__click=()=>te(`/marketplace/${e(s).encode()}`);var U=t(B);{var Y=V=>{var z=qe(),N=t(z);r(z),_((ee,ge)=>{T(N,"src",ee),T(N,"alt",ge)},[()=>I(e(s)),()=>e(s).tagValue("title")||"Listing"]),l(V,z)};L(U,V=>{I(e(s))&&V(Y)})}var Q=u(U,2),H=t(Q),g=t(H,!0);r(H);var k=u(H,2);{var A=V=>{var z=Ge(),N=t(z,!0);r(z),_(ee=>C(N,ee),[()=>e(s).tagValue("summary")]),l(V,z)};L(k,V=>{e(s).tagValue("summary")&&V(A)})}var J=u(k,2);{var Z=V=>{var z=He(),N=t(z);r(z),_(()=>C(N,`${e(h).amount??""} ${e(h).currency??""}`)),l(V,z)};L(J,V=>{e(h)&&V(Z)})}r(Q),r(B),_(V=>C(g,V),[()=>e(s).tagValue("title")||"Untitled"]),l(c,B)}),r(R),r($),_(()=>C(F,e(n).label)),l(p,$)}),l(v,o)};L(m,v=>{Object.keys(e(D)).length===0?v(b):v(x,!1)})}r(d),l(a,d)};L(me,a=>{e(ce)?a(pe):a(fe,!1)})}r(ae),r(X),l(ie,X),he()}_e(["click"]);export{sr as component};
