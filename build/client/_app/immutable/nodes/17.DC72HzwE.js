import{d as De,f as p,a as u,b as He,s as V,c as Se}from"../chunks/CvdcXPsy.js";import{p as Ne,u as J,g as e,s as z,a as _,d as l,c as a,e as Oe,f as m,r as o,t as y,h as ie}from"../chunks/-h67YDCL.js";import{i as L}from"../chunks/DG6c9x1x.js";import{e as ne}from"../chunks/DBJvd_ZN.js";import{c as de}from"../chunks/C52XBfTo.js";import{r as Te,s as A,b as Qe,a as ce}from"../chunks/vjiKTA8K.js";import{b as Re}from"../chunks/Bif2btQW.js";import{n as $}from"../chunks/CAJmB2zv.js";import{g as ue}from"../chunks/D1jhUNbu.js";import{h as ve}from"../chunks/Cu6qrFqU.js";import{U as fe}from"../chunks/Dk4THxss.js";import{C as qe}from"../chunks/s_lyd6x4.js";import{c as Ge,L as Je}from"../chunks/B1qVqaSy.js";import{g as Ke}from"../chunks/CsenwR2S.js";import{g as We}from"../chunks/CAO0s-lY.js";import{P as Xe}from"../chunks/bUK0MCKq.js";const Ye=H=>{var S=Ze();u(H,S)};var Ze=He('<svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>'),et=p('<button class="px-4 py-2.5 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-medium text-sm flex items-center gap-2 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Follow Pack</button>'),tt=p('<div class="absolute right-0 mt-2 w-48 bg-popover border border-border rounded-lg shadow-xl z-10"><div class="py-1"><button>All Packs</button> <button>My Packs</button> <button>From Follows</button> <button>Include Me</button></div></div>'),rt=p('<div class="relative flex-shrink-0 filter-dropdown"><button class="px-4 py-3 bg-card border border-border rounded-lg text-foreground hover:border-border transition-colors flex items-center gap-2 min-w-[160px] justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <span class="text-sm font-medium"> </span></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),ot=p('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),at=p('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),st=p('<button type="button" class="relative cursor-pointer"><!></button>'),lt=p('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),it=p('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>'),nt=p('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),dt=p('<div class="text-center py-12"><svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <p class="text-muted-foreground">No follow packs found</p></div>'),ct=p('<div class="w-full lg:max-w-6xl mx-auto px-4 py-8"><div class="mb-6"><div class="flex gap-3 flex-col sm:flex-row"><div class="relative flex-1"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="search" placeholder="Search follow packs..." class="w-full pl-10 pr-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary"/></div> <!></div></div> <div><h2 class="text-xl font-semibold text-foreground mb-4">Popular Packs</h2> <!></div> <!></div>');function Ct(H,S){Ne(S,!0);const me=t=>{{let r=m(()=>$.$currentUser?pe:void 0);Xe(t,{title:"Follow Packs",subtitle:"Discover curated lists of accounts to follow",get icon(){return Ye},get actions(){return e(r)}})}},pe=t=>{var r=et();r.__click=()=>_(N,!0),u(t,r)};let N=z(!1),C=z(""),f=z("all"),k=z(!1);const ge={all:"All Packs",mine:"My Packs",follows:"From Follows","include-me":"Include Me"};function B(t){_(f,t,!0),_(k,!1)}function K(t){t.target.closest(".filter-dropdown")||_(k,!1)}J(()=>{if(e(k))return document.addEventListener("click",K),()=>document.removeEventListener("click",K)});const W=Ge($,()=>({filters:[{kinds:[39089,39092]}],bufferMs:100}),{initialLimit:12,pageSize:12}),be=m(()=>W.allEvents);let _e=m(()=>e(be)),O=m(()=>{let t=e(_e);if(e(f)!=="all"){const r=$.$currentUser?.pubkey,i=$.$currentUser?.follows;if(e(f)==="mine"&&r)t=t.filter(d=>d.pubkey===r);else if(e(f)==="follows"&&i){const d=Array.from(i).map(c=>c.pubkey);t=t.filter(c=>d.includes(c.pubkey))}else e(f)==="include-me"&&r&&(t=t.filter(d=>d.tags.filter(v=>v[0]==="p").map(v=>v[1]).includes(r)))}if(e(C)){const r=e(C).toLowerCase();t=t.filter(i=>{const d=i.tagValue("title")||"",c=i.tagValue("description")||"";return d.toLowerCase().includes(r)||c.toLowerCase().includes(r)})}return t}),F=z(12);const X=m(()=>e(O).slice(0,e(F))),Y=m(()=>e(F)<e(O).length),xe=m(()=>W.isLoading);function ke(){e(Y)&&_(F,Math.min(e(F)+12,e(O).length),!0)}J(()=>{e(f),e(C),_(F,12)});function Z(t){const r=Ke(t);ue(r)}J(()=>(ve.header=me,()=>{ve.clear()}));var T=ct(),Q=a(T),ee=a(Q),R=a(ee),te=l(a(R),2);Te(te),o(R);var he=l(R,2);{var we=t=>{var r=rt(),i=a(r);i.__click=()=>_(k,!e(k));var d=a(i),c=l(a(d),2),v=a(c,!0);o(c),o(d);var E=l(d,2);o(i);var I=l(i,2);{var D=x=>{var g=tt(),j=a(g),U=a(j);U.__click=()=>B("all");var P=l(U,2);P.__click=()=>B("mine");var h=l(P,2);h.__click=()=>B("follows");var M=l(h,2);M.__click=()=>B("include-me"),o(j),o(g),y(()=>{A(U,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="all"?"text-primary font-medium":"text-muted-foreground"}`),A(P,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="mine"?"text-primary font-medium":"text-muted-foreground"}`),A(h,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="follows"?"text-primary font-medium":"text-muted-foreground"}`),A(M,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(f)==="include-me"?"text-primary font-medium":"text-muted-foreground"}`)}),u(x,g)};L(I,x=>{e(k)&&x(D)})}o(r),y(()=>{V(v,ge[e(f)]),A(E,0,`w-4 h-4 text-muted-foreground transition-transform ${e(k)?"rotate-180":""}`)}),u(t,r)};L(he,t=>{$.$currentUser&&t(we)})}o(ee),o(Q);var q=l(Q,2),ye=l(a(q),2);{var Pe=t=>{var r=nt(),i=ie(r);ne(i,21,()=>e(X),c=>c.id,(c,v)=>{const E=m(()=>e(v).tagValue("image")),I=m(()=>e(v).tagValue("title")||"Untitled Pack"),D=m(()=>e(v).tagValue("description")),x=m(()=>e(v).tags.filter(s=>s[0]==="p").map(s=>s[1]));var g=it();g.__click=()=>Z(e(v)),g.__keydown=s=>s.key==="Enter"&&Z(e(v));var j=a(g);{var U=s=>{var n=ot(),b=a(n);o(n),y(()=>{ce(b,"src",e(E)),ce(b,"alt",e(I))}),u(s,n)};L(j,s=>{e(E)&&s(U)})}var P=l(j,2),h=a(P),M=a(h),$e=a(M,!0);o(M);var re=l(M,2),Ce=a(re);o(re),o(h);var oe=l(h,2);{var Fe=s=>{var n=at(),b=a(n,!0);o(n),y(()=>V(b,e(D))),u(s,n)};L(oe,s=>{e(D)&&s(Fe)})}var ae=l(oe,2),se=a(ae);ne(se,18,()=>e(x).slice(0,4),s=>s,(s,n,b)=>{var w=st();w.__click=G=>{G.stopPropagation(),ue(We(n))};var Ve=a(w);de(Ve,()=>fe.Root,(G,ze)=>{ze(G,{get ndk(){return $},get pubkey(){return n},children:(Ae,ut)=>{var le=Se(),Be=ie(le);de(Be,()=>fe.Avatar,(Ee,Ie)=>{Ie(Ee,{class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"})}),u(Ae,le)},$$slots:{default:!0}})}),o(w),y(()=>Qe(w,`z-index: ${4-e(b)}`)),u(s,w)});var je=l(se,2);{var Ue=s=>{var n=lt(),b=a(n),w=a(b);o(b),o(n),y(()=>V(w,`+${e(x).length-4}`)),u(s,n)};L(je,s=>{e(x).length>4&&s(Ue)})}o(ae),o(P),o(g),y(()=>{V($e,e(I)),V(Ce,`${e(x).length??""} members`)}),u(c,g)}),o(i);var d=l(i,2);Je(d,{onIntersect:ke,get hasMore(){return e(Y)},get isLoading(){return e(xe)}}),u(t,r)},Me=t=>{var r=dt();u(t,r)};L(ye,t=>{e(X).length>0?t(Pe):t(Me,!1)})}o(q);var Le=l(q,2);qe(Le,{get open(){return e(N)},set open(t){_(N,t,!0)}}),o(T),Re(te,()=>e(C),t=>_(C,t)),u(H,T),Oe()}De(["click","keydown"]);export{Ct as component};
