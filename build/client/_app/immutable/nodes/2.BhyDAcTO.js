import{d as ct,c as N,a as t,f as d,s as B,t as Be,b as Ct,j as Rt}from"../chunks/CvdcXPsy.js";import{s as se,g as e,a as v,p as Ge,u as mt,h as m,e as Je,c as a,d as o,r,n as ge,t as $,f as ae,b as Kt,aB as vr,aK as ur}from"../chunks/-h67YDCL.js";import{s as nt}from"../chunks/0JHOh1sT.js";import{i as p}from"../chunks/DG6c9x1x.js";import{n as P,s as ye,i as Wt,r as Bt,f as $t,N as tr,z as Yt,b as fr,F as pr,d as gr,e as mr}from"../chunks/CAJmB2zv.js";import{m as Gt}from"../chunks/BL8Mvof4.js";import{n as Et}from"../chunks/CKCu7fRq.js";import{M as rr,a as hr,c as _r,C as br}from"../chunks/Cq1keEic.js";import{e as dt,i as zt}from"../chunks/DBJvd_ZN.js";import{s as Ve,f as xr,a as Oe,e as ar,b as or,d as Vt,r as Xt,j as yr}from"../chunks/vjiKTA8K.js";import{s as St,a as ht}from"../chunks/CptlhHpT.js";import{p as It}from"../chunks/aVfrvTxa.js";import{$ as Tt}from"../chunks/CIoNh8li.js";import{s as Mt}from"../chunks/CZG2XR4U.js";import{h as ve}from"../chunks/Cu6qrFqU.js";import{l as wt}from"../chunks/BHCKFZxr.js";import{g as kr}from"../chunks/Dtp51Kds.js";import{c as Ue}from"../chunks/C52XBfTo.js";import{p as rt,s as wr}from"../chunks/6dG0wjw8.js";import{c as nr}from"../chunks/CuEznFOR.js";import{R as $r}from"../chunks/Cst4b681.js";import{l as Ft}from"../chunks/CaPeghD6.js";import{a2 as sr}from"../chunks/Ce4Vc0Tb.js";import{e as ir,D as Jt,a as qt,R as Zt}from"../chunks/y2uKFtaO.js";import{b as Nt}from"../chunks/ByH5JKyU.js";import{U as bt}from"../chunks/Dk4THxss.js";import{g as gt}from"../chunks/D1jhUNbu.js";import{I as ze,L as it,c as Cr}from"../chunks/BClDDyYv.js";import{N as Mr}from"../chunks/b8skZAYQ.js";import{U as Sr}from"../chunks/drvMETkT.js";import{u as jt}from"../chunks/Xqq2-EA3.js";import{U as Pr}from"../chunks/DNu_4apC.js";import{D as Qt}from"../chunks/BFIKOW_n.js";import{t as kt}from"../chunks/DqdFoxb9.js";import{I as pt,B as _t}from"../chunks/B3t7n0XN.js";import{T as lr}from"../chunks/jXeEBM3o.js";import{D as dr,a as zr}from"../chunks/BeHDsRkZ.js";import{a as Ar}from"../chunks/DoDeW8UU.js";import{d as Nr}from"../chunks/Bif2btQW.js";import{g as Ir,a as Ur,e as Lr,b as Rr}from"../chunks/JQBZd0wI.js";import{R as er}from"../chunks/DKHnPTm-.js";import{C as jr}from"../chunks/BTi5ba5s.js";const Tr=9735,Dr=3e4;class Or{zapSubscription=null;checkInterval=null;isProcessing=!1;start(){if(Et.enabled){if(!P.$currentUser){console.warn("[NpubCashMonitor] No active user, cannot start monitoring");return}console.log("[NpubCashMonitor] Starting zap monitoring for",P.$currentUser.pubkey),this.zapSubscription=P.subscribe({kinds:[Tr],"#p":[P.$currentUser.pubkey]},{closeOnEose:!1}),this.zapSubscription.on("event",()=>{console.log("[NpubCashMonitor] Zap received, checking npub.cash balance"),this.checkAndClaim()}),this.checkInterval=setInterval(()=>{this.checkAndClaim()},Dr),this.checkAndClaim()}}stop(){this.zapSubscription&&(this.zapSubscription.stop(),this.zapSubscription=null),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),console.log("[NpubCashMonitor] Stopped monitoring")}async checkAndClaim(){if(Et.enabled&&!this.isProcessing){if(!P.$wallet){console.warn("[NpubCashMonitor] No wallet available, skipping token claim");return}this.isProcessing=!0;try{const u=await Et.claimTokens();u&&(console.log("[NpubCashMonitor] Token claimed, redeeming to wallet"),await this.redeemToWallet(u))}catch(u){console.error("[NpubCashMonitor] Error checking/claiming tokens:",u)}finally{this.isProcessing=!1}}}async redeemToWallet(u){if(!P.$wallet){console.warn("[NpubCashMonitor] No wallet available, cannot redeem token");return}try{await P.$wallet.receiveToken(u),console.log("[NpubCashMonitor] âœ“ Token redeemed to wallet")}catch(T){console.error("[NpubCashMonitor] Failed to redeem token to wallet:",T)}}}const Ht=new Or;class Br{#e=se(!1);get sidebarCollapsed(){return e(this.#e)}set sidebarCollapsed(u){v(this.#e,u,!0)}#t=se(!0);get rightSidebarVisible(){return e(this.#t)}set rightSidebarVisible(u){v(this.#t,u,!0)}#r=se(!1);get mobileSidebarOpen(){return e(this.#r)}set mobileSidebarOpen(u){v(this.#r,u,!0)}constructor(){if(typeof window<"u"){const u=localStorage.getItem("sidebarCollapsed");u!==null&&(this.sidebarCollapsed=u==="true")}}toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed,this.persistCollapseState()}collapseSidebar(){this.sidebarCollapsed||(this.sidebarCollapsed=!0,this.persistCollapseState())}expandSidebar(){this.sidebarCollapsed&&(this.sidebarCollapsed=!1,this.persistCollapseState())}setRightSidebarVisibility(u){this.rightSidebarVisible=u}toggleMobileSidebar(){this.mobileSidebarOpen=!this.mobileSidebarOpen}closeMobileSidebar(){this.mobileSidebarOpen=!1}setArticleMode(){this.collapseSidebar(),this.setRightSidebarVisibility(!1)}reset(){this.expandSidebar(),this.setRightSidebarVisibility(!0),this.closeMobileSidebar()}persistCollapseState(){typeof window<"u"&&localStorage.setItem("sidebarCollapsed",String(this.sidebarCollapsed))}}const Pt=new Br;function Er(X){return X===0?"0":X>=1e6?`${(X/1e6).toFixed(1)}M`:X>=1e3?`${(X/1e3).toFixed(1)}k`:new Intl.NumberFormat("en-US").format(X)}var Vr=d('<img class="w-6 h-6 rounded-full object-cover"/>'),Hr=d('<div class="w-6 h-6 rounded-full bg-primary flex items-center justify-center"><span class="text-xs font-bold"> </span></div>'),Wr=d('<button class="flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted text-foreground rounded-lg transition-colors"><!> <span> </span> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button>'),Fr=d('<button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg> <span>Login</span></button>');function Kr(X,u){Ge(u,!0);const T=rt(u,"class",3,"px-4 py-2 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-semibold");let x=se(null);mt(()=>{const n=P.$currentUser?.pubkey;if(!n){v(x,null);return}P.fetchUser(n).then(l=>{l?.fetchProfile().then(s=>{v(x,s,!0)})})});const k=ae(()=>e(x)?.name||e(x)?.displayName||"Anon");function y(){P.$sessions&&P.$sessions.logout()}var f=N(),I=m(f);{var z=n=>{var l=Wr();l.__click=y;var s=a(l);{var C=re=>{var F=Vr();$(()=>{Oe(F,"src",e(x).image),Oe(F,"alt",e(k))}),t(re,F)},U=re=>{var F=Hr(),ue=a(F),be=a(ue,!0);r(ue),r(F),$(M=>B(be,M),[()=>e(k).charAt(0).toUpperCase()]),t(re,F)};p(s,re=>{e(x)?.image?re(C):re(U,!1)})}var E=o(s,2),V=a(E,!0);r(E),ge(2),r(l),$(()=>B(V,e(k))),t(n,l)},S=n=>{var l=Fr();l.__click=()=>Ft.open("signup"),$(()=>Ve(l,1,xr(T()))),t(n,l)};p(I,n=>{P.$currentUser?n(z):n(S,!1)})}t(X,f),Je()}ct(["click"]);var Yr=d('<div class="flex-1 min-w-0 text-left"><p class="font-medium text-sm truncate text-foreground"> </p> <p class="text-xs text-muted-foreground truncate"> </p></div>'),Gr=d("<button><!> <!></button>"),Jr=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <span> </span>',1),qr=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> <span> </span>',1),Zr=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> <span> </span>',1),Qr=d('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> <span> </span></button></div>'),Xr=d("<!> <!>",1);function ea(X,u){Ge(u,!0);const T=()=>ht(Tt,"$t",x),[x,k]=St(),y=rt(u,"collapsed",3,!1);let f=se(!1),I=se(void 0),z=se(void 0),S=se(null);mt(()=>{const R=P.$currentUser?.pubkey;if(!R){v(S,null);return}P.fetchUser(R).then(b=>{b?.fetchProfile().then(g=>{v(S,g,!0)})})});const n=ae(()=>e(S)?.displayName||e(S)?.name||"Anonymous"),l=ae(()=>P.$currentUser?.npub);function s(){v(f,!e(f))}function C(){v(f,!1)}function U(){P.$sessions&&(P.$sessions.logout(),C())}function E(){e(l)&&(gt(`/p/${e(l)}`),C())}function V(){gt("/settings"),C()}function re(){const R=ye.theme;R==="light"?ye.setTheme("dark"):R==="dark"?ye.setTheme("system"):ye.setTheme("light")}mt(()=>{if(!e(f))return;const R=b=>{e(I)&&!e(I).contains(b.target)&&e(z)&&!e(z).contains(b.target)&&v(f,!1)};return document.addEventListener("click",R),()=>document.removeEventListener("click",R)});var F=Xr(),ue=m(F);{var be=R=>{var b=Gr();b.__click=s;var g=a(b);Ue(g,()=>bt.Root,(i,c)=>{c(i,{get ndk(){return P},get pubkey(){return P.$currentUser.pubkey},children:(Y,O)=>{var K=N(),ee=m(K);Ue(ee,()=>bt.Avatar,(A,L)=>{L(A,{class:"w-10 h-10"})}),t(Y,K)},$$slots:{default:!0}})});var D=o(g,2);{var w=i=>{var c=Yr(),Y=a(c),O=a(Y,!0);r(Y);var K=o(Y,2),ee=a(K,!0);r(K),r(c),$(A=>{B(O,e(n)),B(ee,A)},[()=>e(S)?.nip05||(e(l)?`${e(l).slice(0,16)}...`:"")]),t(i,c)};p(D,i=>{y()||i(w)})}r(b),Nt(b,i=>v(z,i),()=>e(z)),$(()=>{Ve(b,1,`w-full flex items-center ${y()?"justify-center p-3":"gap-3 px-2 py-2"} rounded-lg hover:bg-muted transition-colors cursor-pointer`),Oe(b,"title",y()?e(n):void 0)}),t(R,b)};p(ue,R=>{P.$currentUser&&R(be)})}var M=o(ue,2);{var oe=R=>{var b=N(),g=m(b);sr(g,()=>e(f),D=>{var w=N(),i=m(w);ir(i,()=>"div",!1,(c,Y)=>{ar(c,()=>({style:"display: contents"}));var O=Qr(),K=a(O);K.__click=E;var ee=a(K);Ue(ee,()=>bt.Root,(Z,W)=>{W(Z,{get ndk(){return P},get pubkey(){return P.$currentUser.pubkey},children:(Q,xe)=>{var ke=N(),me=m(ke);Ue(me,()=>bt.Avatar,(Se,he)=>{he(Se,{class:"w-12 h-12"})}),t(Q,ke)},$$slots:{default:!0}})});var A=o(ee,2),L=a(A),ie=a(L,!0);r(L);var ne=o(L,2),G=a(ne,!0);r(ne),r(A),r(K);var le=o(K,4);le.__click=re;var J=a(le);{var j=Z=>{var W=Jr(),Q=o(m(W),2),xe=a(Q,!0);r(Q),$(ke=>B(xe,ke),[()=>T()("settings.sections.appearance.themes.light")]),t(Z,W)},H=Z=>{var W=N(),Q=m(W);{var xe=me=>{var Se=qr(),he=o(m(Se),2),Le=a(he,!0);r(he),$(Pe=>B(Le,Pe),[()=>T()("settings.sections.appearance.themes.dark")]),t(me,Se)},ke=me=>{var Se=Zr(),he=o(m(Se),2),Le=a(he,!0);r(he),$(Pe=>B(Le,Pe),[()=>T()("settings.sections.appearance.themes.system")]),t(me,Se)};p(Q,me=>{ye.theme==="dark"?me(xe):me(ke,!1)},!0)}t(Z,W)};p(J,Z=>{ye.theme==="light"?Z(j):Z(H,!1)})}r(le);var te=o(le,2);te.__click=V;var fe=o(a(te),2),pe=a(fe,!0);r(fe),r(te);var h=o(te,4);h.__click=U;var q=o(a(h),2),Ce=a(q,!0);r(q),r(h),r(O),Nt(O,Z=>v(I,Z),()=>e(I)),$((Z,W,Q,xe,ke)=>{or(O,`position: fixed; bottom: ${Z??""}px; left: ${W??""}px; z-index: 9999;`),B(ie,e(n)),B(G,Q),B(pe,xe),B(Ce,ke)},[()=>window.innerHeight-e(z).getBoundingClientRect().top+8,()=>e(z).getBoundingClientRect().left,()=>T()("profile.editProfile"),()=>T()("navigation.settings"),()=>T()("navigation.logout")]),t(Y,O)}),t(D,w)}),t(R,b)};p(M,R=>{e(f)&&e(z)&&R(oe)})}t(X,F),Je(),k()}ct(["click"]);var ta=d("<span><!></span>");function At(X,u){Ge(u,!0);const T=rt(u,"variant",3,"primary"),x=rt(u,"size",3,"sm"),k=rt(u,"indicator",3,!1),y=rt(u,"class",3,""),f=ae(()=>({primary:"bg-primary text-primary-foreground",secondary:"bg-primary/20 text-primary"})[T()]),I=ae(()=>k()?"w-2 h-2":{xs:"min-w-[18px] h-[18px] px-1 text-[10px] font-bold",sm:"px-2 py-1 text-xs font-medium"}[x()]);var z=ta(),S=a(z);{var n=l=>{var s=N(),C=m(s);nt(C,()=>u.children),t(l,s)};p(S,l=>{!k()&&u.children&&l(n)})}r(z),$(()=>Ve(z,1,`rounded-full flex items-center justify-center ${e(f)??""} ${e(I)??""} ${y()??""}`)),t(X,z),Je()}var ra=d('<span class="font-medium"> </span>'),aa=d("<!> ",1),oa=d('<span class="text-xs text-muted-foreground font-medium"> </span>'),na=d("<a><div><!> <!></div> <!></a>"),sa=d('<span class="font-medium"> </span>'),ia=d("<button><!> <!></button>"),la=d("<span> </span>"),da=d("<button><!> <!></button>"),ca=d(`<aside><div><div><svg viewBox="0 0 686 250" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg"><style>.st0{fill:#F68E1D;}
          .st1{fill:currentColor;}
          .st2{fill:currentColor;opacity:0.9;}</style><path class="st0" d="M109.5,196.1h66.7c17.5,0,31.6-14.2,31.6-31.6V97.8c0-17.5-14.2-31.6-31.6-31.6h-66.7
          c-17.5,0-31.6,14.2-31.6,31.6v66.7C77.9,182,92,196.1,109.5,196.1z"></path><g><path class="st1" d="M233.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
            c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
            L251,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H233.9z M273.1,87.7h8.8l-7.8,9.2h-3L273.1,87.7z"></path><path class="st1" d="M358.3,135.2c0-1.5-0.6-2.7-1.8-3.7c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H378v0.9c-2.9,0.3-4.9,0.9-6.1,1.8
            c-1.2,0.9-1.8,2.1-1.8,3.7v32.9c0,1.5,0.6,2.7,1.8,3.7c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-29v-0.9c3.5-0.3,5.9-0.9,7.2-1.8
            c1.3-0.9,2-2.1,2-3.7v-11.1c-1.5,2.9-3.7,5.2-6.7,6.7c-2.9,1.6-6.8,2.3-11.5,2.3c-4.5,0-8.7-0.7-12.3-2.2c-3.7-1.5-6.8-3.6-9.4-6.4
            c-2.6-2.8-4.6-6.2-6-10.2c-1.4-4-2.1-8.6-2.1-13.6c0-5.1,0.7-9.6,2.2-13.7c1.5-4.1,3.7-7.5,6.6-10.4c2.9-2.9,6.5-5.1,10.9-6.7
            c4.4-1.6,9.4-2.3,15.1-2.3c3.8,0,7.5,0.3,11.2,1c3.7,0.7,7.2,1.7,10.6,3v15.6h-1.3c-1.1-2.5-2.3-4.8-3.7-6.8c-1.4-2-3-3.8-4.7-5.3
            c-1.8-1.5-3.7-2.6-5.9-3.4c-2.2-0.8-4.6-1.2-7.3-1.2c-3.6,0-6.8,0.7-9.5,2.1c-2.7,1.4-4.9,3.4-6.7,6c-1.8,2.6-3.2,5.7-4,9.3
            c-0.9,3.6-1.3,7.7-1.3,12.2c0,9.2,1.8,16.2,5.5,20.8c3.7,4.7,8.6,7,14.6,7c4.8,0,8.5-1.6,11.3-4.8c2.7-3.2,4.2-8.5,4.5-15.8V135.2z
            "></path><path class="st1" d="M480.2,101.4c12.3,0,21.4,1.4,27.3,4.3c5.8,2.9,8.8,6.9,8.8,12.1c0,3.8-1.6,7.1-4.7,9.7
            c-3.2,2.6-8,4.5-14.7,5.6l19,25.9c0.9,1.3,2.2,2.4,3.8,3.5c1.6,1,3.8,1.7,6.7,2v0.9h-27.7v-0.9c2.9-0.3,4.5-1,4.8-2
            c0.3-1,0-2.2-0.9-3.5l-17.9-24.8c-0.7,0.1-1.4,0.1-2.1,0.1c-0.8,0-1.5,0-2.3,0h-7.1V159c0,1.5,0.6,2.7,1.8,3.7
            c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-27.7v-0.9c2.9-0.3,4.9-0.9,6.1-1.8c1.2-0.9,1.8-2.1,1.8-3.7v-51.2c0-1.5-0.6-2.7-1.8-3.7
            c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H480.2z M480.2,131.6c8.2,0,14.3-1.2,18.1-3.5c3.8-2.3,5.7-5.7,5.7-10.2c0-4.5-1.9-7.9-5.7-10.2
            c-3.8-2.3-9.8-3.5-18.1-3.5h-7.1v27.5H480.2z"></path><path class="st1" d="M528.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
            c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
            L546,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H528.9z"></path><path class="st1" d="M445.1,120c-1.5-4-3.7-7.5-6.5-10.3c-2.8-2.9-6.2-5.1-10.1-6.6c-4-1.6-8.4-2.3-13.4-2.3
            c-4.9,0-9.3,0.8-13.3,2.3c-4,1.6-7.4,3.8-10.2,6.6c-2.8,2.9-5,6.3-6.5,10.3c-1.5,4-2.3,8.5-2.3,13.5s0.8,9.4,2.3,13.5
            c1.5,4,3.7,7.5,6.5,10.3c2.8,2.9,6.2,5.1,10.2,6.6c4,1.6,8.4,2.3,13.3,2.3c5,0,9.4-0.8,13.4-2.3c3.9-1.6,7.3-3.8,10.1-6.6
            c2.8-2.9,5-6.3,6.5-10.3c1.5-4,2.3-8.5,2.3-13.5S446.6,124,445.1,120z M415,163.4c-12.4,0-20.9-13.4-20.9-30s8.2-30,20.9-30
            c13,0,20.9,13.4,20.9,30S428,163.4,415,163.4z"></path></g><path d="M144.2,133.4h-2.9v0.1C142.3,133.5,143.3,133.5,144.2,133.4z"></path><polygon class="st2" points="143.9,97.2 101,109.3 101,113.8 186.8,113.8 186.8,109.3 "></polygon><polygon class="st2" points="104.4,115.4 106,117.6 181.2,117.6 182.6,115.4 "></polygon><path class="st2" d="M125,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L125,120.4z M111.2,157h-2.6
          v-29.2h2.6V157z M117.1,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M185.3,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L185.3,120.4z M171.4,157h-2.6
          v-29.2h2.6V157z M177.3,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M155.2,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L155.2,120.4z M141.3,157h-2.6
          v-29.2h2.6V157z M147.2,157h-2.6v-29.2h2.6V157z"></path><path class="st1" d="M284.4,150.2h-2.6v0.1C282.7,150.3,283.6,150.3,284.4,150.2z"></path></svg></div> <button class="p-2 rounded-lg hover:bg-muted transition-colors text-muted-foreground hover:text-primary flex-shrink-0"><!></button></div> <nav class="flex-1 space-y-2"><!> <!></nav> <div class="mt-auto pt-4 border-t border-border"><!></div></aside>`);function va(X,u){Ge(u,!0);const T=()=>ht(It,"$page",k),x=()=>ht(Tt,"$t",k),[k,y]=St(),f=rt(u,"collapsed",3,!1),I=P.$wallet,z=nr(P),S=ae(()=>T().url.pathname),n=[{type:"component",component:$r,componentProps:{active:e(S)==="/",collapsed:f()}},{type:"link",href:"/messages",icon:"message",label:"navigation.messages",active:i=>i.startsWith("/messages"),badge:()=>Gt.totalUnreadCount||null},{type:"button",icon:"search",label:"Search",onClick:u.onSearchClick},{type:"link",href:"/notifications",icon:"bell",label:"Notifications",active:i=>i.startsWith("/notifications"),badge:()=>z.counts.all||null},{type:"link",href:"/wallet",icon:"wallet",label:"Wallet",active:i=>i.startsWith("/wallet"),rightContent:()=>I?.balance&&I.balance>0?Er(I.balance):null},{type:"link",href:"/agora/invites",icon:"users",label:"Community Invites",active:i=>i.startsWith("/agora/invites"),visible:()=>ye.selectedRelay?Wt(ye.selectedRelay):!1},{type:"link",href:"/packs",icon:"packs",label:"navigation.followPacks",active:i=>i.startsWith("/packs")},{type:"link",href:"/relay-feeds",icon:"relay",label:"Relay Feeds",active:i=>i.startsWith("/relay-feeds"),visible:()=>Bt?.relays.length>0,rightContent:()=>Bt?.relays.length?String(Bt.relays.length):null},{type:"link",href:"/trades",icon:"trades",label:"navigation.trades",active:i=>i==="/trades"},{type:"link",href:"/marketplace",icon:"marketplace",label:"navigation.marketplace",active:i=>i==="/marketplace"}],l=ae(()=>n.filter(i=>!i.visible||i.visible())),s=ae(()=>e(S)==="/marketplace"?{icon:"plus",label:x()("classifieds.createListing")}:e(S)==="/trades"?{icon:"plus",label:"Create Trade"}:e(S)==="/agora/invites"?{icon:"invite",label:"Create Invite"}:{icon:"edit",label:x()("navigation.compose")});var C=ca(),U=a(C),E=a(U),V=o(E,2);V.__click=function(...i){u.onToggleCollapse?.apply(this,i)};var re=a(V);{var F=i=>{ze(i,{name:"chevron-right",size:"md"})},ue=i=>{ze(i,{name:"chevron-left",size:"md"})};p(re,i=>{f()?i(F):i(ue,!1)})}r(V),r(U);var be=o(U,2),M=a(be);dt(M,17,()=>e(l),zt,(i,c)=>{var Y=N(),O=m(Y);{var K=A=>{var L=N(),ie=m(L);Ue(ie,()=>e(c).component,(ne,G)=>{G(ne,wr(()=>e(c).componentProps))}),t(A,L)},ee=A=>{var L=N(),ie=m(L);{var ne=le=>{const J=ae(()=>e(c).active?e(c).active(e(S)):!1);var j=na(),H=a(j),te=a(H);{var fe=W=>{ze(W,{get name(){return e(c).icon},size:"lg"})};p(te,W=>{e(c).icon&&W(fe)})}var pe=o(te,2);{var h=W=>{var Q=ra(),xe=a(Q,!0);r(Q),$(ke=>B(xe,ke),[()=>x()(e(c).label)]),t(W,Q)};p(pe,W=>{!f()&&e(c).label&&W(h)})}r(H);var q=o(H,2);{var Ce=W=>{const Q=ae(()=>e(c).badge());var xe=N(),ke=m(xe);{var me=he=>{At(he,{size:"xs",class:"absolute top-1.5 right-1.5",children:(Le,Pe)=>{ge();var we=Be();$(()=>B(we,e(Q)>9?"9+":e(Q))),t(Le,we)},$$slots:{default:!0}})},Se=he=>{At(he,{size:"sm",children:(Le,Pe)=>{ge();var we=Be();$(()=>B(we,e(Q)>99?"99+":e(Q))),t(Le,we)},$$slots:{default:!0}})};p(ke,he=>{f()?he(me):he(Se,!1)})}t(W,xe)},Z=W=>{var Q=N(),xe=m(Q);{var ke=me=>{var Se=N(),he=m(Se);{var Le=we=>{At(we,{variant:"secondary",size:"sm",class:"gap-1",children:(He,Fe)=>{var Ke=aa(),lt=m(Ke);ze(lt,{name:"trending",size:"xs"});var de=o(lt);$($e=>B(de,` ${$e??""}`),[()=>e(c).rightContent()]),t(He,Ke)},$$slots:{default:!0}})},Pe=we=>{var He=oa(),Fe=a(He,!0);r(He),$(Ke=>B(Fe,Ke),[()=>e(c).rightContent()]),t(we,He)};p(he,we=>{e(c).href==="/relay-feeds"?we(Le):we(Pe,!1)})}t(me,Se)};p(xe,me=>{!f()&&e(c).rightContent&&e(c).rightContent()&&me(ke)},!0)}t(W,Q)};p(q,W=>{e(c).badge&&e(c).badge()!==null?W(Ce):W(Z,!1)})}r(j),$(W=>{Oe(j,"href",e(c).href),Ve(j,1,`flex items-center ${f()?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${e(J)?"text-primary bg-primary/10":"text-foreground hover:bg-muted"} relative`),Oe(j,"title",W),Ve(H,1,`flex items-center ${f()?"":"gap-3"}`)},[()=>f()&&e(c).label?x()(e(c).label):void 0]),t(le,j)},G=le=>{var J=N(),j=m(J);{var H=te=>{var fe=ia();fe.__click=function(...Z){e(c).onClick?.apply(this,Z)};var pe=a(fe);{var h=Z=>{ze(Z,{get name(){return e(c).icon},size:"lg"})};p(pe,Z=>{e(c).icon&&Z(h)})}var q=o(pe,2);{var Ce=Z=>{var W=sa(),Q=a(W,!0);r(W),$(()=>B(Q,e(c).label)),t(Z,W)};p(q,Z=>{!f()&&e(c).label&&Z(Ce)})}r(fe),$(()=>{Ve(fe,1,`w-full flex items-center ${f()?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors text-foreground hover:bg-muted`),Oe(fe,"title",f()&&e(c).label?e(c).label:void 0)}),t(te,fe)};p(j,te=>{e(c).type==="button"&&e(c).onClick&&te(H)},!0)}t(le,J)};p(ie,le=>{e(c).type==="link"&&e(c).href?le(ne):le(G,!1)},!0)}t(A,L)};p(O,A=>{e(c).type==="component"&&e(c).component?A(K):A(ee,!1)})}t(i,Y)});var oe=o(M,2);{var R=i=>{var c=da();c.__click=function(...ee){u.onPrimaryAction?.apply(this,ee)};var Y=a(c);ze(Y,{get name(){return e(s).icon},size:"md"});var O=o(Y,2);{var K=ee=>{var A=la(),L=a(A,!0);r(A),$(()=>B(L,e(s).label)),t(ee,A)};p(O,ee=>{f()||ee(K)})}r(c),$(()=>{Ve(c,1,`w-full flex items-center justify-center ${f()?"p-3":"gap-2 px-6 py-3"} bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full transition-colors mt-4`),Oe(c,"title",f()?e(s).label:void 0)}),t(i,c)};p(oe,i=>{P.$currentUser&&u.onPrimaryAction&&i(R)})}r(be);var b=o(be,2),g=a(b);{var D=i=>{ea(i,{get collapsed(){return f()}})},w=i=>{{let c=ae(()=>f()?"p-3":"gap-2 px-4 py-3");Kr(i,{get class(){return`w-full flex items-center justify-center ${e(c)??""} bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full transition-colors`}})}};p(g,i=>{P.$currentUser?i(D):i(w,!1)})}r(b),r(C),$(()=>{Ve(C,1,`hidden lg:flex ${f()?"w-16":"w-64"} p-2 flex-col border-r border-border fixed left-0 top-0 bottom-0 overflow-y-auto overflow-x-visible transition-all duration-300 ease-in-out bg-background`),Ve(U,1,`mb-6 flex items-center ${f()?"justify-center":"justify-between"} gap-2`),Ve(E,1,`px-2 ${f()?"hidden":"flex-1"} transition-opacity duration-300 text-foreground`),Oe(V,"aria-label",f()?"Expand sidebar":"Collapse sidebar")}),t(X,C),Je(),y()}ct(["click"]);var ua=d('<div class="p-4"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">New Members</h2></div> <div class="space-y-3"></div></div>');function fa(X,u){Ge(u,!0);const T=ae(()=>!!ye.selectedRelay),x=ae(()=>ye.selectedRelay?P.$subscribe(()=>({filters:[{kinds:[514],limit:10}],relayUrls:[ye.selectedRelay],cacheUsage:$t.ONLY_RELAY,subId:"new-members-514"})):null),k=ae(()=>e(x)?e(x).events.map(n=>{const l=n.tagValue("p");return{memberPubkey:n.pubkey,inviterPubkey:l,joinedAt:n.created_at||0}}).sort((n,l)=>l.joinedAt-n.joinedAt).slice(0,5):[]);var y=N(),f=m(y);{var I=z=>{var S=ua(),n=o(a(S),2);dt(n,21,()=>e(k),l=>l.memberPubkey,(l,s)=>{Mr(l,{get memberPubkey(){return e(s).memberPubkey},get inviterPubkey(){return e(s).inviterPubkey},get joinedAt(){return e(s).joinedAt}})}),r(n),r(S),t(z,S)};p(f,z=>{e(T)&&e(k).length>0&&z(I)})}t(X,y),Je()}var pa=d('<div class="text-center py-4 text-sm text-muted-foreground">No journalists found yet</div>'),ga=d('<div class="flex items-center gap-3"><!></div>'),ma=d('<div class="p-4"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">Journalists</h2></div> <div class="space-y-3"><!></div></div>');function ha(X,u){Ge(u,!0);const T=ae(()=>Yt(ye.selectedRelay,ye.relays.filter(n=>n.enabled&&n.read).map(n=>n.url))),x=P.$subscribe(()=>({filters:[{kinds:[tr.Article],limit:50}],bufferMs:500,relayUrls:e(T).length>0?e(T):void 0,cacheUsage:e(T).length>0?$t.ONLY_RELAY:$t.CACHE_FIRST,closeOnEose:!0})),k=ae(()=>{const n=new Map;for(const l of x.events){const s=n.get(l.pubkey)||0;n.set(l.pubkey,s+1)}return Array.from(n.entries()).map(([l,s])=>({pubkey:l,articleCount:s})).sort((l,s)=>s.articleCount-l.articleCount).slice(0,5)});var y=ma(),f=o(a(y),2),I=a(f);{var z=n=>{var l=pa();t(n,l)},S=n=>{var l=N(),s=m(l);dt(s,17,()=>e(k),C=>C.pubkey,(C,U)=>{var E=ga(),V=a(E);Sr(V,{get pubkey(){return e(U).pubkey},variant:"avatar-name-meta",avatarSize:"w-10 h-10",nameSize:"text-sm font-medium",class:"flex-1 min-w-0"}),r(E),t(C,E)}),t(n,l)};p(I,n=>{e(k).length===0?n(z):n(S,!1)})}r(f),r(y),t(X,y),Je()}var _a=d('<div class="w-12 h-12 bg-muted rounded-lg overflow-hidden flex-shrink-0"><img class="w-full h-full object-cover"/></div>'),ba=d('<p class="text-xs text-muted-foreground mt-1"> </p>'),xa=d('<button class="w-full bg-muted/50 rounded-lg p-3 transition-all hover:bg-muted hover:scale-[1.02] text-left"><div class="flex gap-3"><!> <div class="flex-1 min-w-0"><h4 class="text-sm font-medium text-card-foreground truncate"> </h4> <!></div></div></button>'),ya=d('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg> <h3 class="text-lg font-semibold text-card-foreground">Recent Marketplace</h3></div> <button class="flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors">View All <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="space-y-3"></div>',1);function ka(X,u){Ge(u,!0);const T=ae(()=>Yt(ye.selectedRelay,ye.relays.filter(n=>n.enabled&&n.read).map(n=>n.url))),x=P.$subscribe(()=>({filters:[{kinds:[30402],limit:5}],bufferMs:100,relayUrls:e(T).length>0?e(T):void 0,cacheUsage:e(T).length>0?$t.ONLY_RELAY:$t.PARALLEL})),k=ae(()=>x.events.filter(n=>(n.tagValue("status")||"active")==="active").slice(0,5));function y(n){return n.tagValue("image")}function f(n){const l=n.tags.find(s=>s[0]==="price");return!l||!l[1]||!l[2]?null:{amount:l[1],currency:l[2]}}var I=N(),z=m(I);{var S=n=>{var l=ya(),s=m(l),C=o(a(s),2);C.__click=()=>gt("/marketplace"),r(s);var U=o(s,2);dt(U,21,()=>e(k),E=>E.id,(E,V)=>{const re=ae(()=>f(e(V)));var F=xa();F.__click=()=>gt(`/marketplace/${e(V).encode()}`);var ue=a(F),be=a(ue);{var M=w=>{var i=_a(),c=a(i);r(i),$((Y,O)=>{Oe(c,"src",Y),Oe(c,"alt",O)},[()=>y(e(V)),()=>e(V).tagValue("title")||"Listing"]),t(w,i)};p(be,w=>{y(e(V))&&w(M)})}var oe=o(be,2),R=a(oe),b=a(R,!0);r(R);var g=o(R,2);{var D=w=>{var i=ba(),c=a(i);r(i),$(()=>B(c,`${e(re).amount??""} ${e(re).currency??""}`)),t(w,i)};p(g,w=>{e(re)&&w(D)})}r(oe),r(ue),r(F),$(w=>B(b,w),[()=>e(V).tagValue("title")||"Untitled"]),t(E,F)}),r(U),t(n,l)};p(z,n=>{e(k).length>0&&n(S)})}t(X,I),Je()}ct(["click"]);var wa=d('<a class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></a>'),$a=d('<button class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></button>'),Ca=d('<p class="text-sm text-muted-foreground mt-1"> </p>'),Ma=d('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><div class="flex items-center gap-3"><!> <div class="flex-1"><h1 class="text-2xl font-bold text-foreground"> </h1> <!></div> <!></div></div></div>'),Sa=d('<span class="font-medium"> </span>'),Pa=d('<a class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></a>'),za=d('<span class="font-medium"> </span>'),Aa=d('<button class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></button>'),Na=d('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><!></div></div>'),Ia=d('<div class="h-4 bg-muted rounded animate-pulse"></div> <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div> <div class="h-4 bg-muted rounded animate-pulse"></div>',1),Ua=d('<a class="block text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-2"> </a>'),La=d('<!> <div class="p-4"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground"> </h2></div> <div class="space-y-3"><!></div></div> <!> <!>',1),Ra=d('<aside class="hidden xl:block w-80 border-l border-border fixed top-0 right-0 bottom-0"><div class="flex flex-col divide-border divide-y"><!></div></aside>'),ja=d('<div><!> <div class="w-full lg:flex-1 min-w-0 flex flex-col h-full"><main class="flex-1 pb-20 lg:pb-0 bg-background max-w-3xl 2xl:max-w-3xl w-full mx-auto border-x border-border min-h-screen"><!> <!></main></div> <!></div>');function Ta(X,u){Ge(u,!0);const T=()=>ht(It,"$page",k),x=()=>ht(Tt,"$t",k),[k,y]=St(),f=ae(()=>T().url.pathname),I=ae(()=>wt.mode==="article"||wt.mode==="profile"||wt.mode==="reads"||e(f).startsWith("/note/")||e(f).startsWith("/messages/")||e(f).startsWith("/packs")||e(f).startsWith("/agora/invites")||!Pt.rightSidebarVisible);mt(()=>{wt.mode==="article"&&Pt.collapseSidebar()});const z=ae(()=>Yt(ye.selectedRelay,ye.relays.filter(M=>M.enabled&&M.read).map(M=>M.url))),S=ae(()=>!e(I)&&!Mt.rightSidebar?P.$subscribe(()=>({filters:[{kinds:[tr.Article],limit:5}],bufferMs:500,relayUrls:e(z).length>0?e(z):void 0,cacheUsage:e(z).length>0?$t.ONLY_RELAY:$t.CACHE_FIRST,closeOnEose:!0})):null),n=ae(()=>e(S)?e(S).events.map(M=>fr.from(M)).filter(M=>M.title&&M.content).sort((M,oe)=>(oe.published_at??oe.created_at??0)-(M.published_at??M.created_at??0)).slice(0,5):[]);var l=ja(),s=a(l);va(s,{get collapsed(){return Pt.sidebarCollapsed},onToggleCollapse:()=>Pt.toggleSidebar(),get onSearchClick(){return u.onSearchClick},get onPrimaryAction(){return u.onPrimaryAction}});var C=o(s,2),U=a(C),E=a(U);{var V=M=>{var oe=Ma(),R=a(oe),b=a(R),g=a(b);{var D=A=>{const L=ae(()=>ve.headerConfig.backNav);var ie=N(),ne=m(ie);{var G=J=>{var j=wa(),H=a(j);ze(H,{name:"arrow-left",size:"lg"}),r(j),$(()=>Oe(j,"href",e(L).href)),t(J,j)},le=J=>{var j=N(),H=m(j);{var te=fe=>{var pe=$a();pe.__click=function(...q){e(L).onclick?.apply(this,q)};var h=a(pe);ze(h,{name:"arrow-left",size:"lg"}),r(pe),t(fe,pe)};p(H,fe=>{e(L).onclick&&fe(te)},!0)}t(J,j)};p(ne,J=>{e(L).href?J(G):J(le,!1)})}t(A,ie)};p(g,A=>{ve.headerConfig.backNav&&A(D)})}var w=o(g,2),i=a(w),c=a(i,!0);r(i);var Y=o(i,2);{var O=A=>{var L=Ca(),ie=a(L,!0);r(L),$(()=>B(ie,ve.headerConfig.subtitle)),t(A,L)};p(Y,A=>{ve.headerConfig.subtitle&&A(O)})}r(w);var K=o(w,2);{var ee=A=>{var L=N(),ie=m(L);nt(ie,()=>ve.headerConfig.actions),t(A,L)};p(K,A=>{ve.headerConfig.actions&&A(ee)})}r(b),r(R),r(oe),$(()=>B(c,ve.headerConfig.title)),t(M,oe)},re=M=>{var oe=N(),R=m(oe);{var b=D=>{var w=N(),i=m(w);nt(i,()=>ve.header),t(D,w)},g=D=>{var w=N(),i=m(w);{var c=Y=>{var O=Na(),K=a(O),ee=a(K);{var A=ie=>{var ne=Pa(),G=a(ne);ze(G,{name:"arrow-left",size:"lg"});var le=o(G,2);{var J=j=>{var H=Sa(),te=a(H,!0);r(H),$(()=>B(te,ve.backNav.label)),t(j,H)};p(le,j=>{ve.backNav.label&&j(J)})}r(ne),$(()=>Oe(ne,"href",ve.backNav.href)),t(ie,ne)},L=ie=>{var ne=N(),G=m(ne);{var le=J=>{var j=Aa();j.__click=function(...pe){ve.backNav.onclick?.apply(this,pe)};var H=a(j);ze(H,{name:"arrow-left",size:"lg"});var te=o(H,2);{var fe=pe=>{var h=za(),q=a(h,!0);r(h),$(()=>B(q,ve.backNav.label)),t(pe,h)};p(te,pe=>{ve.backNav.label&&pe(fe)})}r(j),t(J,j)};p(G,J=>{ve.backNav.onclick&&J(le)},!0)}t(ie,ne)};p(ee,ie=>{ve.backNav.href?ie(A):ie(L,!1)})}r(K),r(O),t(Y,O)};p(i,Y=>{ve.backNav&&Y(c)},!0)}t(D,w)};p(R,D=>{ve.header?D(b):D(g,!1)},!0)}t(M,oe)};p(E,M=>{ve.headerConfig?M(V):M(re,!1)})}var F=o(E,2);nt(F,()=>u.children),r(U),r(C);var ue=o(C,2);{var be=M=>{var oe=Ra(),R=a(oe),b=a(R);{var g=w=>{var i=N(),c=m(i);nt(c,()=>Mt.rightSidebar),t(w,i)},D=w=>{var i=La(),c=m(i);fa(c,{});var Y=o(c,2),O=a(Y),K=o(a(O),2),ee=a(K,!0);r(K),r(O);var A=o(O,2),L=a(A);{var ie=J=>{var j=Ia();ge(4),t(J,j)},ne=J=>{var j=N(),H=m(j);dt(H,17,()=>e(n),te=>te.id,(te,fe)=>{var pe=Ua(),h=a(pe,!0);r(pe),$(q=>{Oe(pe,"href",q),B(h,e(fe).title)},[()=>kr(e(fe),e(fe).author)]),t(te,pe)}),t(J,j)};p(L,J=>{e(n).length===0?J(ie):J(ne,!1)})}r(A),r(Y);var G=o(Y,2);ha(G,{});var le=o(G,2);ka(le,{}),$(J=>B(ee,J),[()=>x()("feed.mediaTypes.articles")]),t(w,i)};p(b,w=>{Mt.rightSidebar?w(g):w(D,!1)})}r(R),r(oe),t(M,oe)};p(ue,M=>{e(I)||M(be)})}r(l),$(()=>Ve(l,1,`flex w-full max-w-full relative ${Pt.sidebarCollapsed?"lg:pl-16":"lg:pl-64"} ${e(I)?"":"xl:pr-80"} transition-all duration-300`)),t(X,l),Je(),y()}ct(["click"]);var Da=d('<img alt="" class="w-6 h-6 rounded"/>'),Oa=d("<!> <span> </span>",1),Ba=d("<!> <span> </span>",1),Ea=d("<!> <span> </span>",1),Va=d('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><!> <span> </span></button></div>'),Ha=d('<nav class="block lg:hidden fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border z-[1000]"><div class="flex justify-around items-center px-2 py-3 safe-bottom svelte-2rf3uy"><a href="/" aria-label="Home"><!></a> <button aria-label="Messages"><!> <!></button> <button aria-label="Notifications"><!> <!></button> <button aria-label="Wallet"><!></button> <button class="flex items-center justify-center p-2 rounded-lg transition-colors" aria-label="Profile"><!></button></div></nav> <!>',1);function Wa(X,u){Ge(u,!0);const T=()=>ht(It,"$page",k),x=()=>ht(Tt,"$t",k),[k,y]=St(),f=ae(()=>T().url.pathname);P.$wallet;const I=nr(P),z=h=>h==="/"?e(f)==="/":e(f).startsWith(h),S=ae(()=>ye.selectedRelay?jt(ye.selectedRelay):null);let n=se(!1),l=se(void 0),s=se(void 0),C=se(null);mt(()=>{const h=P.$currentUser?.pubkey;if(!h){v(C,null);return}P.fetchUser(h).then(q=>{q?.fetchProfile().then(Ce=>{v(C,Ce,!0)})})});const U=ae(()=>e(C)?.displayName||e(C)?.name||"Anonymous"),E=ae(()=>P.$currentUser?.npub);function V(){P.$currentUser?v(n,!e(n)):Ft.open("signup")}function re(){v(n,!1)}function F(){P.$sessions&&(P.$sessions.logout(),re())}function ue(){e(E)&&(gt(`/p/${e(E)}`),re())}function be(){gt("/settings"),re()}function M(){const h=ye.theme;h==="light"?ye.setTheme("dark"):h==="dark"?ye.setTheme("system"):ye.setTheme("light")}function oe(h){if(!P.$currentUser){Ft.open("signup");return}gt(h)}mt(()=>{if(!e(n))return;const h=q=>{e(l)&&!e(l).contains(q.target)&&e(s)&&!e(s).contains(q.target)&&v(n,!1)};return document.addEventListener("click",h),()=>document.removeEventListener("click",h)});var R=Ha(),b=m(R),g=a(b),D=a(g),w=a(D);{var i=h=>{var q=Da();$(()=>Oe(q,"src",e(S).info.icon)),t(h,q)},c=h=>{var q=N(),Ce=m(q);{var Z=Q=>{ze(Q,{name:"relay",size:"lg"})},W=Q=>{ze(Q,{name:"users",size:"lg"})};p(Ce,Q=>{ye.selectedRelay?Q(Z):Q(W,!1)},!0)}t(h,q)};p(w,h=>{ye.selectedRelay&&e(S)?.info?.icon?h(i):h(c,!1)})}r(D);var Y=o(D,2);Y.__click=()=>oe("/messages");var O=a(Y);ze(O,{name:"message",size:"lg"});var K=o(O,2);{var ee=h=>{At(h,{indicator:!0,class:"absolute top-1.5 right-1.5"})};p(K,h=>{Gt.totalUnreadCount>0&&h(ee)})}r(Y);var A=o(Y,2);A.__click=()=>oe("/notifications");var L=a(A);ze(L,{name:"bell",size:"lg"});var ie=o(L,2);{var ne=h=>{At(h,{indicator:!0,class:"absolute top-1.5 right-1.5"})};p(ie,h=>{I.counts.all>0&&h(ne)})}r(A);var G=o(A,2);G.__click=()=>oe("/wallet");var le=a(G);ze(le,{name:"wallet",size:"lg"}),r(G);var J=o(G,2);J.__click=V;var j=a(J);{var H=h=>{var q=N(),Ce=m(q);Ue(Ce,()=>bt.Root,(Z,W)=>{W(Z,{get ndk(){return P},get pubkey(){return P.$currentUser.pubkey},children:(Q,xe)=>{var ke=N(),me=m(ke);Ue(me,()=>bt.Avatar,(Se,he)=>{he(Se,{class:"w-8 h-8 rounded-full"})}),t(Q,ke)},$$slots:{default:!0}})}),t(h,q)},te=h=>{ze(h,{name:"user",size:"lg",class:"text-muted-foreground"})};p(j,h=>{P.$currentUser?h(H):h(te,!1)})}r(J),Nt(J,h=>v(s,h),()=>e(s)),r(g),r(b);var fe=o(b,2);{var pe=h=>{var q=N(),Ce=m(q);sr(Ce,()=>e(n),Z=>{var W=N(),Q=m(W);ir(Q,()=>"div",!1,(xe,ke)=>{ar(xe,()=>({style:"display: contents"}));var me=Va(),Se=a(me);Se.__click=ue;var he=a(Se);Ue(he,()=>bt.Root,(je,We)=>{We(je,{get ndk(){return P},get pubkey(){return P.$currentUser.pubkey},children:(Ze,at)=>{var Qe=N(),Ee=m(Qe);Ue(Ee,()=>bt.Avatar,(Xe,Te)=>{Te(Xe,{class:"w-12 h-12"})}),t(Ze,Qe)},$$slots:{default:!0}})});var Le=o(he,2),Pe=a(Le),we=a(Pe,!0);r(Pe);var He=o(Pe,2),Fe=a(He,!0);r(He),r(Le),r(Se);var Ke=o(Se,4);Ke.__click=M;var lt=a(Ke);{var de=je=>{var We=Oa(),Ze=m(We);ze(Ze,{name:"sun",size:"sm"});var at=o(Ze,2),Qe=a(at,!0);r(at),$(Ee=>B(Qe,Ee),[()=>x()("settings.sections.appearance.themes.light")]),t(je,We)},$e=je=>{var We=N(),Ze=m(We);{var at=Ee=>{var Xe=Ba(),Te=m(Xe);ze(Te,{name:"moon",size:"sm"});var vt=o(Te,2),xt=a(vt,!0);r(vt),$(st=>B(xt,st),[()=>x()("settings.sections.appearance.themes.dark")]),t(Ee,Xe)},Qe=Ee=>{var Xe=Ea(),Te=m(Xe);ze(Te,{name:"monitor",size:"sm"});var vt=o(Te,2),xt=a(vt,!0);r(vt),$(st=>B(xt,st),[()=>x()("settings.sections.appearance.themes.system")]),t(Ee,Xe)};p(Ze,Ee=>{ye.theme==="dark"?Ee(at):Ee(Qe,!1)},!0)}t(je,We)};p(lt,je=>{ye.theme==="light"?je(de):je($e,!1)})}r(Ke);var Re=o(Ke,2);Re.__click=be;var Ye=a(Re);ze(Ye,{name:"settings",size:"sm"});var qe=o(Ye,2),Ae=a(qe,!0);r(qe),r(Re);var Ne=o(Re,4);Ne.__click=F;var Ie=a(Ne);ze(Ie,{name:"logout",size:"sm"});var Me=o(Ie,2),tt=a(Me,!0);r(Me),r(Ne),r(me),Nt(me,je=>v(l,je),()=>e(l)),$((je,We,Ze,at,Qe)=>{or(me,`position: fixed; bottom: ${je??""}px; left: ${We??""}px; z-index: 9999;`),B(we,e(U)),B(Fe,Ze),B(Ae,at),B(tt,Qe)},[()=>window.innerHeight-e(s).getBoundingClientRect().top+8,()=>e(s).getBoundingClientRect().left-224+e(s).getBoundingClientRect().width,()=>x()("profile.editProfile"),()=>x()("navigation.settings"),()=>x()("navigation.logout")]),t(ke,me)}),t(Z,W)}),t(h,q)};p(fe,h=>{e(n)&&e(s)&&P.$currentUser&&h(pe)})}$((h,q,Ce,Z)=>{Ve(D,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${h??""}`),Ve(Y,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${q??""} relative`),Ve(A,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${Ce??""} relative`),Ve(G,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${Z??""}`)},[()=>z("/")?"text-primary":"text-muted-foreground",()=>z("/messages")?"text-primary":"text-muted-foreground",()=>z("/notifications")?"text-primary":"text-muted-foreground",()=>z("/wallet")?"text-primary":"text-muted-foreground"]),t(X,R),Je(),y()}ct(["click"]);var Fa=Ct('<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>'),Ka=d('<button class="fixed bottom-24 right-4 z-[500] bg-primary hover:bg-primary/90 active:scale-95 text-primary-foreground p-4 rounded-full shadow-lg transition-all lg:hidden"><!></button>');function Ya(X,u){Ge(u,!0);const T=()=>ht(It,"$page",x),[x,k]=St(),y=rt(u,"onComposeClick",3,()=>{}),f=rt(u,"onListingClick",3,()=>{}),I=rt(u,"onInviteClick",3,()=>{}),z=rt(u,"onTradeClick",3,()=>{}),S=ae(()=>T().url.pathname),n={"/":{icon:"edit",label:"Compose",action:y()},"/marketplace":{icon:"plus",label:"Create Listing",action:f()},"/agora/invites":{icon:"users",label:"Create Invite",action:I()},"/trades":{icon:"plus",label:"Create Order",action:z()}},l=ae(()=>n[e(S)]),s=ae(()=>e(l)!==void 0);var C=N(),U=m(C);{var E=V=>{var re=Ka();re.__click=function(...M){e(l).action?.apply(this,M)};var F=a(re);{var ue=M=>{var oe=Fa();t(M,oe)},be=M=>{ze(M,{get name(){return e(l).icon},size:"lg"})};p(F,M=>{e(l).icon==="edit"?M(ue):M(be,!1)})}r(re),$(()=>Oe(re,"aria-label",e(l).label||"Floating action button")),t(V,re)};p(U,V=>{e(s)&&e(l)&&V(E)})}t(X,C),Je(),k()}ct(["click"]);var Ga=d('<a class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></a>'),Ja=d('<button class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></button>'),qa=d('<p class="text-sm text-muted-foreground mt-1"> </p>'),Za=d('<div class="border-b border-border bg-background"><div class="px-4 py-3"><div class="flex items-center gap-3"><!> <div class="flex-1"><h1 class="text-xl font-bold text-foreground"> </h1> <!></div> <!></div></div></div>'),Qa=d('<span class="font-medium"> </span>'),Xa=d('<a class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></a>'),eo=d('<span class="font-medium"> </span>'),to=d('<button class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></button>'),ro=d('<div class="border-b border-border bg-background"><div class="px-4 py-3"><!></div></div>'),ao=d('<div class="p-3 border-b border-border bg-background"><!></div>'),oo=d('<div class="bg-background"><div class="flex flex-col min-h-screen"><main class="flex-1 pb-20 bg-background"><!> <!> <!></main> <!> <!></div></div>');function no(X,u){Ge(u,!0);const T=()=>ht(It,"$page",x),[x,k]=St(),y=ae(()=>T().url.pathname),f=ae(()=>wt.mode==="article"||wt.mode==="profile"||wt.mode==="reads"||e(y).startsWith("/note/")||e(y).startsWith("/messages/")||e(y).startsWith("/packs")||e(y).startsWith("/agora/invites"));var I=oo(),z=a(I),S=a(z),n=a(S);{var l=F=>{var ue=Za(),be=a(ue),M=a(be),oe=a(M);{var R=O=>{const K=ae(()=>ve.headerConfig.backNav);var ee=N(),A=m(ee);{var L=ne=>{var G=Ga(),le=a(G);ze(le,{name:"arrow-left",size:"lg"}),r(G),$(()=>Oe(G,"href",e(K).href)),t(ne,G)},ie=ne=>{var G=N(),le=m(G);{var J=j=>{var H=Ja();H.__click=function(...fe){e(K).onclick?.apply(this,fe)};var te=a(H);ze(te,{name:"arrow-left",size:"lg"}),r(H),t(j,H)};p(le,j=>{e(K).onclick&&j(J)},!0)}t(ne,G)};p(A,ne=>{e(K).href?ne(L):ne(ie,!1)})}t(O,ee)};p(oe,O=>{ve.headerConfig.backNav&&O(R)})}var b=o(oe,2),g=a(b),D=a(g,!0);r(g);var w=o(g,2);{var i=O=>{var K=qa(),ee=a(K,!0);r(K),$(()=>B(ee,ve.headerConfig.subtitle)),t(O,K)};p(w,O=>{ve.headerConfig.subtitle&&O(i)})}r(b);var c=o(b,2);{var Y=O=>{var K=N(),ee=m(K);nt(ee,()=>ve.headerConfig.actions),t(O,K)};p(c,O=>{ve.headerConfig.actions&&O(Y)})}r(M),r(be),r(ue),$(()=>B(D,ve.headerConfig.title)),t(F,ue)},s=F=>{var ue=N(),be=m(ue);{var M=R=>{var b=N(),g=m(b);nt(g,()=>ve.header),t(R,b)},oe=R=>{var b=N(),g=m(b);{var D=w=>{var i=ro(),c=a(i),Y=a(c);{var O=ee=>{var A=Xa(),L=a(A);ze(L,{name:"arrow-left",size:"lg"});var ie=o(L,2);{var ne=G=>{var le=Qa(),J=a(le,!0);r(le),$(()=>B(J,ve.backNav.label)),t(G,le)};p(ie,G=>{ve.backNav.label&&G(ne)})}r(A),$(()=>Oe(A,"href",ve.backNav.href)),t(ee,A)},K=ee=>{var A=N(),L=m(A);{var ie=ne=>{var G=to();G.__click=function(...H){ve.backNav.onclick?.apply(this,H)};var le=a(G);ze(le,{name:"arrow-left",size:"lg"});var J=o(le,2);{var j=H=>{var te=eo(),fe=a(te,!0);r(te),$(()=>B(fe,ve.backNav.label)),t(H,te)};p(J,H=>{ve.backNav.label&&H(j)})}r(G),t(ne,G)};p(L,ne=>{ve.backNav.onclick&&ne(ie)},!0)}t(ee,A)};p(Y,ee=>{ve.backNav.href?ee(O):ee(K,!1)})}r(c),r(i),t(w,i)};p(g,w=>{ve.backNav&&w(D)},!0)}t(R,b)};p(be,R=>{ve.header?R(M):R(oe,!1)},!0)}t(F,ue)};p(n,F=>{ve.headerConfig?F(l):F(s,!1)})}var C=o(n,2);{var U=F=>{var ue=ao(),be=a(ue);nt(be,()=>Mt.rightSidebar),r(ue),t(F,ue)};p(C,F=>{Mt.showOnMobile&&Mt.rightSidebar&&!e(f)&&F(U)})}var E=o(C,2);nt(E,()=>u.children),r(S);var V=o(S,2);Wa(V,{});var re=o(V,2);Ya(re,{get onComposeClick(){return u.onComposeClick},get onListingClick(){return u.onListingClick},get onInviteClick(){return u.onInviteClick},get onTradeClick(){return u.onTradeClick}}),r(z),r(I),t(X,I),Je(),k()}ct(["click"]);var so=d("<!> <!>",1);function io(X,u){Ge(u,!0),new rr("(min-width: 768px)");function T(y){gt(`/p/${y.npub}`),u.onClose()}var x=N(),k=m(x);Ue(k,()=>Zt,(y,f)=>{f(y,{get open(){return u.isOpen},onOpenChange:I=>{I||u.onClose()},children:(I,z)=>{var S=N(),n=m(S);Ue(n,()=>Jt,(l,s)=>{s(l,{class:"max-w-md",children:(C,U)=>{var E=so(),V=m(E);Ue(V,()=>Qt,(F,ue)=>{ue(F,{children:(be,M)=>{var oe=N(),R=m(oe);Ue(R,()=>qt,(b,g)=>{g(b,{children:(D,w)=>{ge();var i=Be("Search Users");t(D,i)},$$slots:{default:!0}})}),t(be,oe)},$$slots:{default:!0}})});var re=o(V,2);Pr(re,{get ndk(){return P},onSelect:T,placeholder:"Search by name, NIP-05, or paste npub..."}),t(C,E)},$$slots:{default:!0}})}),t(I,S)},$$slots:{default:!0}})}),t(X,x),Je()}function lo(X,u={}){const T=new hr(X),x=_r(T);let k=se(Kt([])),y=se(0),f=se(!1);async function I(U){if(!U.type.startsWith("image/")){kt.error("Please select an image file");return}try{if(await x.upload(U,{fallbackServer:u.fallbackServer||"https://blossom.primal.net"}),x.result?.url){const E=new Image,V=await new Promise(F=>{E.onload=()=>F({width:E.width,height:E.height}),E.src=URL.createObjectURL(U)}),re=Array.isArray(x.result.sha256)?x.result.sha256[0]:x.result.sha256||"";v(k,[...e(k),{url:x.result.url,mimeType:U.type,hash:re,blurhash:x.result.blurhash,dimensions:V}],!0),v(y,e(k).length-1)}}catch(E){console.error("Upload failed:",E),kt.error("Failed to upload image")}}function z(U){const V=U.target.files;V&&Array.from(V).forEach(re=>I(re))}function S(U){U.preventDefault(),v(f,!0)}function n(){v(f,!1)}async function l(U){U.preventDefault(),v(f,!1);const E=U.dataTransfer?.files;E&&Array.from(E).forEach(V=>I(V))}function s(U){v(k,e(k).filter((E,V)=>V!==U),!0),e(y)>=e(k).length&&v(y,Math.max(0,e(k).length-1),!0)}function C(){v(k,[],!0),v(y,0),v(f,!1)}return{get uploadedImages(){return e(k)},set uploadedImages(U){v(k,U,!0)},get currentImageIndex(){return e(y)},set currentImageIndex(U){v(y,U,!0)},get isDragging(){return e(f)},get uploadStatus(){return x.status},get uploadProgress(){return x.progress},uploadFile:I,handleFileInputChange:z,handleDragOver:S,handleDragLeave:n,handleDrop:l,removeImage:s,reset:C}}var co=d('<div class="flex items-center gap-2"><svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <!></div>'),vo=d('Title <span class="text-red-500">*</span>',1),uo=d('Description <span class="text-red-500">*</span>',1),fo=d("<option> </option>"),po=d("<option> </option>"),go=Ct('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>'),mo=d('<div class="inline-flex items-center gap-1 px-3 py-1 bg-primary/20 text-primary rounded-full text-sm"><span> </span> <button type="button" class="hover:text-primary"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),ho=d('<div class="flex flex-wrap gap-2"></div>'),_o=d('<div class="flex flex-col items-center gap-2"><div class="w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"></div> <span class="text-sm text-muted-foreground"> </span></div>'),bo=d('<svg class="w-10 h-10 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-sm text-muted-foreground">Click to upload or drag and drop</span> <span class="text-xs text-muted-foreground">Multiple images supported</span>',1),xo=d('<div class="relative group"><img class="w-full h-32 object-cover rounded-lg border border-border"/> <button type="button" class="absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),yo=d('<div class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>'),ko=d("<!> <!>",1),wo=d('<!> <div class="space-y-6"><div class="space-y-5"><div><!> <!></div> <div><!> <!></div> <div><!> <!></div> <div><!> <!></div></div> <div class="bg-muted/30 rounded-lg p-5 border border-border"><h3 class="text-lg font-semibold text-foreground mb-4">Pricing</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><!> <!></div> <div><!> <select id="currency" class="mt-2 w-full px-4 py-3 bg-muted border border-border rounded-lg text-foreground focus:outline-none focus:border-primary transition-colors"></select></div> <div><!> <select id="frequency" class="mt-2 w-full px-4 py-3 bg-muted border border-border rounded-lg text-foreground focus:outline-none focus:border-primary transition-colors"><option>One time</option><option>Per hour</option><option>Per day</option><option>Per week</option><option>Per month</option><option>Per year</option></select></div></div></div> <div class="bg-muted/30 rounded-lg p-5 border border-border"><h3 class="text-lg font-semibold text-foreground mb-4">Categories</h3> <div class="space-y-4"><div class="flex gap-2"><select class="flex-1 px-4 py-3 bg-muted border border-border rounded-lg text-foreground focus:outline-none focus:border-primary transition-colors"><option>Select a category</option><!></select> <!> <!></div> <!></div></div> <div class="bg-muted/30 rounded-lg p-5 border border-border"><h3 class="text-lg font-semibold text-foreground mb-4">Images</h3> <div class="space-y-4"><input type="file" accept="image/*" multiple class="hidden"/> <button type="button"><!></button> <!></div></div></div> <!>',1);function $o(X,u){Ge(u,!0);let T=rt(u,"open",15,!1),x=se(!1),k=se(""),y=se(""),f=se(""),I=se(""),z=se(""),S=se("USD"),n=se(void 0),l=se(Kt([])),s=se("");const C=lo(P,{fallbackServer:"https://blossom.primal.net"});let U;const E=["electronics","furniture","clothing","books","services","vehicles","real-estate","jobs","free","wanted"],V=["USD","EUR","GBP","BTC","SATS"];function re(){e(s)&&!e(l).includes(e(s).toLowerCase())&&(v(l,[...e(l),e(s).toLowerCase()],!0),v(s,""))}function F(g){v(l,e(l).filter(D=>D!==g),!0)}async function ue(){if(!e(k).trim()||!e(f).trim()||e(x)){kt.error("Please provide a title and description");return}if(!P.$currentUser){kt.error("Please log in to create a listing");return}try{v(x,!0);const g=new pr(P);if(g.title=e(k).trim(),g.summary=e(y).trim()||void 0,g.content=e(f).trim(),g.location=e(I).trim()||void 0,g.published_at=Math.floor(Date.now()/1e3),g.tags.push(["status","active"]),e(z).trim()&&(g.price={amount:parseFloat(e(z)),currency:e(S),frequency:e(n)&&e(n)!=="once"?e(n):void 0}),e(l).forEach(D=>{g.tags.push(["t",D])}),C.uploadedImages.forEach(D=>{g.tags.push(["image",D.url])}),await g.sign(),await g.publish(),g.publishStatus==="error"){const w=g.publishError?.relayErrors||{},i=Object.entries(w).map(([c,Y])=>`${c}: ${Y}`).join(`
`);kt.error(`Failed to publish:
${i||"Unknown error"}`);return}kt.success("Listing created successfully"),be(),T(!1),u.onClose?.(),gt("/marketplace")}catch(g){console.error("Failed to publish listing:",g),kt.error(`Failed to create listing: ${g instanceof Error?g.message:"Unknown error"}`)}finally{v(x,!1)}}function be(){v(k,""),v(y,""),v(f,""),v(I,""),v(z,""),v(S,"USD"),v(n,void 0),v(l,[],!0),v(s,""),C.reset()}function M(){e(x)||(be(),T(!1),u.onClose?.())}function oe(g){g.key==="Escape"&&!e(x)&&M()}var R=N();Rt("keydown",vr,oe);var b=m(R);Ue(b,()=>Zt,(g,D)=>{D(g,{get open(){return T()},onOpenChange:w=>{T(w),w||M()},children:(w,i)=>{var c=N(),Y=m(c);Ue(Y,()=>Jt,(O,K)=>{K(O,{class:"max-w-4xl max-h-[90vh] overflow-y-auto",children:(ee,A)=>{var L=wo(),ie=m(L);Ue(ie,()=>Qt,(_,_e)=>{_e(_,{children:(ce,ot)=>{var De=co(),et=o(a(De),2);Ue(et,()=>qt,(ut,ft)=>{ft(ut,{children:(Ut,Ot)=>{ge();var Lt=Be("Create Listing");t(Ut,Lt)},$$slots:{default:!0}})}),r(De),t(ce,De)},$$slots:{default:!0}})});var ne=o(ie,2),G=a(ne),le=a(G),J=a(le);it(J,{for:"title",children:(_,_e)=>{ge();var ce=vo();ge(),t(_,ce)},$$slots:{default:!0}});var j=o(J,2);pt(j,{id:"title",type:"text",placeholder:"What are you listing?",maxlength:200,class:"mt-2",get value(){return e(k)},set value(_){v(k,_,!0)}}),r(le);var H=o(le,2),te=a(H);it(te,{for:"summary",children:(_,_e)=>{ge();var ce=Be("Summary");t(_,ce)},$$slots:{default:!0}});var fe=o(te,2);pt(fe,{id:"summary",type:"text",placeholder:"Brief description",maxlength:200,class:"mt-2",get value(){return e(y)},set value(_){v(y,_,!0)}}),r(H);var pe=o(H,2),h=a(pe);it(h,{for:"content",children:(_,_e)=>{ge();var ce=uo();ge(),t(_,ce)},$$slots:{default:!0}});var q=o(h,2);lr(q,{id:"content",placeholder:"Detailed description (Markdown supported)",rows:6,class:"mt-2 resize-none",get value(){return e(f)},set value(_){v(f,_,!0)}}),r(pe);var Ce=o(pe,2),Z=a(Ce);it(Z,{for:"location",children:(_,_e)=>{ge();var ce=Be("Location");t(_,ce)},$$slots:{default:!0}});var W=o(Z,2);pt(W,{id:"location",type:"text",placeholder:"City, State or Country",class:"mt-2",get value(){return e(I)},set value(_){v(I,_,!0)}}),r(Ce),r(G);var Q=o(G,2),xe=o(a(Q),2),ke=a(xe),me=a(ke);it(me,{for:"price-amount",children:(_,_e)=>{ge();var ce=Be("Amount");t(_,ce)},$$slots:{default:!0}});var Se=o(me,2);pt(Se,{id:"price-amount",type:"text",placeholder:"0.00",class:"mt-2",get value(){return e(z)},set value(_){v(z,_,!0)}}),r(ke);var he=o(ke,2),Le=a(he);it(Le,{for:"currency",children:(_,_e)=>{ge();var ce=Be("Currency");t(_,ce)},$$slots:{default:!0}});var Pe=o(Le,2);dt(Pe,21,()=>V,zt,(_,_e)=>{var ce=fo(),ot=a(ce,!0);r(ce);var De={};$(()=>{B(ot,e(_e)),De!==(De=e(_e))&&(ce.value=(ce.__value=e(_e))??"")}),t(_,ce)}),r(Pe),r(he);var we=o(he,2),He=a(we);it(He,{for:"frequency",children:(_,_e)=>{ge();var ce=Be("Frequency");t(_,ce)},$$slots:{default:!0}});var Fe=o(He,2),Ke=a(Fe);Ke.value=(Ke.__value=void 0)??"";var lt=o(Ke);lt.value=lt.__value="hour";var de=o(lt);de.value=de.__value="day";var $e=o(de);$e.value=$e.__value="week";var Re=o($e);Re.value=Re.__value="month";var Ye=o(Re);Ye.value=Ye.__value="year",r(Fe),r(we),r(xe),r(Q);var qe=o(Q,2),Ae=o(a(qe),2),Ne=a(Ae),Ie=a(Ne),Me=a(Ie);Me.value=Me.__value="";var tt=o(Me);dt(tt,17,()=>E,zt,(_,_e)=>{var ce=po(),ot=a(ce,!0);r(ce);var De={};$(et=>{B(ot,et),De!==(De=e(_e))&&(ce.value=(ce.__value=e(_e))??"")},[()=>e(_e).charAt(0).toUpperCase()+e(_e).slice(1)]),t(_,ce)}),r(Ie);var je=o(Ie,2);pt(je,{type:"text",placeholder:"Or type custom",class:"flex-1",onkeydown:_=>{_.key==="Enter"&&(_.preventDefault(),re())},get value(){return e(s)},set value(_){v(s,_,!0)}});var We=o(je,2);_t(We,{type:"button",onclick:re,size:"icon",children:(_,_e)=>{var ce=go();t(_,ce)},$$slots:{default:!0}}),r(Ne);var Ze=o(Ne,2);{var at=_=>{var _e=ho();dt(_e,21,()=>e(l),zt,(ce,ot)=>{var De=mo(),et=a(De),ut=a(et,!0);r(et);var ft=o(et,2);ft.__click=()=>F(e(ot)),r(De),$(()=>B(ut,e(ot))),t(ce,De)}),r(_e),t(_,_e)};p(Ze,_=>{e(l).length>0&&_(at)})}r(Ae),r(qe);var Qe=o(qe,2),Ee=o(a(Qe),2),Xe=a(Ee);Xe.__change=function(..._){C.handleFileInputChange?.apply(this,_)},Nt(Xe,_=>U=_,()=>U);var Te=o(Xe,2);Te.__click=()=>U?.click();var vt=a(Te);{var xt=_=>{var _e=_o(),ce=o(a(_e),2),ot=a(ce);r(ce),r(_e),$(()=>B(ot,`${(C.uploadProgress?.percentage||0)??""}%`)),t(_,_e)},st=_=>{var _e=bo();ge(4),t(_,_e)};p(vt,_=>{C.uploadStatus==="uploading"?_(xt):_(st,!1)})}r(Te);var yt=o(Te,2);{var Dt=_=>{var _e=yo();dt(_e,21,()=>C.uploadedImages,zt,(ce,ot,De)=>{var et=xo(),ut=a(et);Oe(ut,"alt",`Listing image ${De+1}`);var ft=o(ut,2);ft.__click=()=>C.removeImage(De),r(et),$(()=>Oe(ut,"src",e(ot).url)),t(ce,et)}),r(_e),t(_,_e)};p(yt,_=>{C.uploadedImages.length>0&&_(Dt)})}r(Ee),r(Qe),r(ne);var cr=o(ne,2);Ue(cr,()=>dr,(_,_e)=>{_e(_,{class:"flex gap-3 sm:space-x-0",children:(ce,ot)=>{var De=ko(),et=m(De);_t(et,{variant:"outline",onclick:M,get disabled(){return e(x)},children:(ft,Ut)=>{ge();var Ot=Be("Cancel");t(ft,Ot)},$$slots:{default:!0}});var ut=o(et,2);{let ft=ae(()=>!e(k).trim()||!e(f).trim()||e(x));_t(ut,{onclick:ue,get disabled(){return e(ft)},children:(Ut,Ot)=>{ge();var Lt=Be();$(()=>B(Lt,e(x)?"Publishing...":"Publish Listing")),t(Ut,Lt)},$$slots:{default:!0}})}t(ce,De)},$$slots:{default:!0}})}),$(()=>{Te.disabled=C.uploadStatus==="uploading",Ve(Te,1,`w-full h-32 rounded-lg border-2 border-dashed transition-colors flex flex-col items-center justify-center gap-2 ${C.isDragging?"border-primary bg-muted/40":"border-border hover:border-primary bg-muted/20 hover:bg-muted/40"}`)}),Vt(Pe,()=>e(S),_=>v(S,_)),Vt(Fe,()=>e(n),_=>v(n,_)),Vt(Ie,()=>e(s),_=>v(s,_)),Rt("dragover",Te,function(..._){C.handleDragOver?.apply(this,_)}),Rt("dragleave",Te,function(..._){C.handleDragLeave?.apply(this,_)}),Rt("drop",Te,function(..._){C.handleDrop?.apply(this,_)}),t(ee,L)},$$slots:{default:!0}})}),t(w,c)},$$slots:{default:!0}})}),t(X,R),Je()}ct(["click","change"]);var Co=d("<!> <!>",1),Mo=d('<img src="/logo-icon.svg" alt="Agora" class="w-6 h-6 flex-shrink-0"/> <span class="text-sm text-muted-foreground flex-1">Select Agora...</span>',1),So=d('<!> <span class="text-sm text-muted-foreground flex-1"> </span>',1),Po=d('<img src="/logo-icon.svg" alt="Agora" class="w-6 h-6 flex-shrink-0"/> <span class="text-sm text-muted-foreground flex-1"> </span>',1),zo=d('<p class="text-sm text-muted-foreground text-center py-4">No Agora relays configured</p>'),Ao=d('<div class="text-xs text-muted-foreground truncate"> </div>'),No=d('<button type="button" class="w-full flex items-center gap-3 px-3 py-2.5 hover:bg-muted cursor-pointer transition-colors text-left"><input type="checkbox" class="w-4 h-4 text-primary border rounded focus:ring-orange-500 pointer-events-none"/> <!> <div class="flex-1 min-w-0"><div class="flex items-center gap-1.5"><div class="text-sm font-medium text-foreground truncate"> </div> <span class="flex-shrink-0 px-1.5 py-0.5 text-[10px] font-semibold bg-primary/20 text-primary rounded uppercase tracking-wide">Agora</span></div> <!></div></button>'),Io=d('<div class="absolute z-[60] mt-1 w-full bg-popover border border-border rounded-xl shadow-lg max-h-64 overflow-y-auto"><!></div>'),Uo=d('<p class="mt-1 text-xs text-muted-foreground"> </p>'),Lo=Ct(`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Recipient's Name`,1),Ro=Ct('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> Include Cashu Token (sats)',1),jo=d('<div class="space-y-4 border-l-4 border-primary pl-4"><div><!> <!></div> <div><!> <!> <p class="mt-1 text-xs text-muted-foreground">Add sats to help them get started on Nostr</p></div></div>'),To=d('<div class="animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"></div> Generating Invite...',1),Do=d('<div><!> <!></div> <div class="relative"><label class="block text-sm font-medium text-muted-foreground mb-2">Invite to Agora</label> <button type="button" class="w-full px-4 py-2.5 text-left rounded-lg bg-muted/50 text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3 group"><!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!> <!></div> <div><!> <!> <p class="mt-1 text-xs text-muted-foreground">How many people can use this invite (1-500)</p></div> <div class="flex items-center space-x-3"><input type="checkbox" id="personalize" class="w-5 h-5 text-primary border rounded focus:ring-orange-500"/> <label for="personalize" class="text-sm font-medium text-muted-foreground cursor-pointer">Personalize this invite</label></div> <!> <!>',1),Oo=Ct('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Copied!',1),Bo=Ct('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Copy',1),Eo=Ct('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> Share',1),Vo=d("<!> <!>",1),Ho=d('<div class="space-y-6"><div class="text-center py-8"><div class="w-16 h-16 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h3 class="text-lg font-semibold text-foreground mb-2">Invite Created!</h3> <p class="text-sm text-muted-foreground"> </p></div> <div class="bg-muted rounded-xl p-4 space-y-3"><div class="flex items-center space-x-2"><!> <!></div> <!></div> <!></div>'),Wo=d('<!> <div class="space-y-6"><!></div>',1);function Fo(X,u){Ge(u,!0);let T=rt(u,"isOpen",15);const x=`Welcome to Agora! ðŸŽ‰

I'm inviting you to join Agora, a new kind of social network where you own your identity and content. No algorithms, no ads, just authentic connections.

Looking forward to connecting with you on the open social web!`;let k=se(x),y=se(!1),f=se(""),I=se(""),z=se(10),S=se(""),n=se(!1),l=se(!1),s=se(Kt([])),C=se(!1);const U=ae(()=>ye.relays.filter(g=>g.enabled&&g.write&&Wt(g.url)));mt(()=>{T()&&ye.selectedRelay&&e(s).length===0&&Wt(ye.selectedRelay)&&e(U).some(D=>D.url===ye.selectedRelay)&&v(s,[ye.selectedRelay],!0)});function E(g){e(s).includes(g)?v(s,e(s).filter(D=>D!==g),!0):v(s,[...e(s),g],!0)}const V=ae(()=>e(s).length===0?null:e(s).length===1?{url:e(s)[0],info:jt(e(s)[0])}:null),re=ae(()=>e(s).length===0?"Select Agora...":e(s).length===1?jt(e(s)[0]).info?.name||e(s)[0].replace("wss://","").replace("ws://",""):`${e(s).length} Agoras selected`);async function F(){if(!P.$currentUser){console.error("No user logged in");return}if(e(s).length===0){alert("Please select at least one Agora to publish the invite to.");return}v(n,!0);try{const g=e(y)?Ir():"",D=[];for(let L=0;L<e(z);L++)D.push(Ur());const w={welcomeMessage:e(k),recipientName:e(y)?e(f):void 0,cashuToken:e(y)&&e(I)?`cashu:${e(I)}`:void 0,createdAt:Date.now(),inviter:P.$currentUser.pubkey},i=e(y)?await Lr(JSON.stringify(w),g):JSON.stringify(w),c=new gr(P);c.kind=513,c.content=i,c.tags=[...D.map(L=>["code",L])],c.dTag=Rr(),c.isProtected=!0,c.isProtected=!0,console.log("Publishing invite event to selected Agoras...",c.id,e(s));const Y=new Set;for(const L of e(s)){const ie=P.pool.getRelay(L,!0);ie&&Y.add(ie)}await c.sign();const O=new mr(Y,P);try{await c.publish(O)}catch{console.log("going with the auth hack"),await c.publish(O)}const K=c.dTag,ee=e(y)?`${K}${g}`:K,A=`${window.location.origin}/i/${ee}`;v(S,A),console.log("Invite created:",A)}catch(g){console.error("Failed to generate invite:",g),alert("Failed to generate invite. Check console for details.")}finally{v(n,!1)}}async function ue(){try{await navigator.clipboard.writeText(e(S)),v(l,!0),setTimeout(()=>v(l,!1),2e3)}catch(g){console.error("Failed to copy:",g)}}async function be(){if(!navigator.share){console.log("Web Share API not supported, falling back to copy"),await ue();return}try{await navigator.share({title:"Join Agora",text:e(y)&&e(f)?`${e(f)}, you're invited to join Agora!`:"You're invited to join Agora, a new kind of social network!",url:e(S)})}catch(g){g.name!=="AbortError"&&console.error("Failed to share:",g)}}function M(){v(k,x),v(y,!1),v(f,""),v(I,""),v(z,10),v(S,""),v(s,[],!0),v(C,!1),u.onClose()}function oe(){v(C,!1)}var R=N(),b=m(R);Ue(b,()=>Zt,(g,D)=>{D(g,{get open(){return T()},onOpenChange:w=>{T(w),w||M()},children:(w,i)=>{var c=N(),Y=m(c);Ue(Y,()=>Jt,(O,K)=>{K(O,{class:"max-w-lg max-h-[90vh] overflow-y-auto",children:(ee,A)=>{var L=Wo(),ie=m(L);Ue(ie,()=>Qt,(j,H)=>{H(j,{children:(te,fe)=>{var pe=Co(),h=m(pe);Ue(h,()=>qt,(Ce,Z)=>{Z(Ce,{children:(W,Q)=>{ge();var xe=Be("Create an Invite");t(W,xe)},$$slots:{default:!0}})});var q=o(h,2);Ue(q,()=>zr,(Ce,Z)=>{Z(Ce,{children:(W,Q)=>{ge();var xe=Be("Invite someone to join Agora with a personal message");t(W,xe)},$$slots:{default:!0}})}),t(te,pe)},$$slots:{default:!0}})});var ne=o(ie,2),G=a(ne);{var le=j=>{var H=Do(),te=m(H),fe=a(te);it(fe,{for:"welcome-message",children:(de,$e)=>{ge();var Re=Be("Welcome Message");t(de,Re)},$$slots:{default:!0}});var pe=o(fe,2);lr(pe,{id:"welcome-message",rows:6,placeholder:"Write a welcome message...",class:"mt-2 resize-none",get value(){return e(k)},set value(de){v(k,de,!0)}}),r(te);var h=o(te,2),q=o(a(h),2);q.__click=()=>v(C,!e(C));var Ce=a(q);{var Z=de=>{var $e=Mo();ge(2),t(de,$e)},W=de=>{var $e=N(),Re=m($e);{var Ye=Ae=>{var Ne=So(),Ie=m(Ne);er(Ie,{get relayUrl(){return e(V).url},size:"lg"});var Me=o(Ie,2),tt=a(Me,!0);r(Me),$(()=>B(tt,e(re))),t(Ae,Ne)},qe=Ae=>{var Ne=Po(),Ie=o(m(Ne),2),Me=a(Ie);r(Ie),$(()=>B(Me,`${e(s).length??""} Agoras selected`)),t(Ae,Ne)};p(Re,Ae=>{e(s).length===1&&e(V)?Ae(Ye):Ae(qe,!1)},!0)}t(de,$e)};p(Ce,de=>{e(s).length===0?de(Z):de(W,!1)})}var Q=o(Ce,2);r(q);var xe=o(q,2);{var ke=de=>{var $e=Io(),Re=a($e);{var Ye=Ae=>{var Ne=zo();t(Ae,Ne)},qe=Ae=>{var Ne=N(),Ie=m(Ne);dt(Ie,17,()=>e(U),Me=>Me.url,(Me,tt)=>{const je=ae(()=>jt(e(tt).url));var We=No();We.__click=()=>{E(e(tt).url)};var Ze=a(We);Xt(Ze);var at=o(Ze,2);er(at,{get relayUrl(){return e(tt).url},size:"md"});var Qe=o(at,2),Ee=a(Qe),Xe=a(Ee),Te=a(Xe,!0);r(Xe),ge(2),r(Ee);var vt=o(Ee,2);{var xt=st=>{var yt=Ao(),Dt=a(yt,!0);r(yt),$(()=>B(Dt,e(je).info.description)),t(st,yt)};p(vt,st=>{e(je).info?.description&&st(xt)})}r(Qe),r(We),$((st,yt)=>{yr(Ze,st),B(Te,yt)},[()=>e(s).includes(e(tt).url),()=>e(je).info?.name||e(tt).url.replace("wss://","").replace("ws://","")]),t(Me,We)}),t(Ae,Ne)};p(Re,Ae=>{e(U).length===0?Ae(Ye):Ae(qe,!1)})}r($e),Ar($e,(Ae,Ne)=>Cr?.(Ae,Ne),()=>oe),t(de,$e)};p(xe,de=>{e(C)&&de(ke)})}var me=o(xe,2);{var Se=de=>{var $e=Uo(),Re=a($e);r($e),$(()=>B(Re,`${e(s).length??""} Agoras selected`)),t(de,$e)};p(me,de=>{e(s).length>1&&de(Se)})}r(h);var he=o(h,2),Le=a(he);it(Le,{for:"max-uses",children:(de,$e)=>{ge();var Re=Be("Maximum Uses");t(de,Re)},$$slots:{default:!0}});var Pe=o(Le,2);pt(Pe,{id:"max-uses",type:"number",min:"1",max:"500",class:"mt-2",get value(){return e(z)},set value(de){v(z,de,!0)}}),ge(2),r(he);var we=o(he,2),He=a(we);Xt(He),ge(2),r(we);var Fe=o(we,2);{var Ke=de=>{var $e=jo(),Re=a($e),Ye=a(Re);it(Ye,{for:"recipient-name",class:"flex items-center gap-2",children:(Me,tt)=>{var je=Lo();ge(),t(Me,je)},$$slots:{default:!0}});var qe=o(Ye,2);pt(qe,{id:"recipient-name",type:"text",placeholder:"John Doe",class:"mt-2",get value(){return e(f)},set value(Me){v(f,Me,!0)}}),r(Re);var Ae=o(Re,2),Ne=a(Ae);it(Ne,{for:"cashu-amount",class:"flex items-center gap-2",children:(Me,tt)=>{var je=Ro();ge(),t(Me,je)},$$slots:{default:!0}});var Ie=o(Ne,2);pt(Ie,{id:"cashu-amount",type:"number",placeholder:"Amount in sats (optional)",class:"mt-2",get value(){return e(I)},set value(Me){v(I,Me,!0)}}),ge(2),r(Ae),r($e),t(de,$e)};p(Fe,de=>{e(y)&&de(Ke)})}var lt=o(Fe,2);{let de=ae(()=>e(n)||!e(k).trim()||e(s).length===0);_t(lt,{onclick:F,get disabled(){return e(de)},class:"w-full",children:($e,Re)=>{var Ye=N(),qe=m(Ye);{var Ae=Ie=>{var Me=To();ge(),t(Ie,Me)},Ne=Ie=>{var Me=Be("Generate Invite Link");t(Ie,Me)};p(qe,Ie=>{e(n)?Ie(Ae):Ie(Ne,!1)})}t($e,Ye)},$$slots:{default:!0}})}$(()=>Ve(Q,0,`w-4 h-4 text-muted-foreground transition-transform flex-shrink-0 ${e(C)?"rotate-180":""}`)),Nr(He,()=>e(y),de=>v(y,de)),t(j,H)},J=j=>{var H=Ho(),te=a(H),fe=o(a(te),4),pe=a(fe,!0);r(fe),r(te);var h=o(te,2),q=a(h),Ce=a(q);pt(Ce,{type:"text",get value(){return e(S)},readonly:!0,class:"flex-1 bg-transparent"});var Z=o(Ce,2);_t(Z,{onclick:ue,size:"sm",children:(xe,ke)=>{var me=N(),Se=m(me);{var he=Pe=>{var we=Oo();ge(),t(Pe,we)},Le=Pe=>{var we=Bo();ge(),t(Pe,we)};p(Se,Pe=>{e(l)?Pe(he):Pe(Le,!1)})}t(xe,me)},$$slots:{default:!0}}),r(q);var W=o(q,2);_t(W,{onclick:be,variant:"outline",class:"w-full",children:(xe,ke)=>{var me=Eo();ge(),t(xe,me)},$$slots:{default:!0}}),r(h);var Q=o(h,2);Ue(Q,()=>dr,(xe,ke)=>{ke(xe,{class:"flex gap-3 sm:space-x-0",children:(me,Se)=>{var he=Vo(),Le=m(he);_t(Le,{variant:"outline",onclick:()=>v(S,""),class:"flex-1",children:(we,He)=>{ge();var Fe=Be("Create Another");t(we,Fe)},$$slots:{default:!0}});var Pe=o(Le,2);_t(Pe,{onclick:M,class:"flex-1",children:(we,He)=>{ge();var Fe=Be("Done");t(we,Fe)},$$slots:{default:!0}}),t(me,he)},$$slots:{default:!0}})}),r(H),$(()=>B(pe,e(y)&&e(f)?`Your personalized invite for ${e(f)} is ready`:"Your invite link is ready to share")),t(j,H)};p(G,j=>{e(S)?j(J,!1):j(le)})}r(ne),t(ee,L)},$$slots:{default:!0}})}),t(w,c)},$$slots:{default:!0}})}),t(X,R),Je()}ct(["click"]);var Ko=d('<div class="bg-background"><!>  <!> <!> <!> <!> <!></div>');function Yo(X,u){Ge(u,!0),ur("ndk",P);const T=new rr("(min-width: 1024px)");let x=se(!1),k=se(!1),y=se(!1),f=se(!1),I=se(!1);const z=()=>{v(x,!0)},S=()=>{v(k,!0)},n=()=>{v(y,!0)},l=()=>{v(f,!0)},s=()=>{v(I,!0)},C=()=>{const b=window.location.pathname;b==="/marketplace"?n():b==="/trades"?s():b==="/agora/invites"?l():S()};mt(()=>{P.$currentUser||Gt.stop()}),mt(()=>(P.$currentUser?Ht.start():Ht.stop(),()=>{Ht.stop()}));var U=Ko(),E=a(U);{var V=b=>{Ta(b,{onSearchClick:z,onPrimaryAction:C,children:(g,D)=>{var w=N(),i=m(w);nt(i,()=>u.children),t(g,w)},$$slots:{default:!0}})},re=b=>{no(b,{onComposeClick:S,onListingClick:n,onInviteClick:l,onTradeClick:s,children:(g,D)=>{var w=N(),i=m(w);nt(i,()=>u.children),t(g,w)},$$slots:{default:!0}})};p(E,b=>{T.current?b(V):b(re,!1)})}var F=o(E,2);io(F,{get isOpen(){return e(x)},onClose:()=>v(x,!1)});var ue=o(F,2);br(ue,{get open(){return e(k)},set open(b){v(k,b,!0)}});var be=o(ue,2);$o(be,{get open(){return e(y)},set open(b){v(y,b,!0)}});var M=o(be,2);Fo(M,{onClose:()=>v(f,!1),get isOpen(){return e(f)},set isOpen(b){v(f,b,!0)}});var oe=o(M,2);{var R=b=>{jr(b,{onClose:()=>v(I,!1)})};p(oe,b=>{e(I)&&b(R)})}r(U),t(X,U),Je()}function Tn(X,u){Yo(X,{children:(T,x)=>{var k=N(),y=m(k);nt(y,()=>u.children),t(T,k)},$$slots:{default:!0}})}export{Tn as component};
