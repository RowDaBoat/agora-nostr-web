import{z as jt,d as Pe,f as h,a as n,s as me,c as U,t as Ce,b as xe,j as Ke}from"../chunks/CvdcXPsy.js";import{k as Et,a6 as zt,bq as Ot,bc as Rt,a8 as Bt,aa as Ht,br as Yt,b7 as yt,ai as Kt,a3 as Wt,A as He,p as ie,e as le,c as _,r as m,d as y,g as t,t as S,h as M,f as O,n as oe,s as B,a as p,u as rt,aA as Se,aK as Ft,az as Vt,b as Xt,aB as st,ay as bt}from"../chunks/-h67YDCL.js";import{_ as Xe,i as E}from"../chunks/DG6c9x1x.js";import{s as We}from"../chunks/0JHOh1sT.js";import{n as Je,g as qt,h as Ut,P as Ee,b as Zt,s as Ge,Q as Jt,R as Gt}from"../chunks/CAJmB2zv.js";import{r as qe,i as Qt,g as er,a as tr}from"../chunks/CIoNh8li.js";import{e as Fe,i as Ct}from"../chunks/DBJvd_ZN.js";import{h as rr}from"../chunks/C76usD2t.js";import{s as se,f as pe,a as de,g as or,b as ar}from"../chunks/vjiKTA8K.js";import{t as _t}from"../chunks/DqdFoxb9.js";import{c as I}from"../chunks/C52XBfTo.js";import{g as nr}from"../chunks/D1jhUNbu.js";import{l as Me}from"../chunks/CaPeghD6.js";import{D as dt,R as ut,a as et,d as sr,f as ir,g as lr,h as cr}from"../chunks/y2uKFtaO.js";import{B as Ie,I as dr}from"../chunks/B3t7n0XN.js";import{D as tt}from"../chunks/BFIKOW_n.js";import{a as lt,D as Pt}from"../chunks/BeHDsRkZ.js";import{p as J}from"../chunks/6dG0wjw8.js";import{a as Te,c as vt}from"../chunks/C5Vun1ay.js";import{P as ur,a as vr,U as fr,b as mr}from"../chunks/rYevLN4C.js";import{a as hr,c as Ve,U as it}from"../chunks/Dk4THxss.js";import{E as Re}from"../chunks/sNEEs8rM.js";import{t as gr}from"../chunks/0JNfDbnS.js";import{b as pr}from"../chunks/ByH5JKyU.js";import{P as br}from"../chunks/Ce4Vc0Tb.js";const _r=()=>performance.now(),$e={tick:s=>requestAnimationFrame(s),now:()=>_r(),tasks:new Set};function At(){const s=$e.now();$e.tasks.forEach(e=>{e.c(s)||($e.tasks.delete(e),e.f())}),$e.tasks.size!==0&&$e.tick(At)}function kr(s){let e;return $e.tasks.size===0&&$e.tick(At),{promise:new Promise(r=>{$e.tasks.add(e={c:s,f:r})}),abort(){$e.tasks.delete(e)}}}function Qe(s,e){yt(()=>{s.dispatchEvent(new CustomEvent(e))})}function xr(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const e=s.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function kt(s){const e={},r=s.split(";");for(const o of r){const[l,i]=o.split(":");if(!l||i===void 0)break;const a=xr(l.trim());e[a]=i.trim()}return e}const wr=s=>s;function ft(s,e,r,o){var l=(s&Yt)!==0,i="both",a,c=e.inert,k=e.style.overflow,v,g;function P(){return yt(()=>a??=r()(e,o?.()??{},{direction:i}))}var f={is_global:l,in(){e.inert=c,Qe(e,"introstart"),v=ct(e,P(),g,1,()=>{Qe(e,"introend"),v?.abort(),v=a=void 0,e.style.overflow=k})},out(w){e.inert=!0,Qe(e,"outrostart"),g=ct(e,P(),v,0,()=>{Qe(e,"outroend"),w?.()})},stop:()=>{v?.abort(),g?.abort()}},C=Et;if((C.transitions??=[]).push(f),jt){var b=l;if(!b){for(var d=C.parent;d&&(d.f&zt)!==0;)for(;(d=d.parent)&&(d.f&Ot)===0;);b=!d||(d.f&Rt)!==0}b&&Bt(()=>{Ht(()=>f.in())})}}function ct(s,e,r,o,l){var i=o===1;if(Kt(e)){var a,c=!1;return Wt(()=>{if(!c){var w=e({direction:i?"in":"out"});a=ct(s,w,r,o,l)}}),{abort:()=>{c=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r?.deactivate(),!e?.duration)return l(),{abort:He,deactivate:He,reset:He,t:()=>o};const{delay:k=0,css:v,tick:g,easing:P=wr}=e;var f=[];if(i&&r===void 0&&(g&&g(0,1),v)){var C=kt(v(0,1));f.push(C,C)}var b=()=>1-o,d=s.animate(f,{duration:k,fill:"forwards"});return d.onfinish=()=>{d.cancel();var w=r?.t()??1-o;r?.abort();var x=o-w,A=e.duration*Math.abs(x),L=[];if(A>0){var X=!1;if(v)for(var N=Math.ceil(A/16.666666666666668),$=0;$<=N;$+=1){var V=w+x*P($/N),G=kt(v(V,1-V));L.push(G),X||=G.overflow==="hidden"}X&&(s.style.overflow="hidden"),b=()=>{var z=d.currentTime;return w+x*P(z/A)},g&&kr(()=>{if(d.playState!=="running")return!1;var z=b();return g(z,1-z),!0})}d=s.animate(L,{duration:A,fill:"forwards"}),d.onfinish=()=>{b=()=>o,g?.(o,1-o),l()}},{abort:()=>{d&&(d.cancel(),d.effect=null,d.onfinish=He)},deactivate:()=>{l=He},reset:()=>{o===0&&g?.(1,0)},t:()=>b()}}const yr=!1,hn=Object.freeze(Object.defineProperty({__proto__:null,ssr:yr},Symbol.toStringTag,{value:"Module"}));qe("en",()=>Xe(()=>import("../chunks/D8fVgioR.js"),[],import.meta.url));qe("es",()=>Xe(()=>import("../chunks/De25zdAk.js"),[],import.meta.url));qe("fa",()=>Xe(()=>import("../chunks/BmxQu54h.js"),[],import.meta.url));qe("km",()=>Xe(()=>import("../chunks/22YRxeh6.js"),[],import.meta.url));qe("sn",()=>Xe(()=>import("../chunks/CN3xi9pn.js"),[],import.meta.url));function Cr(s){Qt({fallbackLocale:"en",initialLocale:s||er()})}var Pr=h('<div><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> <span class="text-sm font-medium"> </span> <button class="ml-2 hover:opacity-70 transition-opacity" aria-label="Dismiss"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ar=h('<div class="fixed top-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none"></div>');function Mr(s,e){ie(e,!0);function r(i){switch(i){case"success":return"bg-green-600 border-green-500";case"error":return"bg-red-600 border-red-500";case"info":default:return"bg-blue-600 border-blue-500"}}function o(i){switch(i){case"success":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />';case"error":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />';case"info":default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />'}}var l=Ar();Fe(l,21,()=>_t.messages,i=>i.id,(i,a)=>{var c=Pr(),k=_(c),v=_(k);rr(v,()=>o(t(a).type),!0),m(k);var g=y(k,2),P=_(g,!0);m(g);var f=y(g,2);f.__click=()=>_t.dismiss(t(a).id),m(c),S(C=>{se(c,1,`pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg text-foreground animate-in slide-in-from-top duration-300 ${C??""}`),me(P,t(a).message)},[()=>r(t(a).type)]),n(i,c)}),m(l),n(s,l),le()}Pe(["click"]);var Ir=h("<!> <!>",1),$r=xe('Start Your Journey <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>',1),Sr=h('Already have a Nostr account? <span class="font-semibold underline ml-1">Sign in here</span>',1),Nr=h('<div class="relative"><div class="absolute inset-x-0 -mx-6 -mt-6 h-32 bg-primary rounded-t-lg opacity-90 hidden md:block"></div> <div class="relative md:pt-16"><!> <div class="space-y-4 mb-8 mt-6"><div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Own Your Voice</h3> <p class="text-sm text-muted-foreground">No censorship. No gatekeepers. Your content, your control, forever.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Earn From Your Stories</h3> <p class="text-sm text-muted-foreground">Get paid instantly in Bitcoin for valuable content. No banks, no fees.</p></div></div> <div class="flex items-start gap-4"><div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <div><h3 class="font-semibold mb-1 text-foreground">Connect With Your Community</h3> <p class="text-sm text-muted-foreground">Trade, share, and build with people who understand your journey.</p></div></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Tr=h("<!> <!>",1),Dr=h('<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm"> </div>'),Lr=xe('<svg class="w-5 h-5 animate-spin ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>'),jr=h('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Browser Extension (NIP-07)</div> <div class="text-sm text-muted-foreground">Use Alby, nos2x, or similar</div></div> <!>',1),Er=h('<svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> <div class="flex-1 text-left"><div class="font-semibold">Private Key</div> <div class="text-sm text-muted-foreground">Login with your nsec or hex key</div></div>',1),zr=h('<span class="font-semibold underline">Create a new account</span>'),Or=h(`<!> <!> <div class="relative my-6"><div class="absolute inset-0 flex items-center"><span class="w-full border-t border-border"></span></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-background px-2 text-muted-foreground">Don't have an account?</span></div></div> <!>`,1),Rr=xe('<svg class="w-4 h-4 animate-spin mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Logging in...',1),Br=xe('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> Login',1),Hr=h('<div class="space-y-4"><div class="p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-400 text-sm flex gap-2"><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div>Enter your private key (nsec or hex format). This will be stored locally in your browser.</div></div> <!> <div class="flex gap-2"><!> <!></div></div>'),Yr=h('<!> <div class="space-y-3 pt-4"><!> <!></div>',1);function Kr(s,e){ie(e,!0);let r=B(!1),o=B(null),l=B(""),i=B("");async function a(){if(!window.nostr){p(i,"No Nostr extension found. Please install Alby or nos2x.");return}if(!Je.$sessions){p(i,"Sessions not available");return}try{p(r,!0),p(i,"");const f=new qt;await Je.$sessions.login(f),Me.close()}catch(f){p(i,f instanceof Error?f.message:"Failed to login",!0)}finally{p(r,!1)}}async function c(){if(!t(l).trim()){p(i,"Please enter your nsec");return}if(!Je.$sessions){p(i,"Sessions not available");return}try{p(r,!0),p(i,"");const f=new Ut(t(l).trim());await Je.$sessions.login(f),Me.close(),p(l,"")}catch(f){p(i,f instanceof Error?f.message:"Invalid nsec",!0)}finally{p(r,!1)}}function k(){Me.close(),p(o,null),p(l,""),p(i,"")}function v(){k(),nr("/onboarding")}var g=U(),P=M(g);I(P,()=>ut,(f,C)=>{C(f,{get open(){return Me.show},onOpenChange:b=>{b||Me.close()},children:(b,d)=>{var w=U(),x=M(w);{let A=O(()=>Me.state==="signup"?"max-w-lg":"max-w-md");I(x,()=>dt,(L,X)=>{X(L,{get class(){return t(A)},children:(N,$)=>{var V=U(),G=M(V);{var z=R=>{var Q=Nr(),H=y(_(Q),2),Z=_(H);I(Z,()=>tt,(q,re)=>{re(q,{class:"md:text-center",children:(u,j)=>{var W=Ir(),D=M(W);I(D,()=>et,(K,fe)=>{fe(K,{class:"text-3xl !font-black font-serif",children:(F,ue)=>{oe();var _e=Ce("Your Voice Matters");n(F,_e)},$$slots:{default:!0}})});var Y=y(D,2);I(Y,()=>lt,(K,fe)=>{fe(K,{class:"text-lg",children:(F,ue)=>{oe();var _e=Ce("Join a global community where every story counts");n(F,_e)},$$slots:{default:!0}})}),n(u,W)},$$slots:{default:!0}})});var ee=y(Z,4),te=_(ee);Ie(te,{onclick:v,class:"w-full py-6 text-lg bg-primary hover:opacity-90",children:(q,re)=>{oe();var u=$r();oe(),n(q,u)},$$slots:{default:!0}});var ae=y(te,2);Ie(ae,{variant:"ghost",onclick:()=>Me.state="login",class:"w-full",children:(q,re)=>{oe();var u=Sr();oe(),n(q,u)},$$slots:{default:!0}}),m(ee),m(H),m(Q),n(R,Q)},T=R=>{var Q=Yr(),H=M(Q);I(H,()=>tt,(u,j)=>{j(u,{children:(W,D)=>{var Y=Tr(),K=M(Y);I(K,()=>et,(F,ue)=>{ue(F,{children:(_e,he)=>{oe();var we=Ce("Welcome Back");n(_e,we)},$$slots:{default:!0}})});var fe=y(K,2);I(fe,()=>lt,(F,ue)=>{ue(F,{children:(_e,he)=>{oe();var we=Ce("Sign in with your existing Nostr account");n(_e,we)},$$slots:{default:!0}})}),n(W,Y)},$$slots:{default:!0}})});var Z=y(H,2),ee=_(Z);{var te=u=>{var j=Dr(),W=_(j,!0);m(j),S(()=>me(W,t(i))),n(u,j)};E(ee,u=>{t(i)&&u(te)})}var ae=y(ee,2);{var q=u=>{var j=Or(),W=M(j);Ie(W,{variant:"outline",onclick:()=>{p(o,"nip07"),a()},get disabled(){return t(r)},class:"w-full p-4 h-auto justify-start",children:(K,fe)=>{var F=jr(),ue=y(M(F),4);{var _e=he=>{var we=Lr();n(he,we)};E(ue,he=>{t(r)&&t(o)==="nip07"&&he(_e)})}n(K,F)},$$slots:{default:!0}});var D=y(W,2);Ie(D,{variant:"outline",onclick:()=>p(o,"nsec"),get disabled(){return t(r)},class:"w-full p-4 h-auto justify-start",children:(K,fe)=>{var F=Er();oe(2),n(K,F)},$$slots:{default:!0}});var Y=y(D,4);Ie(Y,{variant:"ghost",onclick:()=>Me.state="signup",class:"w-full",children:(K,fe)=>{var F=zr();n(K,F)},$$slots:{default:!0}}),n(u,j)},re=u=>{var j=U(),W=M(j);{var D=Y=>{var K=Hr(),fe=y(_(K),2);dr(fe,{type:"password",placeholder:"nsec1... or hex key",get disabled(){return t(r)},onkeydown:he=>{he.key==="Enter"&&t(l)&&c()},get value(){return t(l)},set value(he){p(l,he,!0)}});var F=y(fe,2),ue=_(F);Ie(ue,{variant:"outline",onclick:()=>p(o,null),get disabled(){return t(r)},class:"flex-1",children:(he,we)=>{oe();var Ze=Ce("Back");n(he,Ze)},$$slots:{default:!0}});var _e=y(ue,2);{let he=O(()=>t(r)||!t(l).trim());Ie(_e,{onclick:c,get disabled(){return t(he)},class:"flex-1",children:(we,Ze)=>{var ze=U(),Be=M(ze);{var ot=De=>{var Le=Rr();oe(),n(De,Le)},at=De=>{var Le=Br();oe(),n(De,Le)};E(Be,De=>{t(r)?De(ot):De(at,!1)})}n(we,ze)},$$slots:{default:!0}})}m(F),m(K),n(Y,K)};E(W,Y=>{t(o)==="nsec"&&Y(D)},!0)}n(u,j)};E(ae,u=>{t(o)?u(re,!1):u(q)})}m(Z),n(R,Q)};E(G,R=>{Me.state==="signup"?R(z):R(T,!1)})}n(N,V)},$$slots:{default:!0}})})}n(b,w)},$$slots:{default:!0}})}),n(s,g),le()}var Wr=h('<div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <!></div>'),Fr=xe('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Authenticate',1),Vr=h("<!> <!>",1),Xr=h(`<div class="space-y-4"><div><p class="text-muted-foreground mb-2">The relay <strong class="font-semibold text-foreground"> </strong> is requesting authentication.</p> <p class="text-sm text-muted-foreground">This will create a signed authentication event using your Nostr identity. Your decision will be remembered for this relay.</p></div> <div class="p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"><div class="flex gap-2"><svg class="w-5 h-5 flex-shrink-0 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-blue-800 dark:text-blue-300"><strong class="font-semibold">Why authenticate?</strong> <p class="mt-1">Some relays require authentication to access content or reduce spam. This proves you're a real Nostr user.</p></div></div></div></div> <!>`,1),qr=h("<!> <!>",1);function Ur(s,e){ie(e,!0);function r(){Ee.confirm()}function o(){Ee.reject()}function l(){Ee.reject()}const i=O(()=>Ee.show&&!!Ee.request);var a=U(),c=M(a);I(c,()=>ut,(k,v)=>{v(k,{get open(){return t(i)},onOpenChange:g=>{g||l()},children:(g,P)=>{var f=U(),C=M(f);I(C,()=>dt,(b,d)=>{d(b,{class:"max-w-md",children:(w,x)=>{var A=qr(),L=M(A);I(L,()=>tt,($,V)=>{V($,{children:(G,z)=>{var T=Wr(),R=y(_(T),2);I(R,()=>et,(Q,H)=>{H(Q,{children:(Z,ee)=>{oe();var te=Ce("Relay Authentication");n(Z,te)},$$slots:{default:!0}})}),m(T),n(G,T)},$$slots:{default:!0}})});var X=y(L,2);{var N=$=>{var V=Xr(),G=M(V),z=_(G),T=_(z),R=y(_(T)),Q=_(R,!0);m(R),oe(),m(T),oe(2),m(z),oe(2),m(G);var H=y(G,2);I(H,()=>Pt,(Z,ee)=>{ee(Z,{class:"flex gap-3 sm:space-x-0",children:(te,ae)=>{var q=Vr(),re=M(q);Ie(re,{variant:"outline",onclick:o,class:"flex-1",children:(j,W)=>{oe();var D=Ce("Reject");n(j,D)},$$slots:{default:!0}});var u=y(re,2);Ie(u,{onclick:r,class:"flex-1",children:(j,W)=>{var D=Fr();oe(),n(j,D)},$$slots:{default:!0}}),n(te,q)},$$slots:{default:!0}})}),S(()=>me(Q,Ee.request.relayUrl)),n($,V)};E(X,$=>{Ee.request&&$(N)})}n(w,A)},$$slots:{default:!0}})}),n(g,f)},$$slots:{default:!0}})}),n(s,a),le()}function Zr(){const s=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(s)}function Jr(){const s=window.navigator.userAgent.toLowerCase();return/android/.test(s)}function Gr(){return"standalone"in window.navigator?window.navigator.standalone===!0:!!(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches)}function Qr(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(window.navigator.userAgent.toLowerCase())}class eo{#e=B(null);get deferredPrompt(){return t(this.#e)}set deferredPrompt(e){p(this.#e,e,!0)}#t=B(!1);get isInstallable(){return t(this.#t)}set isInstallable(e){p(this.#t,e,!0)}#r=B(!1);get isInstalled(){return t(this.#r)}set isInstalled(e){p(this.#r,e,!0)}#o=B(!1);get isIOSDevice(){return t(this.#o)}set isIOSDevice(e){p(this.#o,e,!0)}#a=B(!1);get isAndroidDevice(){return t(this.#a)}set isAndroidDevice(e){p(this.#a,e,!0)}#n=B(!1);get isMobileDevice(){return t(this.#n)}set isMobileDevice(e){p(this.#n,e,!0)}#s=B(!1);get showPrompt(){return t(this.#s)}set showPrompt(e){p(this.#s,e,!0)}#i=B(!1);get userDismissed(){return t(this.#i)}set userDismissed(e){p(this.#i,e,!0)}#l=B(!1);get neverAskAgain(){return t(this.#l)}set neverAskAgain(e){p(this.#l,e,!0)}constructor(){if(this.isIOSDevice=Zr(),this.isAndroidDevice=Jr(),this.isMobileDevice=Qr(),this.isInstalled=Gr(),this.loadPreferences(),this.isInstalled){this.showPrompt=!1;return}window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.isInstallable=!0,!this.neverAskAgain&&!this.userDismissed&&setTimeout(()=>{this.showPrompt=!0},1e4)}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.isInstallable=!1,this.showPrompt=!1,this.deferredPrompt=null,console.log("PWA was installed successfully")}),this.isIOSDevice&&!this.isInstalled&&!this.neverAskAgain&&setTimeout(()=>{this.showPrompt=!0},1e4)}async promptInstall(){if(!this.deferredPrompt){console.warn("Install prompt not available");return}await this.deferredPrompt.prompt(),(await this.deferredPrompt.userChoice).outcome==="accepted"?(console.log("User accepted the install prompt"),this.isInstalled=!0):(console.log("User dismissed the install prompt"),this.userDismissed=!0,this.savePreferences()),this.deferredPrompt=null,this.isInstallable=!1,this.showPrompt=!1}dismiss(){this.showPrompt=!1,this.userDismissed=!0,this.savePreferences()}dismissForever(){this.showPrompt=!1,this.neverAskAgain=!0,this.userDismissed=!0,this.savePreferences()}reset(){this.userDismissed=!1,this.neverAskAgain=!1,this.showPrompt=!1,this.savePreferences()}savePreferences(){try{localStorage.setItem("pwa-user-dismissed",JSON.stringify(this.userDismissed)),localStorage.setItem("pwa-never-ask",JSON.stringify(this.neverAskAgain))}catch(e){console.error("Failed to save PWA preferences:",e)}}loadPreferences(){try{const e=localStorage.getItem("pwa-user-dismissed"),r=localStorage.getItem("pwa-never-ask");e!==null&&(this.userDismissed=JSON.parse(e)),r!==null&&(this.neverAskAgain=JSON.parse(r))}catch(e){console.error("Failed to load PWA preferences:",e)}}}const ye=new eo,to=s=>s;function ro(s){const e=s-1;return e*e*e+1}function xt(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}function Mt(s,{delay:e=0,duration:r=400,easing:o=to}={}){const l=+getComputedStyle(s).opacity;return{delay:e,duration:r,easing:o,css:i=>`opacity: ${i*l}`}}function oo(s,{delay:e=0,duration:r=400,easing:o=ro,x:l=0,y:i=0,opacity:a=0}={}){const c=getComputedStyle(s),k=+c.opacity,v=c.transform==="none"?"":c.transform,g=k*(1-a),[P,f]=xt(l),[C,b]=xt(i);return{delay:e,duration:r,easing:o,css:(d,w)=>`
			transform: ${v} translate(${(1-d)*P}${f}, ${(1-d)*C}${b});
			opacity: ${k-g*w}`}}var ao=h('<div class="fixed bottom-20 md:bottom-4 left-4 right-4 z-50"><div class="bg-gradient-to-r bg-primary opacity-90 text-foreground rounded-2xl shadow-2xl p-4 max-w-md mx-auto"><button class="absolute top-3 right-3 p-1 hover:bg-white/20 rounded-full transition-colors" aria-label="Dismiss"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <div class="flex items-start gap-4 mb-4"><div class="flex-shrink-0 w-14 h-14 bg-card rounded-2xl p-2 shadow-lg"><img src="/icons/manifest-icon-192.png" alt="Agora icon" class="w-full h-full"/></div> <div class="flex-1 pr-6"><h3 class="text-lg font-bold mb-1">Install Agora</h3> <p class="text-sm text-foreground/90">Get the full app experience with offline access and quick launch from your home screen.</p></div></div> <div class="flex gap-2"><button class="flex-1 bg-card text-primary font-semibold py-3 px-4 rounded-xl hover:bg-primary-50 transition-colors"><!></button> <button class="px-4 py-3 text-sm text-foreground/80 hover:text-foreground hover:bg-white/10 rounded-xl transition-colors">Not Now</button></div></div></div>'),no=h("<!> <!>",1),so=h('<button class="w-full bg-primary hover:bg-accent-dark text-foreground font-semibold py-3 px-4 rounded-xl transition-colors">Got it!</button>'),io=h(`<!> <div class="space-y-6"><div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">1</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Tap the Share button</h3> <p class="text-sm text-muted-foreground mb-2">Look for the share icon in Safari's bottom menu bar</p> <div class="inline-flex items-center gap-2 bg-muted px-3 py-2 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="currentColor" viewBox="0 0 24 24"><path d="M16.5 6.5v-1.75a.75.75 0 00-1.5 0V6.5h-6V4.75a.75.75 0 00-1.5 0V6.5h-1.75A2.75 2.75 0 003 9.25v9A2.75 2.75 0 005.75 21h12.5A2.75 2.75 0 0021 18.25v-9A2.75 2.75 0 0018.25 6.5H16.5zm-.75 4.25a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5zm-4.5 0a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5zm-4.5 0a.75.75 0 011.5 0v4.5a.75.75 0 01-1.5 0v-4.5z"></path></svg> <span class="text-muted-foreground text-sm">Share</span></div></div></div> <div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">2</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Select "Add to Home Screen"</h3> <p class="text-sm text-muted-foreground">Scroll down in the share menu and tap "Add to Home Screen"</p></div></div> <div class="flex gap-4"><div class="flex-shrink-0 w-10 h-10 bg-primary/20 text-primary rounded-full flex items-center justify-center font-bold">3</div> <div class="flex-1"><h3 class="text-foreground font-semibold mb-2">Confirm installation</h3> <p class="text-sm text-muted-foreground">Tap "Add" in the top right corner to complete the installation</p></div></div></div> <!>`,1),lo=h("<!> <!>",1);function co(s,e){ie(e,!0);const r=O(()=>ye.showPrompt&&ye.isMobileDevice&&!ye.isInstalled);let o=B(!1);function l(){ye.isAndroidDevice&&ye.deferredPrompt?ye.promptInstall():ye.isIOSDevice&&p(o,!0)}function i(){ye.dismiss()}function a(){ye.dismissForever()}function c(){p(o,!1),ye.dismiss()}var k=lo(),v=M(k);{var g=f=>{var C=ao(),b=_(C),d=_(b);d.__click=i;var w=y(d,4),x=_(w);x.__click=l;var A=_(x);{var L=$=>{var V=Ce("View Instructions");n($,V)},X=$=>{var V=Ce("Install Now");n($,V)};E(A,$=>{ye.isIOSDevice?$(L):$(X,!1)})}m(x);var N=y(x,2);N.__click=a,m(w),m(b),m(C),ft(3,C,()=>oo,()=>({y:100,duration:300})),n(f,C)};E(v,f=>{t(r)&&!t(o)&&f(g)})}var P=y(v,2);I(P,()=>ut,(f,C)=>{C(f,{get open(){return t(o)},set open(b){p(o,b,!0)},children:(b,d)=>{var w=U(),x=M(w);I(x,()=>dt,(A,L)=>{L(A,{children:(X,N)=>{var $=io(),V=M($);I(V,()=>tt,(z,T)=>{T(z,{class:"text-left",children:(R,Q)=>{var H=no(),Z=M(H);I(Z,()=>et,(te,ae)=>{ae(te,{children:(q,re)=>{oe();var u=Ce("Install Agora on iOS");n(q,u)},$$slots:{default:!0}})});var ee=y(Z,2);I(ee,()=>lt,(te,ae)=>{ae(te,{children:(q,re)=>{oe();var u=Ce("Follow these steps to add Agora to your home screen");n(q,u)},$$slots:{default:!0}})}),n(R,H)},$$slots:{default:!0}})});var G=y(V,4);I(G,()=>Pt,(z,T)=>{T(z,{children:(R,Q)=>{var H=so();H.__click=c,n(R,H)},$$slots:{default:!0}})}),n(X,$)},$$slots:{default:!0}})}),n(b,w)},$$slots:{default:!0}})}),n(s,k),le()}Pe(["click"]);var uo=h('<div class="splash-screen svelte-1yxrgyh"><div class="splash-content svelte-1yxrgyh"><div class="logo svelte-1yxrgyh"><img src="/logo.svg" alt="Agora" class="svelte-1yxrgyh"/></div></div></div>');function vo(s,e){let r=J(e,"visible",3,!0);var o=U(),l=M(o);{var i=a=>{var c=uo();ft(3,c,()=>Mt,()=>({duration:300})),n(a,c)};E(l,a=>{r()&&a(i)})}n(s,o)}var fo=h('<span data-hashtag="" role="button" tabindex="0"> </span>');function mo(s,e){ie(e,!0);let r=J(e,"class",3,"");function o(){e.onclick&&e.onclick(e.tag)}var l=fo();l.__click=o,l.__keydown=a=>a.key==="Enter"&&o();var i=_(l);m(l),S(()=>{se(l,1,`text-primary cursor-pointer hover:underline ${r()??""}`),me(i,`#${e.tag??""}`)}),n(s,l),le()}Pe(["click","keydown"]);Te.setHashtagComponent(mo,1);var ho=h('<div style="display: contents;"><!></div>');function go(s,e){ie(e,!0);let r=B(void 0);rt(()=>{const a=document.createElement("div");return a.style.position="relative",a.style.zIndex="9999",document.body.appendChild(a),p(r,a,!0),()=>{document.body.contains(a)&&document.body.removeChild(a)}});var o=U(),l=M(o);{var i=a=>{var c=ho(),k=_(c);We(k,()=>e.children),m(c),n(a,c)};E(l,a=>{t(r)&&a(i)})}n(s,o),le()}let po=fr;var bo=h("<span> </span>"),_o=h("<span><!> <span>@<!></span></span>"),ko=h("<!> <!>",1);function xo(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=Se(vt),l=hr(()=>({user:e.bech32}),e.ndk),i=O(()=>l.user?.pubkey);let a=B(!1),c=null;function k(){c&&clearTimeout(c),c=setTimeout(()=>{p(a,!0)},200)}function v(){c&&clearTimeout(c),c=setTimeout(()=>{p(a,!1)},150)}function g(d){o?.onUserClick&&t(i)&&(d.stopPropagation(),o.onUserClick(t(i)))}var P=U(),f=M(P);{var C=d=>{var w=bo(),x=_(w);m(w),S((A,L)=>{se(w,1,A),me(x,`@${L??""}...`)},[()=>pe(Ve("inline-flex items-center gap-1 text-primary",r())),()=>e.bech32.slice(0,8)]),n(d,w)},b=d=>{var w=U(),x=M(w);{var A=L=>{var X=U(),N=M(X);I(N,()=>mr,($,V)=>{V($,{get open(){return t(a)},set open(G){p(a,G,!0)},children:(G,z)=>{var T=ko(),R=M(T);I(R,()=>ur,(H,Z)=>{Z(H,{"data-mention-modern":"",class:"inline-flex items-center",onmouseenter:k,onmouseleave:v,children:(ee,te)=>{var ae=U(),q=M(ae);I(q,()=>it.Root,(re,u)=>{u(re,{get ndk(){return e.ndk},get pubkey(){return t(i)},children:(j,W)=>{var D=_o();D.__click=g,D.__keydown=F=>F.key==="Enter"&&g(F);var Y=_(D);I(Y,()=>it.Avatar,(F,ue)=>{ue(F,{class:"w-5 h-5 inline-block"})});var K=y(Y,2),fe=y(_(K));I(fe,()=>it.Name,(F,ue)=>{ue(F,{class:"inline",field:"name"})}),m(K),m(D),S(F=>{se(D,1,F),de(D,"role",o?.onUserClick?"button":void 0),de(D,"tabindex",o?.onUserClick?0:void 0)},[()=>pe(Ve("items-center gap-1.5 text-primary hover:underline cursor-pointer transition-all",r()))]),n(j,D)},$$slots:{default:!0}})}),n(ee,ae)},$$slots:{default:!0}})});var Q=y(R,2);go(Q,{children:(H,Z)=>{var ee=U(),te=M(ee);I(te,()=>vr,(ae,q)=>{q(ae,{class:"z-50",sideOffset:8,onmouseenter:k,onmouseleave:v,children:(re,u)=>{const j=O(()=>po);var W=U(),D=M(W);I(D,()=>t(j),(Y,K)=>{K(Y,{get ndk(){return e.ndk},get pubkey(){return t(i)}})}),n(re,W)},$$slots:{default:!0}})}),n(H,ee)},$$slots:{default:!0}}),n(G,T)},$$slots:{default:!0}})}),n(L,X)};E(x,L=>{t(i)&&L(A)},!0)}n(d,w)};E(f,d=>{l?.loading?d(C):d(b,!1)})}n(s,P),le()}Pe(["click","keydown"]);Te.setMentionComponent(xo,10);var wo=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>');function yo(s,e){let r=J(e,"class",3,""),o=J(e,"size",3,16);var l=wo();S(()=>{de(l,"width",o()),de(l,"height",o()),se(l,0,pe(r()))}),n(s,l)}var Co=h('<a target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 text-primary no-underline px-2 py-1 rounded-md transition-all hover:bg-muted hover:underline break-all"><!> <span class="text-sm"> </span></a>'),Po=h("<div></div>");function Ao(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=Se(vt),l=O(()=>Array.isArray(e.url)?e.url:[e.url]);function i(c,k){o?.onLinkClick&&(c.preventDefault(),c.stopPropagation(),o.onLinkClick(k))}var a=Po();Fe(a,21,()=>t(l),Ct,(c,k)=>{var v=Co();v.__click=C=>i(C,t(k));var g=_(v);yo(g,{class:"flex-shrink-0",size:14});var P=y(g,2),f=_(P,!0);m(P),m(v),S(()=>{de(v,"href",t(k)),me(f,t(k))}),n(c,v)}),m(a),S(c=>se(a,1,c),[()=>pe(Ve("flex flex-col gap-2 my-2",r()))]),n(s,a),le()}Pe(["click"]);Te.setLinkComponent(Ao,1);Pe(["click"]);Pe(["click"]);Pe(["click"]);var Mo=h('<div class="text-sm text-muted-foreground line-clamp-3"><!></div>'),Io=h('<div class="flex flex-row w-full gap-4"><!> <!></div> <!>',1);function $o(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=O(()=>e.event.content?.trim()||"");var l=U(),i=M(l);{let a=O(()=>Ve("p-3 bg-background rounded-md border border-border/50",r()));I(i,()=>Re.Root,(c,k)=>{k(c,{"data-event-card-compact":"",get ndk(){return e.ndk},get event(){return e.event},get onUserClick(){return e.onUserClick},get onEventClick(){return e.onEventClick},get onHashtagClick(){return e.onHashtagClick},get onLinkClick(){return e.onLinkClick},get onMediaClick(){return e.onMediaClick},get class(){return t(a)},children:(v,g)=>{var P=Io(),f=M(P),C=_(f);I(C,()=>Re.Header,(x,A)=>{A(x,{variant:"compact",showAvatar:!0,showTimestamp:!0,avatarSize:"sm"})});var b=y(C,2);I(b,()=>Re.ReplyIndicator,(x,A)=>{A(x,{})}),m(f);var d=y(f,2);{var w=x=>{var A=Mo(),L=_(A);I(L,()=>Re.Content,(X,N)=>{N(X,{})}),m(A),n(x,A)};E(d,x=>{t(o)&&x(w)})}n(v,P)},$$slots:{default:!0}})})}n(s,l),le()}Te.addKind([1,1111],$o,5);const Ue=Symbol("article"),So="ndk";function No(s){if(s)return s;const e=Se(So);if(!e)throw new Error("NDK not found. Either provide an `ndk` prop or ensure NDK is set in context via setContext('ndk', ndk) in a parent component.");return e}var To=h("<div><!></div>");function Do(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=No(e.ndk);Ft(Ue,{get ndk(){return o},get article(){return e.article},get onclick(){return e.onclick}});var i=To(),a=_(i);We(a,()=>e.children),m(i),S(()=>se(i,1,`contents ${r()??""}`)),n(s,i),le()}function Lo(...s){return gr(or(s))}var jo=h('<img loading="lazy"/>');function Eo(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=Se(Ue);if(!o)throw new Error("Article.Image must be used within Article.Root");const l=O(()=>o.article.image);var i=U(),a=M(i);{var c=k=>{var v=jo();S(g=>{de(v,"src",t(l)),de(v,"alt",o.article.title||"Article cover"),se(v,1,g)},[()=>pe(Lo(r(),"object-cover"))]),n(k,v)};E(a,k=>{t(l)&&k(c)})}n(s,i),le()}var zo=h("<h3> </h3>");function Oo(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=Se(Ue);if(!o)throw new Error("Article.Title must be used within Article.Root");const l=O(()=>o.article.title||"Untitled");var i=zo(),a=_(i,!0);m(i),S(()=>{se(i,1,pe(r())),me(a,t(l))}),n(s,i),le()}var Ro=h("<p> </p>");function Bo(s,e){ie(e,!0);let r=J(e,"maxLength",3,150),o=J(e,"class",3,"");const l=Se(Ue);if(!l)throw new Error("Article.Summary must be used within Article.Root");const i=O(()=>{const k=l.article.summary||l.article.content||"";return k.length<=r()?k:k.slice(0,r())+"..."});var a=Ro(),c=_(a,!0);m(a),S(()=>{se(a,1,pe(o())),me(c,t(i))}),n(s,a),le()}var Ho=h("<span> </span>");function Yo(s,e){ie(e,!0);let r=J(e,"wordsPerMinute",3,200),o=J(e,"showSuffix",3,!0),l=J(e,"class",3,"");const i=Se(Ue);if(!i)throw new Error("Article.ReadingTime must be used within Article.Root");const a=O(()=>{const P=(i.article.content||"").split(/\s+/).filter(C=>C.length>0).length,f=Math.ceil(P/r());return f===0?"":o()?`${f} min read`:`${f}`});var c=U(),k=M(c);{var v=g=>{var P=Ho(),f=_(P,!0);m(P),S(()=>{se(P,1,pe(l())),me(f,t(a))}),n(g,P)};E(k,g=>{t(a)&&g(v)})}n(s,c),le()}const Ye={Root:Do,Image:Eo,Title:Oo,Summary:Bo,ReadingTime:Yo};var Ko=h('<div class="flex flex-row gap-3 p-2"><!> <div class="flex-1 flex flex-col gap-1 min-w-0"><!> <!> <div class="mt-auto"><!></div></div></div>'),Wo=h('<div data-article-card-compact="" class="rounded-lg overflow-hidden border border-border bg-card"><!></div>');function Fo(s,e){var r=Wo(),o=_(r);I(o,()=>Ye.Root,(l,i)=>{i(l,{get ndk(){return e.ndk},get article(){return e.article},children:(a,c)=>{var k=Ko(),v=_(k);I(v,()=>Ye.Image,(d,w)=>{w(d,{class:"h-24"})});var g=y(v,2),P=_(g);I(P,()=>Ye.Title,(d,w)=>{w(d,{class:"text-sm font-semibold"})});var f=y(P,2);I(f,()=>Ye.Summary,(d,w)=>{w(d,{class:"text-xs text-muted-foreground"})});var C=y(f,2),b=_(C);I(b,()=>Ye.ReadingTime,(d,w)=>{w(d,{class:"text-xs"})}),m(C),m(g),m(k),n(a,k)},$$slots:{default:!0}})}),m(r),n(s,r)}class Vo{blockNsfw=!0;mentionComponent=null;hashtagComponent=null;linkComponent=null;mediaComponent=null;fallbackComponent=null;handlers=new Map;mentionPriority=0;hashtagPriority=0;linkPriority=0;mediaPriority=0;fallbackPriority=0;addKind(e,r,o=1){if(Array.isArray(e))for(const l of e){const i=this.handlers.get(l);(!i||o>=i.priority)&&this.handlers.set(l,{component:r,wrapper:null,priority:o})}else{const l=e.kinds||[],i=e.from?e:null;for(const a of l){const c=this.handlers.get(a);(!c||o>=c.priority)&&this.handlers.set(a,{component:r,wrapper:i,priority:o})}}}setMentionComponent(e,r=1){r>=this.mentionPriority&&(this.mentionComponent=e,this.mentionPriority=r)}setHashtagComponent(e,r=1){r>=this.hashtagPriority&&(this.hashtagComponent=e,this.hashtagPriority=r)}setLinkComponent(e,r=1){r>=this.linkPriority&&(this.linkComponent=e,this.linkPriority=r)}setMediaComponent(e,r=1){r>=this.mediaPriority&&(this.mediaComponent=e,this.mediaPriority=r)}setFallbackComponent(e,r=1){r>=this.fallbackPriority&&(this.fallbackComponent=e,this.fallbackPriority=r)}getKindHandler(e){if(e!==void 0)return this.handlers.get(e)}hasKindHandler(e){return e===void 0?!1:this.handlers.has(e)}getRegisteredKinds(){return Array.from(this.handlers.keys()).sort((e,r)=>e-r)}getInlinePriorities(){return{mention:this.mentionPriority,hashtag:this.hashtagPriority,link:this.linkPriority,media:this.mediaPriority,fallback:this.fallbackPriority}}getKindPriorities(){const e=new Map;for(const[r,o]of this.handlers)e.set(r,o.priority);return e}clear(){this.handlers.clear(),this.mentionComponent=null,this.hashtagComponent=null,this.linkComponent=null,this.mediaComponent=null,this.fallbackComponent=null,this.mentionPriority=0,this.hashtagPriority=0,this.linkPriority=0,this.mediaPriority=0,this.fallbackPriority=0}}const Xo=new Vo;Xo.addKind(Zt,Fo,5);function qo(s,e){return s.replace(/<bech32>/g,e)}var Uo=h('<span class="text-sm text-muted-foreground italic">Unknown Event Type</span>'),Zo=h('<div class="alt-tag-container p-3 mb-3 svelte-k4ihqo"><div class="break-all text-foreground font-medium leading-relaxed text-[0.9375rem]"> </div></div>'),Jo=h('<img class="w-10 h-10 rounded-md object-cover flex-shrink-0"/>'),Go=h('<div class="text-[0.8125rem] text-muted-foreground mb-2 line-clamp-2"> </div>'),Qo=h('<a target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 px-2 py-1 bg-primary text-primary-foreground rounded text-xs font-medium no-underline transition-opacity hover:opacity-80" data-external-link=""> </a>'),ea=h('<div class="flex gap-3 p-3 bg-muted rounded-lg border border-border"><!> <div class="flex-1 min-w-0"><div class="text-[0.9375rem] font-semibold text-foreground mb-1"> </div> <!> <div class="flex gap-2 flex-wrap"></div></div></div>'),ta=h('<div class="mt-4 pt-4 border-t border-border"><div class="text-sm font-semibold text-foreground mb-3">Open in compatible app:</div> <div class="flex flex-col gap-3"></div></div>'),ra=h('<div class="py-2 mb-3 border-b border-border"><div class="flex items-center gap-2"><span class="px-3 py-1 bg-primary text-primary-foreground rounded-full text-xs font-semibold uppercase tracking-wide"> </span> <!></div></div> <!> <!> <!>',1),oa=h('<div data-generic-card="" class="border border-border rounded-lg bg-card p-3"><!></div>');function aa(s,e){ie(e,!0);let r=O(()=>e.event.tagValue("alt"));const o=e.ndk.$subscribe(()=>{if(e.event?.kind)return{filters:{kinds:[31990],"#k":[e.event.kind.toString()]},closeOnEose:!0}}),l=O(()=>{const v=new Map;for(const g of o.events){const P=[],f=g.getMatchingTags("web"),C=g.getMatchingTags("ios"),b=g.getMatchingTags("android");f.length>0&&f[0][1]&&P.push({platform:"web",url:f[0][1]}),C.length>0&&C[0][1]&&P.push({platform:"ios",url:C[0][1]}),b.length>0&&b[0][1]&&P.push({platform:"android",url:b[0][1]});let d,w,x;try{const A=JSON.parse(g.content);d=A.name,w=A.about,x=A.picture}catch{}v.set(g.pubkey,{pubkey:g.pubkey,name:d,about:w,picture:x,platforms:P})}return Array.from(v.values())});function i(v){return qo(v.url,e.event.encode())}function a(v){switch(v){case"web":return"ðŸŒ";case"ios":return"ðŸŽ";case"android":return"ðŸ¤–";default:return"ðŸ“±"}}var c=oa(),k=_(c);I(k,()=>Re.Root,(v,g)=>{g(v,{get ndk(){return e.ndk},get event(){return e.event},children:(P,f)=>{var C=ra(),b=M(C),d=_(b),w=_(d),x=_(w);m(w);var A=y(w,2);{var L=z=>{var T=Uo();n(z,T)};E(A,z=>{e.event.kind===void 0&&z(L)})}m(d),m(b);var X=y(b,2);{var N=z=>{var T=Zo(),R=_(T),Q=_(R,!0);m(R),m(T),S(()=>me(Q,t(r))),n(z,T)};E(X,z=>{t(r)&&z(N)})}var $=y(X,2);I($,()=>Re.Header,(z,T)=>{T(z,{variant:"full",avatarSize:"md",showTimestamp:!0})});var V=y($,2);{var G=z=>{var T=ta(),R=y(_(T),2);Fe(R,21,()=>t(l),Q=>Q.pubkey,(Q,H)=>{var Z=ea(),ee=_(Z);{var te=D=>{var Y=Jo();S(()=>{de(Y,"src",t(H).picture),de(Y,"alt",t(H).name||"App")}),n(D,Y)};E(ee,D=>{t(H).picture&&D(te)})}var ae=y(ee,2),q=_(ae),re=_(q,!0);m(q);var u=y(q,2);{var j=D=>{var Y=Go(),K=_(Y,!0);m(Y),S(()=>me(K,t(H).about)),n(D,Y)};E(u,D=>{t(H).about&&D(j)})}var W=y(u,2);Fe(W,21,()=>t(H).platforms,D=>D.platform,(D,Y)=>{var K=Qo(),fe=_(K);m(K),S((F,ue)=>{de(K,"href",F),de(K,"title",`Open in ${t(Y).platform??""}`),me(fe,`${ue??""}
											${t(Y).platform??""}`)},[()=>i(t(Y)),()=>a(t(Y).platform)]),n(D,K)}),m(W),m(ae),m(Z),S(()=>me(re,t(H).name||"Nostr App")),n(Q,Z)}),m(R),m(T),n(z,T)};E(V,z=>{t(l).length>0&&z(G)})}S(()=>me(x,`Kind ${e.event.kind??""}`)),n(P,C)},$$slots:{default:!0}})}),m(c),n(s,c),le()}Te.setFallbackComponent(aa,1);const wt=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();function na(s,e){const r=(o,l)=>{const{color:i="currentColor",size:a=24,strokeWidth:c,absoluteStrokeWidth:k=!1,class:v="",altIcon:g,showAlt:P=!1,...f}=l,C={xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",color:i,class:v,...f},b=P&&g?g:e,d=c!==void 0?k?c*(24/Number(a)):c:void 0;Object.entries(C).forEach(([w,x])=>{o.setAttribute(wt(w),String(x))}),o.innerHTML="",b.forEach(([w,x])=>{const A=document.createElementNS("http://www.w3.org/2000/svg",w),L={...x};d!==void 0&&(L["stroke-width"]=d,L.stroke="currentColor"),Object.entries(L).forEach(([X,N])=>{A.setAttribute(wt(X),String(N))}),o.appendChild(A)})};return{render(o,l){return r(o,l),{update(i){r(o,i)},destroy(){o.innerHTML=""}}}}}var sa=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"></svg>');function ia(s,e){ie(e,!0);let r,o=B(void 0),l=B(void 0);const i=O(()=>({size:e.size??24,strokeWidth:e.strokeWidth,absoluteStrokeWidth:e.absoluteStrokeWidth??!1,color:e.color??"currentColor",altIcon:e.altIcon,showAlt:e.showAlt??!1,class:e.className??""}));Vt(()=>{if(r)return p(o,na("HugeiconsIcon",e.icon),!0),p(l,t(o).render(r,t(i)),!0),()=>{t(l)?.destroy()}}),rt(()=>{t(o)&&r&&t(l)&&t(l).update(t(i))});var a=sa();pr(a,c=>r=c,()=>r),S(()=>{de(a,"width",e.size??24),de(a,"height",e.size??24),se(a,0,pe(e.className))}),n(s,a),le()}const la=[["path",{d:"M22 8C22 8 18 14 12 14C6 14 2 8 2 8",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M15 13.5L16.5 16",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M20 11L22 13",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}],["path",{d:"M2 13L4 11",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"3"}],["path",{d:"M9 13.5L7.5 16",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"4"}]];var ca=h('<div class="relative"><div class="blur-xl opacity-50"><!></div> <button class="absolute inset-0 flex flex-col items-center justify-center bg-black/60 backdrop-blur-sm rounded-lg cursor-pointer transition-all hover:bg-black/70 group" aria-label="Reveal media content"><!> <span class="text-white font-medium text-lg mb-1">Click to view</span> <span class="text-white/70 text-sm px-4 text-center"> </span></button></div>'),da=h("<div><!></div>");function ua(s,e){ie(e,!0);let r=J(e,"class",3,"");const o=Se("ndk");Se(vt);let l=B(!1);const i=O(()=>e.event?e.event.tags.find(x=>x[0]==="content-warning"):null),a=O(()=>t(i)?t(i)[1]||"Sensitive content":null),c=O(()=>!!t(i)),k=O(()=>{if(!e.event||!o)return!0;const x=o.$follows;return!o.$currentUser?.pubkey||!x?!0:x.has(e.event.pubkey)}),v=O(()=>!!(t(c)&&Te.blockNsfw||!t(k)&&o?.$currentUser?.pubkey)),g=O(()=>t(c)&&Te.blockNsfw?t(a)||"Sensitive content":t(k)?"Click to view":"Content from unfollowed user");function P(){p(l,!0)}function f(x){(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),P())}var C=da(),b=_(C);{var d=x=>{var A=ca(),L=_(A),X=_(L);We(X,()=>e.children,()=>({url:e.url})),m(L);var N=y(L,2);N.__click=P;var $=_(N);ia($,{get icon(){return la},className:"w-12 h-12 text-white/80 mb-2 group-hover:scale-110 transition-transform"});var V=y($,4),G=_(V,!0);m(V),m(N),m(A),S(()=>me(G,t(g))),Ke("keypress",N,f),n(x,A)},w=x=>{var A=U(),L=M(A);We(L,()=>e.children,()=>({url:e.url,class:r()})),n(x,A)};E(b,x=>{t(v)&&!t(l)?x(d):x(w,!1)})}m(C),S(()=>se(C,1,`relative ${r()??""}`)),n(s,C),le()}Pe(["click"]);var va=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg>');function fa(s,e){let r=J(e,"class",3,"");var o=va();S(()=>se(o,0,pe(r()))),n(s,o)}var ma=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7"></path></svg>');function ha(s,e){let r=J(e,"class",3,"");var o=ma();S(()=>se(o,0,pe(r()))),n(s,o)}var ga=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35M11 8v6M8 11h6"></path></svg>');function pa(s,e){let r=J(e,"class",3,"");var o=ga();S(()=>se(o,0,pe(r()))),n(s,o)}var ba=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35M8 11h6"></path></svg>');function _a(s,e){let r=J(e,"class",3,"");var o=ba();S(()=>se(o,0,pe(r()))),n(s,o)}var ka=xe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M19.0005 4.99988L5.00049 18.9999M5.00049 4.99988L19.0005 18.9999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function xa(s,e){let r=J(e,"class",3,"");var o=ka();S(()=>se(o,0,pe(r()))),n(s,o)}var wa=h('<img alt="" class="max-w-full max-h-full object-cover transition-transform duration-200 select-none" draggable="false"/>'),ya=h('<video controls autoplay class="h-screen w-screen max-w-full max-h-full object-cover"></video>',2),Ca=h('<iframe title="YouTube video" class="w-full h-full max-w-5xl max-h-[80vh] aspect-video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>'),Pa=h('<!> <span class="sr-only">Close</span>',1),Aa=h('<div class="absolute top-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm font-medium z-[10000]"> </div>'),Ma=h('<button class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 z-[10000]" aria-label="Previous"><!></button>'),Ia=h('<button class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 z-[10000]" aria-label="Next"><!></button>'),$a=h("<!> <!>",1),Sa=h('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-[10000]"><button class="bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Zoom out"><!></button> <div class="bg-black/50 text-white px-3 py-2 rounded-full text-sm font-medium"> </div> <button class="bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Zoom in"><!></button></div>'),Na=h('<div class="relative w-full h-full flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center overflow-hidden" role="img" tabindex="-1"><!></div> <!> <!> <!> <!></div>'),Ta=h("<!> <!>",1);function Da(s,e){ie(e,!0);let r=J(e,"initialIndex",3,0),o=J(e,"open",15,!1),l=J(e,"class",3,""),i=B(Xt(r())),a=B(1),c=B(0),k=B(0),v=B(!1),g=B(0),P=B(0),f=B(0),C=B(0),b=B(0);const d=O(()=>e.mediaItems[t(i)]),w=O(()=>t(i)>0),x=O(()=>t(i)<e.mediaItems.length-1),A=O(()=>`${t(i)+1} / ${e.mediaItems.length}`);rt(()=>{o()&&(p(i,r()),$())});function L(u){o(u),u||($(),e.onClose&&e.onClose())}function X(){t(w)&&(bt(i,-1),$())}function N(){t(x)&&(bt(i),$())}function $(){p(a,1),p(c,0),p(k,0)}function V(){p(a,Math.min(t(a)*1.2,5),!0)}function G(){p(a,Math.max(t(a)/1.2,1),!0),t(a)===1&&(p(c,0),p(k,0))}function z(u){if(o())switch(u.key){case"ArrowLeft":u.preventDefault(),X();break;case"ArrowRight":u.preventDefault(),N();break}}function T(u){!o()||t(d).type!=="image"||(u.preventDefault(),u.deltaY<0?V():G())}function R(u){t(a)<=1||t(d).type!=="image"||(p(v,!0),p(g,u.clientX-t(c)),p(P,u.clientY-t(k)))}function Q(u){t(v)&&(p(c,u.clientX-t(g)),p(k,u.clientY-t(P)))}function H(){p(v,!1)}function Z(u){if(u.length<2)return 0;const j=u[0].clientX-u[1].clientX,W=u[0].clientY-u[1].clientY;return Math.sqrt(j*j+W*W)}function ee(u){t(d).type==="image"&&(u.touches.length===2?p(b,Z(u.touches),!0):u.touches.length===1&&(p(f,u.touches[0].clientX,!0),p(C,u.touches[0].clientY,!0)))}function te(u){if(t(d).type==="image"){if(u.touches.length===2){u.preventDefault();const j=Z(u.touches),W=j/t(b);p(a,Math.max(1,Math.min(5,t(a)*W)),!0),p(b,j,!0)}else if(u.touches.length===1&&t(a)>1){u.preventDefault();const j=u.touches[0].clientX-t(f),W=u.touches[0].clientY-t(C);p(c,t(c)+j),p(k,t(k)+W),p(f,u.touches[0].clientX,!0),p(C,u.touches[0].clientY,!0)}}}function ae(u){if(t(d).type==="image"){if(u.changedTouches.length===1&&u.touches.length===0&&t(a)===1){const j=u.changedTouches[0].clientX-t(f);Math.abs(u.changedTouches[0].clientY-t(C))<50&&(j>100&&t(w)?X():j<-100&&t(x)&&N())}u.touches.length===0&&p(b,0)}}var q=U();Ke("keydown",st,z),Ke("mouseup",st,H),Ke("mousemove",st,Q);var re=M(q);I(re,()=>cr,(u,j)=>{j(u,{get open(){return o()},onOpenChange:L,children:(W,D)=>{var Y=U(),K=M(Y);I(K,()=>br,(fe,F)=>{F(fe,{children:(ue,_e)=>{var he=Ta(),we=M(he);I(we,()=>sr,(ze,Be)=>{Be(ze,{class:"fixed inset-0 z-[9998] bg-black/95 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"})});var Ze=y(we,2);{let ze=O(()=>Ve("fixed inset-0 z-[9999] flex items-center justify-center","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",l()));I(Ze,()=>ir,(Be,ot)=>{ot(Be,{get class(){return t(ze)},children:(at,De)=>{var Le=Na(),Ne=_(Le);Ne.__mousedown=R,Ne.__touchstart=ee,Ne.__touchmove=te,Ne.__touchend=ae;var It=_(Ne);{var $t=ne=>{var ce=wa();S(()=>{de(ce,"src",t(d).url),ar(ce,`transform: scale(${t(a)??""}) translate(${t(c)/t(a)}px, ${t(k)/t(a)}px); cursor: ${t(a)>1?"grab":"default"};`)}),n(ne,ce)},St=ne=>{var ce=U(),ge=M(ce);{var Oe=ke=>{var ve=ya();S(()=>de(ve,"src",t(d).url)),n(ke,ve)},Ae=ke=>{var ve=U(),be=M(ve);{var je=nt=>{var pt=Ca();S(()=>de(pt,"src",`https://www.youtube.com/embed/${t(d).videoId??""}`)),n(nt,pt)};E(be,nt=>{t(d).type==="youtube"&&t(d).videoId&&nt(je)},!0)}n(ke,ve)};E(ge,ke=>{t(d).type==="video"?ke(Oe):ke(Ae,!1)},!0)}n(ne,ce)};E(It,ne=>{t(d).type==="image"?ne($t):ne(St,!1)})}m(Ne);var mt=y(Ne,2);I(mt,()=>lr,(ne,ce)=>{ce(ne,{class:"absolute right-4 top-4 rounded-full bg-black/50 p-2 text-white opacity-70 ring-offset-background transition-opacity hover:opacity-100 hover:bg-black/70 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none z-[10000]",children:(ge,Oe)=>{var Ae=Pa(),ke=M(Ae);xa(ke,{class:"h-6 w-6"}),oe(2),n(ge,Ae)},$$slots:{default:!0}})});var ht=y(mt,2);{var Nt=ne=>{var ce=Aa(),ge=_(ce,!0);m(ce),S(()=>me(ge,t(A))),n(ne,ce)};E(ht,ne=>{e.mediaItems.length>1&&ne(Nt)})}var gt=y(ht,2);{var Tt=ne=>{var ce=$a(),ge=M(ce);{var Oe=ve=>{var be=Ma();be.__click=X;var je=_(be);fa(je,{class:"h-6 w-6"}),m(be),n(ve,be)};E(ge,ve=>{t(w)&&ve(Oe)})}var Ae=y(ge,2);{var ke=ve=>{var be=Ia();be.__click=N;var je=_(be);ha(je,{class:"h-6 w-6"}),m(be),n(ve,be)};E(Ae,ve=>{t(x)&&ve(ke)})}n(ne,ce)};E(gt,ne=>{e.mediaItems.length>1&&ne(Tt)})}var Dt=y(gt,2);{var Lt=ne=>{var ce=Sa(),ge=_(ce);ge.__click=G;var Oe=_(ge);_a(Oe,{class:"h-5 w-5"}),m(ge);var Ae=y(ge,2),ke=_(Ae);m(Ae);var ve=y(Ae,2);ve.__click=V;var be=_(ve);pa(be,{class:"h-5 w-5"}),m(ve),m(ce),S(je=>{ge.disabled=t(a)<=1,me(ke,`${je??""}%`),ve.disabled=t(a)>=5},[()=>Math.round(t(a)*100)]),n(ne,ce)};E(Dt,ne=>{t(d).type==="image"&&ne(Lt)})}m(Le),Ke("wheel",Ne,T),n(at,Le)},$$slots:{default:!0}})})}n(ue,he)},$$slots:{default:!0}})}),n(W,Y)},$$slots:{default:!0}})}),n(s,q),le()}Pe(["mousedown","touchstart","touchmove","touchend","click"]);var La=h('<img alt="" class="w-full h-full object-cover pointer-events-none"/>'),ja=h('<video class="w-full h-full object-cover pointer-events-none"></video>',2),Ea=h('<iframe title="YouTube video" class="w-full h-full aspect-video pointer-events-none" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>'),za=h('<button type="button"><!></button>'),Oa=h("<div></div> <!>",1);function Ra(s,e){ie(e,!0);let r=J(e,"class",3,""),o=B(!1),l=B(0);const i=O(()=>Array.isArray(e.url)?e.url:[e.url]),a=O(()=>t(i).length),c=O(()=>t(i).map(b=>{if(b.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i))return{url:b,type:"image"};if(b.match(/\.(mp4|webm|mov)(\?|$)/i))return{url:b,type:"video"};if(b.match(/youtube\.com|youtu\.be/i)){const d=b.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/)?.[1];return{url:b,type:"youtube",videoId:d}}return{url:b,type:"image"}})),k=O(()=>t(a)===1?"grid-cols-1":t(a)===2?"grid-cols-2":t(a)===3||t(a)===4?"grid-cols-2 grid-rows-2":"grid-cols-[repeat(auto-fill,minmax(200px,1fr))] auto-rows-[200px]"),v=b=>t(a)===3&&b===0?"row-span-2":t(a)===4?"aspect-square":t(a)>=5&&b===0?"col-span-2 row-span-2":"";function g(b){p(l,b,!0),p(o,!0)}var P=Oa(),f=M(P);Fe(f,21,()=>t(i),Ct,(b,d,w)=>{var x=za();x.__click=N=>{N.stopPropagation(),g(w)};var A=_(x);{var L=N=>{var $=La();S(()=>de($,"src",t(d))),n(N,$)},X=N=>{var $=U(),V=M($);{var G=T=>{var R=ja();S(()=>de(R,"src",t(d))),n(T,R)},z=T=>{var R=U(),Q=M(R);{var H=Z=>{const ee=O(()=>t(d).match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/)?.[1]);var te=U(),ae=M(te);{var q=re=>{var u=Ea();S(()=>de(u,"src",`https://www.youtube.com/embed/${t(ee)??""}`)),n(re,u)};E(ae,re=>{t(ee)&&re(q)})}n(Z,te)};E(Q,Z=>{t(d).match(/youtube\.com|youtu\.be/i)&&Z(H)},!0)}n(T,R)};E(V,T=>{t(d).match(/\.(mp4|webm|mov)(\?|$)/i)?T(G):T(z,!1)},!0)}n(N,$)};E(A,N=>{t(d).match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?N(L):N(X,!1)})}m(x),S(N=>se(x,1,`relative overflow-hidden bg-muted transition-all cursor-pointer hover:opacity-90 ${N??""}`),[()=>v(w)]),n(b,x)}),m(f);var C=y(f,2);Da(C,{get mediaItems(){return t(c)},get initialIndex(){return t(l)},get open(){return t(o)},set open(b){p(o,b,!0)}}),S(()=>se(f,1,`grid gap-[2px] my-2 w-full max-w-full rounded-xl overflow-clip ${t(k)??""} ${r()??""}`)),n(s,P),le()}Pe(["click"]);function Ba(s,e){let r=J(e,"class",3,"");ua(s,{get url(){return e.url},get event(){return e.event},get class(){return r()},children:(l,i)=>{let a=()=>i?.().url,c=()=>i?.().class;Ra(l,{get url(){return a()},get class(){return c()}})},$$slots:{default:!0}})}var Ha=h("<div><!> <!> <!></div>"),Ya=h("<!> <!> <!> <!>",1);function gn(s,e){ie(e,!0),Te.mediaComponent=Ba;let r=B(!1);Cr(Ge.language),rt(()=>{tr.set(Ge.language)});{const v=Ge.theme;v==="dark"||v==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.add("light"),Jt(Ge.themeColor),Gt.then(()=>{p(r,!0)})}var o=Ya(),l=M(o);Mr(l,{});var i=y(l,2);{let v=O(()=>!t(r));vo(i,{get visible(){return t(v)}})}var a=y(i,2);{var c=v=>{var g=Ha(),P=_(g);We(P,()=>e.children);var f=y(P,2);co(f,{});var C=y(f,2);Ur(C,{}),m(g),ft(3,g,()=>Mt,()=>({duration:300})),n(v,g)};E(a,v=>{t(r)&&v(c)})}var k=y(a,2);Kr(k,{}),n(s,o),le()}export{gn as component,hn as universal};
