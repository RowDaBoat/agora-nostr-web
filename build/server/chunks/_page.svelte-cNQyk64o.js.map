{"version":3,"file":"_page.svelte-cNQyk64o.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/t/_hashtag_/_page.svelte.js"],"sourcesContent":["import { a as attr_class, g as store_get, e as ensure_array_like, u as unsubscribe_stores } from \"../../../../../chunks/index2.js\";\nimport { p as page } from \"../../../../../chunks/stores.js\";\nimport { s as settings, n as ndk } from \"../../../../../chunks/ndk.svelte.js\";\nimport { NDKArticle, NDKKind } from \"@nostr-dev-kit/ndk\";\nimport \"clsx\";\nimport \"@nostr-dev-kit/wallet\";\nimport \"@nostr-dev-kit/wot\";\nimport \"@nostr-dev-kit/sessions\";\nimport \"@nostr-dev-kit/sync\";\nimport { a as NoteCard } from \"../../../../../chunks/ComposeDialog.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../../../../chunks/exports.js\";\nimport \"../../../../../chunks/utils.js\";\nimport { e as escape_html } from \"../../../../../chunks/escaping.js\";\nimport \"@sveltejs/kit/internal/server\";\nimport \"../../../../../chunks/state.svelte.js\";\nimport \"../../../../../chunks/url-healing.js\";\nimport \"debug\";\n/* empty css                                                       */\nimport \"../../../../../chunks/button2.js\";\nimport { c as createLazyFeed, L as LoadMoreTrigger } from \"../../../../../chunks/lazyFeed.svelte.js\";\nfunction MediaTypeFilters($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    $$renderer2.push(`<div class=\"flex justify-around lg:justify-start px-2 lg:px-4 overflow-x-auto\"><button${attr_class(`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${\"text-primary border-b-2 border-primary\"}`)} aria-label=\"Conversations\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"></path></svg> <span class=\"hidden lg:inline\">Conversations</span></button> <button${attr_class(`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${\"text-muted-foreground hover:text-muted-foreground\"}`)} aria-label=\"Images\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"></path></svg> <span class=\"hidden lg:inline\">Images</span></button>  <button${attr_class(`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${\"text-muted-foreground hover:text-muted-foreground\"}`)} aria-label=\"Articles\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg> <span class=\"hidden lg:inline\">Articles</span></button></div>`);\n  });\n}\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    var $$store_subs;\n    const hashtag = store_get($$store_subs ??= {}, \"$page\", page).params.hashtag;\n    const relaysToUse = settings.relays.filter((r) => r.enabled && r.read).map((r) => r.url);\n    const notesFeed = createLazyFeed(\n      ndk,\n      () => {\n        const currentHashtag = hashtag;\n        if (!currentHashtag) return { filters: [] };\n        const filter = {\n          kinds: [NDKKind.Text],\n          \"#t\": [currentHashtag.toLowerCase()],\n          limit: 200\n        };\n        return {\n          filters: [filter],\n          relayUrls: relaysToUse.length > 0 ? relaysToUse : void 0\n        };\n      },\n      { initialLimit: 20, pageSize: 20 }\n    );\n    const mediaFeed = createLazyFeed(\n      ndk,\n      () => {\n        const currentHashtag = hashtag;\n        if (!currentHashtag) return { filters: [] };\n        const filter = {\n          kinds: [\n            NDKKind.Text,\n            NDKKind.Image,\n            NDKKind.Video,\n            NDKKind.ShortVideo\n          ],\n          \"#t\": [currentHashtag.toLowerCase()],\n          limit: 300\n        };\n        return {\n          filters: [filter],\n          relayUrls: relaysToUse.length > 0 ? relaysToUse : void 0\n        };\n      },\n      { initialLimit: 30, pageSize: 30 }\n    );\n    const articlesFeed = createLazyFeed(\n      ndk,\n      () => {\n        const currentHashtag = hashtag;\n        if (!currentHashtag) return { filters: [] };\n        const filter = {\n          kinds: [NDKKind.Article],\n          \"#t\": [currentHashtag.toLowerCase()],\n          limit: 100\n        };\n        return {\n          filters: [filter],\n          cacheUsage: 1,\n          // NDKSubscriptionCacheUsage.CACHE_FIRST\n          relayUrls: relaysToUse.length > 0 ? relaysToUse : void 0\n        };\n      },\n      { initialLimit: 10, pageSize: 10 }\n    );\n    const articles = (() => articlesFeed.events.map((e) => NDKArticle.from(e)))();\n    (() => articles.filter((article) => article.title && article.content).sort((a, b) => (b.published_at ?? b.created_at ?? 0) - (a.published_at ?? a.created_at ?? 0)))();\n    const events = notesFeed.events;\n    const eosed = notesFeed.eosed;\n    const hasMore = notesFeed.hasMore;\n    const isLoading = notesFeed.isLoading;\n    function handleLoadMore() {\n      {\n        notesFeed.loadMore();\n      }\n    }\n    (() => {\n      const authorCounts = /* @__PURE__ */ new Map();\n      [\n        ...notesFeed.events,\n        ...mediaFeed.events,\n        ...articlesFeed.events\n      ].forEach((event) => {\n        const count = authorCounts.get(event.pubkey) || 0;\n        authorCounts.set(event.pubkey, count + 1);\n      });\n      return Array.from(authorCounts.entries()).sort((a, b) => b[1] - a[1]).slice(0, 5).map(([pubkey, count]) => ({ pubkey, count }));\n    })();\n    $$renderer2.push(`<div class=\"max-w-full mx-auto\"><div class=\"sticky top-0 z-10 bg-background/90 backdrop-blur-xl border-b border-border/50\"><div class=\"px-4 py-4\"><div class=\"flex items-center gap-3\"><a href=\"/\" class=\"flex items-center justify-center w-8 h-8 rounded-full hover:bg-neutral-800 transition-colors\" aria-label=\"Back to home\"><svg class=\"w-5 h-5 text-neutral-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\"></path></svg></a> <div><h1 class=\"text-xl font-bold text-foreground flex items-center gap-2\"><span class=\"text-primary\">#</span> ${escape_html(hashtag)}</h1> <p class=\"text-sm text-neutral-400\">Posts tagged with #${escape_html(hashtag)}</p></div></div></div> `);\n    MediaTypeFilters($$renderer2);\n    $$renderer2.push(`<!----></div> <div class=\"divide-y divide-neutral-800/50\">`);\n    {\n      $$renderer2.push(\"<!--[!-->\");\n      {\n        $$renderer2.push(\"<!--[!-->\");\n        {\n          $$renderer2.push(\"<!--[!-->\");\n          if (events.length === 0 && eosed) {\n            $$renderer2.push(\"<!--[-->\");\n            $$renderer2.push(`<div class=\"p-8 text-center text-neutral-400\">No notes found with #${escape_html(hashtag)}</div>`);\n          } else {\n            $$renderer2.push(\"<!--[!-->\");\n            if (events.length === 0) {\n              $$renderer2.push(\"<!--[-->\");\n              $$renderer2.push(`<div class=\"p-8 text-center text-neutral-400\">Loading notes...</div>`);\n            } else {\n              $$renderer2.push(\"<!--[!-->\");\n              $$renderer2.push(`<!--[-->`);\n              const each_array_2 = ensure_array_like(events);\n              for (let $$index_2 = 0, $$length = each_array_2.length; $$index_2 < $$length; $$index_2++) {\n                let event = each_array_2[$$index_2];\n                NoteCard($$renderer2, { event });\n              }\n              $$renderer2.push(`<!--]-->`);\n            }\n            $$renderer2.push(`<!--]-->`);\n          }\n          $$renderer2.push(`<!--]-->`);\n        }\n        $$renderer2.push(`<!--]--> `);\n        LoadMoreTrigger($$renderer2, { onIntersect: handleLoadMore, hasMore, isLoading });\n        $$renderer2.push(`<!---->`);\n      }\n      $$renderer2.push(`<!--]-->`);\n    }\n    $$renderer2.push(`<!--]--></div></div>`);\n    if ($$store_subs) unsubscribe_stores($$store_subs);\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}