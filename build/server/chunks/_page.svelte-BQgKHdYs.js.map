{"version":3,"file":"_page.svelte-BQgKHdYs.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/packs/_page.svelte.js"],"sourcesContent":["import { b as attr, a as attr_class, e as ensure_array_like, d as attr_style, s as stringify } from \"../../../../chunks/index2.js\";\nimport { n as ndk } from \"../../../../chunks/ndk.svelte.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../../../chunks/exports.js\";\nimport \"../../../../chunks/utils.js\";\nimport \"@sveltejs/kit/internal/server\";\nimport \"../../../../chunks/state.svelte.js\";\nimport { U as User } from \"../../../../chunks/index4.js\";\nimport { C as CreateFollowPackDialog } from \"../../../../chunks/CreateFollowPackDialog.js\";\nimport { c as createLazyFeed, L as LoadMoreTrigger } from \"../../../../chunks/lazyFeed.svelte.js\";\nimport { e as escape_html } from \"../../../../chunks/escaping.js\";\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let showCreatePackModal = false;\n    let searchQuery = \"\";\n    let activeFilter = \"all\";\n    const filterLabels = {\n      all: \"All Packs\",\n      mine: \"My Packs\",\n      follows: \"From Follows\",\n      \"include-me\": \"Include Me\"\n    };\n    const packsFeed = createLazyFeed(ndk, () => ({ filters: [{ kinds: [39089, 39092] }], bufferMs: 100 }), { initialLimit: 12, pageSize: 12 });\n    const packEvents = packsFeed.allEvents;\n    packsFeed.eosed;\n    let allPacks = packEvents;\n    let filteredPacks = /* @__PURE__ */ (() => {\n      let filtered = allPacks;\n      return filtered;\n    })();\n    let displayLimit = 12;\n    const visiblePacks = filteredPacks.slice(0, displayLimit);\n    const hasMore = displayLimit < filteredPacks.length;\n    const isLoading = packsFeed.isLoading;\n    function handleLoadMore() {\n      if (hasMore) {\n        displayLimit = Math.min(displayLimit + 12, filteredPacks.length);\n      }\n    }\n    let $$settled = true;\n    let $$inner_renderer;\n    function $$render_inner($$renderer3) {\n      $$renderer3.push(`<div class=\"w-full lg:max-w-6xl mx-auto px-4 py-8\"><div class=\"mb-6\"><div class=\"flex gap-3 flex-col sm:flex-row\"><div class=\"relative flex-1\"><svg class=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path></svg> <input type=\"search\" placeholder=\"Search follow packs...\"${attr(\"value\", searchQuery)} class=\"w-full pl-10 pr-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary\"/></div> `);\n      if (ndk.$currentUser) {\n        $$renderer3.push(\"<!--[-->\");\n        $$renderer3.push(`<div class=\"relative flex-shrink-0 filter-dropdown\"><button class=\"px-4 py-3 bg-card border border-border rounded-lg text-foreground hover:border-border transition-colors flex items-center gap-2 min-w-[160px] justify-between\"><div class=\"flex items-center gap-2\"><svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"></path></svg> <span class=\"text-sm font-medium\">${escape_html(filterLabels[activeFilter])}</span></div> <svg${attr_class(`w-4 h-4 text-muted-foreground transition-transform ${stringify(\"\")}`)} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"></path></svg></button> `);\n        {\n          $$renderer3.push(\"<!--[!-->\");\n        }\n        $$renderer3.push(`<!--]--></div>`);\n      } else {\n        $$renderer3.push(\"<!--[!-->\");\n      }\n      $$renderer3.push(`<!--]--></div></div> <div><h2 class=\"text-xl font-semibold text-foreground mb-4\">Popular Packs</h2> `);\n      if (visiblePacks.length > 0) {\n        $$renderer3.push(\"<!--[-->\");\n        $$renderer3.push(`<div class=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\"><!--[-->`);\n        const each_array = ensure_array_like(visiblePacks);\n        for (let $$index_1 = 0, $$length = each_array.length; $$index_1 < $$length; $$index_1++) {\n          let pack = each_array[$$index_1];\n          const packImage = pack.tagValue(\"image\");\n          const packTitle = pack.tagValue(\"title\") || \"Untitled Pack\";\n          const packDescription = pack.tagValue(\"description\");\n          const packPubkeys = pack.tags.filter((t) => t[0] === \"p\").map((t) => t[1]);\n          $$renderer3.push(`<div role=\"button\" tabindex=\"0\" class=\"block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer\">`);\n          if (packImage) {\n            $$renderer3.push(\"<!--[-->\");\n            $$renderer3.push(`<div class=\"h-32 w-full\"><img${attr(\"src\", packImage)}${attr(\"alt\", packTitle)} class=\"w-full h-full object-cover\"/></div>`);\n          } else {\n            $$renderer3.push(\"<!--[!-->\");\n          }\n          $$renderer3.push(`<!--]--> <div class=\"p-5\"><div class=\"mb-4\"><h3 class=\"font-semibold text-foreground group-hover:text-primary transition-colors\">${escape_html(packTitle)}</h3> <p class=\"text-sm text-muted-foreground mt-1\">${escape_html(packPubkeys.length)} members</p></div> `);\n          if (packDescription) {\n            $$renderer3.push(\"<!--[-->\");\n            $$renderer3.push(`<p class=\"text-sm text-muted-foreground mb-4 line-clamp-2\">${escape_html(packDescription)}</p>`);\n          } else {\n            $$renderer3.push(\"<!--[!-->\");\n          }\n          $$renderer3.push(`<!--]--> <div class=\"flex -space-x-2\"><!--[-->`);\n          const each_array_1 = ensure_array_like(packPubkeys.slice(0, 4));\n          for (let index = 0, $$length2 = each_array_1.length; index < $$length2; index++) {\n            let pubkey = each_array_1[index];\n            $$renderer3.push(`<button type=\"button\" class=\"relative cursor-pointer\"${attr_style(`z-index: ${stringify(4 - index)}`)}><!---->`);\n            User.Root($$renderer3, {\n              ndk,\n              pubkey,\n              children: ($$renderer4) => {\n                $$renderer4.push(`<!---->`);\n                User.Avatar($$renderer4, {\n                  class: \"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity\"\n                });\n                $$renderer4.push(`<!---->`);\n              },\n              $$slots: { default: true }\n            });\n            $$renderer3.push(`<!----></button>`);\n          }\n          $$renderer3.push(`<!--]--> `);\n          if (packPubkeys.length > 4) {\n            $$renderer3.push(\"<!--[-->\");\n            $$renderer3.push(`<div class=\"w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center\"><span class=\"text-xs text-muted-foreground\">+${escape_html(packPubkeys.length - 4)}</span></div>`);\n          } else {\n            $$renderer3.push(\"<!--[!-->\");\n          }\n          $$renderer3.push(`<!--]--></div></div></div>`);\n        }\n        $$renderer3.push(`<!--]--></div> `);\n        LoadMoreTrigger($$renderer3, { onIntersect: handleLoadMore, hasMore, isLoading });\n        $$renderer3.push(`<!---->`);\n      } else {\n        $$renderer3.push(\"<!--[!-->\");\n        $$renderer3.push(`<div class=\"text-center py-12\"><svg class=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path></svg> <p class=\"text-muted-foreground\">No follow packs found</p></div>`);\n      }\n      $$renderer3.push(`<!--]--></div> `);\n      CreateFollowPackDialog($$renderer3, {\n        get open() {\n          return showCreatePackModal;\n        },\n        set open($$value) {\n          showCreatePackModal = $$value;\n          $$settled = false;\n        }\n      });\n      $$renderer3.push(`<!----></div>`);\n    }\n    do {\n      $$settled = true;\n      $$inner_renderer = $$renderer2.copy();\n      $$render_inner($$inner_renderer);\n    } while (!$$settled);\n    $$renderer2.subsume($$inner_renderer);\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}