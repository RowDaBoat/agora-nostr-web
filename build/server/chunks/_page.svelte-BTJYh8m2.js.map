{"version":3,"file":"_page.svelte-BTJYh8m2.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/e/_nevent_/_page.svelte.js"],"sourcesContent":["import { g as store_get, e as ensure_array_like, u as unsubscribe_stores } from \"../../../../../chunks/index2.js\";\nimport { p as page } from \"../../../../../chunks/stores.js\";\nimport \"../../../../../chunks/ndk.svelte.js\";\nimport \"@nostr-dev-kit/ndk\";\nimport { a as NoteCard } from \"../../../../../chunks/ComposeDialog.js\";\nimport { H as HighlightCard } from \"../../../../../chunks/HighlightCard.js\";\nimport { e as escape_html } from \"../../../../../chunks/escaping.js\";\nimport \"clsx\";\nimport { nip19 } from \"nostr-tools\";\nimport \"../../../../../chunks/button2.js\";\nfunction MissingEventCard($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let { eventId, relayHint, showThreadLine = false } = $$props;\n    const neventId = (() => {\n      try {\n        return nip19.neventEncode({ id: eventId, relays: relayHint ? [relayHint] : [] });\n      } catch {\n        return eventId;\n      }\n    })();\n    let $$settled = true;\n    let $$inner_renderer;\n    function $$render_inner($$renderer3) {\n      $$renderer3.push(`<article class=\"p-3 sm:p-4 bg-muted/10 border-b border-border relative min-w-0\">`);\n      if (showThreadLine) {\n        $$renderer3.push(\"<!--[-->\");\n        $$renderer3.push(`<div class=\"absolute left-[29px] -top-px h-[73px] w-0.5 bg-muted\"></div> <div class=\"absolute left-[29px] top-[73px] bottom-0 w-0.5 bg-muted\"></div>`);\n      } else {\n        $$renderer3.push(\"<!--[!-->\");\n      }\n      $$renderer3.push(`<!--]--> <div class=\"p-4 border border-dashed border-muted-foreground/30 rounded-lg bg-muted/20\"><div class=\"flex items-start gap-3\"><div class=\"flex-shrink-0 mt-0.5\"><svg class=\"w-6 h-6 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg></div> <div class=\"flex-1 min-w-0\"><p class=\"text-sm font-medium text-foreground mb-1\">Missing Parent Event</p> <p class=\"text-xs text-muted-foreground mb-2\">This note is replying to an event that couldn't be found on the default relays.</p> `);\n      if (neventId) {\n        $$renderer3.push(\"<!--[-->\");\n        $$renderer3.push(`<p class=\"text-xs text-muted-foreground/70 font-mono truncate mb-3 bg-background/50 p-2 rounded\">${escape_html(neventId.slice(0, 40))}...</p>`);\n      } else {\n        $$renderer3.push(\"<!--[!-->\");\n      }\n      $$renderer3.push(`<!--]--> <button type=\"button\" class=\"text-sm text-primary hover:text-primary/80 underline transition-colors flex items-center gap-1\"><svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path></svg> Try fetching from other relays</button></div></div></div></article> `);\n      {\n        $$renderer3.push(\"<!--[!-->\");\n      }\n      $$renderer3.push(`<!--]-->`);\n    }\n    do {\n      $$settled = true;\n      $$inner_renderer = $$renderer2.copy();\n      $$render_inner($$inner_renderer);\n    } while (!$$settled);\n    $$renderer2.subsume($$inner_renderer);\n  });\n}\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    var $$store_subs;\n    store_get($$store_subs ??= {}, \"$page\", page).params.nevent;\n    function handleEventNavigation(event) {\n    }\n    const mainEvent = /* @__PURE__ */ (() => {\n      return null;\n    })();\n    const parentChain = /* @__PURE__ */ (() => {\n      return [];\n    })();\n    $$renderer2.push(`<div class=\"min-h-screen bg-background\"><header class=\"sticky top-0 z-10 bg-background/80 backdrop-blur-md border-b border-border\"><div class=\"flex items-center gap-4 px-4 py-3\"><button class=\"p-2 hover:bg-neutral-900 rounded-lg transition-colors\" aria-label=\"Go back\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"></path></svg></button> <h1 class=\"text-xl font-semibold\">Thread</h1></div></header> `);\n    if (!mainEvent) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"flex flex-col items-center justify-center mt-20\"><div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div> <p class=\"mt-4 text-neutral-400\">Loading thread...</p></div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<main class=\"w-full mx-auto\"><!--[-->`);\n      const each_array = ensure_array_like(parentChain);\n      for (let index = 0, $$length = each_array.length; index < $$length; index++) {\n        let node = each_array[index];\n        if (!node.event) {\n          $$renderer2.push(\"<!--[-->\");\n          MissingEventCard($$renderer2, {\n            eventId: node.id,\n            relayHint: node.relayHint,\n            showThreadLine: index < parentChain.length - 1\n          });\n        } else {\n          $$renderer2.push(\"<!--[!-->\");\n          if (node.event.kind === 9802) {\n            $$renderer2.push(\"<!--[-->\");\n            HighlightCard($$renderer2, { event: node.event, variant: \"default\" });\n          } else {\n            $$renderer2.push(\"<!--[!-->\");\n            NoteCard($$renderer2, {\n              event: node.event,\n              variant: \"thread-parent\",\n              showThreadLine: index < parentChain.length - 1,\n              onNavigate: () => node.event && handleEventNavigation(node.event)\n            });\n          }\n          $$renderer2.push(`<!--]-->`);\n        }\n        $$renderer2.push(`<!--]-->`);\n      }\n      $$renderer2.push(`<!--]--> `);\n      if (mainEvent.kind === 9802) {\n        $$renderer2.push(\"<!--[-->\");\n        HighlightCard($$renderer2, { event: mainEvent, variant: \"default\" });\n      } else {\n        $$renderer2.push(\"<!--[!-->\");\n        NoteCard($$renderer2, {\n          event: mainEvent,\n          variant: \"thread-main\",\n          showThreadLine: false\n        });\n      }\n      $$renderer2.push(`<!--]--> <div>`);\n      {\n        $$renderer2.push(\"<!--[!-->\");\n      }\n      $$renderer2.push(`<!--]--></div></main>`);\n    }\n    $$renderer2.push(`<!--]--></div>`);\n    if ($$store_subs) unsubscribe_stores($$store_subs);\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,SAAS,KAAK,CAAC,UAAU,EAAE,OAAO,EAAE;AACpC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,KAAK;AACxC,IAAI,IAAI,YAAY;AACpB,IAAI,SAAS,CAAC,YAAY,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM;AAS/D,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,khBAAkhB,CAAC,CAAC;AAC1iB,IAAoB;AACpB,MAAM,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AAClC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,2MAA2M,CAAC,CAAC;AACrO,IAAI;AAiDJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC;AACtC,IAAI,IAAI,YAAY,EAAE,kBAAkB,CAAC,YAAY,CAAC;AACtD,EAAE,CAAC,CAAC;AACJ;;;;"}