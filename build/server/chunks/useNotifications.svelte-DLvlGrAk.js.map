{"version":3,"file":"useNotifications.svelte-DLvlGrAk.js","sources":["../../../.svelte-kit/adapter-node/chunks/useNotifications.svelte.js"],"sourcesContent":["import \"clsx\";\nimport { N as NOTIFICATION_KINDS, K as KIND_TEXT_NOTE, a as KIND_REPLY, b as KIND_REACTION, c as KIND_REPOST, d as KIND_GENERIC_REPOST, e as KIND_ZAP, f as KIND_INVITE_ACCEPTANCE } from \"./nostr.js\";\nfunction categorizeEvent(event, userEventIds) {\n  if (event.kind === KIND_REACTION) return \"reaction\";\n  if (event.kind === KIND_REPOST || event.kind === KIND_GENERIC_REPOST) return \"repost\";\n  if (event.kind === KIND_ZAP) return \"zap\";\n  if (event.kind === KIND_INVITE_ACCEPTANCE) return \"invite_acceptance\";\n  if (event.kind === KIND_TEXT_NOTE || event.kind === KIND_REPLY) {\n    const qTag = event.tags.find((t) => t[0] === \"q\");\n    if (qTag && userEventIds.has(qTag[1])) {\n      return \"quote\";\n    }\n    const replyMarker = event.tags.find((t) => t[0] === \"e\" && t[3] === \"reply\");\n    if (replyMarker && userEventIds.has(replyMarker[1])) {\n      return \"reply\";\n    }\n    return \"mention\";\n  }\n  return null;\n}\nconst notificationProcessors = {\n  reply: (events) => {\n    return events.map((event) => ({\n      id: `reply-${event.id}`,\n      type: \"reply\",\n      timestamp: event.created_at || 0,\n      event,\n      replyToEventId: event.tags.find((t) => t[0] === \"e\" && t[3] === \"reply\")?.[1] || \"\"\n    }));\n  },\n  mention: (events) => {\n    return events.map((event) => ({\n      id: `mention-${event.id}`,\n      type: \"mention\",\n      timestamp: event.created_at || 0,\n      event\n    }));\n  },\n  quote: (events) => {\n    return events.map((event) => ({\n      id: `quote-${event.id}`,\n      type: \"quote\",\n      timestamp: event.created_at || 0,\n      event,\n      quotedEventId: event.tags.find((t) => t[0] === \"q\")?.[1] || \"\"\n    }));\n  },\n  reaction: (events, userEventIds) => {\n    const reactionGroups = /* @__PURE__ */ new Map();\n    events.forEach((reaction) => {\n      const targetId = reaction.tags.find((t) => t[0] === \"e\")?.[1];\n      if (!targetId || !userEventIds.has(targetId)) return;\n      let emoji = reaction.content || \"ðŸ‘\";\n      if (emoji === \"+\") {\n        emoji = \"â¤ï¸\";\n      }\n      const key = `${targetId}-${emoji}`;\n      if (!reactionGroups.has(key)) {\n        reactionGroups.set(key, {\n          targetEventId: targetId,\n          emoji,\n          reactors: [],\n          timestamp: reaction.created_at || 0\n        });\n      }\n      const group = reactionGroups.get(key);\n      group.reactors.push({ pubkey: reaction.pubkey, event: reaction });\n      if (reaction.created_at && reaction.created_at > group.timestamp) {\n        group.timestamp = reaction.created_at;\n      }\n    });\n    return Array.from(reactionGroups.entries()).map(([key, group]) => ({\n      id: `reaction-${key}`,\n      type: \"reaction\",\n      timestamp: group.timestamp,\n      targetEventId: group.targetEventId,\n      emoji: group.emoji,\n      reactors: group.reactors\n    }));\n  },\n  repost: (events, userEventIds) => {\n    const repostGroups = /* @__PURE__ */ new Map();\n    events.forEach((repost) => {\n      const targetId = repost.tags.find((t) => t[0] === \"e\")?.[1];\n      if (!targetId || !userEventIds.has(targetId)) return;\n      if (!repostGroups.has(targetId)) {\n        repostGroups.set(targetId, {\n          targetEventId: targetId,\n          reposts: [],\n          timestamp: repost.created_at || 0\n        });\n      }\n      const group = repostGroups.get(targetId);\n      group.reposts.push(repost);\n      if (repost.created_at && repost.created_at > group.timestamp) {\n        group.timestamp = repost.created_at;\n      }\n    });\n    return Array.from(repostGroups.values()).map((group) => ({\n      id: `repost-${group.targetEventId}`,\n      type: \"repost\",\n      timestamp: group.timestamp,\n      targetEventId: group.targetEventId,\n      reposts: group.reposts\n    }));\n  },\n  zap: (events, userEventIds) => {\n    const zapGroups = /* @__PURE__ */ new Map();\n    events.forEach((zap) => {\n      const targetId = zap.tags.find((t) => t[0] === \"e\")?.[1];\n      if (!targetId || !userEventIds.has(targetId)) return;\n      const bolt11Tag = zap.tags.find((t) => t[0] === \"bolt11\")?.[1];\n      const amount = extractAmountFromBolt11(bolt11Tag);\n      const descriptionTag = zap.tags.find((t) => t[0] === \"description\")?.[1];\n      let sender = zap.pubkey;\n      if (descriptionTag) {\n        try {\n          const parsed = JSON.parse(descriptionTag);\n          sender = parsed.pubkey || sender;\n        } catch {\n        }\n      }\n      if (!zapGroups.has(targetId)) {\n        zapGroups.set(targetId, {\n          targetEventId: targetId,\n          zaps: [],\n          timestamp: zap.created_at || 0\n        });\n      }\n      const group = zapGroups.get(targetId);\n      group.zaps.push({ event: zap, amount, sender });\n      if (zap.created_at && zap.created_at > group.timestamp) {\n        group.timestamp = zap.created_at;\n      }\n    });\n    return Array.from(zapGroups.values()).map((group) => ({\n      id: `zap-${group.targetEventId}`,\n      type: \"zap\",\n      timestamp: group.timestamp,\n      targetEventId: group.targetEventId,\n      zaps: group.zaps\n    }));\n  },\n  invite_acceptance: (events) => {\n    return events.map((event) => {\n      const inviteEventId = event.tags.find((t) => t[0] === \"e\")?.[1] || \"\";\n      return {\n        id: `invite-${event.id}`,\n        type: \"invite_acceptance\",\n        timestamp: event.created_at || 0,\n        event,\n        inviteeEventId: inviteEventId,\n        inviteePubkey: event.pubkey\n        // Primary actor who accepted the invite\n      };\n    });\n  }\n};\nfunction createNotificationsManager(ndk) {\n  const notificationsSubscription = ndk.$subscribe(() => {\n    if (!ndk.$currentUser) {\n      return void 0;\n    }\n    return {\n      filters: [\n        {\n          kinds: [...NOTIFICATION_KINDS],\n          \"#p\": [ndk.$currentUser.pubkey],\n          since: Math.floor(Date.now() / 1e3) - 60 * 60 * 24 * 30,\n          // last 30 days\n          limit: 500\n        }\n      ],\n      subId: \"notifications\"\n    };\n  });\n  const userEventsSubscription = ndk.$subscribe(() => {\n    if (!ndk.$currentUser) {\n      return void 0;\n    }\n    return {\n      filters: [\n        {\n          kinds: [KIND_TEXT_NOTE, KIND_REPLY, 30023],\n          // text, reply, article\n          authors: [ndk.$currentUser.pubkey],\n          since: Math.floor(Date.now() / 1e3) - 60 * 60 * 24 * 30\n          // last 30 days\n        }\n      ],\n      subId: \"user-events\"\n    };\n  });\n  const userEventIds = (() => {\n    const events = Array.from(userEventsSubscription.events ?? []);\n    const ids = new Set(events.map((e) => e.id));\n    return ids;\n  })();\n  const targetEventsCache = /* @__PURE__ */ new Map();\n  let currentFilter = \"all\";\n  const notificationGroups = (() => {\n    if (!ndk.$currentUser) {\n      return [];\n    }\n    const events = Array.from(notificationsSubscription.events ?? []);\n    const groups = [];\n    const categorizedEvents = {\n      reply: [],\n      mention: [],\n      quote: [],\n      reaction: [],\n      repost: [],\n      zap: [],\n      invite_acceptance: []\n    };\n    events.forEach((event) => {\n      const category = categorizeEvent(event, userEventIds);\n      if (category) {\n        categorizedEvents[category].push(event);\n      }\n    });\n    groups.push(...notificationProcessors.reply(categorizedEvents.reply));\n    groups.push(...notificationProcessors.mention(categorizedEvents.mention));\n    groups.push(...notificationProcessors.quote(categorizedEvents.quote));\n    groups.push(...notificationProcessors.reaction(categorizedEvents.reaction, userEventIds));\n    groups.push(...notificationProcessors.repost(categorizedEvents.repost, userEventIds));\n    groups.push(...notificationProcessors.zap(categorizedEvents.zap, userEventIds));\n    groups.push(...notificationProcessors.invite_acceptance(categorizedEvents.invite_acceptance));\n    const sorted = groups.sort((a, b) => b.timestamp - a.timestamp);\n    return sorted;\n  })();\n  const filteredNotifications = (() => {\n    if (currentFilter === \"all\") {\n      return notificationGroups;\n    }\n    if (currentFilter === \"invite\") {\n      const filtered2 = notificationGroups.filter((group) => group.type === \"invite_acceptance\");\n      return filtered2;\n    }\n    const filtered = notificationGroups.filter((group) => group.type === currentFilter);\n    return filtered;\n  })();\n  const counts = (() => {\n    const result = {\n      all: notificationGroups.length,\n      reply: 0,\n      mention: 0,\n      quote: 0,\n      reaction: 0,\n      repost: 0,\n      zap: 0,\n      invite: 0\n    };\n    notificationGroups.forEach((group) => {\n      if (group.type === \"invite_acceptance\") {\n        result.invite++;\n      } else {\n        result[group.type]++;\n      }\n    });\n    return result;\n  })();\n  return {\n    get notifications() {\n      return filteredNotifications;\n    },\n    get filter() {\n      return currentFilter;\n    },\n    get counts() {\n      return counts;\n    },\n    get targetEventsCache() {\n      return targetEventsCache;\n    },\n    setFilter(filter) {\n      currentFilter = filter;\n    }\n  };\n}\nfunction extractAmountFromBolt11(bolt11) {\n  if (!bolt11) return 0;\n  try {\n    const match = bolt11.match(/lnbc(\\d+)([a-z])?/i);\n    if (!match) return 0;\n    const amount = parseInt(match[1], 10);\n    const multiplier = match[2];\n    let sats = amount;\n    switch (multiplier) {\n      case \"m\":\n        sats = amount * 1e5;\n        break;\n      case \"u\":\n        sats = amount * 100;\n        break;\n      case \"n\":\n        sats = amount / 10;\n        break;\n      case \"p\":\n        sats = amount / 1e4;\n        break;\n    }\n    return Math.floor(sats);\n  } catch {\n    return 0;\n  }\n}\nexport {\n  createNotificationsManager as c\n};\n"],"names":[],"mappings":"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"}